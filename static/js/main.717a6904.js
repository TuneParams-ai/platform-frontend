/*! For license information please see main.717a6904.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),s=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope");var _=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var j=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case E:return"Suspense";case S:return"SuspenseList";case _:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case p:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return P(e(t))}catch(n){}}return null}var R=Array.isArray,D=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},M=[],F=-1;function U(e){return{current:e}}function V(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var B=U(null),q=U(null),H=U(null),W=U(null);function G(e,t){switch(z(H,t),z(q,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(B),z(B,e)}function K(){V(B),V(q),V(H)}function Q(e){null!==e.memoizedState&&z(W,e);var t=B.current,n=id(t,e.type);t!==n&&(z(q,e),z(B,n))}function J(e){q.current===e&&(V(B),V(q)),W.current===e&&(V(W),Qd._currentValue=O)}var Y=Object.prototype.hasOwnProperty,$=r.unstable_scheduleCallback,X=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,se=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,ae=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var me=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/pe|0)|0},fe=Math.log,pe=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=ye(r):0!==(a&=o)?s=ye(a):n||0!==(n=o&~e)&&(s=ye(n)):0!==(o=r&~i)?s=ye(o):0!==a?s=ye(a):n||0!==(n=r&~e)&&(s=ye(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ne(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Ee(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-me(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function _e(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-me(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function je(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Te(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Ie=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Ie,Re="__reactProps$"+Ie,De="__reactContainer$"+Ie,Le="__reactEvents$"+Ie,Oe="__reactListeners$"+Ie,Me="__reactHandles$"+Ie,Fe="__reactResources$"+Ie,Ue="__reactMarker$"+Ie;function Ve(e){delete e[Pe],delete e[Re],delete e[Le],delete e[Oe],delete e[Me]}function ze(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[De]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Pe])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Pe]||e[De]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Ue]=!0}var Ge=new Set,Ke={};function Qe(e,t){Je(e,t),Je(e+"Capture",t)}function Je(e,t){for(Ke[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Ye,$e,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(s=t,Y.call(et,s)||!Y.call(Ze,s)&&(Xe.test(s)?et[s]=!0:(Ze[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===Ye)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",$e=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+$e}var it=!1;function at(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function pt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?yt(e,a,ct(t)):null!=n?yt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,n,r,s,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function yt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(R(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Nt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&St(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&St(e,i,t[i])}function kt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return jt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function It(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Rt=null;function Dt(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Re]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Re]||null;if(!s)throw Error(a(90));gt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Lt=!1;function Ot(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Pt||null!==Rt)&&(zc(),Pt&&(t=Pt,e=Rt,Rt=Pt=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Re]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Ft)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Rh){Ut=!1}var zt=null,Bt=null,qt=null;function Ht(){if(qt)return qt;var e,t,n=Bt,r=n.length,s="value"in zt?zt.value:zt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return qt=s.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Kt(){return!1}function Qt(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Gt:Kt,this.isPropagationStopped=Kt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Jt,Yt,$t,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Qt(Xt),en=h({},Xt,{view:0,detail:0}),tn=Qt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Jt=e.screenX-$t.screenX,Yt=e.screenY-$t.screenY):Yt=Jt=0,$t=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),rn=Qt(nn),sn=Qt(h({},nn,{dataTransfer:0})),an=Qt(h({},en,{relatedTarget:0})),on=Qt(h({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Qt(h({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Qt(h({},Xt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function fn(){return mn}var pn=Qt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Qt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Qt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),yn=Qt(h({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Qt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Qt(h({},Xt,{newState:0,oldState:0})),xn=[9,13,27,32],Nn=Ft&&"CompositionEvent"in window,En=null;Ft&&"documentMode"in document&&(En=document.documentMode);var Sn=Ft&&"TextEvent"in window&&!En,Cn=Ft&&(!Nn||En&&8<En&&11>=En),kn=String.fromCharCode(32),_n=!1;function jn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function Rn(e,t,n,r){Pt?Rt?Rt.push(r):Rt=[r]:Pt=r,0<(t=Hu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Dn=null,Ln=null;function On(e){Ou(e,0)}function Mn(e){if(ht(qe(e)))return e}function Fn(e,t){if("change"===e)return t}var Un=!1;if(Ft){var Vn;if(Ft){var zn="oninput"in document;if(!zn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),zn="function"===typeof Bn.oninput}Vn=zn}else Vn=!1;Un=Vn&&(!document.documentMode||9<document.documentMode)}function qn(){Dn&&(Dn.detachEvent("onpropertychange",Hn),Ln=Dn=null)}function Hn(e){if("value"===e.propertyName&&Mn(Ln)){var t=[];Rn(t,Ln,e,It(e)),Ot(On,t)}}function Wn(e,t,n){"focusin"===e?(qn(),Ln=n,(Dn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&qn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(Ln)}function Kn(e,t){if("click"===e)return Mn(t)}function Qn(e,t){if("input"===e||"change"===e)return Mn(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Y.call(t,s)||!Jn(e[s],t[s]))return!1}return!0}function $n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,r=$n(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$n(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,sr=null,ir=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==mt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Yn(ir,r)||(ir=r,0<(r=Hu(sr,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var mr=hr("animationend"),fr=hr("animationiteration"),pr=hr("animationstart"),gr=hr("transitionrun"),vr=hr("transitionstart"),yr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){wr.set(e,t),Qe(t,[e])}xr.push("scrollEnd");var Er=new WeakMap;function Sr(e,t){if("object"===typeof e&&null!==e){var n=Er.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Er.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Cr=[],kr=0,_r=0;function jr(){for(var e=kr,t=_r=kr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var s=Cr[t];Cr[t++]=null;var i=Cr[t];if(Cr[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&Pr(n,s,i)}}function Tr(e,t,n,r){Cr[kr++]=e,Cr[kr++]=t,Cr[kr++]=n,Cr[kr++]=r,_r|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return Tr(e,t,n,r),Rr(e)}function Ir(e,t){return Tr(e,null,null,t),Rr(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-me(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Rr(e){if(50<Pc)throw Pc=0,Rc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dr={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,n,r){return new Lr(e,t,n,r)}function Mr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,r,s,i){var o=0;if(r=e,"function"===typeof e)Mr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _:return(e=Or(31,n,t,s)).elementType=_,e.lanes=i,e;case g:return zr(n.children,s,i,t);case v:o=8,s|=24;break;case y:return(e=Or(12,n,t,2|s)).elementType=y,e.lanes=i,e;case E:return(e=Or(13,n,t,s)).elementType=E,e.lanes=i,e;case S:return(e=Or(19,n,t,s)).elementType=S,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case x:o=10;break e;case w:o=9;break e;case N:o=11;break e;case C:o=14;break e;case k:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Or(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function zr(e,t,n,r){return(e=Or(7,e,r,t)).lanes=n,e}function Br(e,t,n){return(e=Or(6,e,null,t)).lanes=n,e}function qr(e,t,n){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Wr=0,Gr=null,Kr=0,Qr=[],Jr=0,Yr=null,$r=1,Xr="";function Zr(e,t){Hr[Wr++]=Kr,Hr[Wr++]=Gr,Gr=e,Kr=t}function es(e,t,n){Qr[Jr++]=$r,Qr[Jr++]=Xr,Qr[Jr++]=Yr,Yr=e;var r=$r;e=Xr;var s=32-me(r)-1;r&=~(1<<s),n+=1;var i=32-me(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,$r=1<<32-me(t)+s|n<<s|r,Xr=i+e}else $r=1<<i|n<<s|r,Xr=e}function ts(e){null!==e.return&&(Zr(e,1),es(e,1,0))}function ns(e){for(;e===Gr;)Gr=Hr[--Wr],Hr[Wr]=null,Kr=Hr[--Wr],Hr[Wr]=null;for(;e===Yr;)Yr=Qr[--Jr],Qr[Jr]=null,Xr=Qr[--Jr],Qr[Jr]=null,$r=Qr[--Jr],Qr[Jr]=null}var rs=null,ss=null,is=!1,as=null,os=!1,ls=Error(a(519));function cs(e){throw ps(Sr(Error(a(418,"")),e)),ls}function us(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Re]=r,n){case"dialog":Mu("cancel",t),Mu("close",t);break;case"iframe":case"object":case"embed":Mu("load",t);break;case"video":case"audio":for(n=0;n<Du.length;n++)Mu(Du[n],t);break;case"source":Mu("error",t);break;case"img":case"image":case"link":Mu("error",t),Mu("load",t);break;case"details":Mu("toggle",t);break;case"input":Mu("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Mu("invalid",t);break;case"textarea":Mu("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Yu(t.textContent,n)?(null!=r.popover&&(Mu("beforetoggle",t),Mu("toggle",t)),null!=r.onScroll&&Mu("scroll",t),null!=r.onScrollEnd&&Mu("scrollend",t),null!=r.onClick&&(t.onclick=$u),t=!0):t=!1,t||cs(e)}function ds(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 13:return void(os=!1);case 27:case 3:return void(os=!0);default:rs=rs.return}}function hs(e){if(e!==rs)return!1;if(!is)return ds(e),is=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),ds(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,md(e.type)?(e=yd,yd=null,ss=e):ss=n):ss=rs?vd(e.stateNode.nextSibling):null;return!0}function ms(){ss=rs=null,is=!1}function fs(){var e=as;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),as=null),e}function ps(e){null===as?as=[e]:as.push(e)}var gs=U(null),vs=null,ys=null;function bs(e,t,n){z(gs,t._currentValue),t._currentValue=n}function ws(e){e._currentValue=gs.current,V(gs)}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var o=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),xs(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),xs(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Es(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;Jn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===W.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Qd):e=[Qd])}s=s.return}null!==e&&Ns(t,e,n,r),t.flags|=262144}function Ss(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){vs=e,ys=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ks(e){return js(vs,e)}function _s(e,t){return null===vs&&Cs(e),js(e,t)}function js(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ys){if(null===e)throw Error(a(308));ys=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ys=ys.next=t;return n}var Ts="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},As=r.unstable_scheduleCallback,Is=r.unstable_NormalPriority,Ps={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rs(){return{controller:new Ts,data:new Map,refCount:0}}function Ds(e){e.refCount--,0===e.refCount&&As(Is,function(){e.controller.abort()})}var Ls=null,Os=0,Ms=0,Fs=null;function Us(){if(0===--Os&&null!==Ls){null!==Fs&&(Fs.status="fulfilled");var e=Ls;Ls=null,Ms=0,Fs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Vs=D.S;D.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ls){var n=Ls=[];Os=0,Ms=Tu(),Fs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Os++,t.then(Us,Us)}(0,t),null!==Vs&&Vs(e,t)};var zs=U(null);function Bs(){var e=zs.current;return null!==e?e:rc.pooledCache}function qs(e,t){z(zs,null===t?zs.current:t.pool)}function Hs(){var e=Bs();return null===e?null:{parent:Ps._currentValue,pool:e}}var Ws=Error(a(460)),Gs=Error(a(474)),Ks=Error(a(542)),Qs={then:function(){}};function Js(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ys(){}function $s(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ys,Ys),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Ys,Ys);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Xs=t,Ws}}var Xs=null;function Zs(){if(null===Xs)throw Error(a(459));var e=Xs;return Xs=null,e}function ei(e){if(e===Ws||e===Ks)throw Error(a(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Rr(e),Pr(e,null,n),t}return Tr(e,r,t,n),Rr(e)}function ai(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_e(e,n)}}function oi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Fs)throw Fs}}function ui(e,t,n,r){li=!1;var s=e.updateQueue;ti=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var m=-536870913&o.lane,f=m!==o.lane;if(f?(ic&m)===m:(r&m)===m){0!==m&&m===Ms&&(li=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;m=t;var v=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(v,d,m);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(m="function"===typeof(p=g.payload)?p.call(v,d,m):p)||void 0===m)break e;d=h({},d,m);break e;case 2:ti=!0}}null!==(m=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=s.callbacks)?s.callbacks=[m]:f.push(m))}else f={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=m;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(f=o).next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),mc|=a,e.lanes=a,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)di(n[e],t)}var mi=U(null),fi=U(0);function pi(e,t){z(fi,e=dc),z(mi,t),dc=e|t.baseLanes}function gi(){z(fi,dc),z(mi,mi.current)}function vi(){dc=fi.current,V(mi),V(fi)}var yi=0,bi=null,wi=null,xi=null,Ni=!1,Ei=!1,Si=!1,Ci=0,ki=0,_i=null,ji=0;function Ti(){throw Error(a(321))}function Ai(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function Ii(e,t,n,r,s,i){return yi=i,bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?Wa:Ga,Si=!1,i=n(r,s),Si=!1,Ei&&(i=Ri(t,n,r,s)),Pi(e),i}function Pi(e){D.H=Ha;var t=null!==wi&&null!==wi.next;if(yi=0,xi=wi=bi=null,Ni=!1,ki=0,_i=null,t)throw Error(a(300));null===e||_o||null!==(e=e.dependencies)&&Ss(e)&&(_o=!0)}function Ri(e,t,n,r){bi=e;var s=0;do{if(Ei&&(_i=null),ki=0,Ei=!1,25<=s)throw Error(a(301));if(s+=1,xi=wi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}D.H=Ka,i=t(n,r)}while(Ei);return i}function Di(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?Vi(t):t,e=e.useState()[0],(null!==wi?wi.memoizedState:null)!==e&&(bi.flags|=1024),t}function Li(){var e=0!==Ci;return Ci=0,e}function Oi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Mi(e){if(Ni){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ni=!1}yi=0,xi=wi=bi=null,Ei=!1,ki=Ci=0,_i=null}function Fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xi?bi.memoizedState=xi=e:xi=xi.next=e,xi}function Ui(){if(null===wi){var e=bi.alternate;e=null!==e?e.memoizedState:null}else e=wi.next;var t=null===xi?bi.memoizedState:xi.next;if(null!==t)xi=t,wi=e;else{if(null===e){if(null===bi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(wi=e).memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},null===xi?bi.memoizedState=xi=e:xi=xi.next=e}return xi}function Vi(e){var t=ki;return ki+=1,null===_i&&(_i=[]),e=$s(_i,e,t),t=bi,null===(null===xi?t.memoizedState:xi.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?Wa:Ga),e}function zi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Vi(e);if(e.$$typeof===x)return ks(e)}throw Error(a(438,String(e)))}function Bi(e){var t=null,n=bi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=j;return t.index++,n}function qi(e,t){return"function"===typeof t?t(e):t}function Hi(e){return Wi(Ui(),wi,e)}function Wi(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ic&h)===h:(yi&h)===h){var m=u.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ms&&(d=!0);else{if((yi&m)===m){u=u.next,m===Ms&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,bi.lanes|=m,mc|=m}h=u.action,Si&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else m={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=m,o=i):c=c.next=m,bi.lanes|=h,mc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Jn(i,e.memoizedState)&&(_o=!0,d&&null!==(n=Fs)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Gi(e){var t=Ui(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);Jn(i,t.memoizedState)||(_o=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ki(e,t,n){var r=bi,s=Ui(),i=is;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Jn((wi||s).memoizedState,n);if(o&&(s.memoizedState=n,_o=!0),s=s.queue,ga(2048,8,Yi.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==xi&&1&xi.memoizedState.tag){if(r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Ji.bind(null,r,s,n,t),null),null===rc)throw Error(a(349));i||0!==(124&yi)||Qi(r,t,n)}return n}function Qi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ji(e,t,n,r){t.value=n,t.getSnapshot=r,$i(t)&&Xi(e)}function Yi(e,t,n){return n(function(){$i(t)&&Xi(e)})}function $i(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(r){return!0}}function Xi(e){var t=Ir(e,2);null!==t&&Oc(t,e,2)}function Zi(e){var t=Fi();if("function"===typeof e){var n=e;if(e=n(),Si){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:e},t}function ea(e,t,n,r){return e.baseState=n,Wi(e,wi,"function"===typeof r?r:qi)}function ta(e,t,n,r,s){if(za(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==D.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,na(t,i)):(i.next=n.next,t.pending=n.next=i)}}function na(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=D.T,a={};D.T=a;try{var o=n(s,r),l=D.S;null!==l&&l(a,o),ra(e,t,o)}catch(c){ia(e,t,c)}finally{D.T=i}}else try{ra(e,t,i=n(s,r))}catch(u){ia(e,t,u)}}function ra(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){sa(e,t,n)},function(n){return ia(e,t,n)}):sa(e,t,n)}function sa(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function ia(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==r)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(is){var n=rc.formState;if(null!==n){e:{var r=bi;if(is){if(ss){t:{for(var s=ss,i=os;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=vd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ss=vd(s.nextSibling),r="F!"===s.data;break e}}cs(r)}r=!1}r&&(t=n[0])}}return(n=Fi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=r,n=Fa.bind(null,bi,r),r.dispatch=n,r=Zi(!1),i=Va.bind(null,bi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=Fi()).queue=s,n=ta.bind(null,bi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return ua(Ui(),wi,e)}function ua(e,t,n){if(t=Wi(e,t,oa)[0],e=Hi(qi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Vi(t)}catch(a){if(a===Ws)throw Ks;throw a}else r=t;var s=(t=Ui()).queue,i=s.dispatch;return n!==t.memoizedState&&(bi.flags|=2048,ma(9,{destroy:void 0,resource:void 0},da.bind(null,s,n),null)),[r,i,e]}function da(e,t){e.action=t}function ha(e){var t=Ui(),n=wi;if(null!==n)return ua(t,n,e);Ui(),t=t.memoizedState;var r=(n=Ui()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function fa(){return Ui().memoizedState}function pa(e,t,n,r){var s=Fi();r=void 0===r?null:r,bi.flags|=e,s.memoizedState=ma(1|t,{destroy:void 0,resource:void 0},n,r)}function ga(e,t,n,r){var s=Ui();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==wi&&null!==r&&Ai(r,wi.memoizedState.deps)?s.memoizedState=ma(t,i,n,r):(bi.flags|=e,s.memoizedState=ma(1|t,i,n,r))}function va(e,t){pa(8390656,8,e,t)}function ya(e,t){ga(2048,8,e,t)}function ba(e,t){return ga(4,2,e,t)}function wa(e,t){return ga(4,4,e,t)}function xa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Na(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4,4,xa.bind(null,t,e),n)}function Ea(){}function Sa(e,t){var n=Ui();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ai(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ca(e,t){var n=Ui();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ai(t,r[1]))return r[0];if(r=e(),Si){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function ka(e,t,n){return void 0===n||0!==(1073741824&yi)?e.memoizedState=t:(e.memoizedState=n,e=Lc(),bi.lanes|=e,mc|=e,n)}function _a(e,t,n,r){return Jn(n,t)?n:null!==mi.current?(e=ka(e,n,r),Jn(e,t)||(_o=!0),e):0===(42&yi)?(_o=!0,e.memoizedState=n):(e=Lc(),bi.lanes|=e,mc|=e,t)}function ja(e,t,n,r,s){var i=L.p;L.p=0!==i&&8>i?i:8;var a=D.T,o={};D.T=o,Va(e,!1,t,n);try{var l=s(),c=D.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ua(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Dc());else Ua(e,t,r,Dc())}catch(u){Ua(e,t,{then:function(){},status:"rejected",reason:u},Dc())}finally{L.p=i,D.T=a}}function Ta(){}function Aa(e,t,n,r){if(5!==e.tag)throw Error(a(476));var s=Ia(e).queue;ja(e,s,t,O,null===n?Ta:function(){return Pa(e),n(r)})}function Ia(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Pa(e){Ua(e,Ia(e).next.queue,{},Dc())}function Ra(){return ks(Qd)}function Da(){return Ui().memoizedState}function La(){return Ui().memoizedState}function Oa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Dc(),r=ii(t,e=si(n),n);return null!==r&&(Oc(r,t,n),ai(r,t,n)),t={cache:Rs()},void(e.payload=t)}t=t.return}}function Ma(e,t,n){var r=Dc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},za(e)?Ba(t,n):null!==(n=Ar(e,t,n,r))&&(Oc(n,e,r),qa(n,t,r))}function Fa(e,t,n){Ua(e,t,n,Dc())}function Ua(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(za(e))Ba(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Jn(o,a))return Tr(e,t,s,0),null===rc&&jr(),!1}catch(l){}if(null!==(n=Ar(e,t,s,r)))return Oc(n,e,r),qa(n,t,r),!0}return!1}function Va(e,t,n,r){if(r={lane:2,revertLane:Tu(),action:r,hasEagerState:!1,eagerState:null,next:null},za(e)){if(t)throw Error(a(479))}else null!==(t=Ar(e,n,r,2))&&Oc(t,e,2)}function za(e){var t=e.alternate;return e===bi||null!==t&&t===bi}function Ba(e,t){Ei=Ni=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qa(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_e(e,n)}}var Ha={readContext:ks,use:zi,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useLayoutEffect:Ti,useInsertionEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useSyncExternalStore:Ti,useId:Ti,useHostTransitionStatus:Ti,useFormState:Ti,useActionState:Ti,useOptimistic:Ti,useMemoCache:Ti,useCacheRefresh:Ti},Wa={readContext:ks,use:zi,useCallback:function(e,t){return Fi().memoizedState=[e,void 0===t?null:t],e},useContext:ks,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,pa(4194308,4,xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pa(4194308,4,e,t)},useInsertionEffect:function(e,t){pa(4,2,e,t)},useMemo:function(e,t){var n=Fi();t=void 0===t?null:t;var r=e();if(Si){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Fi();if(void 0!==n){var s=n(t);if(Si){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Ma.bind(null,bi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Fi().memoizedState=e},useState:function(e){var t=(e=Zi(e)).queue,n=Fa.bind(null,bi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ea,useDeferredValue:function(e,t){return ka(Fi(),e,t)},useTransition:function(){var e=Zi(!1);return e=ja.bind(null,bi,e.queue,!0,!1),Fi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bi,s=Fi();if(is){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rc)throw Error(a(349));0!==(124&ic)||Qi(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,va(Yi.bind(null,r,i,e),[e]),r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Ji.bind(null,r,i,n,t),null),n},useId:function(){var e=Fi(),t=rc.identifierPrefix;if(is){var n=Xr;t="\xab"+t+"R"+(n=($r&~(1<<32-me($r)-1)).toString(32)+n),0<(n=Ci++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=ji++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ra,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Fi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Va.bind(null,bi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Bi,useCacheRefresh:function(){return Fi().memoizedState=Oa.bind(null,bi)}},Ga={readContext:ks,use:zi,useCallback:Sa,useContext:ks,useEffect:ya,useImperativeHandle:Na,useInsertionEffect:ba,useLayoutEffect:wa,useMemo:Ca,useReducer:Hi,useRef:fa,useState:function(){return Hi(qi)},useDebugValue:Ea,useDeferredValue:function(e,t){return _a(Ui(),wi.memoizedState,e,t)},useTransition:function(){var e=Hi(qi)[0],t=Ui().memoizedState;return["boolean"===typeof e?e:Vi(e),t]},useSyncExternalStore:Ki,useId:Da,useHostTransitionStatus:Ra,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Ui(),0,e,t)},useMemoCache:Bi,useCacheRefresh:La},Ka={readContext:ks,use:zi,useCallback:Sa,useContext:ks,useEffect:ya,useImperativeHandle:Na,useInsertionEffect:ba,useLayoutEffect:wa,useMemo:Ca,useReducer:Gi,useRef:fa,useState:function(){return Gi(qi)},useDebugValue:Ea,useDeferredValue:function(e,t){var n=Ui();return null===wi?ka(n,e,t):_a(n,wi.memoizedState,e,t)},useTransition:function(){var e=Gi(qi)[0],t=Ui().memoizedState;return["boolean"===typeof e?e:Vi(e),t]},useSyncExternalStore:Ki,useId:Da,useHostTransitionStatus:Ra,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Ui();return null!==wi?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Bi,useCacheRefresh:La},Qa=null,Ja=0;function Ya(e){var t=Ja;return Ja+=1,null===Qa&&(Qa=[]),$s(Qa,e,t)}function $a(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Xa(e,t){if(t.$$typeof===m)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Br(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===k&&Za(i)===t.type)?($a(t=s(t,n.props),n),t.return=e,t):($a(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=zr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return $a(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=qr(t,e.mode,n)).return=e,t;case k:return h(e,t=(0,t._init)(t._payload),n)}if(R(t)||A(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Ya(t),n);if(t.$$typeof===x)return h(e,_s(e,t),n);Xa(e,t)}return null}function m(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===s?c(e,t,n,r):null;case p:return n.key===s?u(e,t,n,r):null;case k:return m(e,t,n=(s=n._init)(n._payload),r)}if(R(n)||A(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return m(e,t,Ya(n),r);if(n.$$typeof===x)return m(e,t,_s(e,n),r);Xa(e,n)}return null}function v(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case k:return v(e,t,n,r=(0,r._init)(r._payload),s)}if(R(r)||A(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return v(e,t,n,Ya(r),s);if(r.$$typeof===x)return v(e,t,n,_s(t,r),s);Xa(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===k&&Za(b)===c.type){n(l,c.sibling),$a(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=zr(u.props.children,l.mode,d,u.key)).return=l,l=d):($a(d=Vr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case p:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=qr(u,l.mode,d)).return=l,l=d}return o(l);case k:return y(l,c,u=(b=u._init)(u._payload),d)}if(R(u))return function(s,a,o,l){for(var c=null,u=null,d=a,f=a=0,p=null;null!==d&&f<o.length;f++){d.index>f?(p=d,d=null):p=d.sibling;var g=m(s,d,o[f],l);if(null===g){null===d&&(d=p);break}e&&d&&null===g.alternate&&t(s,d),a=i(g,a,f),null===u?c=g:u.sibling=g,u=g,d=p}if(f===o.length)return n(s,d),is&&Zr(s,f),c;if(null===d){for(;f<o.length;f++)null!==(d=h(s,o[f],l))&&(a=i(d,a,f),null===u?c=d:u.sibling=d,u=d);return is&&Zr(s,f),c}for(d=r(d);f<o.length;f++)null!==(p=v(d,s,f,o[f],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?f:p.key),a=i(p,a,f),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(s,e)}),is&&Zr(s,f),c}(l,c,u,d);if(A(u)){if("function"!==typeof(b=A(u)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,f=o,p=o=0,g=null,y=l.next();null!==f&&!y.done;p++,y=l.next()){f.index>p?(g=f,f=null):g=f.sibling;var b=m(s,f,y.value,c);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(s,f),o=i(b,o,p),null===d?u=b:d.sibling=b,d=b,f=g}if(y.done)return n(s,f),is&&Zr(s,p),u;if(null===f){for(;!y.done;p++,y=l.next())null!==(y=h(s,y.value,c))&&(o=i(y,o,p),null===d?u=y:d.sibling=y,d=y);return is&&Zr(s,p),u}for(f=r(f);!y.done;p++,y=l.next())null!==(y=v(f,s,p,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?p:y.key),o=i(y,o,p),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(s,e)}),is&&Zr(s,p),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,Ya(u),d);if(u.$$typeof===x)return y(l,c,_s(l,u),d);Xa(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Br(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{Ja=0;var s=y(e,t,n,r);return Qa=null,s}catch(a){if(a===Ws||a===Ks)throw a;var i=Or(29,a,null,e.mode);return i.lanes=r,i.return=e,i}}}var to=eo(!0),no=eo(!1),ro=U(null),so=null;function io(e){var t=e.alternate;z(co,1&co.current),z(ro,e),null===so&&(null===t||null!==mi.current||null!==t.memoizedState)&&(so=e)}function ao(e){if(22===e.tag){if(z(co,co.current),z(ro,e),null===so){var t=e.alternate;null!==t&&null!==t.memoizedState&&(so=e)}}else oo()}function oo(){z(co,co.current),z(ro,ro.current)}function lo(e){V(ro),so===e&&(so=null),V(co)}var co=U(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Dc(),s=si(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Oc(t,e,r),ai(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Dc(),s=si(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Oc(t,e,r),ai(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dc(),r=si(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ii(e,r,n))&&(Oc(t,e,n),ai(t,e,n))}};function fo(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,r)||!Yn(s,i))}function po(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function go(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var vo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yo(e){vo(e)}function bo(e){console.error(e)}function wo(e){vo(e)}function xo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function No(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Eo(e,t,n){return(n=si(n)).tag=3,n.payload={element:null},n.callback=function(){xo(e,t)},n}function So(e){return(e=si(e)).tag=3,e}function Co(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){No(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){No(t,n,r),"function"!==typeof s&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var ko=Error(a(461)),_o=!1;function jo(e,t,n,r){t.child=null===e?no(t,null,n,r):to(t,e.child,n,r)}function To(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Cs(t),r=Ii(e,t,n,a,i,s),o=Li(),null===e||_o?(is&&o&&ts(t),t.flags|=1,jo(e,t,r,s),t.child):(Oi(e,t,s),Jo(e,t,s))}function Ao(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Mr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Io(e,t,i,r,s))}if(i=e.child,!Yo(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(a,r)&&e.ref===t.ref)return Jo(e,t,s)}return t.flags|=1,(e=Fr(i,r)).ref=t.ref,e.return=t,t.child=e}function Io(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(Yn(i,r)&&e.ref===t.ref){if(_o=!1,t.pendingProps=r=i,!Yo(e,s))return t.lanes=e.lanes,Jo(e,t,s);0!==(131072&e.flags)&&(_o=!0)}}return Lo(e,t,n,r,s)}function Po(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==i?i.baseLanes|n:n,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Ro(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ro(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qs(0,null!==i?i.cachePool:null),null!==i?pi(t,i):gi(),ao(t)}else null!==i?(qs(0,i.cachePool),pi(t,i),oo(),t.memoizedState=null):(null!==e&&qs(0,null),gi(),oo());return jo(e,t,s,n),t.child}function Ro(e,t,n,r){var s=Bs();return s=null===s?null:{parent:Ps._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&qs(0,null),gi(),ao(t),null!==e&&Es(e,t,r,!0),null}function Do(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Lo(e,t,n,r,s){return Cs(t),n=Ii(e,t,n,r,void 0,s),r=Li(),null===e||_o?(is&&r&&ts(t),t.flags|=1,jo(e,t,n,s),t.child):(Oi(e,t,s),Jo(e,t,s))}function Oo(e,t,n,r,s,i){return Cs(t),t.updateQueue=null,n=Ri(t,r,n,s),Pi(e),r=Li(),null===e||_o?(is&&r&&ts(t),t.flags|=1,jo(e,t,n,i),t.child):(Oi(e,t,i),Jo(e,t,i))}function Mo(e,t,n,r,s){if(Cs(t),null===t.stateNode){var i=Dr,a=n.contextType;"object"===typeof a&&null!==a&&(i=ks(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=mo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ni(t),a=n.contextType,i.context="object"===typeof a&&null!==a?ks(a):Dr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ho(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&mo.enqueueReplaceState(i,i.state,null),ui(t,r,i,s),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=go(n,o);i.props=l;var c=i.context,u=n.contextType;a=Dr,"object"===typeof u&&null!==u&&(a=ks(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&po(t,i,r,a),ti=!1;var h=t.memoizedState;i.state=h,ui(t,r,i,s),ci(),c=t.memoizedState,o||h!==c||ti?("function"===typeof d&&(ho(t,n,d,r),c=t.memoizedState),(l=ti||fo(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ri(e,t),u=go(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Dr,"object"===typeof c&&null!==c&&(l=ks(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&po(t,i,r,l),ti=!1,h=t.memoizedState,i.state=h,ui(t,r,i,s),ci();var m=t.memoizedState;a!==d||h!==m||ti||null!==e&&null!==e.dependencies&&Ss(e.dependencies)?("function"===typeof o&&(ho(t,n,o,r),m=t.memoizedState),(u=ti||fo(t,n,u,r,h,m,l)||null!==e&&null!==e.dependencies&&Ss(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Do(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=to(t,e.child,null,s),t.child=to(t,null,n,s)):jo(e,t,n,s),t.memoizedState=i.state,e=t.child):e=Jo(e,t,s),e}function Fo(e,t,n,r){return ms(),t.flags|=256,jo(e,t,n,r),t.child}var Uo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vo(e){return{baseLanes:e,cachePool:Hs()}}function zo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Bo(e,t,n){var r,s=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(is){if(i?io(t):oo(),is){var l,c=ss;if(l=c){e:{for(l=c,c=os;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Yr?{id:$r,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},(l=Or(18,null,null,0)).stateNode=c,l.return=t,t.child=l,rs=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=s.children,s=s.fallback,i?(oo(),c=Ho({mode:"hidden",children:c},i=t.mode),s=zr(s,i,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(i=t.child).memoizedState=Vo(n),i.childLanes=zo(e,r,n),t.memoizedState=Uo,s):(io(t),qo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(io(t),t.flags&=-257,t=Wo(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),i=s.fallback,c=t.mode,s=Ho({mode:"visible",children:s.children},c),(i=zr(i,c,n,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,to(t,e.child,null,n),(s=t.child).memoizedState=Vo(n),s.childLanes=zo(e,r,n),t.memoizedState=Uo,t=i);else if(io(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(a(419))).stack="",s.digest=r,ps({value:s,source:null,stack:null}),t=Wo(e,t,n)}else if(_o||Es(e,t,n,!1),r=0!==(n&e.childLanes),_o||r){if(null!==(r=rc)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:je(s))&(r.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,Ir(e,s),Oc(r,e,s),ko;"$?"===c.data||Kc(),t=Wo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=vd(c.nextSibling),rs=t,is=!0,as=null,os=!1,null!==e&&(Qr[Jr++]=$r,Qr[Jr++]=Xr,Qr[Jr++]=Yr,$r=e.id,Xr=e.overflow,Yr=t),(t=qo(t,s.children)).flags|=4096);return t}return i?(oo(),i=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=Fr(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Fr(u,i):(i=zr(i,c,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,null===(c=e.child.memoizedState)?c=Vo(n):(null!==(l=c.cachePool)?(u=Ps._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hs(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=zo(e,r,n),t.memoizedState=Uo,s):(io(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function qo(e,t){return(t=Ho({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ho(e,t){return(e=Or(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wo(e,t,n){return to(t,e.child,null,n),(e=qo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Go(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function Ko(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Qo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(jo(e,t,r.children,n),0!==(2&(r=co.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Go(e,n,t);else if(19===e.tag)Go(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(co,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ko(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===uo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ko(t,!0,n,null,i);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Es(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Yo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ss(e))}function $o(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)_o=!0;else{if(!Yo(e,n)&&0===(128&t.flags))return _o=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),bs(0,Ps,e.memoizedState.cache),ms();break;case 27:case 5:Q(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:bs(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(io(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Bo(e,t,n):(io(t),null!==(e=Jo(e,t,n))?e.sibling:null);io(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Es(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return Qo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),z(co,co.current),r)break;return null;case 22:case 23:return t.lanes=0,Po(e,t,n);case 24:bs(0,Ps,e.memoizedState.cache)}return Jo(e,t,n)}(e,t,n);_o=0!==(131072&e.flags)}else _o=!1,is&&0!==(1048576&t.flags)&&es(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((s=r.$$typeof)===N){t.tag=11,t=To(null,t,r,e,n);break e}if(s===C){t.tag=14,t=Ao(null,t,r,e,n);break e}}throw t=P(r)||r,Error(a(306,t,""))}Mr(r)?(e=go(r,e),t.tag=1,t=Mo(null,t,r,e,n)):(t.tag=0,t=Lo(null,t,r,e,n))}return t;case 0:return Lo(e,t,t.type,t.pendingProps,n);case 1:return Mo(e,t,r=t.type,s=go(r,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,ri(e,t),ui(t,r,null,n);var o=t.memoizedState;if(r=o.cache,bs(0,Ps,r),r!==i.cache&&Ns(t,[Ps],n,!0),ci(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Fo(e,t,r,n);break e}if(r!==s){ps(s=Sr(Error(a(424)),t)),t=Fo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=vd(e.firstChild),rs=t,is=!0,as=null,os=!0,n=no(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),r===s){t=Jo(e,t,n);break e}jo(e,t,r,n)}t=t.child}return t;case 26:return Do(e,t),null===e?(n=jd(t.type,null,t.pendingProps,null))?t.memoizedState=n:is||(n=t.type,e=t.pendingProps,(r=rd(H.current).createElement(n))[Pe]=t,r[Re]=e,ed(r,n,e),We(r),t.stateNode=r):t.memoizedState=jd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&is&&(r=t.stateNode=wd(t.type,t.pendingProps,H.current),rs=t,os=!0,s=ss,md(t.type)?(yd=s,ss=vd(r.firstChild)):ss=s),jo(e,t,t.pendingProps.children,n),Do(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&is&&((s=r=ss)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,os))?(t.stateNode=r,rs=t,ss=vd(r.firstChild),os=!1,s=!0):s=!1),s||cs(t)),Q(t),s=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,ad(s,i)?r=null:null!==o&&ad(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=Ii(e,t,Di,null,null,n),Qd._currentValue=s),Do(e,t),jo(e,t,r,n),t.child;case 6:return null===e&&is&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,os))?(t.stateNode=n,rs=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Bo(e,t,n);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,n):jo(e,t,r,n),t.child;case 11:return To(e,t,t.type,t.pendingProps,n);case 7:return jo(e,t,t.pendingProps,n),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bs(0,t.type,r.value),jo(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Cs(t),r=r(s=ks(s)),t.flags|=1,jo(e,t,r,n),t.child;case 14:return Ao(e,t,t.type,t.pendingProps,n);case 15:return Io(e,t,t.type,t.pendingProps,n);case 19:return Qo(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ho(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Po(e,t,n);case 24:return Cs(t),r=ks(Ps),null===e?(null===(s=Bs())&&(s=rc,i=Rs(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},ni(t),bs(0,Ps,s)):(0!==(e.lanes&n)&&(ri(e,t),ui(t,null,null,n),ci()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),bs(0,Ps,r)):(r=i.cache,bs(0,Ps,r),r!==s.cache&&Ns(t,[Ps],n,!0))),jo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Xo(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zd(t)){if(null!==(t=ro.current)&&((4194048&ic)===ic?null!==so:(62914560&ic)!==ic&&0===(536870912&ic)||t!==so))throw Xs=Qs,Gs;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ee():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ws(Ps),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?Xo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fs())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Xo(t),null!==n?(nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Xo(t),nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Xo(t),nl(t),t.flags&=-16777217),null;case 27:J(t),n=H.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=B.current,hs(t)?us(t):(e=wd(s,r,n),t.stateNode=e,Xo(t))}return nl(t),null;case 5:if(J(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=B.current,hs(t))us(t);else{switch(s=rd(H.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?s.createElement(n,{is:r.is}):s.createElement(n)}}e[Pe]=t,e[Re]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Xo(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Xo(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=H.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=rs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Yu(e.nodeValue,n)))||cs(t)}else(e=rd(e).createTextNode(r))[Pe]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[Pe]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),s=!1}else s=fs(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return K(),null===e&&Vu(t.stateNode.containerInfo),nl(t),null;case 10:return ws(t.type),nl(t),null;case 19:if(V(co),null===(s=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(i=s.rendering))if(r)tl(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=uo(e))){for(t.flags|=128,tl(s,!1),e=i.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return z(co,1&co.current|2),t.child}e=e.sibling}null!==s.tail&&te()>Nc&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!is)return nl(t),null}else 2*te()-s.renderingStartTime>Nc&&536870912!==n&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=co.current,z(co,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),vi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(zs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ws(Ps),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function sl(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ws(Ps),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(co),null;case 4:return K(),null;case 10:return ws(t.type),null;case 22:case 23:return lo(t),vi(),null!==e&&V(zs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ws(Ps),null;default:return null}}function il(e,t){switch(ns(t),t.tag){case 3:ws(Ps),K();break;case 26:case 27:case 5:J(t);break;case 4:K();break;case 13:lo(t);break;case 19:V(co);break;case 10:ws(t.type);break;case 22:case 23:lo(t),vi(),null!==e&&V(zs);break;case 24:ws(Ps)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){uu(t,t.return,o)}}function ol(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){uu(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=go(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){uu(e,t,s)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){uu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){uu(e,t,i)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){uu(e,e.return,s)}}function ml(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(f)||Xu(e,t,f,null,r,h)}}for(var m in r){var f=r[m];if(h=n[m],r.hasOwnProperty(m)&&(null!=f||null!=h))switch(m){case"type":i=f;break;case"name":s=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:f!==h&&Xu(e,t,m,f,r,h)}}return void gt(e,o,l,c,u,d,i,s);case"select":for(i in f=o=l=m=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(i)||Xu(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":m=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Xu(e,t,s,i,r,c)}return t=l,n=o,r=f,void(null!=m?bt(e,!!n,m,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=m=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Xu(e,t,l,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=s||null!=i))switch(o){case"value":m=s;break;case"defaultValue":f=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==i&&Xu(e,t,o,s,r,i)}return void wt(e,m,f);case"option":for(var p in n)if(m=n[p],n.hasOwnProperty(p)&&null!=m&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else Xu(e,t,p,null,r,m);for(c in r)if(m=r[c],f=n[c],r.hasOwnProperty(c)&&m!==f&&(null!=m||null!=f))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else Xu(e,t,c,m,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!r.hasOwnProperty(g)&&Xu(e,t,g,null,r,m);for(u in r)if(m=r[u],f=n[u],r.hasOwnProperty(u)&&m!==f&&(null!=m||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:Xu(e,t,u,m,r,f)}return;default:if(kt(t)){for(var v in n)m=n[v],n.hasOwnProperty(v)&&void 0!==m&&!r.hasOwnProperty(v)&&Zu(e,t,v,void 0,r,m);for(d in r)m=r[d],f=n[d],!r.hasOwnProperty(d)||m===f||void 0===m&&void 0===f||Zu(e,t,d,m,r,f);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&null!=m&&!r.hasOwnProperty(y)&&Xu(e,t,y,null,r,m);for(h in r)m=r[h],f=n[h],!r.hasOwnProperty(h)||m===f||null==m&&null==f||Xu(e,t,h,m,r,f)}(r,e.type,n,t),r[Re]=t}catch(s){uu(e,e.return,s)}}function fl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function pl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$u));else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ed(t,r,n),t[Pe]=e,t[Re]=n}catch(i){uu(e,e.return,i)}}var bl=!1,wl=!1,xl=!1,Nl="function"===typeof WeakSet?WeakSet:Set,El=null;function Sl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ml(e,n),4&r&&al(5,n);break;case 1:if(Ml(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(n,n.return,a)}else{var s=go(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){uu(n,n.return,o)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Ml(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(a){uu(n,n.return,a)}}break;case 27:null===t&&4&r&&yl(n);case 26:case 5:Ml(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Ml(e,n);break;case 13:Ml(e,n),4&r&&Al(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=fu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||wl,s=bl;var i=wl;bl=r,(wl=t)&&!i?Ul(e,n,0!==(8772&n.subtreeFlags)):Ml(e,n),bl=s,wl=i}break;case 30:break;default:Ml(e,n)}}function Cl(e){var t=e.alternate;null!==t&&(e.alternate=null,Cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ve(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kl=null,_l=!1;function jl(e,t,n){for(n=n.child;null!==n;)Tl(e,t,n),n=n.sibling}function Tl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:wl||dl(n,t),jl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||dl(n,t);var r=kl,s=_l;md(n.type)&&(kl=n.stateNode,_l=!1),jl(e,t,n),xd(n.stateNode),kl=r,_l=s;break;case 5:wl||dl(n,t);case 6:if(r=kl,s=_l,kl=null,jl(e,t,n),_l=s,null!==(kl=r))if(_l)try{(9===kl.nodeType?kl.body:"HTML"===kl.nodeName?kl.ownerDocument.body:kl).removeChild(n.stateNode)}catch(a){uu(n,t,a)}else try{kl.removeChild(n.stateNode)}catch(a){uu(n,t,a)}break;case 18:null!==kl&&(_l?(fd(9===(e=kl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),_h(e)):fd(kl,n.stateNode));break;case 4:r=kl,s=_l,kl=n.stateNode.containerInfo,_l=!0,jl(e,t,n),kl=r,_l=s;break;case 0:case 11:case 14:case 15:wl||ol(2,n,t),wl||ol(4,n,t),jl(e,t,n);break;case 1:wl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),jl(e,t,n);break;case 21:jl(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,jl(e,t,n),wl=r;break;default:jl(e,t,n)}}function Al(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{_h(e)}catch(n){uu(t,t.return,n)}}function Il(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Nl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Nl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=pu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){kl=l.stateNode,_l=!1;break e}break;case 5:kl=l.stateNode,_l=!1;break e;case 3:case 4:kl=l.stateNode.containerInfo,_l=!0;break e}l=l.return}if(null===kl)throw Error(a(160));Tl(i,o,s),kl=null,_l=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Dl(t,e),t=t.sibling}var Rl=null;function Dl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),Ll(e),4&r&&(ol(3,e,e.return),al(3,e),ol(5,e,e.return));break;case 1:Pl(t,e),Ll(e),512&r&&(wl||null===n||dl(n,n.return)),64&r&&bl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Rl;if(Pl(t,e),Ll(e),512&r&&(wl||null===n||dl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Ue]||i[Pe]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),ed(i,r,n),i[Pe]=e,We(i),r=i;break e;case"link":var o=Ud("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(o=Ud("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(a(468,r))}i[Pe]=e,We(i),r=i}e.stateNode=r}else Vd(s,e.type,e.stateNode);else e.stateNode=Dd(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?Vd(s,e.type,e.stateNode):Dd(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pl(t,e),Ll(e),512&r&&(wl||null===n||dl(n,n.return)),null!==n&&4&r&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),Ll(e),512&r&&(wl||null===n||dl(n,n.return)),32&e.flags){s=e.stateNode;try{Nt(s,"")}catch(f){uu(e,e.return,f)}}4&r&&null!=e.stateNode&&ml(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(xl=!0);break;case 6:if(Pl(t,e),Ll(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(f){uu(e,e.return,f)}}break;case 3:if(Fd=null,s=Rl,Rl=Sd(t.containerInfo),Pl(t,e),Rl=s,Ll(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{_h(t.containerInfo)}catch(f){uu(e,e.return,f)}xl&&(xl=!1,Ol(e));break;case 4:r=Rl,Rl=Sd(e.stateNode.containerInfo),Pl(t,e),Ll(e),Rl=r;break;case 12:default:Pl(t,e),Ll(e);break;case 13:Pl(t,e),Ll(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(xc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Il(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=bl,d=wl;if(bl=u||s,wl=d||c,Pl(t,e),wl=d,bl=u,Ll(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||bl||wl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(f){uu(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(f){uu(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Il(e,n))));break;case 19:Pl(t,e),Ll(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Il(e,r)));case 30:case 21:}}function Ll(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(fl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;vl(e,pl(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(Nt(i,""),n.flags&=-33),vl(e,pl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;gl(e,pl(e),o);break;default:throw Error(a(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ol(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ol(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ml(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Fl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:xd(t.stateNode);case 26:case 5:dl(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Ul(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Ul(s,i,n),al(4,i);break;case 1:if(Ul(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)di(l[s],o)}catch(c){uu(r,r.return,c)}}n&&64&a&&ll(i),ul(i,i.return);break;case 27:yl(i);case 26:case 5:Ul(s,i,n),n&&null===r&&4&a&&hl(i),ul(i,i.return);break;case 12:Ul(s,i,n);break;case 13:Ul(s,i,n),n&&4&a&&Al(s,i);break;case 22:null===i.memoizedState&&Ul(s,i,n),ul(i,i.return);break;case 30:break;default:Ul(s,i,n)}t=t.sibling}}function Vl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ds(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ds(e))}function Bl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ql(e,t,n,r),t=t.sibling}function ql(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Bl(e,t,n,r),2048&s&&al(9,t);break;case 1:case 13:default:Bl(e,t,n,r);break;case 3:Bl(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ds(e)));break;case 12:if(2048&s){Bl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Bl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?Bl(e,t,n,r):Wl(e,t):2&i._visibility?Bl(e,t,n,r):(i._visibility|=2,Hl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&s&&Vl(a,t);break;case 24:Bl(e,t,n,r),2048&s&&zl(t.alternate,t)}}function Hl(e,t,n,r,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Hl(i,a,o,l,s),al(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Hl(i,a,o,l,s):Wl(i,a):(u._visibility|=2,Hl(i,a,o,l,s)),s&&2048&c&&Vl(a.alternate,a);break;case 24:Hl(i,a,o,l,s),s&&2048&c&&zl(a.alternate,a);break;default:Hl(i,a,o,l,s)}t=t.sibling}}function Wl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Wl(n,r),2048&s&&Vl(r.alternate,r);break;case 24:Wl(n,r),2048&s&&zl(r.alternate,r);break;default:Wl(n,r)}t=t.sibling}}var Gl=8192;function Kl(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 26:Kl(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===Bd)throw Error(a(475));var r=Bd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Td(n.href),i=e.querySelector(Ad(s));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Hd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void We(i);i=e.ownerDocument||e,n=Id(n),(s=Nd.get(s))&&Od(n,s),We(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Hd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Rl,e.memoizedState,e.memoizedProps);break;case 5:default:Kl(e);break;case 3:case 4:var t=Rl;Rl=Sd(e.stateNode.containerInfo),Kl(e),Rl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Kl(e),Gl=t):Kl(e))}}function Jl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,Zl(r,e)}Jl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Xl(e)):Yl(e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,Zl(r,e)}Jl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Xl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Xl(t));break;default:Xl(t)}e=e.sibling}}function Zl(e,t){for(;null!==El;){var n=El;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ds(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,El=r;else e:for(n=e;null!==El;){var s=(r=El).sibling,i=r.return;if(Cl(r),r===n){El=null;break e}if(null!==s){s.return=i,El=s;break e}El=i}}}var ec={getCacheForType:function(e){var t=ks(Ps),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,sc=null,ic=0,ac=0,oc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,mc=0,fc=0,pc=0,gc=0,vc=0,yc=null,bc=null,wc=!1,xc=0,Nc=1/0,Ec=null,Sc=null,Cc=0,kc=null,_c=null,jc=0,Tc=0,Ac=null,Ic=null,Pc=0,Rc=null;function Dc(){if(0!==(2&nc)&&0!==ic)return ic&-ic;if(null!==D.T){return 0!==Ms?Ms:Tu()}return Ae()}function Lc(){0===gc&&(gc=0===(536870912&ic)||is?Ne():536870912);var e=ro.current;return null!==e&&(e.flags|=32),gc}function Oc(e,t,n){(e!==rc||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(qc(e,0),Vc(e,ic,gc,!1)),Ce(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(fc|=n),4===hc&&Vc(e,ic,gc,!1)),Nu(e))}function Mc(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),s=r?function(e,t){var n=nc;nc|=2;var r=Wc(),s=Gc();rc!==e||ic!==t?(Ec=null,Nc=te()+500,qc(e,t)):cc=we(e,t);e:for(;;)try{if(0!==ac&&null!==sc){t=sc;var i=oc;t:switch(ac){case 1:ac=0,oc=null,Zc(e,t,i,1);break;case 2:case 9:if(Js(i)){ac=0,oc=null,Xc(t);break}t=function(){2!==ac&&9!==ac||rc!==e||(ac=7),Nu(e)},i.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Js(i)?(ac=0,oc=null,Xc(t)):(ac=0,oc=null,Zc(e,t,i,7));break;case 5:var o=null;switch(sc.tag){case 26:o=sc.memoizedState;case 5:case 27:var l=sc;if(!o||zd(o)){ac=0,oc=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,eu(u)):sc=null}break t}}ac=0,oc=null,Zc(e,t,i,5);break;case 6:ac=0,oc=null,Zc(e,t,i,6);break;case 8:Bc(),hc=6;break e;default:throw Error(a(462))}}Yc();break}catch(d){Hc(e,d)}return ys=vs=null,D.H=r,D.A=s,nc=n,null!==sc?0:(rc=null,ic=0,jr(),hc)}(e,t):Qc(e,t,!0),i=r;;){if(0===s){cc&&!r&&Vc(e,t,0,!1);break}if(n=e.current.alternate,!i||Uc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=yc;var c=l.current.memoizedState.isDehydrated;if(c&&(qc(l,o).flags|=256),2!==(o=Qc(l,o,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=i,fc|=i,s=4;break e}i=bc,bc=s,null!==i&&(null===bc?bc=i:bc.push.apply(bc,i))}s=o}if(i=!1,2!==s)continue}}if(1===s){qc(e,0),Vc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Vc(r,t,gc,!lc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=xc+300-te())){if(Vc(r,t,gc,!lc),0!==be(r,0,!0))break e;r.timeoutHandle=ld(Fc.bind(null,r,n,bc,Ec,wc,t,gc,fc,vc,lc,i,2,-0,0),s)}else Fc(r,n,bc,Ec,wc,t,gc,fc,vc,lc,i,0,-0,0)}break}s=Qc(e,t,!1),i=!1}Nu(e)}function Fc(e,t,n,r,s,i,o,l,c,u,d,h,m,f){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Bd={stylesheets:null,count:0,unsuspend:qd},Ql(t),null!==(h=function(){if(null===Bd)throw Error(a(475));var e=Bd;return e.stylesheets&&0===e.count&&Gd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Gd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,i,n,r,s,o,l,c,d,1,m,f)),void Vc(e,i,o,!u);nu(e,t,i,n,r,s,o,l,c)}function Uc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Jn(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vc(e,t,n,r){t&=~pc,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-me(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&ke(e,n,t)}function zc(){return 0!==(6&nc)||(Eu(0,!1),!1)}function Bc(){if(null!==sc){if(0===ac)var e=sc.return;else ys=vs=null,Mi(e=sc),Qa=null,Ja=0,e=sc;for(;null!==e;)il(e.alternate,e),e=e.return;sc=null}}function qc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc(),rc=e,sc=n=Fr(e.current,null),ic=t,ac=0,oc=null,lc=!1,cc=we(e,t),uc=!1,vc=gc=pc=fc=mc=hc=0,bc=yc=null,wc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-me(r),i=1<<s;t|=e[s],r&=~i}return dc=t,jr(),n}function Hc(e,t){bi=null,D.H=Ha,t===Ws||t===Ks?(t=Zs(),ac=3):t===Gs?(t=Zs(),ac=4):ac=t===ko?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===sc&&(hc=1,xo(e,Sr(t,e.current)))}function Wc(){var e=D.H;return D.H=Ha,null===e?Ha:e}function Gc(){var e=D.A;return D.A=ec,e}function Kc(){hc=4,lc||(4194048&ic)!==ic&&null!==ro.current||(cc=!0),0===(134217727&mc)&&0===(134217727&fc)||null===rc||Vc(rc,ic,gc,!1)}function Qc(e,t,n){var r=nc;nc|=2;var s=Wc(),i=Gc();rc===e&&ic===t||(Ec=null,qc(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==ac&&null!==sc){var o=sc,l=oc;switch(ac){case 8:Bc(),a=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var c=ac;if(ac=0,oc=null,Zc(e,o,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,oc=null,Zc(e,o,l,c)}}Jc(),a=hc;break}catch(u){Hc(e,u)}return t&&e.shellSuspendCounter++,ys=vs=null,nc=r,D.H=s,D.A=i,null===sc&&(rc=null,ic=0,jr()),a}function Jc(){for(;null!==sc;)$c(sc)}function Yc(){for(;null!==sc&&!Z();)$c(sc)}function $c(e){var t=$o(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Xc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Oo(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Oo(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:Mi(t);default:il(n,t),t=$o(n,t=sc=Ur(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Zc(e,t,n,r){ys=vs=null,Mi(t),Qa=null,Ja=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Es(t,n,s,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===so?Kc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===Qs?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,s)),!1;case 22:return n.flags|=65536,r===Qs?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,s)),!1}throw Error(a(435,n.tag))}return du(e,r,s),Kc(),!1}if(is)return null!==(t=ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ls&&ps(Sr(e=Error(a(422),{cause:r}),n))):(r!==ls&&ps(Sr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Sr(r,n),oi(e,s=Eo(e.stateNode,r,s)),4!==hc&&(hc=2)),!1;var i=Error(a(520),{cause:r});if(i=Sr(i,n),null===yc?yc=[i]:yc.push(i),4!==hc&&(hc=2),null===t)return!0;r=Sr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,oi(n,e=Eo(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Sc||!Sc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,Co(s=So(s),e,n,r),oi(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ic))return hc=1,xo(e,Sr(n,e.current)),void(sc=null)}catch(i){if(null!==s)throw sc=s,i;return hc=1,xo(e,Sr(n,e.current)),void(sc=null)}32768&t.flags?(is||1===r?e=!0:cc||0!==(536870912&ic)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ro.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);hc=6,sc=null}function nu(e,t,n,r,s,i,o,l,c){e.cancelPendingCommit=null;do{ou()}while(0!==Cc);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-me(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var m=h[u];null!==m&&(m.lane&=-536870913)}n&=~d}0!==r&&ke(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=_r,o,l,c),e===rc&&(sc=rc=null,ic=0),_c=t,kc=e,jc=n,Tc=i,Ac=s,Ic=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,$(ie,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=D.T,D.T=null,s=L.p,L.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var f;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)m=h,h=f;for(;;){if(h===e)break t;if(m===n&&++u===s&&(l=o),m===i&&++d===r&&(c=o),null!==(f=h.nextSibling))break;m=(h=m).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,El=t;null!==El;)if(e=(t=El).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,El=e;else for(;null!==El;){switch(i=(t=El).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var p=go(n.type,s,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(p,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){uu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))pd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,El=e;break}El=t.return}}(e,t)}finally{nc=o,L.p=s,D.T=r}}Cc=1,ru(),su(),iu()}}function ru(){if(1===Cc){Cc=0;var e=kc,t=_c,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null;var r=L.p;L.p=2;var s=nc;nc|=4;try{Dl(t,e);var i=nd,a=er(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),f=o.textContent.length,p=Math.min(l.start,f),g=void 0===l.end?p:Math.min(l.end,f);!m.extend&&p>g&&(a=g,g=p,p=a);var v=Xn(o,p),y=Xn(o,g);if(v&&y&&(1!==m.rangeCount||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==y.node||m.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),m.removeAllRanges(),p>g?(m.addRange(b),m.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),m.addRange(b))}}}}for(d=[],m=o;m=m.parentNode;)1===m.nodeType&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nh=!!td,nd=td=null}finally{nc=s,L.p=r,D.T=n}}e.current=t,Cc=2}}function su(){if(2===Cc){Cc=0;var e=kc,t=_c,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=D.T,D.T=null;var r=L.p;L.p=2;var s=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=s,L.p=r,D.T=n}}Cc=3}}function iu(){if(4===Cc||3===Cc){Cc=0,ee();var e=kc,t=_c,n=jc,r=Ic;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Cc=5:(Cc=0,_c=kc=null,au(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Sc=null),Te(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=D.T,s=L.p,L.p=2,D.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{D.T=t,L.p=s}}0!==(3&jc)&&ou(),Nu(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Rc?Pc++:(Pc=0,Rc=e):Pc=0,Eu(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ds(t)))}function ou(e){return ru(),su(),iu(),lu()}function lu(){if(5!==Cc)return!1;var e=kc,t=Tc;Tc=0;var n=Te(jc),r=D.T,s=L.p;try{L.p=32>n?32:n,D.T=null,n=Ac,Ac=null;var i=kc,o=jc;if(Cc=0,_c=kc=null,jc=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,$l(i.current),ql(i,i.current,o,n),nc=l,Eu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{L.p=s,D.T=r,au(e,t)}}function cu(e,t,n){t=Sr(n,t),null!==(e=ii(e,t=Eo(e.stateNode,t,2),2))&&(Ce(e,2),Nu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Sc||!Sc.has(r))){e=Sr(n,e),null!==(r=ii(t,n=So(2),2))&&(Co(n,r,t,e),Ce(r,2),Nu(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(uc=!0,s.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(ic&n)===n&&(4===hc||3===hc&&(62914560&ic)===ic&&300>te()-xc?0===(2&nc)&&qc(e,0):pc|=n,vc===ic&&(vc=0)),Nu(e)}function mu(e,t){0===t&&(t=Ee()),null!==(e=Ir(e,t))&&(Ce(e,t),Nu(e))}function fu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mu(e,n)}function pu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),mu(e,n)}var gu=null,vu=null,yu=!1,bu=!1,wu=!1,xu=0;function Nu(e){e!==vu&&null===e.next&&(null===vu?gu=vu=e:vu=vu.next=e),bu=!0,yu||(yu=!0,dd(function(){0!==(6&nc)?$(re,Su):Cu()}))}function Eu(e,t){if(!wu&&bu){wu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-me(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,ju(r,i))}else i=ic,0===(3&(i=be(r,r===rc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,i)||(n=!0,ju(r,i));r=r.next}}while(n);wu=!1}}function Su(){Cu()}function Cu(){bu=yu=!1;var e=0;0!==xu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=xu),xu=0);for(var t=te(),n=null,r=gu;null!==r;){var s=r.next,i=ku(r,t);0===i?(r.next=null,null===n?gu=s:n.next=s,null===s&&(vu=n)):(n=r,(0!==e||0!==(3&i))&&(bu=!0)),r=s}Eu(e,!1)}function ku(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-me(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=xe(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=ic,n=be(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&X(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&X(r),Te(n)){case 2:case 8:n=se;break;case 32:default:n=ie;break;case 268435456:n=oe}return r=_u.bind(null,e),n=$(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&X(r),e.callbackPriority=2,e.callbackNode=null,2}function _u(e,t){if(0!==Cc&&5!==Cc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var r=ic;return 0===(r=be(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Mc(e,r,t),ku(e,te()),null!=e.callbackNode&&e.callbackNode===n?_u.bind(null,e):null)}function ju(e,t){if(ou())return null;Mc(e,t,!0)}function Tu(){return 0===xu&&(xu=Ne()),xu}function Au(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Tt(""+e)}function Iu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pu=0;Pu<xr.length;Pu++){var Ru=xr[Pu];Nr(Ru.toLowerCase(),"on"+(Ru[0].toUpperCase()+Ru.slice(1)))}Nr(mr,"onAnimationEnd"),Nr(fr,"onAnimationIteration"),Nr(pr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(gr,"onTransitionRun"),Nr(vr,"onTransitionStart"),Nr(yr,"onTransitionCancel"),Nr(br,"onTransitionEnd"),Je("onMouseEnter",["mouseout","mouseover"]),Je("onMouseLeave",["mouseout","mouseover"]),Je("onPointerEnter",["pointerout","pointerover"]),Je("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Du));function Ou(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){vo(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){vo(u)}s.currentTarget=null,i=l}}}}function Mu(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(zu(t,e,2,!1),n.add(r))}function Fu(e,t,n){var r=0;t&&(r|=4),zu(n,e,r,t)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function Vu(e){if(!e[Uu]){e[Uu]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Lu.has(t)||Fu(t,!1,e),Fu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Uu]||(t[Uu]=!0,Fu("selectionchange",!1,t))}}function zu(e,t,n,r){switch(ch(t)){case 2:var s=rh;break;case 8:s=sh;break;default:s=ih}n=s.bind(null,t,n,e),s=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Bu(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=ze(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}o=o.parentNode}}r=r.return}Ot(function(){var r=i,s=It(n),a=[];e:{var o=wr.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=pn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case mr:case fr:case pr:c=on;break;case br:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),m=d?null!==o?o+"Capture":null:o;d=[];for(var f,p=r;null!==p;){var g=p;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===m||null!=(g=Mt(p,m))&&d.push(qu(p,g,f)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[De])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",m="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",m="onPointerEnter",p="pointer"),h=null==c?o:qe(c),f=null==u?o:qe(u),(o=new d(g,p+"leave",c,n,s)).target=h,o.relatedTarget=f,g=null,ze(s)===r&&((d=new d(m,p+"enter",u,n,s)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(m=u,p=0,f=d=c;f;f=Wu(f))p++;for(f=0,g=m;g;g=Wu(g))f++;for(;0<p-f;)d=Wu(d),p--;for(;0<f-p;)m=Wu(m),f--;for(;p--;){if(d===m||null!==m&&d===m.alternate)break e;d=Wu(d),m=Wu(m)}d=null}else d=null;null!==c&&Gu(a,o,c,d,!1),null!==u&&null!==h&&Gu(a,h,u,d,!0)}if("select"===(c=(o=r?qe(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Fn;else if(Pn(o))if(Un)v=Qn;else{v=Gn;var y=Wn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&kt(r.elementType)&&(v=Fn):v=Kn;switch(v&&(v=v(e,r))?Rn(a,v,n,s):(y&&y(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&yt(o,"number",o.value)),y=r?qe(r):window,e){case"focusin":(Pn(y)||"true"===y.contentEditable)&&(rr=y,sr=r,ir=null);break;case"focusout":ir=sr=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,s);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,s)}var b;if(Nn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else An?jn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Cn&&"ko"!==n.locale&&(An||"onCompositionStart"!==w?"onCompositionEnd"===w&&An&&(b=Ht()):(Bt="value"in(zt=s)?zt.value:zt.textContent,An=!0)),0<(y=Hu(r,w)).length&&(w=new cn(w,e,null,n,s),a.push({event:w,listeners:y}),b?w.data=b:null!==(b=Tn(n))&&(w.data=b))),(b=Sn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(_n=!0,kn);case"textInput":return(e=t.data)===kn&&_n?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!Nn&&jn(e,t)?(e=Ht(),qt=Bt=zt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Hu(r,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,s),a.push({event:y,listeners:w}),y.data=b)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=Au((s[Re]||null).action),a=r.submitter;a&&null!==(t=(t=a[Re]||null)?Au(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new Zt("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==xu){var e=a?Iu(s,a):new FormData(s);Aa(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Iu(s,a):new FormData(s),Aa(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(a,e,r,n,s)}Ou(a,t)})}function qu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hu(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Mt(e,n))&&r.unshift(qu(e,s,i)),null!=(s=Mt(e,t))&&r.push(qu(e,s,i))),3===e.tag)return r;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Mt(n,i))&&a.unshift(qu(n,c,l)):s||null!=(c=Mt(n,i))&&a.push(qu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ku=/\r\n?/g,Qu=/\u0000|\uFFFD/g;function Ju(e){return("string"===typeof e?e:""+e).replace(Ku,"\n").replace(Qu,"")}function Yu(e,t){return t=Ju(t),Ju(e)===t}function $u(){}function Xu(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Nt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Nt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Ct(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Xu(e,t,"name",s.name,s,null),Xu(e,t,"formEncType",s.formEncType,s,null),Xu(e,t,"formMethod",s.formMethod,s,null),Xu(e,t,"formTarget",s.formTarget,s,null)):(Xu(e,t,"encType",s.encType,s,null),Xu(e,t,"method",s.method,s,null),Xu(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=$u);break;case"onScroll":null!=r&&Mu("scroll",e);break;case"onScrollEnd":null!=r&&Mu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Tt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Mu("beforetoggle",e),Mu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=_t.get(n)||n,r)}}function Zu(e,t,n,r,s,i){switch(n){case"style":Ct(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Nt(e,r):("number"===typeof r||"bigint"===typeof r)&&Nt(e,""+r);break;case"onScroll":null!=r&&Mu("scroll",e);break;case"onScrollEnd":null!=r&&Mu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=$u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Re]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mu("error",e),Mu("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Xu(e,t,r,o,n,null)}}return i&&Xu(e,t,"srcSet",n.srcSet,n,null),void(s&&Xu(e,t,"src",n.src,n,null));case"input":Mu("invalid",e);var l=r=o=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Xu(e,t,s,d,n,null)}}return vt(e,r,l,c,u,o,i,!1),void dt(e);case"select":for(i in Mu("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Xu(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?bt(e,!!s,t,!1):null!=n&&bt(e,!!s,n,!0));case"textarea":for(o in Mu("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Xu(e,t,o,l,n,null)}return xt(e,s,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Xu(e,t,c,s,n,null);return;case"dialog":Mu("beforetoggle",e),Mu("toggle",e),Mu("cancel",e),Mu("close",e);break;case"iframe":case"object":Mu("load",e);break;case"video":case"audio":for(s=0;s<Du.length;s++)Mu(Du[s],e);break;case"image":Mu("error",e),Mu("load",e);break;case"details":Mu("toggle",e);break;case"embed":case"source":case"link":Mu("error",e),Mu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Xu(e,t,u,s,n,null)}return;default:if(kt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&Zu(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Xu(e,t,l,s,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function md(e){return"head"===e}function fd(e,t){var n=t,r=0,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&xd(a.documentElement),2&n&&xd(a.body),4&n)for(xd(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===s)return e.removeChild(i),void _h(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);_h(t)}function pd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":pd(n),Ve(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function xd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ve(e)}var Nd=new Map,Ed=new Set;function Sd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cd=L.d;L.d={f:function(){var e=Cd.f(),t=zc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Pa(t):Cd.r(e)},D:function(e){Cd.D(e),_d("dns-prefetch",e,null)},C:function(e,t){Cd.C(e,t),_d("preconnect",e,t)},L:function(e,t,n){Cd.L(e,t,n);var r=kd;if(r&&e&&t){var s='link[rel="preload"][as="'+pt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+pt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+pt(n.imageSizes)+'"]')):s+='[href="'+pt(e)+'"]';var i=s;switch(t){case"style":i=Td(e);break;case"script":i=Pd(e)}Nd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Nd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Ad(i))||"script"===t&&r.querySelector(Rd(i))||(ed(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){Cd.m(e,t);var n=kd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+pt(r)+'"][href="'+pt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Pd(e)}if(!Nd.has(i)&&(e=h({rel:"modulepreload",href:e},t),Nd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Rd(i)))return}ed(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){Cd.X(e,t);var n=kd;if(n&&e){var r=He(n).hoistableScripts,s=Pd(e),i=r.get(s);i||((i=n.querySelector(Rd(s)))||(e=h({src:e,async:!0},t),(t=Nd.get(s))&&Md(e,t),We(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){Cd.S(e,t,n);var r=kd;if(r&&e){var s=He(r).hoistableStyles,i=Td(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Ad(i)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Nd.get(i))&&Od(e,n);var l=a=r.createElement("link");We(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Ld(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){Cd.M(e,t);var n=kd;if(n&&e){var r=He(n).hoistableScripts,s=Pd(e),i=r.get(s);i||((i=n.querySelector(Rd(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=Nd.get(s))&&Md(e,t),We(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var kd="undefined"===typeof document?null:document;function _d(e,t,n){var r=kd;if(r&&"string"===typeof t&&t){var s=pt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Ed.has(s)||(Ed.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(ed(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function jd(e,t,n,r){var s,i,o,l,c=(c=H.current)?Sd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Td(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Td(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Ad(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Nd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Nd.set(e,n),u||(s=c,i=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),ed(i,"link",o),We(i),s.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Pd(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Td(e){return'href="'+pt(e)+'"'}function Ad(e){return'link[rel="stylesheet"]['+e+"]"}function Id(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pd(e){return'[src="'+pt(e)+'"]'}function Rd(e){return"script[async]"+e}function Dd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+pt(n.href)+'"]');if(r)return t.instance=r,We(r),r;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",s),Ld(r,n.precedence,e),t.instance=r;case"stylesheet":s=Td(n.href);var i=e.querySelector(Ad(s));if(i)return t.state.loading|=4,t.instance=i,We(i),i;r=Id(n),(s=Nd.get(s))&&Od(r,s),We(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(i,"link",r),t.state.loading|=4,Ld(i,n.precedence,e),t.instance=i;case"script":return i=Pd(n.src),(s=e.querySelector(Rd(i)))?(t.instance=s,We(s),s):(r=n,(s=Nd.get(i))&&Md(r=h({},n),s),We(s=(e=e.ownerDocument||e).createElement("script")),ed(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Ld(r,n.precedence,e));return t.instance}function Ld(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Od(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fd=null;function Ud(e,t,n){if(null===Fd){var r=new Map,s=Fd=new Map;s.set(n,r)}else(r=(s=Fd).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Ue]||i[Pe]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function Vd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bd=null;function qd(){}function Hd(){if(this.count--,0===this.count)if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wd=null;function Gd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wd=new Map,t.forEach(Kd,e),Wd=null,Hd.call(e))}function Kd(e,t){if(!(4&t.state.loading)){var n=Wd.get(e);if(n)var r=n.get(null);else{n=new Map,Wd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=Hd.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Qd={$$typeof:x,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Jd(e,t,n,r,s,i,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Yd(e,t,n,r,s,i,a,o,l,c,u,d){return e=new Jd(e,t,n,a,o,l,c,d),t=1,!0===i&&(t|=24),i=Or(3,null,null,t),e.current=i,i.stateNode=e,(t=Rs()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ni(i),e}function $d(e){return e?e=Dr:Dr}function Xd(e,t,n,r,s,i){s=$d(s),null===r.context?r.context=s:r.pendingContext=s,(r=si(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ii(e,r,t))&&(Oc(n,0,t),ai(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Ir(e,67108864);null!==t&&Oc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var s=D.T;D.T=null;var i=L.p;try{L.p=2,ih(e,t,n,r)}finally{L.p=i,D.T=s}}function sh(e,t,n,r){var s=D.T;D.T=null;var i=L.p;try{L.p=8,ih(e,t,n,r)}finally{L.p=i,D.T=s}}function ih(e,t,n,r){if(nh){var s=ah(r);if(null===s)Bu(e,t,r,oh,n),yh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return dh=bh(dh,e,t,n,r,s),!0;case"dragenter":return hh=bh(hh,e,t,n,r,s),!0;case"mouseover":return mh=bh(mh,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return fh.set(i,bh(fh.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ph.set(i,bh(ph.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(yh(e,r),4&t&&-1<vh.indexOf(e)){for(;null!==s;){var i=Be(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=ye(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-me(a);o.entanglements[1]|=l,a&=~l}Nu(i),0===(6&nc)&&(Nc=te()+500,Eu(0,!1))}}break;case 13:null!==(o=Ir(i,2))&&Oc(o,0,2),zc(),eh(i,2)}if(null===(i=ah(r))&&Bu(e,t,r,oh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Bu(e,t,r,null,n)}}function ah(e){return lh(e=It(e))}var oh=null;function lh(e){if(oh=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case se:return 8;case ie:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,mh=null,fh=new Map,ph=new Map,gh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":fh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ph.delete(t.pointerId)}}function bh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Be(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function wh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,function(){if(13===n.tag){var e=Dc();e=je(e);var t=Ir(n,e);null!==t&&Oc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function Nh(e,t,n){xh(e)&&n.delete(t)}function Eh(){uh=!1,null!==dh&&xh(dh)&&(dh=null),null!==hh&&xh(hh)&&(hh=null),null!==mh&&xh(mh)&&(mh=null),fh.forEach(Nh),ph.forEach(Nh)}function Sh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Eh)))}var Ch=null;function kh(e){Ch!==e&&(Ch=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ch===e&&(Ch=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var i=Be(n);null!==i&&(e.splice(t,3),t-=3,Aa(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function _h(e){function t(t){return Sh(t,e)}null!==dh&&Sh(dh,e),null!==hh&&Sh(hh,e),null!==mh&&Sh(mh,e),fh.forEach(t),ph.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)wh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[Re]||null;if("function"===typeof i)a||kh(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[Re]||null)o=a.formAction;else if(null!==lh(s))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),kh(n)}}}function jh(e){this._internalRoot=e}function Th(e){this._internalRoot=e}Th.prototype.render=jh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Xd(t.current,Dc(),e,t,null,null)},Th.prototype.unmount=jh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Xd(e.current,2,null,e,null,null),zc(),t[De]=null}},Th.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&wh(e)}};var Ah=s.version;if("19.1.0"!==Ah)throw Error(a(527,Ah,"19.1.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return u(s),e;if(i===r)return u(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ih={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ue=Ph.inject(Ih),de=Ph}catch(Dh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",s=yo,i=bo,l=wo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yd(e,1,!1,null,0,n,r,s,i,l,0,null),e[De]=t.current,Vu(e),new jh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,s="",i=yo,l=bo,c=wo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Yd(e,1,!0,t,0,r,s,i,l,c,0,u)).context=$d(null),n=t.current,(s=si(r=je(r=Dc()))).callback=null,ii(n,s,r),n=r,t.current.lanes=n,Ce(t,n),Nu(t),e[De]=t.current,Vu(e),new Th(t)},t.version="19.1.0"},43:(e,t,n)=>{e.exports=n(288)},150:(e,t,n)=>{n.d(t,{MF:()=>de,j6:()=>ae,xZ:()=>oe,om:()=>ie,Sx:()=>me,Wp:()=>he,KO:()=>fe});var r=n(812),s=n(443),i=n(529),a=n(555);let o,l;const c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,m=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(y(this),n),v(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(e.apply(y(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(y(this),t,...r);return d.set(i,t.sort?t.sort():[t]),v(i)}}function g(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});u.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,f):e);var t}function v(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(v(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),m.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),m.set(t,e)),t}const y=e=>m.get(e);const b=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],x=new Map;function N(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(x.get(t))return x.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!b.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return x.set(t,i),i}f=(e=>(0,a.A)((0,a.A)({},e),{},{get:(t,n,r)=>N(t,n)||e.get(t,n,r),has:(t,n)=>!!N(t,n)||e.has(t,n)}))(f);class E{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const S="@firebase/app",C="0.13.2",k=new s.Vy("@firebase/app"),_="@firebase/app-compat",j="@firebase/analytics-compat",T="@firebase/analytics",A="@firebase/app-check-compat",I="@firebase/app-check",P="@firebase/auth",R="@firebase/auth-compat",D="@firebase/database",L="@firebase/data-connect",O="@firebase/database-compat",M="@firebase/functions",F="@firebase/functions-compat",U="@firebase/installations",V="@firebase/installations-compat",z="@firebase/messaging",B="@firebase/messaging-compat",q="@firebase/performance",H="@firebase/performance-compat",W="@firebase/remote-config",G="@firebase/remote-config-compat",K="@firebase/storage",Q="@firebase/storage-compat",J="@firebase/firestore",Y="@firebase/ai",$="@firebase/firestore-compat",X="firebase",Z="[DEFAULT]",ee={[S]:"fire-core",[_]:"fire-core-compat",[T]:"fire-analytics",[j]:"fire-analytics-compat",[I]:"fire-app-check",[A]:"fire-app-check-compat",[P]:"fire-auth",[R]:"fire-auth-compat",[D]:"fire-rtdb",[L]:"fire-data-connect",[O]:"fire-rtdb-compat",[M]:"fire-fn",[F]:"fire-fn-compat",[U]:"fire-iid",[V]:"fire-iid-compat",[z]:"fire-fcm",[B]:"fire-fcm-compat",[q]:"fire-perf",[H]:"fire-perf-compat",[W]:"fire-rc",[G]:"fire-rc-compat",[K]:"fire-gcs",[Q]:"fire-gcs-compat",[J]:"fire-fst",[$]:"fire-fst-compat",[Y]:"fire-vertex","fire-js":"fire-js",[X]:"fire-js-all"},te=new Map,ne=new Map,re=new Map;function se(e,t){try{e.container.addComponent(t)}catch(n){k.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ie(e){const t=e.name;if(re.has(t))return k.debug("There were multiple attempts to register component ".concat(t,".")),!1;re.set(t,e);for(const n of te.values())se(n,e);for(const n of ne.values())se(n,e);return!0}function ae(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e){return null!==e&&void 0!==e&&void 0!==e.settings}const le={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ce=new i.FA("app","Firebase",le);class ue{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ce.create("app-deleted",{appName:this._name})}}const de="11.10.0";function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=Object.assign({name:Z,automaticDataCollectionEnabled:!0},t),a=s.name;if("string"!==typeof a||!a)throw ce.create("bad-app-name",{appName:String(a)});if(n||(n=(0,i.T9)()),!n)throw ce.create("no-options");const o=te.get(a);if(o){if((0,i.bD)(n,o.options)&&(0,i.bD)(s,o.config))return o;throw ce.create("duplicate-app",{appName:a})}const l=new r.h1(a);for(const r of re.values())l.addComponent(r);const c=new ue(n,s,l);return te.set(a,c),c}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;const t=te.get(e);if(!t&&e===Z&&(0,i.T9)())return he();if(!t)throw ce.create("no-app",{appName:e});return t}function fe(e,t,n){var s;let i=null!==(s=ee[e])&&void 0!==s?s:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void k.warn(e.join(" "))}ie(new r.uA("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const pe="firebase-heartbeat-store";let ge=null;function ve(){return ge||(ge=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=v(a);return r&&a.addEventListener("upgradeneeded",e=>{r(v(a.result),e.oldVersion,e.newVersion,v(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pe)}catch(n){console.warn(n)}}}).catch(e=>{throw ce.create("idb-open",{originalErrorMessage:e.message})})),ge}async function ye(e,t){try{const n=(await ve()).transaction(pe,"readwrite"),r=n.objectStore(pe);await r.put(t,be(e)),await n.done}catch(n){if(n instanceof i.g)k.warn(n.message);else{const e=ce.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});k.warn(e.message)}}}function be(e){return"".concat(e.name,"!").concat(e.options.appId)}class we{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ne(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xe();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){k.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=xe(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Ee(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ee(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=(0,i.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return k.warn(t),""}}}function xe(){return(new Date).toISOString().substring(0,10)}class Ne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.zW)()&&(0,i.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ve()).transaction(pe),n=await t.objectStore(pe).get(be(e));return await t.done,n}catch(t){if(t instanceof i.g)k.warn(t.message);else{const e=ce.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});k.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ee(e){return(0,i.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var Se;Se="",ie(new r.uA("platform-logger",e=>new E(e),"PRIVATE")),ie(new r.uA("heartbeat",e=>new we(e),"PRIVATE")),fe(S,C,Se),fe(S,C,"esm2017"),fe("fire-js","")},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,p(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function S(e,t,r,s,i,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function j(){}function T(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return T((u=e._init)(e._payload),t,s,i,a)}}if(u)return a=a(e),u=""===i?"."+_(e,0):i,x(a)?(s="",null!=u&&(s=u.replace(k,"$&/")+"/"),T(a,t,s,"",function(e){return e})):null!=a&&(C(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+u,a=S(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,f=""===i?".":i+":";if(x(e))for(var p=0;p<e.length;p++)u+=T(i=e[p],t,s,o=f+_(i,p),a);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(i=e.next()).done;)u+=T(i=i.value,t,s,o=f+_(i,p++),a);else if("object"===o){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(j,j):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",function(e){return t.call(n,e,s++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return N.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=p({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!E.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];r.children=a}return S(e.type,s,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===s[r]&&(s[r]=a[r]);return S(e,i,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.T,n={};N.T=n;try{var r=e(),s=N.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(R,P)}catch(i){P(i)}finally{N.T=t}},t.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},t.use=function(e){return N.H.use(e)},t.useActionState=function(e,t,n){return N.H.useActionState(e,t,n)},t.useCallback=function(e,t){return N.H.useCallback(e,t)},t.useContext=function(e){return N.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return N.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=N.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return N.H.useId()},t.useImperativeHandle=function(e,t,n){return N.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.H.useMemo(e,t)},t.useOptimistic=function(e,t){return N.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return N.H.useReducer(e,t,n)},t.useRef=function(e){return N.H.useRef(e)},t.useState=function(e){return N.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.H.useTransition()},t.version="19.1.0"},358:(e,t)=>{const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},417:(e,t,n)=>{n.d(t,{CB:()=>u,CP:()=>o,Xu:()=>c,recordEmailSent:()=>a,uw:()=>l,w9:()=>d});var r=n(555),s=n(472),i=n(958);const a=async e=>{try{if(!i.db)throw new Error("Firestore not initialized");const{userId:t,recipientEmail:n,recipientName:r,emailType:a,subject:o,templateId:l,courseId:c,courseTitle:u,paymentId:d,orderId:h,amount:m,enrollmentId:f,emailServiceResponse:p,success:g,error:v,rawTextContent:y}=e,b={userId:t||null,recipientEmail:n,recipientName:r||"",emailType:a,subject:o,templateId:l||null,courseId:c||null,courseTitle:u||"",paymentId:d||null,orderId:h||null,amount:m||null,enrollmentId:f||null,emailServiceProvider:"emailjs",emailServiceResponse:p||null,status:g?"sent":"failed",errorMessage:v||null,rawTextContent:y||null,sentAt:(0,s.O5)(),createdAt:(0,s.O5)(),metadata:{userAgent:navigator.userAgent,timestamp:(new Date).toISOString(),origin:window.location.origin}};return{success:!0,emailRecordId:(await(0,s.gS)((0,s.rJ)(i.db,"emails_sent"),b)).id}}catch(t){return{success:!1,error:t.message}}},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{if(!i.db)return{success:!1,error:"Firestore not initialized"};const n=(0,s.P)((0,s.rJ)(i.db,"emails_sent"),(0,s._M)("recipientEmail","==",e),(0,s.My)("sentAt","desc"),(0,s.AB)(t)),a=await(0,s.GG)(n),o=[];return a.forEach(e=>{o.push((0,r.A)({id:e.id},e.data()))}),{success:!0,emails:o}}catch(n){return{success:!1,error:n.message,emails:[]}}},l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{if(!i.db)return{success:!1,error:"Firestore not initialized"};if(!e||!e.trim())return{success:!1,error:"Search term is required",emails:[]};const n=e.trim().toLowerCase(),a=(0,s.P)((0,s.rJ)(i.db,"emails_sent"),(0,s.My)("sentAt","desc"),(0,s.AB)(1e3)),o=await(0,s.GG)(a),l=[];o.forEach(e=>{l.push((0,r.A)({id:e.id},e.data()))});const c=l.filter(e=>[e.recipientEmail,e.recipientName,e.courseTitle,e.paymentId,e.orderId,e.subject,e.emailType].some(e=>e&&e.toLowerCase().includes(n)));return{success:!0,emails:c.slice(0,t)}}catch(n){return{success:!1,error:n.message,emails:[]}}},c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{if(!i.db)return{success:!1,error:"Firestore not initialized"};const n=(0,s.P)((0,s.rJ)(i.db,"emails_sent"),(0,s._M)("emailType","==",e),(0,s.My)("sentAt","desc"),(0,s.AB)(t)),a=await(0,s.GG)(n),o=[];return a.forEach(e=>{o.push((0,r.A)({id:e.id},e.data()))}),{success:!0,emails:o}}catch(n){return{success:!1,error:n.message,emails:[]}}},u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(!i.db)return{success:!1,error:"Firestore not initialized"};let t=(0,s.rJ)(i.db,"emails_sent");const n=[];e.courseId&&n.push((0,s._M)("courseId","==",e.courseId)),e.emailType&&n.push((0,s._M)("emailType","==",e.emailType)),e.status&&n.push((0,s._M)("status","==",e.status)),n.length>0&&(t=(0,s.P)(t,...n));const r=await(0,s.GG)(t);let a=0,o=0,l=0;const c={},u={};return r.forEach(e=>{const t=e.data();a++,"sent"===t.status?o++:"failed"===t.status&&l++;const n=t.emailType||"unknown";if(c[n]=(c[n]||0)+1,t.courseId&&t.courseTitle){const e="".concat(t.courseId,"_").concat(t.courseTitle);u[e]=(u[e]||0)+1}}),{success:!0,statistics:{totalEmails:a,sentSuccessfully:o,failed:l,successRate:a>0?(o/a*100).toFixed(2):0,emailTypes:c,courses:u}}}catch(t){return{success:!1,error:t.message}}},d=async(e,t,n)=>{const r={userId:n,recipientEmail:e.userEmail,recipientName:e.userName,emailType:"enrollment_confirmation",subject:"\ud83c\udf89 Welcome to ".concat(e.courseTitle,"! Your AI learning journey starts now"),templateId:"template_660cmfs",courseId:e.courseId,courseTitle:e.courseTitle,paymentId:e.paymentId,orderId:e.orderId,amount:parseFloat(e.amount),enrollmentId:e.enrollmentId,emailServiceResponse:t.messageId,success:t.success,error:t.error,rawTextContent:t.rawTextContent};return await a(r)}},443:(e,t,n)=>{n.d(t,{$b:()=>s,Vy:()=>c});const r=[];var s;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));const i={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},a=s.INFO,o={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}},472:(e,t,n)=>{n.d(t,{gS:()=>bc,rJ:()=>el,kd:()=>yc,H9:()=>tl,FD:()=>tc,x7:()=>mc,GG:()=>pc,aU:()=>ol,GV:()=>Sc,AB:()=>$l,aQ:()=>wc,My:()=>Jl,P:()=>Hl,O5:()=>Ec,BN:()=>gc,EO:()=>Zl,mZ:()=>vc,_M:()=>Gl});var r,s,i=n(150),a=n(812),o=n(443),l=n(529),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function i(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function o(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],0>e?-1:0)}):new i([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return p(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var c=o(0),d=o(1),h=o(16777216);function m(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function f(e){return-1==e.h}function p(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(d)}function g(e,t){return e.add(p(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error("division by zero");if(m(e))return new y(c,c);if(f(e))return t=b(p(e),t),new y(p(t.g),p(t.h));if(f(t))return t=b(e,p(t)),new y(p(t.g),t.h);if(30<e.g.length){if(f(e)||f(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=w(n),r=w(r);var s=x(n,1),i=x(r,1);for(r=x(r,2),n=x(n,2);!m(r);){var a=i.add(r);0>=a.l(e)&&(s=s.add(n),i=a),r=x(r,1),n=x(n,1)}return t=g(e,s.j(t)),new y(s,t)}for(s=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(i=l(n)).j(t);f(a)||0<a.l(e);)a=(i=l(n-=r)).j(t);m(i)&&(i=d),s=s.add(i),e=g(e,a)}return new y(s,e)}function w(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],a=0;a<r;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(f(this))return-p(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(m(this))return"0";if(f(this))return"-"+p(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var s=b(n,t).g,i=((0<(n=g(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(m(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return f(e=g(this,e))?-1:m(e)?0:1},e.abs=function(){return f(this)?p(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var a=r+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(m(this)||m(e))return c;if(f(this))return f(e)?p(this).j(p(e)):p(p(this).j(e));if(f(e))return p(this.j(p(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var a=this.i(r)>>>16,o=65535&this.i(r),u=e.i(s)>>>16,d=65535&e.i(s);n[2*r+2*s]+=o*d,v(n,2*r+2*s),n[2*r+2*s+1]+=a*d,v(n,2*r+2*s+1),n[2*r+2*s+1]+=o*u,v(n,2*r+2*s+1),n[2*r+2*s+2]+=a*u,v(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,s=u.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return p(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),s=c,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+a),n);8>a?(a=l(Math.pow(n,a)),s=s.j(a).add(l(o))):s=(s=s.j(r)).add(l(o))}return s},r=u.Integer=i}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,m,f,p,g,v,y,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function x(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function N(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function E(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function S(e){return/^[\s\xa0]*$/.test(e)}function C(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function k(e){return k[" "](e),e}k[" "]=function(){};var _=-1!=C().indexOf("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&-1==C().indexOf("Edge"))&&!(-1!=C().indexOf("Trident")||-1!=C().indexOf("MSIE"))&&-1==C().indexOf("Edge");function j(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function T(e){const t={};for(const n in e)t[n]=e[n];return t}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<A.length;t++)n=A[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function P(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function R(e){s.setTimeout(()=>{throw e},0)}function D(){var e=U;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var L=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new O,e=>e.reset());class O{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,U=new class{constructor(){this.h=this.g=null}add(e,t){const n=L.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},V=()=>{const e=s.Promise.resolve(void 0);M=()=>{e.then(z)}};var z=()=>{for(var e;e=D();){try{e.h.call(e.g)}catch(n){R(n)}var t=L;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}F=!1};function B(){this.s=this.s,this.C=this.C}function q(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},q.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function W(e,t){if(q.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(_){e:{try{k(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:G[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&W.aa.h.call(this)}}x(W,q);var G={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),Q=0;function J(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++Q,this.da=this.fa=!1}function Y(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function $(e){this.src=e,this.g={},this.h=0}function X(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(Y(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}$.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=Z(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new J(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,s){if(r&&r.once)return se(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)ne(e,t[i],n,r,s);return null}return n=de(n),e&&e[K]?e.K(t,n,a(r)?!!r.capture:!!r,s):re(e,t,n,!1,r,s)}function re(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=ce(e);if(l||(e[ee]=l=new $(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)H||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(oe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function se(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)se(e,t[i],n,r,s);return null}return n=de(n),e&&e[K]?e.L(t,n,a(r)?!!r.capture:!!r,s):re(e,t,n,!0,r,s)}function ie(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)ie(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=de(n),e&&e[K]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z(i=e.g[t],n,r,s))&&(Y(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z(t,n,r,s)),(n=-1<e?t[e]:null)&&ae(n))}function ae(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[K])X(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(oe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ce(t))?(X(n,e),0==n.h&&(n.src=null,t[ee]=null)):Y(e)}}}function oe(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new W(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&ae(e),e=n.call(r,t)}return e}function ce(e){return(e=e[ee])instanceof $?e:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(e){return"function"===typeof e?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function he(){B.call(this),this.i=new $(this),this.M=this,this.F=null}function me(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new q(t,e);else if(t instanceof q)t.target=t.target||e;else{var s=t;I(t=new q(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=fe(a,r,!0,t)&&s}if(s=fe(a=t.g=e,r,!0,t)&&s,s=fe(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=fe(a=t.g=n[i],r,!1,t)&&s}function fe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&X(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function pe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ge(e){e.g=pe(()=>{e.g=null,e.i&&(e.i=!1,ge(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}x(he,B),he.prototype[K]=!0,he.prototype.removeEventListener=function(e,t,n,r){ie(this,e,t,n,r)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Y(n[r]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ve extends B{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(e){B.call(this),this.h=e,this.g={}}x(ye,B);var be=[];function we(e){j(e.g,function(e,t){this.g.hasOwnProperty(t)&&ae(e)},e),e.g={}}ye.prototype.N=function(){ye.aa.N.call(this),we(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=s.JSON.stringify,Ne=s.JSON.parse,Ee=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function Se(){}function Ce(e){return e.h||(e.h=e.i())}function ke(){}Se.prototype.h=null;var _e={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function je(){q.call(this,"d")}function Te(){q.call(this,"c")}x(je,q),x(Te,q);var Ae={},Ie=null;function Pe(){return Ie=Ie||new he}function Re(e){q.call(this,Ae.La,e)}function De(e){const t=Pe();me(t,new Re(t))}function Le(e,t){q.call(this,Ae.STAT_EVENT,e),this.stat=t}function Oe(e){const t=Pe();me(t,new Le(t,e))}function Me(e,t){q.call(this,Ae.Ma,e),this.size=t}function Fe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ue(){this.g=!0}function Ve(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return xe(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}Ae.La="serverreachability",x(Re,q),Ae.STAT_EVENT="statevent",x(Le,q),Ae.Ma="timingevent",x(Me,q),Ue.prototype.xa=function(){this.g=!1},Ue.prototype.info=function(){};var ze,Be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function He(){}function We(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ge}function Ge(){this.i=null,this.g="",this.h=!1}x(He,Se),He.prototype.g=function(){return new XMLHttpRequest},He.prototype.i=function(){return{}},ze=new He;var Ke={},Qe={};function Je(e,t,n){e.L=1,e.v=xt(gt(t)),e.m=n,e.P=!0,Ye(e,null)}function Ye(e,t){e.F=Date.now(),Ze(e),e.A=gt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Lt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Ge,e.g=En(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ve(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(be[0]=s.toString()),s=be);for(var i=0;i<s.length;i++){var a=ne(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?T(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),De(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function $e(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Xe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Qe:(n=Number(t.substring(n,r)),isNaN(n)?Ke:(r+=1)+n>t.length?Qe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ze(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fe(c(e.ba,e),t)}function tt(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||yn(e.j,e)}function rt(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,we(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function st(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),on(n)}fn(n),Oe(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Fe(c(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else wn(n,11)}else if((e.K||n.g==e)&&vn(n),!S(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(ut(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,wt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=Nn(r,r.J?r.ia:null,r.W),a.K){dt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(tt(o),Ze(o)),r.g=a}else mn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||wn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?wn(n,7):an(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}De()}catch(u){}}We.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},We.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||De(),tt(this);var n=this.g.Z();this.X=n;t:if($e(this)){var r=nn(this.g);e="";var i=r.length,a=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rt(this),nt(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Oe(12),rt(this),nt(this);break e}Ve(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,st(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Xe(this,o),e==Qe){4==h&&(this.s=4,Oe(14),n=!1),Ve(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ke){this.s=4,Oe(15),Ve(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ve(this.i,this.l,e,null),st(this,e)}if($e(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Oe(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),pn(d),d.M=!0,Oe(11))}}else Ve(this.i,this.l,o,"[Invalid Chunked Response]"),rt(this),nt(this)}else Ve(this.i,this.l,o,null),st(this,o);4==h&&rt(this),this.o&&!this.J&&(4==h?yn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(S(e[r]))continue;var n=P(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),rt(this),nt(this)}}}catch(h){}},We.prototype.cancel=function(){this.J=!0,rt(this)},We.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(De(),Oe(17)),rt(this),this.s=2,nt(this)):et(this,this.S-e)};var it=class{constructor(e,t){this.g=e,this.map=t}};function at(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ot(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ut(e,t){e.g?e.g.add(t):e.h=t}function dt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return N(e.i)}function mt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}at.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ft=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof pt){this.h=e.h,vt(this,e.j),this.o=e.o,this.g=e.g,yt(this,e.s),this.l=e.l;var t=e.i,n=new It;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bt(this,n),this.m=e.m}else e&&(t=String(e).match(ft))?(this.h=!1,vt(this,t[1]||"",!0),this.o=Nt(t[2]||""),this.g=Nt(t[3]||"",!0),yt(this,t[4]),this.l=Nt(t[5]||"",!0),bt(this,t[6]||"",!0),this.m=Nt(t[7]||"")):(this.h=!1,this.i=new It(null,this.h))}function gt(e){return new pt(e)}function vt(e,t,n){e.j=n?Nt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function bt(e,t,n){t instanceof It?(e.i=t,function(e,t){t&&!e.j&&(Pt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Rt(this,t),Lt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Et(t,Tt)),e.i=new It(t,e.h))}function wt(e,t,n){e.i.set(t,n)}function xt(e){return wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Nt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Et(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,St),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function St(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}pt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Et(t,kt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(Et(t,kt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Et(n,"/"==n.charAt(0)?jt:_t,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Et(n,At)),e.join("")};var Ct,kt=/[#\/\?@]/g,_t=/[#\?:]/g,jt=/[#\?]/g,Tt=/[#\?@]/g,At=/#/g;function It(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Pt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Rt(e,t){Pt(e),t=Ot(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Dt(e,t){return Pt(e),t=Ot(e,t),e.g.has(t)}function Lt(e,t,n){Rt(e,t),0<n.length&&(e.i=null,e.g.set(Ot(e,t),N(n)),e.h+=n.length)}function Ot(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Ft(){this.g=new Ee}function Ut(e,t,n){const r=n||"";try{mt(e,function(e,n){let s=e;a(e)&&(s=xe(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Vt(e){this.l=e.Ub||null,this.j=e.eb||!1}function zt(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Bt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function qt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ht(e)}function Ht(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Wt(e){let t="";return j(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Gt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Wt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wt(e,t,n))}function Kt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=It.prototype).add=function(e,t){Pt(this),this.i=null,e=Ot(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Pt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Pt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Pt(this);let t=[];if("string"===typeof e)Dt(this,e)&&(t=t.concat(this.g.get(Ot(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Pt(this),this.i=null,Dt(this,e=Ot(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},x(Vt,Se),Vt.prototype.g=function(){return new zt(this.l,this.j)},Vt.prototype.i=(Ct={},function(){return Ct}),x(zt,he),(e=zt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ht(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qt(this):Ht(this),3==this.readyState&&Bt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,qt(this))},e.Qa=function(e){this.g&&(this.response=e,qt(this))},e.ga=function(){this.g&&qt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),x(Kt,he);var Qt=/^https?$/i,Jt=["POST","PUT"];function Yt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,$t(e),Zt(e)}function $t(e){e.A||(e.A=!0,me(e,"complete"),me(e,"error"))}function Xt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))pe(e.Ea,0,e);else if(me(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(ft)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Qt.test(a?a.toLowerCase():"")}n=i}if(n)me(e,"complete"),me(e,"success");else{e.m=6;try{var o=2<tn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",$t(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||me(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function en(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Ue,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new at(e&&e.concurrentRequestLimit),this.Da=new Ft,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function an(e){if(ln(e),3==e.G){var t=e.U++,n=gt(e.I);if(wt(n,"SID",e.K),wt(n,"RID",t),wt(n,"TYPE","terminate"),dn(e,n),(t=new We(e,e.j,t)).L=2,t.v=xt(gt(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=En(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}xn(e)}function on(e){e.g&&(pn(e),e.g.cancel(),e.g=null)}function ln(e){on(e),e.u&&(s.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function cn(e){if(!ot(e.h)&&!e.s){e.s=!0;var t=e.Ga;M||V(),F||(M(),F=!0),U.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=gt(e.I);wt(r,"SID",e.K),wt(r,"RID",n),wt(r,"AID",e.T),dn(e,r),e.m&&e.o&&Gt(r,e.m,e.o),n=new We(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ut(e.h,n),Je(n,r,t)}function dn(e,t){e.H&&j(e.H,function(e,n){wt(t,n,e)}),e.l&&mt({},function(e,n){wt(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{Ut(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function mn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;M||V(),F||(M(),F=!0),U.add(t,e),e.v=0}}function fn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Fe(c(e.Fa,e),bn(e,e.v)),e.v++,!0)}function pn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new We(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=gt(e.qa);wt(t,"RID","rpc"),wt(t,"SID",e.K),wt(t,"AID",e.T),wt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&wt(t,"TO",e.ja),wt(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Gt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=xt(gt(t)),n.m=null,n.P=!0,Ye(n,e)}function vn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function yn(e,t){var n=null;if(e.g==t){vn(e),pn(e),e.g=null;var r=2}else{if(!ct(e.h,t))return;n=t.D,dt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;me(r=Pe(),new Me(r,n)),cn(e)}else mn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Fe(c(e.Ga,e,t),bn(e,e.B)),e.B++,!0))}(e,t)||2==r&&fn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:wn(e,5);break;case 4:wn(e,10);break;case 3:wn(e,6);break;default:wn(e,2)}}function bn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function wn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new pt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||vt(r,"https"),xt(r),t?function(e,t){const n=new Ue;if(s.Image){const r=new Image;r.onload=u(Mt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Mt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Mt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Mt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ue;const n=new AbortController,r=setTimeout(()=>{n.abort(),Mt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Mt(0,0,!1,t)})}(r.toString(),n)}else Oe(2);e.G=0,e.l&&e.l.sa(t),xn(e),ln(e)}function xn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(E(e.ka,t),E(e.ka,e.i),e.h.i.length=0,N(e.i),e.i.length=0),e.l.ra()}}function Nn(e,t,n){var r=n instanceof pt?gt(n):new pt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),yt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new pt(null);r&&vt(a,r),t&&(a.g=t),i&&yt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&wt(r,n,t),wt(r,"VER",e.la),dn(e,r),r}function En(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Kt(new Vt({eb:n})):new Kt(e.pa)).Ha(e.J),t}function Sn(){}function Cn(){}function kn(e,t){he.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!S(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!S(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Tn(this)}function _n(e){je.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function jn(){Te.call(this),this.status=1}function Tn(e){this.g=e}(e=Kt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ze.g(),this.v=this.o?Ce(this.o):Ce(ze),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Yt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Jt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Yt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,me(this,"complete"),me(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Xt(this):this.bb())},e.bb=function(){Xt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(Ct){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Ct){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ne(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Oe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Nn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new We(this,this.j,e);let i=this.o;if(this.S&&(i?(i=T(i),I(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,s,t),wt(n=gt(this.I),"RID",e),wt(n,"CVER",22),this.D&&wt(n,"X-HTTP-Session-Id",this.D),dn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Wt(i)))+"&"+t:this.m&&Gt(n,this.m,i)),ut(this.h,s),this.Ua&&wt(n,"TYPE","init"),this.P?(wt(n,"$req",t),wt(n,"SID","null"),s.T=!0,Je(s,n,null)):Je(s,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||ot(this.h)||un(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Fe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),on(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,on(this),fn(this),Oe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Sn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Cn.prototype.g=function(e,t){return new kn(e,t)},x(kn,he),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){an(this.g)},kn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=xe(e),e=n);t.i.push(new it(t.Ya++,e)),3==t.G&&cn(t)},kn.prototype.N=function(){this.g.l=null,delete this.j,an(this.g),delete this.g,kn.aa.N.call(this)},x(_n,je),x(jn,Te),x(Tn,Sn),Tn.prototype.ua=function(){me(this.g,"a")},Tn.prototype.ta=function(e){me(this.g,new _n(e))},Tn.prototype.sa=function(e){me(this.g,new jn)},Tn.prototype.ra=function(){me(this.g,"b")},Cn.prototype.createWebChannel=Cn.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,y=w.createWebChannelTransport=function(){return new Cn},v=w.getStatEventTarget=function(){return Pe()},g=w.Event=Ae,p=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,f=w.ErrorCode=Be,qe.COMPLETE="complete",m=w.EventType=qe,ke.EventType=_e,_e.OPEN="a",_e.CLOSE="b",_e.ERROR="c",_e.MESSAGE="d",he.prototype.listen=he.prototype.K,h=w.WebChannel=ke,w.FetchXmlHttpFactory=Vt,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,d=w.XhrIo=Kt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const x="@firebase/firestore",N="4.8.0";class E{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");let S="11.10.0";const C=new o.Vy("@firebase/firestore");function k(){return C.logLevel}function _(e){if(C.logLevel<=o.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(A);C.debug("Firestore (".concat(S,"): ").concat(e),...s)}}function j(e){if(C.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(A);C.error("Firestore (".concat(S,"): ").concat(e),...s)}}function T(e){if(C.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(A);C.warn("Firestore (".concat(S,"): ").concat(e),...s)}}function A(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function I(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,P(e,r,n)}function P(e,t,n){let r="FIRESTORE (".concat(S,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw j(r),new Error(r)}function R(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||P(t,s,r)}function D(e,t){return e}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class M{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class F{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class U{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(E.UNAUTHENTICATED))}shutdown(){}}class V{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class z{constructor(e){this.t=e,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){R(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new M;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new M,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{_("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(_("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new M)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(_("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(R("string"==typeof t.accessToken,31837,{l:t}),new F(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return R(null===e||"string"==typeof e,2055,{h:e}),new E(e)}}class B{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=E.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class q{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new B(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(E.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,i.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){R(void 0===this.o,3512);const n=e=>{null!=e.error&&_("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,_("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{_("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):_("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new H(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(R("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new H(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function G(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function K(){return new TextEncoder}class Q{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=G(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function J(e,t){return e<t?-1:e>t?1:0}function Y(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return J(r,s);{const i=K(),a=X(i.encode($(e,n)),i.encode($(t,n)));return 0!==a?a:J(r,s)}}n+=r>65535?2:1}return J(e.length,t.length)}function $(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function X(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return J(e[n],t[n]);return J(e.length,t.length)}function Z(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const ee="__name__";class te{constructor(e,t,n){void 0===t?t=0:t>e.length&&I(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&I(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===te.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof te?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=te.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return J(e.length,t.length)}static compareSegments(e,t){const n=te.isNumericId(e),r=te.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?te.extractNumericId(e).compare(te.extractNumericId(t)):Y(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class ne extends te{construct(e,t,n){return new ne(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new O(L.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new ne(e)}static emptyPath(){return new ne([])}}const re=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class se extends te{construct(e,t,n){return new se(e,t,n)}static isValidIdentifier(e){return re.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),se.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ee}static keyField(){return new se([ee])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new O(L.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new O(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new O(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new O(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new se(t)}static emptyPath(){return new se([])}}class ie{constructor(e){this.path=e}static fromPath(e){return new ie(ne.fromString(e))}static fromName(e){return new ie(ne.fromString(e).popFirst(5))}static empty(){return new ie(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ne.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new ne(e.slice()))}}function ae(e,t,n){if(!n)throw new O(L.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function oe(e){if(!ie.isDocumentKey(e))throw new O(L.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function le(e){if(ie.isDocumentKey(e))throw new O(L.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ce(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ue(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":I(12329,{type:typeof e})}function de(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new O(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ue(e);throw new O(L.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function he(e,t){if(t<=0)throw new O(L.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function me(e,t){const n={typeString:e};return t&&(n.value=t),n}function fe(e,t){if(!ce(e))throw new O(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(s&&typeof a!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==i&&a!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new O(L.INVALID_ARGUMENT,n);return!0}const pe=-62135596800,ge=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ge);return new ve(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pe)throw new O(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ge}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fe(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:me("string",ve._jsonSchemaVersion),seconds:me("number"),nanoseconds:me("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new ve(0,0))}static max(){return new ye(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const be=-1;class we{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}we.UNKNOWN_ID=-1;function xe(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(1e9===r?new ve(n+1,0):new ve(n,r));return new Ee(s,ie.empty(),t)}function Ne(e){return new Ee(e.readTime,e.key,be)}class Ee{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ee(ye.min(),ie.empty(),be)}static max(){return new Ee(ye.max(),ie.empty(),be)}}function Se(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ie.comparator(e.documentKey,t.documentKey),0!==n?n:J(e.largestBatchId,t.largestBatchId))}const Ce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ke{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function _e(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==Ce)throw e;_("LocalStore","Unexpectedly lost primary lease")}class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&I(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new je((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof je?t:je.resolve(t)}catch(e){return je.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):je.reject(t)}static resolve(e){return new je((t,n)=>{t(e)})}static reject(e){return new je((t,n)=>{n(e)})}static waitFor(e){return new je((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=je.resolve(!1);for(const n of e)t=t.next(e=>e?je.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new je((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new je((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Te(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ae(e){return"IndexedDbTransactionError"===e.name}class Ie{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ie.ue=-1;const Pe=-1;function Re(e){return null==e}function De(e){return 0===e&&1/e==-1/0}function Le(e){return"number"==typeof e&&Number.isInteger(e)&&!De(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Oe="\x01";function Me(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ue(t)),t=Fe(e.get(n),t);return Ue(t)}function Fe(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Oe:n+="\x01\x11";break;default:n+=t}}return n}function Ue(e){return e+Oe+"\x01"}const Ve="remoteDocuments",ze="owner",Be="mutationQueues",qe="mutations";const He="documentMutations",We="remoteDocumentsV14",Ge="remoteDocumentGlobal",Ke="targets",Qe="targetDocuments",Je="targetGlobal",Ye="collectionParents",$e="clientMetadata",Xe="bundles",Ze="namedQueries",et="indexConfiguration",tt="indexState",nt="indexEntries",rt="documentOverlays",st="globals",it=[Be,qe,He,Ve,Ke,ze,Je,Qe,$e,Ge,Ye,Xe,Ze],at=[Be,qe,He,We,Ke,ze,Je,Qe,$e,Ge,Ye,Xe,Ze,rt],ot=at,lt=[...ot,et,tt,nt];function ct(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ut(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ht{constructor(e,t){this.comparator=e,this.root=t||ft.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mt(this.root,e,this.comparator,!1)}getReverseIterator(){return new mt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mt(this.root,e,this.comparator,!0)}}class mt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:ft.RED,this.left=null!=r?r:ft.EMPTY,this.right=null!=s?s:ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new ft(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ft.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw I(43730,{key:this.key,value:this.value});if(this.right.isRed())throw I(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw I(27949);return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1,ft.EMPTY=new class{constructor(){this.size=0}get key(){throw I(57766)}get value(){throw I(16141)}get color(){throw I(16727)}get left(){throw I(29726)}get right(){throw I(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gt(this.data.getIterator())}getIteratorFrom(e){return new gt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof pt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pt(this.comparator);return t.data=e,t}}class gt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vt{constructor(e){this.fields=e,e.sort(se.comparator)}static empty(){return new vt([])}unionWith(e){let t=new pt(se.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new vt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Z(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class yt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yt("Invalid base64 string: "+e):e}}(e);return new bt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const wt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xt(e){if(R(!!e,39018),"string"==typeof e){let t=0;const n=wt.exec(e);if(R(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Nt(e.seconds),nanos:Nt(e.nanos)}}function Nt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Et(e){return"string"==typeof e?bt.fromBase64String(e):bt.fromUint8Array(e)}const St="server_timestamp",Ct="__type__",kt="__previous_value__",_t="__local_write_time__";function jt(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ct])||void 0===n?void 0:n.stringValue)===St}function Tt(e){const t=e.mapValue.fields[kt];return jt(t)?Tt(t):t}function At(e){const t=xt(e.mapValue.fields[_t].timestampValue);return new ve(t.seconds,t.nanos)}class It{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Pt="(default)";class Rt{constructor(e,t){this.projectId=e,this.database=t||Pt}static empty(){return new Rt("","")}get isDefaultDatabase(){return this.database===Pt}isEqual(e){return e instanceof Rt&&e.projectId===this.projectId&&e.database===this.database}}const Dt="__type__",Lt="__max__",Ot={mapValue:{fields:{__type__:{stringValue:Lt}}}},Mt="__vector__",Ft="value";function Ut(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jt(e)?4:nn(e)?9007199254740991:en(e)?10:11:I(28295,{value:e})}function Vt(e,t){if(e===t)return!0;const n=Ut(e);if(n!==Ut(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return At(e).isEqual(At(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=xt(e.timestampValue),r=xt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Et(e.bytesValue).isEqual(Et(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Nt(e.geoPointValue.latitude)===Nt(t.geoPointValue.latitude)&&Nt(e.geoPointValue.longitude)===Nt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Nt(e.integerValue)===Nt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Nt(e.doubleValue),r=Nt(t.doubleValue);return n===r?De(n)===De(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Z(e.arrayValue.values||[],t.arrayValue.values||[],Vt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ct(n)!==ct(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Vt(n[s],r[s])))return!1;return!0}(e,t);default:return I(52216,{left:e})}}function zt(e,t){return void 0!==(e.values||[]).find(e=>Vt(e,t))}function Bt(e,t){if(e===t)return 0;const n=Ut(e),r=Ut(t);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Nt(e.integerValue||e.doubleValue),r=Nt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return qt(e.timestampValue,t.timestampValue);case 4:return qt(At(e),At(t));case 5:return Y(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Et(e),r=Et(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=J(n[s],r[s]);if(0!==e)return e}return J(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=J(Nt(e.latitude),Nt(t.latitude));return 0!==n?n:J(Nt(e.longitude),Nt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ht(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Ft])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Ft])||void 0===r?void 0:r.arrayValue,u=J((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Ht(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ot.mapValue&&t===Ot.mapValue)return 0;if(e===Ot.mapValue)return 1;if(t===Ot.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Y(r[a],i[a]);if(0!==e)return e;const t=Bt(n[r[a]],s[i[a]]);if(0!==t)return t}return J(r.length,i.length)}(e.mapValue,t.mapValue);default:throw I(23264,{le:n})}}function qt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return J(e,t);const n=xt(e),r=xt(t),s=J(n.seconds,r.seconds);return 0!==s?s:J(n.nanos,r.nanos)}function Ht(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Bt(n[s],r[s]);if(e)return e}return J(n.length,r.length)}function Wt(e){return Gt(e)}function Gt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=xt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Et(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ie.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Gt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Gt(e.fields[s]));return n+"}"}(e.mapValue):I(61005,{value:e})}function Kt(e){switch(Ut(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Tt(e);return t?16+Kt(t):16;case 5:return 2*e.stringValue.length;case 6:return Et(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Kt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ut(e.fields,(e,n)=>{t+=e.length+Kt(n)}),t}(e.mapValue);default:throw I(13486,{value:e})}}function Qt(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Jt(e){return!!e&&"integerValue"in e}function Yt(e){return!!e&&"arrayValue"in e}function $t(e){return!!e&&"nullValue"in e}function Xt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zt(e){return!!e&&"mapValue"in e}function en(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Dt])||void 0===n?void 0:n.stringValue)===Mt}function tn(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ut(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=tn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=tn(e.arrayValue.values[n]);return t}return Object.assign({},e)}function nn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Lt}class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tn(t)}setAll(e){let t=se.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=tn(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Zt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Zt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ut(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new rn(tn(this.value))}}function sn(e){const t=[];return ut(e.fields,(e,n)=>{const r=new se([e]);if(Zt(n)){const e=sn(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new vt(t)}class an{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new an(e,0,ye.min(),ye.min(),ye.min(),rn.empty(),0)}static newFoundDocument(e,t,n,r){return new an(e,1,t,ye.min(),n,r,0)}static newNoDocument(e,t){return new an(e,2,t,ye.min(),ye.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,ye.min(),ye.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class on{constructor(e,t){this.position=e,this.inclusive=t}}function ln(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?ie.comparator(ie.fromName(a.referenceValue),n.key):Bt(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function cn(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vt(e.position[n],t.position[n]))return!1;return!0}class un{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function dn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class hn{}class mn extends hn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xn(e,t,n):"array-contains"===t?new Cn(e,n):"in"===t?new kn(e,n):"not-in"===t?new _n(e,n):"array-contains-any"===t?new jn(e,n):new mn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Nn(e,n):new En(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Bt(t,this.value)):null!==t&&Ut(this.value)===Ut(t)&&this.matchesComparison(Bt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return I(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends hn{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new fn(e,t)}matches(e){return pn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function pn(e){return"and"===e.op}function gn(e){return vn(e)&&pn(e)}function vn(e){for(const t of e.filters)if(t instanceof fn)return!1;return!0}function yn(e){if(e instanceof mn)return e.field.canonicalString()+e.op.toString()+Wt(e.value);if(gn(e))return e.filters.map(e=>yn(e)).join(",");{const t=e.filters.map(e=>yn(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function bn(e,t){return e instanceof mn?function(e,t){return t instanceof mn&&e.op===t.op&&e.field.isEqual(t.field)&&Vt(e.value,t.value)}(e,t):e instanceof fn?function(e,t){return t instanceof fn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&bn(n,t.filters[r]),!0)}(e,t):void I(19439)}function wn(e){return e instanceof mn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Wt(e.value))}(e):e instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(wn).join(" ,")+"}"}(e):"Filter"}class xn extends mn{constructor(e,t,n){super(e,t,n),this.key=ie.fromName(n.referenceValue)}matches(e){const t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nn extends mn{constructor(e,t){super(e,"in",t),this.keys=Sn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class En extends mn{constructor(e,t){super(e,"not-in",t),this.keys=Sn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ie.fromName(e.referenceValue))}class Cn extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yt(t)&&zt(t.arrayValue,this.value)}}class kn extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zt(this.value.arrayValue,t)}}class _n extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(zt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!zt(this.value.arrayValue,t)}}class jn extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>zt(this.value.arrayValue,e))}}class Tn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Pe=null}}function An(e){return new Tn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function In(e){const t=D(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>yn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Re(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Wt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Wt(e)).join(",")),t.Pe=e}return t.Pe}function Pn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cn(e.startAt,t.startAt)&&cn(e.endAt,t.endAt)}function Rn(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Dn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Ln(e,t,n,r,s,i,a,o){return new Dn(e,t,n,r,s,i,a,o)}function On(e){return new Dn(e)}function Mn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fn(e){return null!==e.collectionGroup}function Un(e){const t=D(e);if(null===t.Te){t.Te=[];const e=new Set;for(const s of t.explicitOrderBy)t.Te.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new pt(se.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new un(r,n))}),e.has(se.keyField().canonicalString())||t.Te.push(new un(se.keyField(),n))}return t.Te}function Vn(e){const t=D(e);return t.Ie||(t.Ie=zn(t,Un(e))),t.Ie}function zn(e,t){if("F"===e.limitType)return An(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new un(e.field,t)});const n=e.endAt?new on(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new on(e.startAt.position,e.startAt.inclusive):null;return An(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Bn(e,t){const n=e.filters.concat([t]);return new Dn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function qn(e,t,n){return new Dn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hn(e,t){return Pn(Vn(e),Vn(t))&&e.limitType===t.limitType}function Wn(e){return"".concat(In(Vn(e)),"|lt:").concat(e.limitType)}function Gn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>wn(e)).join(", "),"]")),Re(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Wt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Wt(e)).join(",")),"Target(".concat(t,")")}(Vn(e)),"; limitType=").concat(e.limitType,")")}function Kn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ie.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Un(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ln(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Un(e),t))&&!(e.endAt&&!function(e,t,n){const r=ln(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Un(e),t))}(e,t)}function Qn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jn(e){return(t,n)=>{let r=!1;for(const s of Un(e)){const e=Yn(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Yn(e,t,n){const r=e.field.isKeyField()?ie.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Bt(r,s):I(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return I(19790,{direction:e.dir})}}class $n{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ut(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return dt(this.inner)}size(){return this.innerSize}}const Xn=new ht(ie.comparator);function Zn(){return Xn}const er=new ht(ie.comparator);function tr(){let e=er;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function nr(e){let t=er;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function rr(){return ir()}function sr(){return ir()}function ir(){return new $n(e=>e.toString(),(e,t)=>e.isEqual(t))}const ar=new ht(ie.comparator),or=new pt(ie.comparator);function lr(){let e=or;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const cr=new pt(J);function ur(){return cr}function dr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:De(t)?"-0":t}}function hr(e){return{integerValue:""+e}}function mr(e,t){return Le(t)?hr(t):dr(e,t)}class fr{constructor(){this._=void 0}}function pr(e,t,n){return e instanceof yr?function(e,t){const n={fields:{[Ct]:{stringValue:St},[_t]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&jt(t)&&(t=Tt(t)),t&&(n.fields[kt]=t),{mapValue:n}}(n,t):e instanceof br?wr(e,t):e instanceof xr?Nr(e,t):function(e,t){const n=vr(e,t),r=Sr(n)+Sr(e.Ee);return Jt(n)&&Jt(e.Ee)?hr(r):dr(e.serializer,r)}(e,t)}function gr(e,t,n){return e instanceof br?wr(e,t):e instanceof xr?Nr(e,t):n}function vr(e,t){return e instanceof Er?function(e){return Jt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yr extends fr{}class br extends fr{constructor(e){super(),this.elements=e}}function wr(e,t){const n=Cr(t);for(const r of e.elements)n.some(e=>Vt(e,r))||n.push(r);return{arrayValue:{values:n}}}class xr extends fr{constructor(e){super(),this.elements=e}}function Nr(e,t){let n=Cr(t);for(const r of e.elements)n=n.filter(e=>!Vt(e,r));return{arrayValue:{values:n}}}class Er extends fr{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Sr(e){return Nt(e.integerValue||e.doubleValue)}function Cr(e){return Yt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class kr{constructor(e,t){this.field=e,this.transform=t}}class _r{constructor(e,t){this.version=e,this.transformResults=t}}class jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jr}static exists(e){return new jr(void 0,e)}static updateTime(e){return new jr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ar{}function Ir(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new zr(e.key,jr.none()):new Or(e.key,e.data,jr.none());{const n=e.data,r=rn.empty();let s=new pt(se.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Mr(e.key,r,new vt(s.toArray()),jr.none())}}function Pr(e,t,n){e instanceof Or?function(e,t,n){const r=e.value.clone(),s=Ur(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Mr?function(e,t,n){if(!Tr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ur(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Fr(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Rr(e,t,n,r){return e instanceof Or?function(e,t,n,r){if(!Tr(e.precondition,t))return n;const s=e.value.clone(),i=Vr(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Mr?function(e,t,n,r){if(!Tr(e.precondition,t))return n;const s=Vr(e.fieldTransforms,r,t),i=t.data;return i.setAll(Fr(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Tr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Dr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=vr(r.transform,e||null);null!=s&&(null===n&&(n=rn.empty()),n.set(r.field,s))}return n||null}function Lr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Z(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof br&&t instanceof br||e instanceof xr&&t instanceof xr?Z(e.elements,t.elements,Vt):e instanceof Er&&t instanceof Er?Vt(e.Ee,t.Ee):e instanceof yr&&t instanceof yr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Or extends Ar{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Mr extends Ar{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Fr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ur(e,t,n){const r=new Map;R(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,gr(a,o,n[s]))}return r}function Vr(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,pr(e,i,t))}return r}class zr extends Ar{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Br extends Ar{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Pr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Rr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Rr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=sr();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Ir(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(ye.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lr())}isEqual(e){return this.batchId===e.batchId&&Z(this.mutations,e.mutations,(e,t)=>Lr(e,t))&&Z(this.baseMutations,e.baseMutations,(e,t)=>Lr(e,t))}}class Hr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){R(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=ar;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Hr(e,t,n,r)}}class Wr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Gr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kr,Qr;function Jr(e){switch(e){case L.OK:return I(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return I(15467,{code:e})}}function Yr(e){if(void 0===e)return j("GRPC error has no .code"),L.UNKNOWN;switch(e){case Kr.OK:return L.OK;case Kr.CANCELLED:return L.CANCELLED;case Kr.UNKNOWN:return L.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return L.INTERNAL;case Kr.UNAVAILABLE:return L.UNAVAILABLE;case Kr.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Kr.NOT_FOUND:return L.NOT_FOUND;case Kr.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Kr.ABORTED:return L.ABORTED;case Kr.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Kr.DATA_LOSS:return L.DATA_LOSS;default:return I(39323,{code:e})}}(Qr=Kr||(Kr={}))[Qr.OK=0]="OK",Qr[Qr.CANCELLED=1]="CANCELLED",Qr[Qr.UNKNOWN=2]="UNKNOWN",Qr[Qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qr[Qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qr[Qr.NOT_FOUND=5]="NOT_FOUND",Qr[Qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qr[Qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qr[Qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qr[Qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qr[Qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qr[Qr.ABORTED=10]="ABORTED",Qr[Qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qr[Qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qr[Qr.INTERNAL=13]="INTERNAL",Qr[Qr.UNAVAILABLE=14]="UNAVAILABLE",Qr[Qr.DATA_LOSS=15]="DATA_LOSS";let $r=null;const Xr=new r([4294967295,4294967295],0);function Zr(e){const t=K().encode(e),n=new s;return n.update(t),new Uint8Array(n.digest())}function es(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,s],0),new r([i,a],0)]}class ts{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ns("Invalid padding: ".concat(t));if(n<0)throw new ns("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ns("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ns("Invalid padding when bitmap length is 0: ".concat(t));this.fe=8*e.length-t,this.ge=r.fromNumber(this.fe)}pe(e,t,n){let s=e.add(t.multiply(r.fromNumber(n)));return 1===s.compare(Xr)&&(s=new r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=Zr(e),[n,r]=es(t);for(let s=0;s<this.hashCount;s++){const e=this.pe(n,r,s);if(!this.ye(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new ts(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.fe)return;const t=Zr(e),[n,r]=es(t);for(let s=0;s<this.hashCount;s++){const e=this.pe(n,r,s);this.we(e)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ns extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rs{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ss.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new rs(ye.min(),r,new ht(J),Zn(),lr())}}class ss{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ss(n,t,lr(),lr(),lr())}}class is{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class as{constructor(e,t){this.targetId=e,this.De=t}}class os{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ls{constructor(){this.ve=0,this.Ce=ds(),this.Fe=bt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=lr(),t=lr(),n=lr();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:I(38017,{changeType:s})}}),new ss(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=ds()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,R(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class cs{constructor(e){this.We=e,this.Ge=new Map,this.ze=Zn(),this.je=us(),this.Je=us(),this.He=new ht(J)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:I(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const s=r.target;if(Rn(s))if(0===n){const e=new ie(s.path);this.Xe(t,e,an.newNoDocument(e,ye.min()))}else R(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),s=n?this.ut(n,e,r):1;if(0!==s){this.rt(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}null==$r||$r.ct(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.De,this.We.lt(),n,s))}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Et(n).toUint8Array()}catch(e){if(e instanceof yt)return T("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new ts(i,r,s)}catch(e){return T(e instanceof ns?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.fe?null:a}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.We.lt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const s=this.st(r);if(s){if(n.current&&Rn(s.target)){const t=new ie(s.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,an.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=lr();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new rs(e,t,this.He,this.ze,n);return this.ze=Zn(),this.je=us(),this.Je=us(),this.He=new ht(J),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new ls,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new pt(J),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new pt(J),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||_("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ls),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function us(){return new ht(ie.comparator)}function ds(){return new ht(ie.comparator)}const hs={asc:"ASCENDING",desc:"DESCENDING"},ms={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fs={and:"AND",or:"OR"};class ps{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gs(e,t){return e.useProto3Json||Re(t)?t:{value:t}}function vs(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ys(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bs(e,t){return vs(e,t.toTimestamp())}function ws(e){return R(!!e,49232),ye.fromTimestamp(function(e){const t=xt(e);return new ve(t.seconds,t.nanos)}(e))}function xs(e,t){return Ns(e,t).canonicalString()}function Ns(e,t){const n=function(e){return new ne(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Es(e){const t=ne.fromString(e);return R(qs(t),10190,{key:t.toString()}),t}function Ss(e,t){return xs(e.databaseId,t.path)}function Cs(e,t){const n=Es(t);if(n.get(1)!==e.databaseId.projectId)throw new O(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new O(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ie(Ts(n))}function ks(e,t){return xs(e.databaseId,t)}function _s(e){const t=Es(e);return 4===t.length?ne.emptyPath():Ts(t)}function js(e){return new ne(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ts(e){return R(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function As(e,t,n){return{name:Ss(e,t),fields:n.value.mapValue.fields}}function Is(e,t){let n;if(t instanceof Or)n={update:As(e,t.key,t.value)};else if(t instanceof zr)n={delete:Ss(e,t.key)};else if(t instanceof Mr)n={update:As(e,t.key,t.data),updateMask:Bs(t.fieldMask)};else{if(!(t instanceof Br))return I(16599,{Rt:t.type});n={verify:Ss(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof yr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof br)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Er)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw I(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bs(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:I(27497)}(e,t.precondition)),n}function Ps(e,t){return{documents:[ks(e,t.path)]}}function Rs(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ks(e,s);const i=function(e){if(0!==e.length)return zs(fn.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Us(e.field),direction:Os(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=gs(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:s}}function Ds(e){let t=_s(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){R(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Ls(e);return t instanceof fn&&gn(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new un(Vs(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Re(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new on(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new on(n,t)}(n.endAt)),Ln(t,s,a,i,o,"F",l,c)}function Ls(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vs(e.unaryFilter.field);return mn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Vs(e.unaryFilter.field);return mn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vs(e.unaryFilter.field);return mn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Vs(e.unaryFilter.field);return mn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return I(61313);default:return I(60726)}}(e):void 0!==e.fieldFilter?function(e){return mn.create(Vs(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return I(58110);default:return I(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(e=>Ls(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return I(1026)}}(e.compositeFilter.op))}(e):I(30097,{filter:e})}function Os(e){return hs[e]}function Ms(e){return ms[e]}function Fs(e){return fs[e]}function Us(e){return{fieldPath:e.canonicalString()}}function Vs(e){return se.fromServerFormat(e.fieldPath)}function zs(e){return e instanceof mn?function(e){if("=="===e.op){if(Xt(e.value))return{unaryFilter:{field:Us(e.field),op:"IS_NAN"}};if($t(e.value))return{unaryFilter:{field:Us(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xt(e.value))return{unaryFilter:{field:Us(e.field),op:"IS_NOT_NAN"}};if($t(e.value))return{unaryFilter:{field:Us(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Us(e.field),op:Ms(e.op),value:e.value}}}(e):e instanceof fn?function(e){const t=e.getFilters().map(e=>zs(e));return 1===t.length?t[0]:{compositeFilter:{op:Fs(e.op),filters:t}}}(e):I(54877,{filter:e})}function Bs(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function qs(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Hs{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ye.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ye.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bt.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ws{constructor(e){this.gt=e}}function Gs(e){const t=Ds({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qn(t,t.limit,"L"):t}class Ks{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Nt(e.integerValue));else if("doubleValue"in e){const n=Nt(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),De(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=xt(n)),t.Mt("".concat(n.seconds||"")),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Et(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?nn(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):en(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):I(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;const s=e.fields||{};this.Ct(t,53);const i=Ft,a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(Nt(a)),this.xt(i,t),this.Dt(s[i],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),ie.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}Ks.Ut=new Ks;class Qs{constructor(){this.Dn=new Js}addToCollectionParentIndex(e,t){return this.Dn.add(t),je.resolve()}getCollectionParents(e,t){return je.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return je.resolve()}deleteFieldIndex(e,t){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,t){return je.resolve()}getDocumentsMatchingTarget(e,t){return je.resolve(null)}getIndexType(e,t){return je.resolve(0)}getFieldIndexes(e,t){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,t){return je.resolve(Ee.min())}getMinOffsetFromCollectionGroup(e,t){return je.resolve(Ee.min())}updateCollectionGroup(e,t,n){return je.resolve()}updateIndexEntries(e,t){return je.resolve()}}class Js{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new pt(ne.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new pt(ne.comparator)).toArray()}}new Uint8Array(0);const Ys={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$s=41943040;class Xs{static withCacheSize(e){return new Xs(e,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Xs.DEFAULT_COLLECTION_PERCENTILE=10,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xs.DEFAULT=new Xs($s,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xs.DISABLED=new Xs(-1,0,0);class Zs{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Zs(0)}static ur(){return new Zs(-1)}}const ei="LruGarbageCollector",ti=1048576;function ni(e,t){let[n,r]=e,[s,i]=t;const a=J(n,s);return 0===a?J(r,i):a}class ri{constructor(e){this.Tr=e,this.buffer=new pt(ni),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ni(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class si{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){_(ei,"Garbage collection scheduled in ".concat(e,"ms")),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ae(e)?_(ei,"Ignoring IndexedDB error during garbage collection: ",e):await _e(e)}await this.Rr(3e5)})}}class ii{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return je.resolve(Ie.ue);const n=new ri(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(_("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(Ys)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(_("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Ys):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,s,i,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(_("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),k()<=o.$b.DEBUG&&_("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(l-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-l)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),je.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function ai(e,t){return new ii(e,t)}class oi{constructor(){this.changes=new $n(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?je.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class li{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ci{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Rr(n.mutation,e,vt.empty(),ve.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,lr()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lr();const r=rr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=tr();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=rr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,lr()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Zn();const i=ir(),a=ir();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Mr)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Rr(a.mutation,t,a.mutation.getFieldMask(),ve.now())):i.set(t.key,vt.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new li(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=ir();let r=new ht((e,t)=>e-t),s=lr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||vt.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||lr()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=sr();l.forEach(e=>{if(!s.has(e)){const r=Ir(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return je.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):je.resolve(rr());let a=be,o=s;return i.next(t=>je.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?je.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,lr())).next(e=>({batchId:a,changes:nr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(e=>{let t=tr();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=tr();return this.indexManager.getCollectionParents(e,s).next(a=>je.forEach(a,a=>{const o=function(e,t){return new Dn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,an.newInvalidDocument(r)))});let n=tr();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Rr(i.mutation,r,vt.empty(),ve.now()),Kn(t,r)&&(n=n.insert(e,r))}),n})}}class ui{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return je.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ws(e.createTime)}}(t)),je.resolve()}getNamedQuery(e,t){return je.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:Gs(e.bundledQuery),readTime:ws(e.readTime)}}(t)),je.resolve()}}class di{constructor(){this.overlays=new ht(ie.comparator),this.kr=new Map}getOverlay(e,t){return je.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rr();return je.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),je.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),je.resolve()}getOverlaysForCollection(e,t,n){const r=rr(),s=t.length+1,i=new ie(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return je.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new ht((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=rr(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=rr(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return je.resolve(a)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Wr(t,n));let s=this.kr.get(t);void 0===s&&(s=lr(),this.kr.set(t,s)),this.kr.set(t,s.add(n.key))}}class hi{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,je.resolve()}}class mi{constructor(){this.qr=new pt(fi.Qr),this.$r=new pt(fi.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new fi(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new fi(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new ie(new ne([])),n=new fi(t,e),r=new fi(t,e+1),s=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),s.push(e.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ie(new ne([])),n=new fi(t,e),r=new fi(t,e+1);let s=lr();return this.$r.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new fi(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class fi{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ie.comparator(e.key,t.key)||J(e.Hr,t.Hr)}static Ur(e,t){return J(e.Hr,t.Hr)||ie.comparator(e.key,t.key)}}class pi{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new pt(fi.Qr)}checkEmpty(e){return je.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new qr(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Yr=this.Yr.add(new fi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return je.resolve(i)}lookupMutationBatch(e,t){return je.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),s=r<0?0:r;return je.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(0===this.mutationQueue.length?Pe:this.er-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new fi(t,0),r=new fi(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);s.push(t)}),je.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new pt(J);return t.forEach(e=>{const t=new fi(e,0),r=new fi(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),je.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ie.isDocumentKey(s)||(s=s.child(""));const i=new fi(new ie(s),0);let a=new pt(J);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Hr)),!0)},i),je.resolve(this.ei(a))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){R(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return je.forEach(t.mutations,r=>{const s=new fi(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new fi(t,0),r=this.Yr.firstAfterOrEqual(n);return je.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gi{constructor(e){this.ni=e,this.docs=new ht(ie.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return je.resolve(n?n.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let n=Zn();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():an.newInvalidDocument(e))}),je.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Zn();const i=t.path,a=new ie(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Se(Ne(a),n)<=0||(r.has(a.key)||Kn(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return je.resolve(s)}getAllFromCollectionGroup(e,t,n,r){I(9500)}ri(e,t){return je.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new vi(this)}getSize(e){return je.resolve(this.size)}}class vi extends oi{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),je.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class yi{constructor(e){this.persistence=e,this.ii=new $n(e=>In(e),Pn),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.si=0,this.oi=new mi,this.targetCount=0,this._i=Zs.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),je.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Zs(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,je.resolve()}updateTargetData(e,t){return this.hr(t),je.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.ii.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ii.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),je.waitFor(s).next(()=>r)}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return je.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),je.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),je.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),je.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return je.resolve(n)}containsKey(e,t){return je.resolve(this.oi.containsKey(t))}}class bi{constructor(e,t){this.ai={},this.overlays={},this.ui=new Ie(0),this.ci=!1,this.ci=!0,this.li=new hi,this.referenceDelegate=e(this),this.hi=new yi(this),this.indexManager=new Qs,this.remoteDocumentCache=function(e){return new gi(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new Ws(t),this.Ti=new ui(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new di,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new pi(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){_("MemoryPersistence","Starting transaction:",e);const r=new wi(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return je.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class wi extends ke{constructor(e){super(),this.currentSequenceNumber=e}}class xi{constructor(e){this.persistence=e,this.Ai=new mi,this.Ri=null}static Vi(e){return new xi(e)}get mi(){if(this.Ri)return this.Ri;throw I(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),je.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),je.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),je.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.mi,n=>{const r=ie.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,ye.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return je.or([()=>je.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ni{constructor(e,t){this.persistence=e,this.gi=new $n(e=>Me(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ai(this,t)}static Vi(e,t){return new Ni(e,t)}Ii(){}di(e){return je.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return je.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?je.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,s.removeEntry(r,ye.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),je.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),je.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),je.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),je.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kt(e.data.value)),t}Sr(e,t,n){return je.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return je.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ei{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=lr(),r=lr();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ei(e,t.fromCache,n,r)}}class Si{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ci{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(0,l.nr)()?8:Te((0,l.ZQ)())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ps(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ys(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Si;return this.ws(e,t,n).next(r=>{if(s.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>s.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(k()<=o.$b.DEBUG&&_("QueryEngine","SDK will not create cache indexes for query:",Gn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),je.resolve()):(k()<=o.$b.DEBUG&&_("QueryEngine","Query:",Gn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(k()<=o.$b.DEBUG&&_("QueryEngine","The SDK decides to create cache indexes for query:",Gn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(t))):je.resolve())}ps(e,t){if(Mn(t))return je.resolve(null);let n=Vn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=qn(t,null,"F"),n=Vn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=lr(...r);return this.gs.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.bs(t,r);return this.Ds(t,i,s,n.readTime)?this.ps(e,qn(t,null,"F")):this.vs(e,i,t,n)}))})))}ys(e,t,n,r){return Mn(t)||r.isEqual(ye.min())?je.resolve(null):this.gs.getDocuments(e,n).next(s=>{const i=this.bs(t,s);return this.Ds(t,i,n,r)?je.resolve(null):(k()<=o.$b.DEBUG&&_("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gn(t)),this.vs(e,i,t,xe(r,be)).next(e=>e))})}bs(e,t){let n=new pt(Jn(e));return t.forEach((t,r)=>{Kn(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,t,n){return k()<=o.$b.DEBUG&&_("QueryEngine","Using full collection scan to execute query:",Gn(t)),this.gs.getDocumentsMatchingQuery(e,t,Ee.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const ki="LocalStore",_i=3e8;class ji{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new ht(J),this.Ms=new $n(e=>In(e),Pn),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ci(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function Ti(e,t,n,r){return new ji(e,t,n,r)}async function Ai(e,t){const n=D(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=lr();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Bs:e,removedBatchIds:s,addedBatchIds:i}))})})}function Ii(e){const t=D(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function Pi(e,t,n){let r=lr(),s=lr();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Zn();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(ye.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):_(ki,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ls:r,ks:s}})}function Ri(e,t){const n=D(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Pe),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Di(e,t){const n=D(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(s=>s?(r=s,je.resolve(r)):n.hi.allocateTargetId(e).next(s=>(r=new Hs(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}async function Li(e,t,n){const r=D(e),s=r.Fs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Ae(e))throw e;_(ki,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Fs=r.Fs.remove(t),r.Ms.delete(s.target)}function Oi(e,t,n){const r=D(e);let s=ye.min(),i=lr();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=D(e),s=r.Ms.get(n);return void 0!==s?je.resolve(r.Fs.get(s)):r.hi.getTargetData(t,n)}(r,e,Vn(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?s:ye.min(),n?i:lr())).next(e=>(Mi(r,Qn(t),e),{documents:e,qs:i})))}function Mi(e,t,n){let r=e.xs.get(t)||ye.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}class Fi{constructor(){this.activeTargetIds=ur()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ui{constructor(){this.Fo=new Fi,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Fi,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vi{xo(e){}shutdown(){}}const zi="ConnectivityMonitor";class Bi{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){_(zi,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){_(zi,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qi=null;function Hi(){return null===qi?qi=268435456+Math.round(2147483648*Math.random()):qi++,"0x"+qi.toString(16)}const Wi="RestConnection",Gi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ki{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.Ko=this.databaseId.database===Pt?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,s){const i=Hi(),a=this.Go(e,t.toUriEncodedString());_(Wi,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(o,r,s);const{host:c}=new URL(a),u=(0,l.zJ)(c);return this.jo(e,a,o,n,u).then(t=>(_(Wi,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw T(Wi,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Jo(e,t,n,r,s,i){return this.Wo(e,t,n,r,s)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+S,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=Gi[e];return"".concat(this.$o,"/v1/").concat(t,":").concat(n)}terminate(){}}class Qi{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Ji="WebChannelConnection";class Yi extends Ki{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,s){const i=Hi();return new Promise((s,a)=>{const o=new d;o.setWithCredentials(!0),o.listenOnce(m.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case f.NO_ERROR:const t=o.getResponseJson();_(Ji,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case f.TIMEOUT:_(Ji,"RPC '".concat(e,"' ").concat(i," timed out")),a(new O(L.DEADLINE_EXCEEDED,"Request time out"));break;case f.HTTP_ERROR:const n=o.getStatus();if(_(Ji,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(t)>=0?t:L.UNKNOWN}(t.status);a(new O(e,t.message))}else a(new O(L.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new O(L.UNAVAILABLE,"Connection failed."));break;default:I(9055,{c_:e,streamId:i,l_:o.getLastErrorCode(),h_:o.getLastError()})}}finally{_(Ji,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);_(Ji,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}P_(e,t,n){const r=Hi(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=y(),a=v(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.zo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");_(Ji,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.T_(u);let d=!1,m=!1;const f=new Qi({Ho:t=>{m?_(Ji,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(_(Ji,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),_(Ji,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Yo:()=>u.close()}),b=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(u,h.EventType.OPEN,()=>{m||(_(Ji,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.s_())}),b(u,h.EventType.CLOSE,()=>{m||(m=!0,_(Ji,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.__(),this.I_(u))}),b(u,h.EventType.ERROR,t=>{m||(m=!0,T(Ji,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.__(new O(L.UNAVAILABLE,"The operation could not be completed")))}),b(u,h.EventType.MESSAGE,t=>{var n;if(!m){const s=t.data[0];R(!!s,16349);const i=s,a=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){_(Ji,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Kr[e];if(void 0!==t)return Yr(t)}(t),s=a.message;void 0===n&&(n=L.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),m=!0,f.__(new O(n,s)),u.close()}else _(Ji,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.a_(s)}}),b(a,g.STAT_EVENT,t=>{t.stat===p.PROXY?_(Ji,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===p.NOPROXY&&_(Ji,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function $i(){return"undefined"!=typeof document?document:null}function Xi(e){return new ps(e,!0)}class Zi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&_("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.R_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const ea="PersistentStream";class ta{constructor(e,t,n,r,s,i,a,o){this.Fi=e,this.w_=n,this.S_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Zi(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(j(t.toString()),j("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===L.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.b_===t&&this.W_(n,r)},t=>{e(()=>{const e=new O(L.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return _(ea,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(_(ea,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class na extends ta{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:I(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(R(void 0===t||"string"==typeof t,58123),bt.fromBase64String(t||"")):(R(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),bt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?L.UNKNOWN:Yr(e.code);return new O(t,e.message||"")}(a);n=new os(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Cs(e,r.document.name),i=ws(r.document.updateTime),a=r.document.createTime?ws(r.document.createTime):ye.min(),o=new rn({mapValue:{fields:r.document.fields}}),l=an.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new is(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Cs(e,r.document),i=r.readTime?ws(r.readTime):ye.min(),a=an.newNoDocument(s,i),o=r.removedTargetIds||[];n=new is([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Cs(e,r.document),i=r.removedTargetIds||[];n=new is([],i,s,null)}else{if(!("filter"in t))return I(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Gr(r,s),a=e.targetId;n=new as(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ye.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ye.min():t.readTime?ws(t.readTime):ye.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=js(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Rn(r)?{documents:Ps(e,r)}:{query:Rs(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ys(e,t.resumeToken);const r=gs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ye.min())>0){n.readTime=vs(e,t.snapshotVersion.toTimestamp());const r=gs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return I(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=js(this.serializer),t.removeTarget=e,this.k_(t)}}class ra extends ta{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return R(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,R(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){R(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(R(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?ws(e.updateTime):ws(t);return n.isEqual(ye.min())&&(n=ws(t)),new _r(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ws(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=js(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Is(this.serializer,e))};this.k_(t)}}class sa{}class ia extends sa{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new O(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Wo(e,Ns(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(L.UNKNOWN,e.toString())})}Jo(e,t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Jo(e,Ns(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(L.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class aa{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this._a?(j(t),this._a=!1):_("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const oa="RemoteStore";class la{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{va(this)&&(_(oa,"Restarting streams for network reachability change."),await async function(e){const t=D(e);t.Ia.add(4),await ua(t),t.Aa.set("Unknown"),t.Ia.delete(4),await ca(t)}(this))})}),this.Aa=new aa(n,r)}}async function ca(e){if(va(e))for(const t of e.da)await t(!0)}async function ua(e){for(const t of e.da)await t(!1)}function da(e,t){const n=D(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),ga(n)?pa(n):Oa(n).x_()&&ma(n,t))}function ha(e,t){const n=D(e),r=Oa(n);n.Ta.delete(t),r.x_()&&fa(n,t),0===n.Ta.size&&(r.x_()?r.B_():va(n)&&n.Aa.set("Unknown"))}function ma(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ye.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Oa(e).H_(t)}function fa(e,t){e.Ra.$e(t),Oa(e).Y_(t)}function pa(e){e.Ra=new cs({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Oa(e).start(),e.Aa.aa()}function ga(e){return va(e)&&!Oa(e).M_()&&e.Ta.size>0}function va(e){return 0===D(e).Ia.size}function ya(e){e.Ra=void 0}async function ba(e){e.Aa.set("Online")}async function wa(e){e.Ta.forEach((t,n)=>{ma(e,t)})}async function xa(e,t){ya(e),ga(e)?(e.Aa.la(t),pa(e)):e.Aa.set("Unknown")}async function Na(e,t,n){if(e.Aa.set("Online"),t instanceof os&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){_(oa,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ea(e,n)}else if(t instanceof is?e.Ra.Ye(t):t instanceof as?e.Ra.it(t):e.Ra.et(t),!n.isEqual(ye.min()))try{const t=await Ii(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ta.get(r);s&&e.Ta.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(bt.EMPTY_BYTE_STRING,r.snapshotVersion)),fa(e,t);const s=new Hs(r.target,t,n,r.sequenceNumber);ma(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){_(oa,"Failed to raise snapshot:",t),await Ea(e,t)}}async function Ea(e,t,n){if(!Ae(t))throw t;e.Ia.add(1),await ua(e),e.Aa.set("Offline"),n||(n=()=>Ii(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{_(oa,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await ca(e)})}function Sa(e,t){return t().catch(n=>Ea(e,n,t))}async function Ca(e){const t=D(e),n=Ma(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Pe;for(;ka(t);)try{const e=await Ri(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,_a(t,e)}catch(e){await Ea(t,e)}ja(t)&&Ta(t)}function ka(e){return va(e)&&e.Pa.length<10}function _a(e,t){e.Pa.push(t);const n=Ma(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function ja(e){return va(e)&&!Ma(e).M_()&&e.Pa.length>0}function Ta(e){Ma(e).start()}async function Aa(e){Ma(e).na()}async function Ia(e){const t=Ma(e);for(const n of e.Pa)t.X_(n.mutations)}async function Pa(e,t,n){const r=e.Pa.shift(),s=Hr.from(r,t,n);await Sa(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Ca(e)}async function Ra(e,t){t&&Ma(e).Z_&&await async function(e,t){if(function(e){return Jr(e)&&e!==L.ABORTED}(t.code)){const n=e.Pa.shift();Ma(e).N_(),await Sa(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ca(e)}}(e,t),ja(e)&&Ta(e)}async function Da(e,t){const n=D(e);n.asyncQueue.verifyOperationInProgress(),_(oa,"RemoteStore received new credentials");const r=va(n);n.Ia.add(3),await ua(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await ca(n)}async function La(e,t){const n=D(e);t?(n.Ia.delete(2),await ca(n)):t||(n.Ia.add(2),await ua(n),n.Aa.set("Unknown"))}function Oa(e){return e.Va||(e.Va=function(e,t,n){const r=D(e);return r.ia(),new na(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:ba.bind(null,e),e_:wa.bind(null,e),n_:xa.bind(null,e),J_:Na.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),ga(e)?pa(e):e.Aa.set("Unknown")):(await e.Va.stop(),ya(e))})),e.Va}function Ma(e){return e.ma||(e.ma=function(e,t,n){const r=D(e);return r.ia(),new ra(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:Aa.bind(null,e),n_:Ra.bind(null,e),ea:Ia.bind(null,e),ta:Pa.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await Ca(e)):(await e.ma.stop(),e.Pa.length>0&&(_(oa,"Stopping write stream with ".concat(e.Pa.length," pending writes")),e.Pa=[]))})),e.ma}class Fa{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new M,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new Fa(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new O(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ua(e,t){if(j("AsyncQueue","".concat(t,": ").concat(e)),Ae(e))return new O(L.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Va{static emptySet(e){return new Va(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ie.comparator(t.key,n.key):(e,t)=>ie.comparator(e.key,t.key),this.keyedMap=tr(),this.sortedSet=new ht(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Va))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Va;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class za{constructor(){this.fa=new ht(ie.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):I(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ba{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Ba(e,t,Va.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class qa{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Ha{constructor(){this.queries=Wa(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=D(e),r=n.queries;n.queries=Wa(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new O(L.ABORTED,"Firestore shutting down"))}}function Wa(){return new $n(e=>Wn(e),Hn)}async function Ga(e,t){const n=D(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Sa()&&t.ba()&&(r=2):(i=new qa,r=t.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Ua(e,"Initialization of query '".concat(Gn(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.wa.push(t),t.va(n.onlineState),i.ya&&t.Ca(i.ya)&&Ya(n)}async function Ka(e,t){const n=D(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.wa.indexOf(t);e>=0&&(i.wa.splice(e,1),0===i.wa.length?s=t.ba()?0:1:!i.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Qa(e,t){const n=D(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.wa)e.Ca(s)&&(r=!0);t.ya=s}}r&&Ya(n)}function Ja(e,t,n){const r=D(e),s=r.queries.get(t);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(t)}function Ya(e){e.Da.forEach(e=>{e.next()})}var $a,Xa;(Xa=$a||($a={})).Fa="default",Xa.Cache="cache";class Za{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ba(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==$a.Cache}}class eo{constructor(e){this.key=e}}class to{constructor(e){this.key=e}}class no{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=lr(),this.mutatedKeys=lr(),this.Xa=Jn(e),this.eu=new Va(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new za,r=t?t.eu:this.eu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Kn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let m=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),m=!0):this.iu(c,u)||(n.track({type:2,doc:u}),m=!0,(o&&this.Xa(u,o)>0||l&&this.Xa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),m=!0):c&&!u&&(n.track({type:1,doc:c}),m=!0,(o||l)&&(a=!0)),m&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{eu:i,ru:n,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const i=e.ru.pa();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return I(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const a=t&&!r?this.ou():[],o=0===this.Za.size&&this.current&&!r?1:0,l=o!==this.Ya;return this.Ya=o,0!==i.length||l?{snapshot:new Ba(this.query,e.eu,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new za,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=lr(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new to(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new eo(n))}),t}uu(e){this.Ha=e.qs,this.Za=lr();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ba.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const ro="SyncEngine";class so{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class io{constructor(e){this.key=e,this.lu=!1}}class ao{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.hu={},this.Pu=new $n(e=>Wn(e),Hn),this.Tu=new Map,this.Iu=new Set,this.du=new ht(ie.comparator),this.Eu=new Map,this.Au=new mi,this.Ru={},this.Vu=new Map,this.mu=Zs.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function oo(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=To(e);let s;const i=r.Pu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await co(r,t,n,!0),s}async function lo(e,t){const n=To(e);await co(n,t,!0,!1)}async function co(e,t,n,r){const s=await Di(e.localStore,Vn(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await uo(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&da(e.remoteStore,s),o}async function uo(e,t,n,r,s){e.gu=(t,n,r)=>async function(e,t,n,r){let s=t.view.nu(n);s.Ds&&(s=await Oi(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.nu(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Eo(e,t.targetId,o._u),o.snapshot}(e,t,n,r);const i=await Oi(e.localStore,t,!0),a=new no(t,i.qs),o=a.nu(i.documents),l=ss.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Eo(e,n,c._u);const u=new so(t,n,a);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function ho(e,t,n){const r=D(e),s=r.Pu.get(t),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(e=>!Hn(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Li(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ha(r.remoteStore,s.targetId),xo(r,s.targetId)}).catch(_e)):(xo(r,s.targetId),await Li(r.localStore,s.targetId,!0))}async function mo(e,t){const n=D(e),r=n.Pu.get(t),s=n.Tu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ha(n.remoteStore,r.targetId))}async function fo(e,t){const n=D(e);try{const e=await function(e,t){const n=D(e),r=t.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.hi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.hi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(bt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=_i||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.hi.updateTargetData(e,c))});let o=Zn(),l=lr();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Pi(e,i,t.documentUpdates).next(e=>{o=e.Ls,l=e.ks})),!r.isEqual(ye.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return je.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Fs=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(R(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?R(r.lu,14607):e.removedDocuments.size>0&&(R(r.lu,42227),r.lu=!1))}),await ko(n,e,t)}catch(e){await _e(e)}}function po(e,t,n){const r=D(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=D(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.wa)s.va(t)&&(r=!0)}),r&&Ya(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function go(e,t,n){const r=D(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let e=new ht(ie.comparator);e=e.insert(i,an.newNoDocument(i,ye.min()));const n=lr().add(i),s=new rs(ye.min(),new Map,new ht(J),e,n);await fo(r,s),r.du=r.du.remove(i),r.Eu.delete(t),Co(r)}else await Li(r.localStore,t,!1).then(()=>xo(r,t,n)).catch(_e)}async function vo(e,t){const n=D(e),r=t.batch.batchId;try{const e=await function(e,t){const n=D(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=je.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);R(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=lr();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);wo(n,r,null),bo(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ko(n,e)}catch(e){await _e(e)}}async function yo(e,t,n){const r=D(e);try{const e=await function(e,t){const n=D(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(R(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);wo(r,t,n),bo(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ko(r,e)}catch(n){await _e(n)}}function bo(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function wo(e,t,n){const r=D(e);let s=r.Ru[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ru[r.currentUser.toKey()]=s}}function xo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||No(e,t)})}function No(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ha(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Co(e))}function Eo(e,t,n){for(const r of n)r instanceof eo?(e.Au.addReference(r.key,t),So(e,r)):r instanceof to?(_(ro,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||No(e,r.key)):I(19791,{yu:r})}function So(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(_(ro,"New document in limbo: "+n),e.Iu.add(r),Co(e))}function Co(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new ie(ne.fromString(t)),r=e.mu.next();e.Eu.set(r,new io(n)),e.du=e.du.insert(n,r),da(e.remoteStore,new Hs(Vn(On(n.path)),r,"TargetPurposeLimboResolution",Ie.ue))}}async function ko(e,t,n){const r=D(e),s=[],i=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((e,o)=>{a.push(r.gu(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Ei.Es(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.hu.J_(s),await async function(e,t){const n=D(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>je.forEach(t,t=>je.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>je.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ae(e))throw e;_(ki,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,s)}}}(r.localStore,i))}async function _o(e,t){const n=D(e);if(!n.currentUser.isEqual(t)){_(ro,"User change. New user:",t.toKey());const e=await Ai(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new O(L.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ko(n,e.Bs)}}function jo(e,t){const n=D(e),r=n.Eu.get(t);if(r&&r.lu)return lr().add(r.key);{let e=lr();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function To(e){const t=D(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fo.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jo.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=go.bind(null,t),t.hu.J_=Qa.bind(null,t.eventManager),t.hu.pu=Ja.bind(null,t.eventManager),t}function Ao(e){const t=D(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vo.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yo.bind(null,t),t}class Io{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xi(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Ti(this.persistence,new Ci,e.initialUser,this.serializer)}Du(e){return new bi(xi.Vi,this.serializer)}bu(e){return new Ui}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Io.provider={build:()=>new Io};class Po extends Io{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){R(this.persistence.referenceDelegate instanceof Ni,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new si(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?Xs.withCacheSize(this.cacheSizeBytes):Xs.DEFAULT;return new bi(e=>Ni.Vi(e,t),this.serializer)}}class Ro{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>po(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=_o.bind(null,this.syncEngine),await La(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ha}createDatastore(e){const t=Xi(e.databaseInfo.databaseId),n=function(e){return new Yi(e)}(e.databaseInfo);return function(e,t,n,r){return new ia(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new la(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>po(this.syncEngine,e,0),Bi.C()?new Bi:new Vi)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new ao(e,t,n,r,s,i);return a&&(o.fu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=D(e);_(oa,"RemoteStore shutting down."),t.Ia.add(5),await ua(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ro.provider={build:()=>new Ro};class Do{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):j("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Lo="FirestoreClient";class Oo{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=E.UNAUTHENTICATED,this.clientId=Q.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{_(Lo,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(_(Lo,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new M;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ua(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Mo(e,t){e.asyncQueue.verifyOperationInProgress(),_(Lo,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ai(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{T("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{_("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{T("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function Fo(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Uo(e);_(Lo,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Da(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Da(t.remoteStore,n)),e._onlineComponents=t}async function Uo(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){_(Lo,"Using user provided OfflineComponentProvider");try{await Mo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===L.FAILED_PRECONDITION||e.code===L.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;T("Error using user provided cache. Falling back to memory cache: "+n),await Mo(e,new Io)}}else _(Lo,"Using default OfflineComponentProvider"),await Mo(e,new Po(void 0));return e._offlineComponents}async function Vo(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(_(Lo,"Using user provided OnlineComponentProvider"),await Fo(e,e._uninitializedComponentsProvider._online)):(_(Lo,"Using default OnlineComponentProvider"),await Fo(e,new Ro))),e._onlineComponents}function zo(e){return Vo(e).then(e=>e.syncEngine)}async function Bo(e){const t=await Vo(e),n=t.eventManager;return n.onListen=oo.bind(null,t.syncEngine),n.onUnlisten=ho.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=lo.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=mo.bind(null,t.syncEngine),n}function qo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new M;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Do({next:o=>{i.Ou(),t.enqueueAndForget(()=>Ka(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new O(L.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new O(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Za(On(n.path),i,{includeMetadataChanges:!0,ka:!0});return Ga(e,a)}(await Bo(e),e.asyncQueue,t,n,r)),r.promise}function Ho(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new M;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Do({next:n=>{i.Ou(),t.enqueueAndForget(()=>Ka(e,a)),n.fromCache&&"server"===r.source?s.reject(new O(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Za(n,i,{includeMetadataChanges:!0,ka:!0});return Ga(e,a)}(await Bo(e),e.asyncQueue,t,n,r)),r.promise}function Wo(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Go=new Map,Ko="firestore.googleapis.com",Qo=!0;class Jo{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new O(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ko,this.ssl=Qo}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Qo;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=$s;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ti)throw new O(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new O(L.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wo(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new O(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new O(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new O(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yo{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jo({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new O(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jo(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new U;switch(e.type){case"firstParty":return new q(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new O(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Go.get(e);t&&(_("ComponentProvider","Removing Datastore"),Go.delete(e),t.terminate())}(this),Promise.resolve()}}class $o{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $o(this.firestore,e,this._query)}}class Xo{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xo(this.firestore,e,this._key)}toJSON(){return{type:Xo._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(fe(t,Xo._jsonSchema))return new Xo(e,n||null,new ie(ne.fromString(t.referencePath)))}}Xo._jsonSchemaVersion="firestore/documentReference/1.0",Xo._jsonSchema={type:me("string",Xo._jsonSchemaVersion),referencePath:me("string")};class Zo extends $o{constructor(e,t,n){super(e,t,On(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xo(this.firestore,null,new ie(e))}withConverter(e){return new Zo(this.firestore,e,this._path)}}function el(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),ae("collection","path",t),e instanceof Yo){const n=ne.fromString(t,...r);return le(n),new Zo(e,null,n)}{if(!(e instanceof Xo||e instanceof Zo))throw new O(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return le(n),new Zo(e.firestore,null,n)}}function tl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),1===arguments.length&&(t=Q.newId()),ae("doc","path",t),e instanceof Yo){const n=ne.fromString(t,...r);return oe(n),new Xo(e,null,new ie(n))}{if(!(e instanceof Xo||e instanceof Zo))throw new O(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return oe(n),new Xo(e.firestore,e instanceof Zo?e.converter:null,new ie(n))}}const nl="AsyncQueue";class rl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Zi(this,"async_queue_retry"),this.oc=()=>{const e=$i();e&&_(nl,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=$i();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=$i();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new M;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ae(e))throw e;_(nl,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,j("INTERNAL UNHANDLED ERROR: ",sl(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Fa.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&I(47125,{hc:sl(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function sl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function il(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class al extends Yo{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new rl,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rl(e),this._firestoreClient=void 0,await e}}}function ol(e,t){const n="object"==typeof e?e:(0,i.Sx)(),r="string"==typeof e?e:t||Pt,s=(0,i.j6)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;e=de(e,Yo);const i=(0,l.zJ)(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),c="".concat(t,":").concat(n);i&&((0,l.gE)("https://".concat(c)),(0,l.P1)("Firestore",!0)),a.host!==Ko&&a.host!==c&&T("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!(0,l.bD)(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=E.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new O(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new E(i)}e._authCredentials=new V(new F(t,n))}}(s,...e)}return s}function ll(e){if(e._terminated)throw new O(L.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||cl(e),e._firestoreClient}function cl(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new It(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Wo(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Oo(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ul(bt.fromBase64String(e))}catch(e){throw new O(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ul(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ul._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fe(e,ul._jsonSchema))return ul.fromBase64String(e.bytes)}}ul._jsonSchemaVersion="firestore/bytes/1.0",ul._jsonSchema={type:me("string",ul._jsonSchemaVersion),bytes:me("string")};class dl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new O(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hl{constructor(e){this._methodName=e}}class ml{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ml._jsonSchemaVersion}}static fromJSON(e){if(fe(e,ml._jsonSchema))return new ml(e.latitude,e.longitude)}}ml._jsonSchemaVersion="firestore/geoPoint/1.0",ml._jsonSchema={type:me("string",ml._jsonSchemaVersion),latitude:me("number"),longitude:me("number")};class fl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fe(e,fl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new fl(e.vectorValues);throw new O(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fl._jsonSchemaVersion="firestore/vectorValue/1.0",fl._jsonSchema={type:me("string",fl._jsonSchemaVersion),vectorValues:me("object")};const pl=/^__.*__$/;class gl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Or(e,this.data,t,this.fieldTransforms)}}class vl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw I(40011,{Ec:e})}}class bl{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new bl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ol(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(yl(this.Ec)&&pl.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class wl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Xi(e)}Dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new bl({Ec:e,methodName:t,bc:n,path:se.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(e){const t=e._freezeSettings(),n=Xi(e._databaseId);return new wl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Nl(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Dc(i.merge||i.mergeFields?2:0,t,n,s);Pl("Data must be an object, but it was:",a,r);const o=Al(r,a);let l,c;if(i.merge)l=new vt(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Rl(t,r,n);if(!a.contains(s))throw new O(L.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));Ml(e,s)||e.push(s)}l=new vt(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new gl(new rn(o),l,c)}class El extends hl{_toFieldTransform(e){if(2!==e.Ec)throw 1===e.Ec?e.wc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.wc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof El}}class Sl extends hl{_toFieldTransform(e){return new kr(e.path,new yr)}isEqual(e){return e instanceof Sl}}class Cl extends hl{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new Er(e.serializer,mr(e.serializer,this.Cc));return new kr(e.path,t)}isEqual(e){return e instanceof Cl&&this.Cc===e.Cc}}function kl(e,t,n,r){const s=e.Dc(1,t,n);Pl("Data must be an object, but it was:",s,r);const i=[],a=rn.empty();ut(r,(e,r)=>{const o=Ll(t,e,n);r=(0,l.Ku)(r);const c=s.gc(o);if(r instanceof El)i.push(o);else{const e=Tl(r,c);null!=e&&(i.push(o),a.set(o,e))}});const o=new vt(i);return new vl(a,o,s.fieldTransforms)}function _l(e,t,n,r,s,i){const a=e.Dc(1,t,n),o=[Rl(t,r,n)],c=[s];if(i.length%2!=0)throw new O(L.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let l=0;l<i.length;l+=2)o.push(Rl(t,i[l])),c.push(i[l+1]);const u=[],d=rn.empty();for(let m=o.length-1;m>=0;--m)if(!Ml(u,o[m])){const e=o[m];let t=c[m];t=(0,l.Ku)(t);const n=a.gc(e);if(t instanceof El)u.push(e);else{const r=Tl(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new vt(u);return new vl(d,h,a.fieldTransforms)}function jl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Tl(n,e.Dc(r?4:3,t))}function Tl(e,t){if(Il(e=(0,l.Ku)(e)))return Pl("Unsupported field value:",t,e),Al(e,t);if(e instanceof hl)return function(e,t){if(!yl(t.Ec))throw t.wc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.wc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Tl(s,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ve.fromDate(e);return{timestampValue:vs(t.serializer,n)}}if(e instanceof ve){const n=new ve(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vs(t.serializer,n)}}if(e instanceof ml)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ul)return{bytesValue:ys(t.serializer,e._byteString)};if(e instanceof Xo){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:xs(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof fl)return function(e,t){return{mapValue:{fields:{[Dt]:{stringValue:Mt},[Ft]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.wc("VectorValues must only contain numeric values.");return dr(t.serializer,e)})}}}}}}(e,t);throw t.wc("Unsupported field value: ".concat(ue(e)))}(e,t)}function Al(e,t){const n={};return dt(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ut(e,(e,r)=>{const s=Tl(r,t.Vc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Il(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ve||e instanceof ml||e instanceof ul||e instanceof Xo||e instanceof hl||e instanceof fl)}function Pl(e,t,n){if(!Il(n)||!ce(n)){const r=ue(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Rl(e,t,n){if((t=(0,l.Ku)(t))instanceof dl)return t._internalPath;if("string"==typeof t)return Ll(e,t);throw Ol("Field path arguments must be of type string or ",e,!1,void 0,n)}const Dl=new RegExp("[~\\*/\\[\\]]");function Ll(e,t,n){if(t.search(Dl)>=0)throw Ol("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new dl(...t.split("."))._internalPath}catch(r){throw Ol("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ol(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new O(L.INVALID_ARGUMENT,o+e+l)}function Ml(e,t){return e.some(e=>e.isEqual(t))}class Fl{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ul(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ul extends Fl{data(){return super.data()}}function Vl(e,t){return"string"==typeof t?Ll(e,t):t instanceof dl?t._internalPath:t._delegate._internalPath}function zl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new O(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bl{}class ql extends Bl{}function Hl(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Bl&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Kl).length,n=e.filter(e=>e instanceof Wl).length;if(t>1||t>0&&n>0)throw new O(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Wl extends ql{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Wl(e,t,n)}_apply(e){const t=this._parse(e);return ic(e._query,t),new $o(e.firestore,e.converter,Bn(e._query,t))}_parse(e){const t=xl(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new O(L.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){sc(a,i);const t=[];for(const n of a)t.push(rc(r,e,n));o={arrayValue:{values:t}}}else o=rc(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||sc(a,i),o=jl(n,t,a,"in"===i||"not-in"===i);return mn.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Gl(e,t,n){const r=t,s=Vl("where",e);return Wl._create(s,r,n)}class Kl extends Bl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Kl(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)ic(n,s),n=Bn(n,s)}(e._query,t),new $o(e.firestore,e.converter,Bn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ql extends ql{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ql(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new O(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new O(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new un(t,n)}(e._query,this._field,this._direction);return new $o(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Dn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Jl(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Vl("orderBy",e);return Ql._create(n,t)}class Yl extends ql{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Yl(e,t,n)}_apply(e){return new $o(e.firestore,e.converter,qn(e._query,this._limit,this._limitType))}}function $l(e){return he("limit",e),Yl._create("limit",e,"F")}class Xl extends ql{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Xl(e,t,n)}_apply(e){const t=nc(e,this.type,this._docOrFields,this._inclusive);return new $o(e.firestore,e.converter,function(e,t){return new Dn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function Zl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Xl._create("startAt",t,!0)}class ec extends ql{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ec(e,t,n)}_apply(e){const t=nc(e,this.type,this._docOrFields,this._inclusive);return new $o(e.firestore,e.converter,function(e,t){return new Dn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function tc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ec._create("endAt",t,!0)}function nc(e,t,n,r){if(n[0]=(0,l.Ku)(n[0]),n[0]instanceof Fl)return function(e,t,n,r,s){if(!r)throw new O(L.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const i=[];for(const a of Un(e))if(a.field.isKeyField())i.push(Qt(t,r.key));else{const e=r.data.field(a.field);if(jt(e))throw new O(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=a.field.canonicalString();throw new O(L.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}i.push(e)}return new on(i,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=xl(e.firestore);return function(e,t,n,r,s,i){const a=e.explicitOrderBy;if(s.length>a.length)throw new O(L.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const o=[];for(let l=0;l<s.length;l++){const i=s[l];if(a[l].field.isKeyField()){if("string"!=typeof i)throw new O(L.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof i));if(!Fn(e)&&-1!==i.indexOf("/"))throw new O(L.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(i,"' contains a slash."));const n=e.path.child(ne.fromString(i));if(!ie.isDocumentKey(n))throw new O(L.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const s=new ie(n);o.push(Qt(t,s))}else{const e=jl(n,r,i);o.push(e)}}return new on(o,i)}(e._query,e.firestore._databaseId,s,t,n,r)}}function rc(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new O(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fn(t)&&-1!==n.indexOf("/"))throw new O(L.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ne.fromString(n));if(!ie.isDocumentKey(r))throw new O(L.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Qt(e,new ie(r))}if(n instanceof Xo)return Qt(e,n._key);throw new O(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ue(n),"."))}function sc(e,t){if(!Array.isArray(e)||0===e.length)throw new O(L.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function ic(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new O(L.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new O(L.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ac{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ut(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Et(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw I(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ut(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Ft].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Nt(e.doubleValue));return new fl(s)}convertGeoPoint(e){return new ml(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Tt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(At(e));default:return null}}convertTimestamp(e){const t=xt(e);return new ve(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ne.fromString(e);R(qs(n),9688,{name:e});const r=new Rt(n.get(1),n.get(3)),s=new ie(n.popFirst(5));return r.isEqual(t)||j("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function oc(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class lc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cc extends Fl{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Vl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=cc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}cc._jsonSchemaVersion="firestore/documentSnapshot/1.0",cc._jsonSchema={type:me("string",cc._jsonSchemaVersion),bundleSource:me("string","DocumentSnapshot"),bundleName:me("string"),bundle:me("string")};class uc extends cc{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class dc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new uc(this._firestore,this._userDataWriter,n.key,n,new lc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new O(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new uc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new lc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new uc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:hc(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=dc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Q.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return I(61501,{type:e})}}function mc(e){e=de(e,Xo);const t=de(e.firestore,al);return qo(ll(t),e._key).then(n=>Nc(t,e,n))}dc._jsonSchemaVersion="firestore/querySnapshot/1.0",dc._jsonSchema={type:me("string",dc._jsonSchemaVersion),bundleSource:me("string","QuerySnapshot"),bundleName:me("string"),bundle:me("string")};class fc extends ac{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xo(this.firestore,null,t)}}function pc(e){e=de(e,$o);const t=de(e.firestore,al),n=ll(t),r=new fc(t);return zl(e._query),Ho(n,e._query).then(n=>new dc(t,r,e,n))}function gc(e,t,n){e=de(e,Xo);const r=de(e.firestore,al),s=oc(e.converter,t,n);return xc(r,[Nl(xl(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,jr.none())])}function vc(e,t,n){e=de(e,Xo);const r=de(e.firestore,al),s=xl(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),c=3;c<a;c++)o[c-3]=arguments[c];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof dl?_l(s,"updateDoc",e._key,t,n,o):kl(s,"updateDoc",e._key,t),xc(r,[i.toMutation(e._key,jr.exists(!0))])}function yc(e){return xc(de(e.firestore,al),[new zr(e._key,jr.none())])}function bc(e,t){const n=de(e.firestore,al),r=tl(e),s=oc(e.converter,t);return xc(n,[Nl(xl(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,jr.exists(!1))]).then(()=>r)}function wc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=(0,l.Ku)(e);let o={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||il(n[c])||(o=n[c++]);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(il(n[c])){const e=n[c];n[c]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[c+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[c+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let d,h,m;if(e instanceof Xo)h=de(e.firestore,al),m=On(e._key.path),d={next:t=>{n[c]&&n[c](Nc(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=de(e,$o);h=de(t.firestore,al),m=t._query;const r=new fc(h);d={next:e=>{n[c]&&n[c](new dc(h,r,t,e))},error:n[c+1],complete:n[c+2]},zl(e._query)}return function(e,t,n,r){const s=new Do(r),i=new Za(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>Ga(await Bo(e),i)),()=>{s.Ou(),e.asyncQueue.enqueueAndForget(async()=>Ka(await Bo(e),i))}}(ll(h),m,u,d)}function xc(e,t){return function(e,t){const n=new M;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Ao(e);try{const e=await function(e,t){const n=D(e),r=ve.now(),s=t.reduce((e,t)=>e.add(t.key),lr());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Zn(),l=lr();return n.Os.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Dr(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Mr(e.key,t,sn(t.value.mapValue),jr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:nr(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new ht(J)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await ko(r,e.changes),await Ca(r.remoteStore)}catch(e){const t=Ua(e,"Failed to persist write");n.reject(t)}}(await zo(e),t,n)),n.promise}(ll(e),t)}function Nc(e,t,n){const r=n.docs.get(t._key),s=new fc(e);return new cc(e,s,t._key,r,new lc(n.hasPendingWrites,n.fromCache),t.converter)}function Ec(){return new Sl("serverTimestamp")}function Sc(e){return new Cl("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){S=e}(i.MF),(0,i.om)(new a.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new al(new z(e.getProvider("auth-internal")),new W(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new O(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rt(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,i.KO)(x,N,e),(0,i.KO)(x,N,"esm2017")}()},529:(e,t,n)=>{n.d(t,{cY:()=>f,FA:()=>R,g:()=>P,u:()=>o,Uj:()=>a,Fy:()=>v,tD:()=>z,bD:()=>O,hp:()=>V,T9:()=>h,Tj:()=>u,yU:()=>d,XA:()=>m,mS:()=>l,Ku:()=>H,ZQ:()=>x,sr:()=>C,zJ:()=>p,c1:()=>S,Im:()=>L,lT:()=>_,zW:()=>A,jZ:()=>N,lV:()=>k,nr:()=>j,Ov:()=>T,gE:()=>g,Am:()=>F,I9:()=>U,P1:()=>w,eX:()=>I});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const o=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==a||null==o||null==l)throw new i;const c=t<<2|a>>4;if(r.push(c),64!==o){const e=a<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const c=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COMPANY_EMAIL:"contact@tuneparams.com",REACT_APP_COMPANY_NAME:"TuneParams AI Learning Platform",REACT_APP_COMPANY_PHONE:"+1 (469) 702-1086",REACT_APP_EMAILJS_PUBLIC_KEY:"g2ZIKXu5CMAtlW-yr",REACT_APP_EMAILJS_SERVICE_ID:"service_6nnlhkw",REACT_APP_EMAILJS_TEMPLATE_ID:"template_660cmfs",REACT_APP_ENABLE_COUPONS:"true",REACT_APP_FIREBASE_API_KEY:"AIzaSyCn55V2y3cXp4Ln0NWjlauU8rgZgMgwDyc",REACT_APP_FIREBASE_APP_ID:"1:995918337622:web:505babbabe198e3f0d0df7",REACT_APP_FIREBASE_AUTH_DOMAIN:"tuneparams.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"995918337622",REACT_APP_FIREBASE_PROJECT_ID:"tuneparams",REACT_APP_FIREBASE_STORAGE_BUCKET:"tuneparams.firebasestorage.app",REACT_APP_FORMSPREE_FORM_ID:"xkgbylng",REACT_APP_FROM_EMAIL:"noreply@tuneparams.com",REACT_APP_GITHUB_URL:"https://github.com/TuneParams-ai",REACT_APP_HERO_IMAGE_URL:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=500&h=400&fit=crop&auto=format",REACT_APP_LINKEDIN_URL:"https://www.linkedin.com/in/tuneparams/",REACT_APP_PAYPAL_CLIENT_ID:"Acpw6Y9AC_WmjeowDefzez5UraQz8Is2eli9_B1EiyTmkiilTremv-JSsTzcT65epfBO3BHiBmn7X-OF",REACT_APP_PAYPAL_ENVIRONMENT:"live",REACT_APP_SUPPORT_EMAIL:"contact@tuneparams.com",REACT_APP_TWITTER_URL:"https://twitter.com/tuneparams",REACT_APP_WEBSITE_URL:"https://www.tuneparams.ai"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&o(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=c())||void 0===t?void 0:t["_".concat(e)]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function p(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function g(e){return(await fetch(e,{credentials:"include"})).ok}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(i)),""].join(".")}const y={};let b=!1;function w(e,t){if("undefined"===typeof window||"undefined"===typeof document||!p(window.location.host)||y[e]===t||y[e]||b)return;function n(e){return"__firebase__banner__".concat(e)}y[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(y))y[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{b=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function N(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function E(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function S(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function C(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function k(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function _(){const e=x();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function j(){return!E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T(){return!E()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function A(){try{return"object"===typeof indexedDB}catch(e){return!1}}function I(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(D,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new P(n,i,t)}}const D=/\{\$([^}]+)}/g;function L(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function O(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(M(n)&&M(i)){if(!O(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function M(e){return null!==e&&"object"===typeof e}function F(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function U(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function V(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function z(e,t){const n=new B(e,t);return n.subscribe.bind(n)}class B{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=q),void 0===r.error&&(r.error=q),void 0===r.complete&&(r.complete=q);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q(){}function H(e){return e&&e._delegate?e._delegate:e}},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},812:(e,t,n)=>{n.d(t,{h1:()=>o,uA:()=>s});var r=n(529);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===i?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,f=!1,p=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function N(e){if(g=!1,x(e),!p)if(null!==r(c))p=!0,S||(S=!0,E());else{var t=r(u);null!==t&&P(N,t.startTime-e)}}var E,S=!1,C=-1,k=5,_=-1;function j(){return!!v||!(t.unstable_now()-_<k)}function T(){if(v=!1,S){var e=t.unstable_now();_=e;var n=!0;try{e:{p=!1,g&&(g=!1,b(C),C=-1),f=!0;var i=m;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&j());){var a=h.callback;if("function"===typeof a){h.callback=null,m=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,x(e),n=!0;break t}h===r(c)&&s(c),x(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(N,l.startTime-e),n=!1}}break e}finally{h=null,m=i,f=!1}n=void 0}}finally{n?E():S=!1}}}if("function"===typeof w)E=function(){w(T)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,I=A.port2;A.port1.onmessage=T,E=function(){I.postMessage(null)}}else E=function(){y(T,0)};function P(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(C),C=-1):g=!0,P(N,i-a))):(e.sortIndex=o,n(c,e),p||f||(p=!0,S||(S=!0,E()))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},898:(e,t,n)=>{n.d(t,{HF:()=>Xe,sv:()=>mt,eJ:()=>ft,xI:()=>qn,hg:()=>yt,gA:()=>gt,J1:()=>ht,x9:()=>pt,df:()=>rn,CI:()=>bt,r7:()=>vt});var r=n(150),s=n(529),i=n(443);function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var o=n(812);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,u=new s.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new i.Vy("@firebase/auth");function h(e){if(d.logLevel<=i.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];d.error("Auth (".concat(r.MF,"): ").concat(e),...n)}}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw y(e,...n)}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return y(e,...n)}function p(e,t,n){const r=Object.assign(Object.assign({},c()),{[t]:n});return new s.FA("auth","Firebase",r).create(t,{appName:e.name})}function g(e){return p(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&m(e,"argument-error"),p(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return u.create(e,...n)}function b(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw y(t,...r)}}function w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function x(e,t){e||w(t)}function N(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){return"http:"===S()||"https:"===S()}function S(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class C{constructor(e,t){this.shortDelay=e,this.longDelay=t,x(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.jZ)()||(0,s.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(E()||(0,s.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function k(e,t){x(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class _{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},T=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],A=new C(3e4,6e4);function I(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function P(e,t,n,r){return R(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},a={};r&&("GET"===t?a=r:i={body:JSON.stringify(r)});const o=(0,s.Am)(Object.assign({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},i);return(0,s.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,s.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),_.fetch()(await L(e,e.config.apiHost,n,o),c)})}async function R(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},j),t);try{const t=new M(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw F(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw F(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw F(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw F(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw p(e,o,a);m(e,o)}}catch(i){if(i instanceof s.g)throw i;m(e,"network-request-failed",{message:String(i)})}}async function D(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await P(e,t,n,r,s);return"mfaPendingCredential"in i&&m(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function L(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?k(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(T.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function O(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class M{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(f(this.auth,"network-request-failed")),A.get())})}}function F(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=f(e,t,r);return s.customData._tokenResponse=n,s}function U(e){return void 0!==e&&void 0!==e.enterprise}class V{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return O(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function z(e,t){return P(e,"GET","/v2/recaptchaConfig",I(e,t))}async function B(e,t){return P(e,"POST","/v1/accounts:lookup",t)}function q(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function H(e){return 1e3*Number(e)}function W(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(i){return h("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function G(e){const t=W(e);return b(t,"internal-error"),b("undefined"!==typeof t.exp,"internal-error"),b("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function K(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof s.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Q{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class J{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=q(this.lastLoginAt),this.creationTime=q(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Y(e){var t;const n=e.auth,r=await e.getIdToken(),s=await K(e,B(n,{idToken:r}));b(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?$(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new J(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,m)}function $(e){return e.map(e=>{var{providerId:t}=e,n=a(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){b(e.idToken,"internal-error"),b("undefined"!==typeof e.idToken,"internal-error"),b("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):G(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){b(0!==e.length,"internal-error");const t=G(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(b(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await R(e,{},async()=>{const n=(0,s.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await L(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return e.emulatorConfig&&(0,s.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),_.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new X;return n&&(b("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(b("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(b("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return w("not implemented")}}function Z(e,t){b("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ee{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=a(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Q(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new J(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await K(this,this.stsTokenManager.getToken(this.auth,e));return b(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,s.Ku)(e),r=await n.getIdToken(t),i=W(r);b(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a="object"===typeof i.firebase?i.firebase:void 0,o=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:q(H(i.auth_time)),issuedAtTime:q(H(i.iat)),expirationTime:q(H(i.exp)),signInProvider:o||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,s.Ku)(e);await Y(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(b(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ee(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){b(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Y(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(g(this.auth));const e=await this.getIdToken();return await K(this,async function(e,t){return P(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,m=null!==(i=t.photoURL)&&void 0!==i?i:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:x,providerData:N,stsTokenManager:E}=t;b(y&&E,e,"internal-error");const S=X.fromJSON(this.name,E);b("string"===typeof y,e,"internal-error"),Z(u,e.name),Z(d,e.name),b("boolean"===typeof w,e,"internal-error"),b("boolean"===typeof x,e,"internal-error"),Z(h,e.name),Z(m,e.name),Z(f,e.name),Z(p,e.name),Z(g,e.name),Z(v,e.name);const C=new ee({uid:y,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:x,photoURL:m,phoneNumber:h,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:v});return N&&Array.isArray(N)&&(C.providerData=N.map(e=>Object.assign({},e))),p&&(C._redirectEventId=p),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new X;r.updateFromServerResponse(t);const s=new ee({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Y(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];b(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?$(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new X;a.updateFromIdToken(n);const o=new ee({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new J(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const te=new Map;function ne(e){x(e instanceof Function,"Expected a class definition");let t=te.get(e);return t?(x(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,te.set(e,t),t)}class re{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}re.type="NONE";const se=re;function ie(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ae{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=ie(this.userKey,r.apiKey,s),this.fullPersistenceKey=ie("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await B(this.auth,{idToken:e}).catch(()=>{});return t?ee._fromGetAccountInfoResponse(this.auth,t,e):null}return ee._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ae(ne(se),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||ne(se);const i=ie(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await B(e,{idToken:t}).catch(()=>{});if(!r)break;n=await ee._fromGetAccountInfoResponse(e,r,t)}else n=ee._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new ae(s,e,n)):new ae(s,e,n)}}function oe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(de(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(le(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(me(t))return"Blackberry";if(fe(t))return"Webos";if(ce(t))return"Safari";if((t.includes("chrome/")||ue(t))&&!t.includes("edge/"))return"Chrome";if(he(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/firefox\//i.test(e)}function ce(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/crios\//i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iemobile/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/android/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/blackberry/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/webos/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return pe(e)||he(e)||fe(e)||me(e)||/windows phone/i.test(e)||de(e)}function ve(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oe((0,s.ZQ)());break;case"Worker":t="".concat(oe((0,s.ZQ)()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(r.MF,"/").concat(i)}class ye{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class be{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class we{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ne(this),this.idTokenSubscription=new Ne(this),this.beforeStateQueue=new ye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ne(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await ae.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await B(this,{idToken:e}),n=await ee._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null===s||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==r||!(null===a||void 0===a?void 0:a.user)||(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return b(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Y(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(g(this));const t=e?(0,s.Ku)(e):null;return t&&b(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&b(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(g(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ne(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return P(e,"GET","/v2/passwordPolicy",I(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new be(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new s.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return P(e,"POST","/v2/accounts:revokeToken",I(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ne(e)||this._popupRedirectResolver;b(t,this,"argument-error"),this.redirectPersistenceManager=await ae.create(this,[ne(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(b(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return b(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ve(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(d.logLevel<=i.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];d.warn("Auth (".concat(r.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function xe(e){return(0,s.Ku)(e)}class Ne{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.tD)(e=>this.observer=e)}get next(){return b(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ee={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Se(e){return Ee.loadJS(e)}function Ce(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ke{constructor(){this.enterprise=new _e}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _e{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const je="NO_RECAPTCHA";class Te{constructor(e){this.type="recaptcha-enterprise",this.auth=xe(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;U(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(je)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new ke).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{z(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new V(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&U(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ee.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Se(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ae(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Te(e);let a;if(s)a=je;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ie(e,t,n,r,s){var i,a;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ae(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Ae(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const s=await Ae(e,t,n);return r(e,s).catch(async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await Ae(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await Ae(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Pe(e){const t=xe(e),n=await z(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new V(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Te(t).verify()}}function Re(e,t,n){const r=xe(e);b(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=De(t),{host:o,port:l}=function(e){const t=De(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Le(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Le(t)}}}(t),c=null===l?"":":".concat(l),u={url:"".concat(a,"//").concat(o).concat(c,"/")},d=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return b(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void b((0,s.bD)(u,r.config.emulator)&&(0,s.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,s.zJ)(o)?((0,s.gE)("".concat(a,"//").concat(o).concat(c)),(0,s.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function De(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Le(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Oe{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,t){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}async function Me(e,t){return P(e,"POST","/v1/accounts:signUp",t)}async function Fe(e,t){return D(e,"POST","/v1/accounts:signInWithPassword",I(e,t))}async function Ue(e,t){return P(e,"POST","/v1/accounts:sendOobCode",I(e,t))}async function Ve(e,t){return Ue(e,t)}class ze extends Oe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ze(e,t,"password")}static _fromEmailAndCode(e,t){return new ze(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ie(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Fe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return D(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{email:this._email,oobCode:this._password});default:m(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ie(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Me,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return D(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:m(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Be(e,t){return D(e,"POST","/v1/accounts:signInWithIdp",I(e,t))}class qe extends Oe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):m("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=a(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new qe(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Be(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Be(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Be(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.Am)(t)}return e}}async function He(e,t){return P(e,"POST","/v1/accounts:sendVerificationCode",I(e,t))}const We={USER_NOT_FOUND:"user-not-found"};class Ge extends Oe{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ge({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ge({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return D(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await D(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t));if(n.temporaryProof)throw F(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return D(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),We)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Ge({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Ke{constructor(e){var t,n,r,i,a,o;const l=(0,s.I9)((0,s.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);b(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(a=l.lang)&&void 0!==a?a:null,this.tenantId=null!==(o=l.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,s.I9)((0,s.hp)(e)).link,n=t?(0,s.I9)((0,s.hp)(t)).deep_link_id:null,r=(0,s.I9)((0,s.hp)(e)).deep_link_id;return(r?(0,s.I9)((0,s.hp)(r)).link:null)||r||n||t||e}(e);try{return new Ke(t)}catch(n){return null}}}class Qe{constructor(){this.providerId=Qe.PROVIDER_ID}static credential(e,t){return ze._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ke.parseLink(t);return b(n,"argument-error"),ze._fromEmailAndCode(e,n.code,n.tenantId)}}Qe.PROVIDER_ID="password",Qe.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Qe.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Je{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ye extends Je{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $e extends Ye{constructor(){super("facebook.com")}static credential(e){return qe._fromParams({providerId:$e.PROVIDER_ID,signInMethod:$e.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $e.credentialFromTaggedObject(e)}static credentialFromError(e){return $e.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $e.credential(t.oauthAccessToken)}catch(n){return null}}}$e.FACEBOOK_SIGN_IN_METHOD="facebook.com",$e.PROVIDER_ID="facebook.com";class Xe extends Ye{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qe._fromParams({providerId:Xe.PROVIDER_ID,signInMethod:Xe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xe.credentialFromTaggedObject(e)}static credentialFromError(e){return Xe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Xe.credential(n,r)}catch(s){return null}}}Xe.GOOGLE_SIGN_IN_METHOD="google.com",Xe.PROVIDER_ID="google.com";class Ze extends Ye{constructor(){super("github.com")}static credential(e){return qe._fromParams({providerId:Ze.PROVIDER_ID,signInMethod:Ze.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ze.credentialFromTaggedObject(e)}static credentialFromError(e){return Ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ze.credential(t.oauthAccessToken)}catch(n){return null}}}Ze.GITHUB_SIGN_IN_METHOD="github.com",Ze.PROVIDER_ID="github.com";class et extends Ye{constructor(){super("twitter.com")}static credential(e,t){return qe._fromParams({providerId:et.PROVIDER_ID,signInMethod:et.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return et.credentialFromTaggedObject(e)}static credentialFromError(e){return et.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return et.credential(n,r)}catch(s){return null}}}async function tt(e,t){return D(e,"POST","/v1/accounts:signUp",I(e,t))}et.TWITTER_SIGN_IN_METHOD="twitter.com",et.PROVIDER_ID="twitter.com";class nt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await ee._fromIdTokenResponse(e,n,r),i=rt(n);return new nt({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=rt(n);return new nt({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function rt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class st extends s.g{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,st.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new st(e,t,n,r)}}function it(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw st._fromErrorAndOperation(e,n,t,r);throw n})}async function at(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await K(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return nt._forOperation(e,"link",r)}async function ot(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:s}=e;if((0,r.xZ)(s.app))return Promise.reject(g(s));const i="reauthenticate";try{const r=await K(e,it(s,i,t,e),n);b(r.idToken,s,"internal-error");const a=W(r.idToken);b(a,s,"internal-error");const{sub:o}=a;return b(e.uid===o,s,"user-mismatch"),nt._forOperation(e,i,r)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&m(s,"user-mismatch"),a}}async function lt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const s="signIn",i=await it(e,s,t),a=await nt._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(a.user),a}async function ct(e,t){return lt(xe(e),t)}function ut(e,t,n){var r;b((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),b("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),b("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(b(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(b(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function dt(e){const t=xe(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ht(e,t,n){const r=xe(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&ut(r,s,n),await Ie(r,s,"getOobCode",Ve,"EMAIL_PASSWORD_PROVIDER")}async function mt(e,t){await async function(e,t){return P(e,"POST","/v1/accounts:update",I(e,t))}((0,s.Ku)(e),{oobCode:t})}async function ft(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(g(e));const s=xe(e),i=Ie(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tt,"EMAIL_PASSWORD_PROVIDER"),a=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&dt(e),t}),o=await nt._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(o.user),o}function pt(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(g(e)):ct((0,s.Ku)(e),Qe.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&dt(e),t})}async function gt(e,t){const n=(0,s.Ku)(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&ut(n.auth,r,t);const{email:i}=await async function(e,t){return Ue(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function vt(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=(0,s.Ku)(e),a={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await K(i,async function(e,t){return P(e,"POST","/v1/accounts:update",t)}(i.auth,a));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const l=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function yt(e,t,n,r){return(0,s.Ku)(e).onAuthStateChanged(t,n,r)}function bt(e){return(0,s.Ku)(e).signOut()}function wt(e,t){return P(e,"POST","/v2/accounts/mfaEnrollment:start",I(e,t))}new WeakMap;const xt="__sak";class Nt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xt,"1"),this.storage.removeItem(xt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Et extends Nt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ge(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Et.type="LOCAL";const St=Et;function Ct(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(s))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function kt(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class _t{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=kt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Ct(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=kt(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=kt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Ct(n);const s=setInterval(()=>{const e=Ct(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}_t.type="COOKIE";class jt extends Nt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jt.type="SESSION";const Tt=jt;class At{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new At(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function It(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}At.receivers=[];class Pt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=It("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Rt(){return window}function Dt(){return"undefined"!==typeof Rt().WorkerGlobalScope&&"function"===typeof Rt().importScripts}const Lt="firebaseLocalStorageDb",Ot="firebaseLocalStorage",Mt="fbase_key";class Ft{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ut(e,t){return e.transaction([Ot],t?"readwrite":"readonly").objectStore(Ot)}function Vt(){const e=indexedDB.open(Lt,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ot,{keyPath:Mt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Ot)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Lt);return new Ft(e).toPromise()}(),t(await Vt()))})})}async function zt(e,t,n){const r=Ut(e,!0).put({[Mt]:t,value:n});return new Ft(r).toPromise()}function Bt(e,t){const n=Ut(e,!0).delete(t);return new Ft(n).toPromise()}class qt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Vt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=At._getInstance(Dt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Pt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vt();return await zt(e,xt,"1"),await Bt(e,xt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>zt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ut(e,!1).get(t),r=await new Ft(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Bt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ut(e,!1).getAll();return new Ft(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}qt.type="LOCAL";const Ht=qt;function Wt(e,t){return P(e,"POST","/v2/accounts/mfaSignIn:start",I(e,t))}Ce("rcb"),new C(3e4,6e4);const Gt="recaptcha";async function Kt(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Pe(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){b("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Ie(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===je){b((null===n||void 0===n?void 0:n.type)===Gt,e,"argument-error");return wt(e,await Qt(e,t,n))}return wt(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{b("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;b(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Ie(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===je){b((null===n||void 0===n?void 0:n.type)===Gt,e,"argument-error");return Wt(e,await Qt(e,t,n))}return Wt(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Ie(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===je){b((null===n||void 0===n?void 0:n.type)===Gt,e,"argument-error");return He(e,await Qt(e,t,n))}return He(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Qt(e,t,n){b(n.type===Gt,e,"argument-error");const r=await n.verify();b("string"===typeof r,e,"argument-error");const s=Object.assign({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Jt{constructor(e){this.providerId=Jt.PROVIDER_ID,this.auth=xe(e)}verifyPhoneNumber(e,t){return Kt(this.auth,e,(0,s.Ku)(t))}static credential(e,t){return Ge._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Jt.credentialFromTaggedObject(t)}static credentialFromError(e){return Jt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ge._fromTokenResponse(n,r):null}}function Yt(e,t){return t?ne(t):(b(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Jt.PROVIDER_ID="phone",Jt.PHONE_SIGN_IN_METHOD="phone";class $t extends Oe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Be(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Be(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Be(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Xt(e){return lt(e.auth,new $t(e),e.bypassAuthState)}function Zt(e){const{auth:t,user:n}=e;return b(n,t,"internal-error"),ot(n,new $t(e),e.bypassAuthState)}async function en(e){const{auth:t,user:n}=e;return b(n,t,"internal-error"),at(n,new $t(e),e.bypassAuthState)}class tn{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xt;case"linkViaPopup":case"linkViaRedirect":return en;case"reauthViaPopup":case"reauthViaRedirect":return Zt;default:m(this.auth,"internal-error")}}resolve(e){x(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){x(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nn=new C(2e3,1e4);async function rn(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(f(e,"operation-not-supported-in-this-environment"));const s=xe(e);v(e,t,Je);const i=Yt(s,n);return new sn(s,"signInViaPopup",t,i).executeNotNull()}class sn extends tn{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,sn.currentPopupAction&&sn.currentPopupAction.cancel(),sn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return b(e,this.auth,"internal-error"),e}async onExecution(){x(1===this.filter.length,"Popup operations only handle one event");const e=It();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(f(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(f(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,nn.get())};e()}}sn.currentPopupAction=null;const an=new Map;class on extends tn{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=an.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=un(t),r=cn(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}an.set(this.auth._key(),e)}return this.bypassAuthState||an.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ln(e,t){an.set(e._key(),t)}function cn(e){return ne(e._redirectPersistence)}function un(e){return ie("pendingRedirect",e.config.apiKey,e.name)}async function dn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const s=xe(e),i=Yt(s,t),a=new on(s,i,n),o=await a.execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}class hn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!fn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(f(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mn(e))}saveEventToCache(e){this.cachedEventUids.add(mn(e)),this.lastProcessedEventTime=Date.now()}}function mn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function fn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const pn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gn=/^https?/;async function vn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return P(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(yn(r))return}catch(n){}m(e,"unauthorized-domain")}function yn(e){const t=N(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!gn.test(n))return!1;if(pn.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const bn=new C(3e4,6e4);function wn(){const e=Rt().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function xn(e){return new Promise((t,n)=>{var r,s,i;function a(){wn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wn(),n(f(e,"network-request-failed"))},timeout:bn.get()})}if(null===(s=null===(r=Rt().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Rt().gapi)||void 0===i?void 0:i.load)){const t=Ce("iframefcb");return Rt()[t]=()=>{gapi.load?a():n(f(e,"network-request-failed"))},Se("".concat(Ee.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Nn=null,e})}let Nn=null;const En=new C(5e3,15e3),Sn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kn(e){const t=e.config;b(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?k(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:r.MF},a=Cn.get(e.config.apiHost);a&&(i.eid=a);const o=e._getFrameworks();return o.length&&(i.fw=o.join(",")),"".concat(n,"?").concat((0,s.Am)(i).slice(1))}async function _n(e){const t=await function(e){return Nn=Nn||xn(e),Nn}(e),n=Rt().gapi;return b(n,e,"internal-error"),t.open({where:document.body,url:kn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=f(e,"network-request-failed"),i=Rt().setTimeout(()=>{r(s)},En.get());function a(){Rt().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const jn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function An(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},jn),{width:r.toString(),height:i.toString(),top:a,left:o}),u=(0,s.ZQ)().toLowerCase();n&&(l=ue(u)?"_blank":n),le(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new Tn(null);const h=window.open(t||"",l,d);b(h,e,"popup-blocked");try{h.focus()}catch(m){}return new Tn(h)}const In="__/auth/handler",Pn="emulator/auth/handler",Rn=encodeURIComponent("fac");async function Dn(e,t,n,i,a,o){b(e.config.authDomain,e,"auth-domain-config-required"),b(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:r.MF,eventId:a};if(t instanceof Je){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,s.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))l[e]=t}if(t instanceof Ye){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?"#".concat(Rn,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(In);return k(t,Pn)}(e),"?").concat((0,s.Am)(c).slice(1)).concat(d)}const Ln="webStorageSupport";const On=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tt,this._completeRedirectFn=dn,this._overrideRedirectResult=ln}async _openPopup(e,t,n,r){var s;x(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return An(e,await Dn(e,t,n,N(),r),It())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Rt().location.href=e}(await Dn(e,t,n,N(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(x(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await _n(e),n=new hn(e);return t.register("authEvent",t=>{b(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ln,{type:Ln},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ln];void 0!==s&&t(!!s),m(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ge()||ce()||pe()}};var Mn="@firebase/auth",Fn="1.10.8";class Un{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){b(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Vn=(0,s.XA)("authIdTokenMaxAge")||300;let zn=null;const Bn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Vn)return;const s=null===n||void 0===n?void 0:n.token;zn!==s&&(zn=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:"Bearer ".concat(s)}:{}}))};function qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,s.bD)(r,null!==t&&void 0!==t?t:{}))return e;m(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:On,persistence:[Ht,St,Tt]}),i=(0,s.XA)("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=Bn(e.toString());!function(e,t,n){(0,s.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,s.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const a=(0,s.Tj)("auth");return a&&Re(n,"http://".concat(a)),n}var Hn;Ee={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=f("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Hn="Browser",(0,r.om)(new o.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;b(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Hn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ve(Hn)},c=new we(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ne);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,r.om)(new o.uA("auth-internal",e=>(e=>new Un(e))(xe(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(Mn,Fn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Hn)),(0,r.KO)(Mn,Fn,"esm2017")},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},958:(e,t,n)=>{n.d(t,{j2:()=>f,db:()=>p,hJ:()=>g,Gg:()=>v});var r=n(150);(0,r.KO)("firebase","11.10.0","app");var s,i,a,o,l,c,u=n(898),d=n(472);const h={apiKey:null===(s="AIzaSyCn55V2y3cXp4Ln0NWjlauU8rgZgMgwDyc")?void 0:s.trim(),authDomain:null===(i="tuneparams.firebaseapp.com")?void 0:i.trim(),projectId:null===(a="tuneparams")?void 0:a.trim(),storageBucket:null===(o="tuneparams.firebasestorage.app")?void 0:o.trim(),messagingSenderId:null===(l="995918337622")?void 0:l.trim(),appId:null===(c="1:995918337622:web:505babbabe198e3f0d0df7")?void 0:c.trim()};let m,f,p,g;["REACT_APP_FIREBASE_API_KEY","REACT_APP_FIREBASE_AUTH_DOMAIN","REACT_APP_FIREBASE_PROJECT_ID","REACT_APP_FIREBASE_APP_ID"].filter(e=>!{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COMPANY_EMAIL:"contact@tuneparams.com",REACT_APP_COMPANY_NAME:"TuneParams AI Learning Platform",REACT_APP_COMPANY_PHONE:"+1 (469) 702-1086",REACT_APP_EMAILJS_PUBLIC_KEY:"g2ZIKXu5CMAtlW-yr",REACT_APP_EMAILJS_SERVICE_ID:"service_6nnlhkw",REACT_APP_EMAILJS_TEMPLATE_ID:"template_660cmfs",REACT_APP_ENABLE_COUPONS:"true",REACT_APP_FIREBASE_API_KEY:"AIzaSyCn55V2y3cXp4Ln0NWjlauU8rgZgMgwDyc",REACT_APP_FIREBASE_APP_ID:"1:995918337622:web:505babbabe198e3f0d0df7",REACT_APP_FIREBASE_AUTH_DOMAIN:"tuneparams.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"995918337622",REACT_APP_FIREBASE_PROJECT_ID:"tuneparams",REACT_APP_FIREBASE_STORAGE_BUCKET:"tuneparams.firebasestorage.app",REACT_APP_FORMSPREE_FORM_ID:"xkgbylng",REACT_APP_FROM_EMAIL:"noreply@tuneparams.com",REACT_APP_GITHUB_URL:"https://github.com/TuneParams-ai",REACT_APP_HERO_IMAGE_URL:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=500&h=400&fit=crop&auto=format",REACT_APP_LINKEDIN_URL:"https://www.linkedin.com/in/tuneparams/",REACT_APP_PAYPAL_CLIENT_ID:"Acpw6Y9AC_WmjeowDefzez5UraQz8Is2eli9_B1EiyTmkiilTremv-JSsTzcT65epfBO3BHiBmn7X-OF",REACT_APP_PAYPAL_ENVIRONMENT:"live",REACT_APP_SUPPORT_EMAIL:"contact@tuneparams.com",REACT_APP_TWITTER_URL:"https://twitter.com/tuneparams",REACT_APP_WEBSITE_URL:"https://www.tuneparams.ai"}[e]).length;let v=!1;try{const e=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(e=>!h[e]);if(e.length>0)throw new Error("Missing Firebase configuration: ".concat(e.join(", ")));m=(0,r.Wp)(h),f=(0,u.xI)(m),p=(0,d.aU)(m),g=new u.HF,g.setCustomParameters({prompt:"select_account"}),v=!0}catch(y){f=null,p=null,g=null,v=!1}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=n(43),s=n(391);function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var a=n(555);n(358);const o=["sri"],l=["page"],c=["page","matches"],u=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],d=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],h=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var m="popstate";function f(){return x(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return y("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:b(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function p(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function g(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return(0,a.A)((0,a.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?w(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function b(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function w(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function x(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l="POP",c=null,u=d();function d(){return(o.state||{idx:null}).idx}function h(){l="POP";let e=d(),t=null==e?null:e-u;u=e,c&&c({action:l,location:p.location,delta:t})}function f(e){return N(e)}null==u&&(u=0,o.replaceState((0,a.A)((0,a.A)({},o.state),{},{idx:u}),""));let p={get action(){return l},get location(){return e(s,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(m,h),c=e,()=>{s.removeEventListener(m,h),c=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let r=y(p.location,e,t);n&&n(r,e),u=d()+1;let a=v(r,u),h=p.createHref(r);try{o.pushState(a,"",h)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;s.location.assign(h)}i&&c&&c({action:l,location:p.location,delta:1})},replace:function(e,t){l="REPLACE";let r=y(p.location,e,t);n&&n(r,e),u=d();let s=v(r,u),a=p.createHref(r);o.replaceState(s,"",a),i&&c&&c({action:l,location:p.location,delta:0})},go:e=>o.go(e)};return p}function N(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),p(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:b(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function E(e,t){return S(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function S(e,t,n,r){let s=U(("string"===typeof t?w(t):t).pathname||"/",n);if(null==s)return null;let i=C(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=F(s);a=L(i[o],e,r)}return a}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(p(a.relativePath.startsWith(r),'Absolute route path "'.concat(a.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),a.relativePath=a.relativePath.slice(r.length));let o=H([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(p(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(o,'".')),C(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:D(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of k(e.path))s(e,t,r);else s(e,t)}),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=k(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var _=/^:[\w-]+$/,j=3,T=2,A=1,I=10,P=-2,R=e=>"*"===e;function D(e,t){let n=e.split("/"),r=n.length;return n.some(R)&&(r+=P),t&&(r+=T),n.filter(e=>!R(e)).reduce((e,t)=>e+(_.test(t)?j:""===t?A:I),r)}function L(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:H([i,u.pathname]),pathnameBase:W(H([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=H([i,u.pathnameBase]))}return a}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=M(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function M(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];g("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function F(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return g(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function U(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function V(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function z(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function B(e){let t=z(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function q(e,t,n){let r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=w(e):(r=(0,a.A)({},e),p(!r.pathname||!r.pathname.includes("?"),V("?","pathname","search",r)),p(!r.pathname||!r.pathname.includes("#"),V("#","pathname","hash",r)),p(!r.search||!r.search.includes("#"),V("#","search","hash",r)));let i,o=""===e||""===r.pathname,l=o?"/":r.pathname;if(null==l)i=n;else{let e=t.length-1;if(!s&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:s=""}="string"===typeof e?w(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:G(r),hash:K(s)}}(r,i),u=l&&"/"!==l&&l.endsWith("/"),d=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}var H=e=>e.join("/").replace(/\/\/+/g,"/"),W=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),G=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var J=["POST","PUT","PATCH","DELETE"],Y=(new Set(J),["GET",...J]);new Set(Y),Symbol("ResetLoaderData");var $=r.createContext(null);$.displayName="DataRouter";var X=r.createContext(null);X.displayName="DataRouterState";var Z=r.createContext({isTransitioning:!1});Z.displayName="ViewTransition";var ee=r.createContext(new Map);ee.displayName="Fetchers";var te=r.createContext(null);te.displayName="Await";var ne=r.createContext(null);ne.displayName="Navigation";var re=r.createContext(null);re.displayName="Location";var se=r.createContext({outlet:null,matches:[],isDataRoute:!1});se.displayName="Route";var ie=r.createContext(null);ie.displayName="RouteError";function ae(){return null!=r.useContext(re)}function oe(){return p(ae(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(re).location}var le="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ce(e){r.useContext(ne).static||r.useLayoutEffect(e)}function ue(){let{isDataRoute:e}=r.useContext(se);return e?function(){let{router:e}=we("useNavigate"),t=Ne("useNavigate"),n=r.useRef(!1);ce(()=>{n.current=!0});let s=r.useCallback(async function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(n.current,le),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,(0,a.A)({fromRouteId:t},s)))},[e,t]);return s}():function(){p(ae(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext($),{basename:t,navigator:n}=r.useContext(ne),{matches:s}=r.useContext(se),{pathname:i}=oe(),a=JSON.stringify(B(s)),o=r.useRef(!1);ce(()=>{o.current=!0});let l=r.useCallback(function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(g(o.current,le),!o.current)return;if("number"===typeof r)return void n.go(r);let l=q(r,JSON.parse(a),i,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:H([t,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)},[t,n,a,i,e]);return l}()}r.createContext(null);function de(){let{matches:e}=r.useContext(se),t=e[e.length-1];return t?t.params:{}}function he(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(se),{pathname:s}=oe(),i=JSON.stringify(B(n));return r.useMemo(()=>q(e,JSON.parse(i),s,"path"===t),[e,i,s,t])}function me(e,t,n,s){p(ae(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=r.useContext(ne),{matches:o}=r.useContext(se),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let e=h&&h.path||"";Ce(u,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let m,f=oe();if(t){var v;let e="string"===typeof t?w(t):t;p("/"===d||(null===(v=e.pathname)||void 0===v?void 0:v.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),m=e}else m=f;let y=m.pathname||"/",b=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=E(e,{pathname:b});g(h||null!=x,'No routes matched location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" ')),g(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,'Matched leaf route at location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let N=ye(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:H([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:H([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,s);return t&&N?r.createElement(re.Provider,{value:{location:(0,a.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:"POP"}},N):N}function fe(){let e=Ee(),t=Q(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:a},"ErrorBoundary")," or"," ",r.createElement("code",{style:a},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:i},n):null,o)}var pe=r.createElement(fe,null),ge=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(se.Provider,{value:this.props.routeContext},r.createElement(ie.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ve(e){let{routeContext:t,match:n,children:s}=e,i=r.useContext($);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(se.Provider,{value:t},s)}function ye(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,i=null===n||void 0===n?void 0:n.errors;if(null!=i){let e=s.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));p(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let a=!1,o=-1;if(n)for(let r=0;r<s.length;r++){let e=s[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){a=!0,s=o>=0?s.slice(0,o+1):[s[0]];break}}}return s.reduceRight((e,l,c)=>{let u,d=!1,h=null,m=null;n&&(u=i&&l.route.id?i[l.route.id]:void 0,h=l.route.errorElement||pe,a&&(o<0&&0===c?(Ce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,m=null):o===c&&(d=!0,m=l.route.hydrateFallbackElement||null)));let f=t.concat(s.slice(0,c+1)),p=()=>{let t;return t=u?h:d?m:l.route.Component?r.createElement(l.route.Component,null):l.route.element?l.route.element:e,r.createElement(ve,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?r.createElement(ge,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):p()},null)}function be(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function we(e){let t=r.useContext($);return p(t,be(e)),t}function xe(e){let t=r.useContext(X);return p(t,be(e)),t}function Ne(e){let t=function(e){let t=r.useContext(se);return p(t,be(e)),t}(e),n=t.matches[t.matches.length-1];return p(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ee(){var e;let t=r.useContext(ie),n=xe("useRouteError"),s=Ne("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[s]}var Se={};function Ce(e,t,n){t||Se[e]||(Se[e]=!0,g(!1,n))}r.memo(function(e){let{routes:t,future:n,state:r}=e;return me(t,void 0,r,n)});function ke(e){let{to:t,replace:n,state:s,relative:i}=e;p(ae(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=r.useContext(ne);g(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=r.useContext(se),{pathname:l}=oe(),c=ue(),u=q(t,B(o),l,"path"===i),d=JSON.stringify(u);return r.useEffect(()=>{c(JSON.parse(d),{replace:n,state:s,relative:i})},[c,d,i,n,s]),null}function _e(e){p(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function je(e){let{basename:t="/",children:n=null,location:s,navigationType:i="POP",navigator:a,static:o=!1}=e;p(!ae(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=r.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof s&&(s=w(s));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:f="default"}=s,v=r.useMemo(()=>{let e=U(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:m,key:f},navigationType:i}},[l,u,d,h,m,f,i]);return g(null!=v,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==v?null:r.createElement(ne.Provider,{value:c},r.createElement(re.Provider,{children:n,value:v}))}function Te(e){let{children:t,location:n}=e;return me(Ae(t),n)}r.Component;function Ae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,s)=>{if(!r.isValidElement(e))return;let i=[...t,s];if(e.type===r.Fragment)return void n.push.apply(n,Ae(e.props.children,i));p(e.type===_e,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),p(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ae(e.props.children,i)),n.push(a)}),n}var Ie="get",Pe="application/x-www-form-urlencoded";function Re(e){return null!=e&&"string"===typeof e.tagName}function De(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}var Le=null;var Oe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Me(e){return null==e||Oe.has(e)?e:(g(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Pe,'"')),null)}function Fe(e,t){let n,r,s,i,a;if(Re(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?U(a,t):null,n=e.getAttribute("method")||Ie,s=Me(e.getAttribute("enctype"))||Pe,i=new FormData(e)}else if(function(e){return Re(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Re(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?U(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Ie,s=Me(e.getAttribute("formenctype"))||Me(a.getAttribute("enctype"))||Pe,i=new FormData(a,e),!function(){if(null===Le)try{new FormData(document.createElement("form"),0),Le=!1}catch(e){Le=!0}return Le}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";i.append("".concat(e,"x"),"0"),i.append("".concat(e,"y"),"0")}else t&&i.append(t,r)}}else{if(Re(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ie,r=null,s=Pe,a=e}var o;return i&&"text/plain"===s&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}function Ue(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ve(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ze(e){return null!=e&&"string"===typeof e.page}function Be(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function qe(e,t,n,r,s,i){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===i?t.filter((t,i)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function He(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1),[...new Set(r)];var r}function We(e,t){let n=new Set,r=new Set(t);return e.reduce((e,s)=>{if(t&&!ze(s)&&"script"===s.as&&s.href&&r.has(s.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(s));return n.has(i)||(n.add(i),e.push({key:i,link:s})),e},[])}function Ge(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Ke=new Set([100,101,204,205]);function Qe(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===U(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}r.Component;function Je(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let s,i=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Q(t))return r.createElement(Ye,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),i);if(t instanceof Error)s=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);s=new Error(e)}return r.createElement(Ye,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),i)}function Ye(e){var t;let{title:n,renderScripts:s,isOutsideRemixApp:i,children:a}=e,{routeModules:o}=tt();return null!==(t=o.root)&&void 0!==t&&t.Layout&&!i?a:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,s?r.createElement(lt,null):null)))}function $e(e,t){return"lazy"===e.mode&&!0===t}function Xe(){let e=r.useContext($);return Ue(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ze(){let e=r.useContext(X);return Ue(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var et=r.createContext(void 0);function tt(){let e=r.useContext(et);return Ue(e,"You must render this element inside a <HydratedRouter> element"),e}function nt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function rt(e,t,n){if(n&&!ot)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}function st(e){let{page:t}=e,n=i(e,l),{router:s}=Xe(),o=r.useMemo(()=>E(s.routes,t,s.basename),[s.routes,t,s.basename]);return o?r.createElement(at,(0,a.A)({page:t,matches:o},n)):null}function it(e){let{manifest:t,routeModules:n}=tt(),[s,i]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return We((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Ve(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Be).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,a.A)((0,a.A)({},e),{},{rel:"prefetch",as:"style"}):(0,a.A)((0,a.A)({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),s}function at(e){let{page:t,matches:n}=e,s=i(e,c),o=oe(),{manifest:l,routeModules:u}=tt(),{basename:d}=Xe(),{loaderData:h,matches:m}=Ze(),f=r.useMemo(()=>qe(t,n,m,l,o,"data"),[t,n,m,l,o]),p=r.useMemo(()=>qe(t,n,m,l,o,"assets"),[t,n,m,l,o]),g=r.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let s=l.routes[t.route.id];s&&s.hasLoader&&(!f.some(e=>e.route.id===t.route.id)&&t.route.id in h&&null!==(n=u[t.route.id])&&void 0!==n&&n.shouldRevalidate||s.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let s=Qe(t,d);return r&&e.size>0&&s.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[s.pathname+s.search]},[d,h,o,l,f,n,t,u]),v=r.useMemo(()=>He(p,l),[p,l]),y=it(p);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",(0,a.A)({key:e,rel:"prefetch",as:"fetch",href:e},s))),v.map(e=>r.createElement("link",(0,a.A)({key:e,rel:"modulepreload",href:e},s))),y.map(e=>{let{key:t,link:n}=e;return r.createElement("link",(0,a.A)({key:t},n))}))}et.displayName="FrameworkContext";var ot=!1;function lt(e){let{manifest:t,serverHandoffString:n,isSpaMode:s,renderMeta:l,routeDiscovery:c,ssr:u}=tt(),{router:d,static:h,staticContext:m}=Xe(),{matches:f}=Ze(),p=$e(c,u);l&&(l.didRenderScripts=!0);let g=rt(f,null,s);r.useEffect(()=>{ot=!0},[]);let v=r.useMemo(()=>{var s;let l=m?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=h?"".concat(null!==(s=t.hmr)&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(p?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(g.map((e,n)=>{let r="route".concat(n),s=t.routes[e.route.id];Ue(s,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:i,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,u=[...i?[{module:i,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(p?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=i(e,o),s=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(l.pop();l.length>0;)c.push("/".concat(l.join("/"))),l.pop();c.forEach(e=>{let n=E(t.routes,e,t.basename);n&&n.forEach(e=>s.add(e.route.id))});let u=[...s].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return(0,a.A)((0,a.A)({},r),{},{routes:u,sri:!!n||void 0})}(t,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",(0,a.A)((0,a.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ge(l),type:void 0})),r.createElement("script",(0,a.A)((0,a.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ge(c),type:"module",async:!0})))},[]),y=ot?[]:(b=t.entry.imports.concat(He(g,t,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let w="object"===typeof t.sri?t.sri:{};return ot?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,p?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0})),v)}function ct(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}var ut="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ut&&(window.__reactRouterVersion="7.6.2")}catch(us){}function dt(e){let{basename:t,children:n,window:s}=e,i=r.useRef();null==i.current&&(i.current=f({window:s,v5Compat:!0}));let a=i.current,[o,l]=r.useState({action:a.action,location:a.location}),c=r.useCallback(e=>{r.startTransition(()=>l(e))},[l]);return r.useLayoutEffect(()=>a.listen(c),[a,c]),r.createElement(je,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a})}var ht=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=r.forwardRef(function(e,t){let n,{onClick:s,discover:o="render",prefetch:l="none",relative:c,reloadDocument:d,replace:h,state:m,target:f,to:v,preventScrollReset:y,viewTransition:w}=e,x=i(e,u),{basename:N}=r.useContext(ne),E="string"===typeof v&&ht.test(v),S=!1;if("string"===typeof v&&E&&(n=v,ut))try{let e=new URL(window.location.href),t=v.startsWith("//")?new URL(e.protocol+v):new URL(v),n=U(t.pathname,N);t.origin===e.origin&&null!=n?v=n+t.search+t.hash:S=!0}catch(us){g(!1,'<Link to="'.concat(v,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let C=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(ae(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=r.useContext(ne),{hash:i,pathname:a,search:o}=he(e,{relative:t}),l=a;return"/"!==n&&(l="/"===a?n:H([n,a])),s.createHref({pathname:l,search:o,hash:i})}(v,{relative:c}),[k,_,j]=function(e,t){let n=r.useContext(et),[s,i]=r.useState(!1),[a,o]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,m=r.useRef(null);r.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(s){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[s]);let f=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?"intent"!==e?[a,m,{}]:[a,m,{onFocus:nt(l,f),onBlur:nt(c,p),onMouseEnter:nt(u,f),onMouseLeave:nt(d,p),onTouchStart:nt(h,f)}]:[!1,m,{}]}(l,x),T=function(e){let{target:t,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ue(),c=oe(),u=he(e,{relative:a});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:b(c)===b(u);l(e,{replace:t,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,u,n,s,t,e,i,a,o])}(v,{replace:h,state:m,target:f,preventScrollReset:y,relative:c,viewTransition:w});let A=r.createElement("a",(0,a.A)((0,a.A)((0,a.A)({},x),j),{},{href:n||C,onClick:S||d?s:function(e){s&&s(e),e.defaultPrevented||T(e)},ref:ct(t,_),target:f,"data-discover":E||"render"!==o?void 0:"true"}));return k&&!E?r.createElement(r.Fragment,null,A,r.createElement(st,{page:C})):A});mt.displayName="Link",r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:s=!1,className:o="",end:l=!1,style:c,to:u,viewTransition:h,children:m}=e,f=i(e,d),g=he(u,{relative:f.relative}),v=oe(),y=r.useContext(X),{navigator:b,basename:w}=r.useContext(ne),x=null!=y&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(Z);p(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=gt("useViewTransitionState"),i=he(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=U(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=U(n.nextLocation.pathname,s)||n.nextLocation.pathname;return null!=O(i.pathname,o)||null!=O(i.pathname,a)}(g)&&!0===h,N=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,E=v.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(E=E.toLowerCase(),S=S?S.toLowerCase():null,N=N.toLowerCase()),S&&w&&(S=U(S,w)||S);const C="/"!==N&&N.endsWith("/")?N.length-1:N.length;let k,_=E===N||!l&&E.startsWith(N)&&"/"===E.charAt(C),j=null!=S&&(S===N||!l&&S.startsWith(N)&&"/"===S.charAt(N.length)),T={isActive:_,isPending:j,isTransitioning:x},A=_?n:void 0;k="function"===typeof o?o(T):[o,_?"active":null,j?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let I="function"===typeof c?c(T):c;return r.createElement(mt,(0,a.A)((0,a.A)({},f),{},{"aria-current":A,className:k,ref:t,style:I,to:u,viewTransition:h}),"function"===typeof m?m(T):m)}).displayName="NavLink";var ft=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:s,navigate:o,reloadDocument:l,replace:c,state:u,method:d=Ie,action:m,onSubmit:f,relative:g,preventScrollReset:v,viewTransition:y}=e,w=i(e,h),x=wt(),N=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(ne),s=r.useContext(se);p(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),o=(0,a.A)({},he(e||".",{relative:t})),l=oe();if(null==e){o.search=l.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!i.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:H([n,o.pathname]));return b(o)}(m,{relative:g}),E="get"===d.toLowerCase()?"get":"post",S="string"===typeof m&&ht.test(m);return r.createElement("form",(0,a.A)((0,a.A)({ref:t,method:E,action:N,onSubmit:l?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;x(t||e.currentTarget,{fetcherKey:s,method:n,navigate:o,replace:c,state:u,relative:g,preventScrollReset:v,viewTransition:y})}},w),{},{"data-discover":S||"render"!==n?void 0:"true"}))});function pt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function gt(e){let t=r.useContext($);return p(t,pt(e)),t}function vt(e){g("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=r.useRef(De(e)),n=r.useRef(!1),s=oe(),i=r.useMemo(()=>function(e,t){let n=De(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(s.search,n.current?null:t.current),[s.search]),a=ue(),o=r.useCallback((e,t)=>{const r=De("function"===typeof e?e(i):e);n.current=!0,a("?"+r,t)},[a,i]);return[i,o]}ft.displayName="Form";var yt=0,bt=()=>"__".concat(String(++yt),"__");function wt(){let{router:e}=gt("useSubmit"),{basename:t}=r.useContext(ne),n=Ne("useRouteId");return r.useCallback(async function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:a,encType:o,formData:l,body:c}=Fe(r,t);if(!1===s.navigate){let t=s.fetcherKey||bt();await e.fetch(t,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}var xt=n(958),Nt=n(472);const Et=async e=>{try{if(!e||!e.uid)throw new Error("Invalid user object provided");const t=(0,Nt.H9)(xt.db,"users",e.uid),n=await(0,Nt.x7)(t),r=(0,a.A)({uid:e.uid,email:e.email,displayName:e.displayName||e.name||"",photoURL:e.photoURL||"",emailVerified:e.emailVerified||!1,lastLoginAt:(0,Nt.O5)()},n.exists()?{}:{createdAt:(0,Nt.O5)(),role:"student"});return await(0,Nt.BN)(t,r,{merge:!0}),{success:!0,message:"User profile updated successfully",userData:r}}catch(t){return{success:!1,error:t.message}}},St=async e=>{try{if(!e)throw new Error("User ID is required");const t=(0,Nt.H9)(xt.db,"users",e),n=await(0,Nt.x7)(t);return n.exists()?{success:!0,userData:(0,a.A)({id:n.id},n.data())}:{success:!1,error:"User profile not found"}}catch(t){return{success:!1,error:t.message}}},Ct=async()=>{try{const e=(0,Nt.P)((0,Nt.rJ)(xt.db,"users"),(0,Nt.My)("createdAt","desc")),t=await(0,Nt.GG)(e);return{success:!0,users:t.docs.map(e=>(0,a.A)({id:e.id},e.data()))}}catch(e){return{success:!1,error:e.message,users:[]}}};var kt=n(898),_t=n(579);const jt=(0,r.createContext)({user:null,loading:!0,signInWithGoogle:async()=>({success:!1,error:"Firebase not configured"}),signInWithEmail:async()=>({success:!1,error:"Firebase not configured"}),registerWithEmail:async()=>({success:!1,error:"Firebase not configured"}),sendVerificationEmail:async()=>({success:!1,error:"Firebase not configured"}),resendVerificationEmail:async()=>({success:!1,error:"Firebase not configured"}),sendPasswordReset:async()=>({success:!1,error:"Firebase not configured"}),verifyEmail:async()=>({success:!1,error:"Firebase not configured"}),logout:async()=>({success:!1,error:"Firebase not configured"})}),Tt=e=>{let{children:t}=e;const[n,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!xt.Gg)return void o(!1);const e=(0,kt.hg)(xt.j2,e=>{if(e){var t;if(e.emailVerified||"google.com"===(null===(t=e.providerData[0])||void 0===t?void 0:t.providerId)){var n;const t={uid:e.uid,name:e.displayName||(null===(n=e.email)||void 0===n?void 0:n.split("@")[0]),email:e.email,photoURL:e.photoURL,emailVerified:e.emailVerified,role:"student"};s(t),localStorage.setItem("user",JSON.stringify(t))}else s(null),localStorage.removeItem("user")}else{const e=localStorage.getItem("user");s(e?JSON.parse(e):null)}o(!1)});return()=>e()},[]);const l={user:n,loading:i,signInWithGoogle:async()=>{if(!xt.Gg)return{success:!1,error:"Firebase not configured. Please check your environment variables."};try{const e=(await(0,kt.df)(xt.j2,xt.hJ)).user;await Et(e);const t={uid:e.uid,name:e.displayName,email:e.email,photoURL:e.photoURL,role:"student"};return localStorage.setItem("user",JSON.stringify(t)),{success:!0,user:t}}catch(e){return{success:!1,error:e.message}}},signInWithEmail:async(e,t)=>{try{const n=(await(0,kt.x9)(xt.j2,e,t)).user;if(!n.emailVerified)return await(0,kt.CI)(xt.j2),{success:!1,error:"Please verify your email before signing in. Check your inbox for the verification link.",requiresVerification:!0};await Et(n);const r={uid:n.uid,name:n.displayName||e.split("@")[0],email:n.email,photoURL:n.photoURL,emailVerified:n.emailVerified,role:"student"};return localStorage.setItem("user",JSON.stringify(r)),{success:!0,user:r}}catch(n){let e="Sign-in failed";switch(n.code){case"auth/user-not-found":e="No account found with this email address.";break;case"auth/wrong-password":e="Incorrect password. Please try again.";break;case"auth/invalid-email":e="Please enter a valid email address.";break;case"auth/too-many-requests":e="Too many failed attempts. Please try again later.";break;default:e=n.message||"Sign-in failed. Please try again."}return{success:!1,error:e}}},registerWithEmail:async(e,t,n,r)=>{try{const s=(await(0,kt.eJ)(xt.j2,e,t)).user;return await(0,kt.r7)(s,{displayName:"".concat(n," ").concat(r)}),await Et((0,a.A)((0,a.A)({},s),{},{displayName:"".concat(n," ").concat(r)})),await(0,kt.gA)(s,{url:"".concat(window.location.origin,"/login?emailVerified=true"),handleCodeInApp:!1}),await(0,kt.CI)(xt.j2),{success:!0,requiresVerification:!0,message:"Registration successful! Please check your email and click the verification link before signing in.",user:{uid:s.uid,name:"".concat(n," ").concat(r),email:s.email,emailVerified:s.emailVerified}}}catch(s){let e="Registration failed";switch(s.code){case"auth/email-already-in-use":e="An account with this email already exists. Please try signing in instead.";break;case"auth/weak-password":e="Password is too weak. Please choose a stronger password.";break;case"auth/invalid-email":e="Please enter a valid email address.";break;default:e=s.message||"Registration failed. Please try again."}return{success:!1,error:e}}},logout:async()=>{try{return await(0,kt.CI)(xt.j2),localStorage.removeItem("user"),s(null),{success:!0}}catch(e){return{success:!1,error:e.message}}},sendVerificationEmail:async()=>{try{return xt.j2.currentUser?xt.j2.currentUser.emailVerified?{success:!1,error:"Email is already verified."}:(await(0,kt.gA)(xt.j2.currentUser,{url:"".concat(window.location.origin,"/login?emailVerified=true"),handleCodeInApp:!1}),{success:!0,message:"Verification email sent! Please check your inbox and **SPAM** folder."}):{success:!1,error:"No user is currently signed in."}}catch(e){return{success:!1,error:e.message||"Failed to send verification email."}}},resendVerificationEmail:async(e,t)=>{try{const n=(await(0,kt.x9)(xt.j2,e,t)).user;return n.emailVerified?(await(0,kt.CI)(xt.j2),{success:!1,error:"Email is already verified. You can sign in normally."}):(await(0,kt.gA)(n,{url:"".concat(window.location.origin,"/login?emailVerified=true"),handleCodeInApp:!1}),await(0,kt.CI)(xt.j2),{success:!0,message:"Verification email sent! Please check your inbox and **SPAM** folder."})}catch(n){let e="Failed to resend verification email";switch(n.code){case"auth/user-not-found":e="No account found with this email address.";break;case"auth/wrong-password":e="Incorrect password. Please enter the correct password.";break;case"auth/invalid-email":e="Please enter a valid email address.";break;case"auth/too-many-requests":e="Too many attempts. Please try again later.";break;default:e=n.message||"Failed to resend verification email. Please try again."}return{success:!1,error:e}}},sendPasswordReset:async e=>{try{return await(0,kt.J1)(xt.j2,e,{url:"".concat(window.location.origin,"/login?passwordReset=true"),handleCodeInApp:!1}),{success:!0,message:"If an account with this email exists, password reset instructions will be sent. Please check your inbox and **SPAM** folder."}}catch(t){let e="Failed to send password reset email";switch(t.code){case"auth/user-not-found":e="No account found with this email address. Please check your email or sign up first.";break;case"auth/invalid-email":e="Please enter a valid email address.";break;case"auth/too-many-requests":e="Too many password reset attempts. Please try again later.";break;default:e=t.message||"Failed to send password reset email. Please try again."}return{success:!1,error:e}}},verifyEmail:async e=>{try{return await(0,kt.sv)(xt.j2,e),{success:!0,message:"Email verified successfully! You can now sign in."}}catch(t){let e="Email verification failed";switch(t.code){case"auth/expired-action-code":e="The verification link has expired. Please request a new one.";break;case"auth/invalid-action-code":e="The verification link is invalid. Please request a new one.";break;case"auth/user-disabled":e="This account has been disabled.";break;default:e=t.message||"Email verification failed."}return{success:!1,error:e}}}};return(0,_t.jsx)(jt.Provider,{value:l,children:t})},At=Tt,It=()=>{const e=(0,r.useContext)(jt);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Pt={ADMIN:"admin",INSTRUCTOR:"instructor",STUDENT:"student"},Rt="view_admin_panel",Dt="manage_users",Lt="view_payments",Ot="manage_courses",Mt="view_analytics",Ft={[Pt.ADMIN]:[Rt,Dt,Lt,Ot,Mt],[Pt.INSTRUCTOR]:[Ot,Mt],[Pt.STUDENT]:[]},Ut=async e=>{try{if(!xt.db)return{role:Pt.STUDENT,permissions:[]};const t=(0,Nt.H9)(xt.db,"user_roles",e),n=await(0,Nt.x7)(t);if(n.exists()){return n.data()}return{role:Pt.STUDENT,permissions:Ft[Pt.STUDENT],isActive:!0}}catch(t){return{role:Pt.STUDENT,permissions:[]}}},Vt=async e=>{try{const t=await Ut(e);return t.role===Pt.ADMIN&&t.isActive}catch(t){return!1}},zt=["contact@tuneparams.com","abhinaykotla@gmail.com","admin@tuneparams.com"],Bt=()=>{var e,t;const[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),c=oe(),u=ue(),{user:d,logout:h}=It();(0,r.useEffect)(()=>{(async()=>{if(d)try{if(await Vt(d.uid))return void l(!0);l(zt.includes(d.email))}catch(e){l(zt.includes(d.email))}else l(!1)})()},[d]);const m=()=>{s(!1),a(!1)},f=e=>"/"===e&&"/"===c.pathname||!("/"===e||!c.pathname.startsWith(e));return(0,r.useEffect)(()=>(n?document.body.classList.add("menu-open"):document.body.classList.remove("menu-open"),()=>{document.body.classList.remove("menu-open")}),[n]),(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&n&&m()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),(0,_t.jsxs)("nav",{className:"navbar",children:[(0,_t.jsx)("div",{className:"logo",children:(0,_t.jsxs)(mt,{to:"/",onClick:m,children:[(0,_t.jsx)("img",{src:"/logo192.png",alt:"TuneParams Logo",className:"logo-image"}),"TunePARAMS"]})}),(0,_t.jsxs)("button",{className:"hamburger ".concat(n?"hamburger-open":""),onClick:()=>{s(!n)},"aria-label":"Toggle navigation",children:[(0,_t.jsx)("span",{}),(0,_t.jsx)("span",{}),(0,_t.jsx)("span",{})]}),(0,_t.jsxs)("div",{className:"nav-links ".concat(n?"nav-links-open":""),children:[(0,_t.jsx)(mt,{to:"/",onClick:m,className:f("/")?"active":"",children:"Home"}),(0,_t.jsx)(mt,{to:"/courses",onClick:m,className:f("/courses")?"active":"",children:"Courses"}),(0,_t.jsx)(mt,{to:"/forums",onClick:m,className:f("/forums")?"active":"",children:"Forums"}),(0,_t.jsx)(mt,{to:"/about-us",onClick:m,className:f("/about-us")?"active":"",children:"About Us"}),d&&(0,_t.jsx)(mt,{to:"/dashboard",onClick:m,className:f("/dashboard")?"active":"",children:"Dashboard"}),(0,_t.jsx)(mt,{to:"/contact",onClick:m,className:f("/contact")?"active":"",children:"Contact"}),d?(0,_t.jsxs)("div",{className:"user-menu-container",children:[(0,_t.jsxs)("button",{className:"user-profile-button",onClick:()=>a(!i),children:[d.photoURL?(0,_t.jsx)("img",{src:d.photoURL,alt:d.name,className:"user-avatar"}):(0,_t.jsx)("div",{className:"user-avatar-fallback",children:(null===(e=d.name)||void 0===e||null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase())||"U"}),(0,_t.jsx)("span",{className:"user-name",children:d.name}),(0,_t.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]}),i&&(0,_t.jsxs)("div",{className:"user-dropdown",children:[(0,_t.jsxs)("div",{className:"user-info-section",children:[(0,_t.jsx)("div",{className:"user-info-name",children:d.name}),(0,_t.jsx)("div",{className:"user-info-email",children:d.email}),(0,_t.jsxs)("div",{className:"user-info-role",children:["Role: ",d.role," ",o&&"(Admin)"]})]}),o&&(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)(mt,{to:"/admin/dashboard",onClick:m,className:"admin-menu-link",children:"\ud83c\udfdb\ufe0f Admin Panel"}),(0,_t.jsx)("div",{className:"admin-menu-separator"})]}),(0,_t.jsx)("button",{onClick:async()=>{(await h()).success&&(u("/"),m())},className:"",children:"Logout"})]})]}):(0,_t.jsx)(mt,{to:"/login",onClick:m,className:f("/login")?"active":"",children:"Login"})]}),n&&(0,_t.jsx)("div",{className:"nav-overlay",onClick:m})]})},qt=()=>(0,_t.jsx)("footer",{className:"footer",children:(0,_t.jsx)("p",{children:"\xa9 2025 TuneParams.ai. All rights reserved."})}),Ht=e=>{let{children:t,requiredRole:n=null}=e;const{user:r,loading:s}=It(),i=oe();if(s)return(0,_t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 80px)",color:"var(--text-color)"},children:(0,_t.jsx)("div",{children:"Loading..."})});if(!r)return(0,_t.jsx)(ke,{to:"/login",state:{from:i},replace:!0});if(n)if("admin"===r.role);else{if("instructor"===n&&"instructor"!==r.role)return(0,_t.jsx)(ke,{to:"/dashboard",replace:!0});if("admin"===n&&"admin"!==r.role)return(0,_t.jsx)(ke,{to:"/dashboard",replace:!0});if("instructor"!==n&&"admin"!==n&&r.role!==n)return(0,_t.jsx)(ke,{to:"/dashboard",replace:!0})}return t};class Wt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Network Error";this.status=e,this.text=t}}const Gt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!==typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},Kt=e=>e?"string"===typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},Qt=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=await fetch(Gt.origin+e,{method:"POST",headers:n,body:t}),s=await r.text(),i=new Wt(r.status,s);if(r.ok)return i;throw i},Jt=(e,t,n)=>{if(!e||"string"!==typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!==typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!==typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Yt=e=>e.webdriver||!e.languages||0===e.languages.length,$t=()=>new Wt(451,"Unavailable For Headless Browser"),Xt=(e,t)=>{if((e=>{var t;return!(null!==(t=e.list)&&void 0!==t&&t.length)||!e.watchVariable})(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!==typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=((e,t)=>e instanceof FormData?e.get(t):e[t])(t,e.watchVariable);return"string"===typeof n&&e.list.includes(n)},Zt=()=>new Wt(403,"Forbidden"),en=async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!==typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!==typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const r=t.id||e,s=await(async(e,t,n)=>{const r=Number(await n.get(e)||0);return t-Date.now()+r})(r,t.throttle,n);return s>0||(await n.set(r,Date.now().toString()),!1)},tn=()=>new Wt(429,"Too Many Requests"),nn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.emailjs.com";if(!e)return;const n=Kt(e);Gt.publicKey=n.publicKey,Gt.blockHeadless=n.blockHeadless,Gt.storageProvider=n.storageProvider,Gt.blockList=n.blockList,Gt.limitRate=n.limitRate,Gt.origin=n.origin||t},rn=async(e,t,n,r)=>{const s=Kt(r),i=s.publicKey||Gt.publicKey,o=s.blockHeadless||Gt.blockHeadless,l=s.storageProvider||Gt.storageProvider,c=(0,a.A)((0,a.A)({},Gt.blockList),s.blockList),u=(0,a.A)((0,a.A)({},Gt.limitRate),s.limitRate);if(o&&Yt(navigator))return Promise.reject($t());if(Jt(i,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(n),n&&Xt(c,n))return Promise.reject(Zt());if(await en(location.pathname,u,l))return Promise.reject(tn());const d={lib_version:"4.4.1",user_id:i,service_id:e,template_id:t,template_params:n};return Qt("/api/v1.0/email/send",JSON.stringify(d),{"Content-type":"application/json"})},sn="service_6nnlhkw",an="template_660cmfs",on="g2ZIKXu5CMAtlW-yr",ln="TuneParams AI Learning Platform",cn="contact@tuneparams.com",un="https://www.tuneparams.ai",dn=()=>{on&&nn(on)},hn=async e=>{try{0,dn();const t=(e=>{const{userName:t,userEmail:n,courseTitle:r,amount:s,paymentId:i,orderId:a,enrollmentDate:o,paymentMethod:l,payerName:c,payerEmail:u,transactionStatus:d,fundingSource:h}=e;let m="Student";return t&&("string"===typeof t?m=t.split(" ")[0]:"object"===typeof t&&t.given_name?m=t.given_name:"object"===typeof t&&t.firstName&&(m=t.firstName)),{subject:"Welcome to ".concat(r," Your AI learning journey starts now"),htmlContent:'\n        <div style="font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #000000;">\n            <div style="background: linear-gradient(135deg, #1D7E99 0%, #C3C7CA 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">\n                <h1 style="color: white; margin: 0; font-size: 28px;">Welcome to '.concat(ln,'!</h1>\n                <p style="color: #ffffff; margin: 10px 0 0 0; font-size: 16px; opacity: 0.9;">Your AI learning journey starts now</p>\n            </div>\n\n            <div style="background: #000000; padding: 30px; border-radius: 0 0 10px 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); border: 1px solid rgba(29, 126, 153, 0.2);">\n                <p style="font-size: 16px; color: #ffffff; margin-bottom: 20px;">Hi ').concat(m,',</p>\n\n                <p style="font-size: 16px; color: #ffffff; line-height: 1.6;">\n                    Thank you for registering for our AI Training Course \u2014 we\'re excited to have you on board! \ud83d\ude80\n                </p>\n\n                <div style="background: rgba(29, 126, 153, 0.1); padding: 20px; border-radius: 8px; margin: 25px 0; border: 1px solid rgba(29, 126, 153, 0.2);">\n                    <h3 style="color: #ffffff; margin-top: 0;">\ud83d\udccb Enrollment Details</h3>\n                    <table style="width: 100%; border-collapse: collapse;">\n                        <tr>\n                            <td style="padding: 8px 0; color: #C3C7CA; font-weight: bold;">Course:</td>\n                            <td style="padding: 8px 0; color: #ffffff;">').concat(r,'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #C3C7CA; font-weight: bold;">Amount Paid:</td>\n                            <td style="padding: 8px 0; color: #ffffff;">$').concat(s,'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #C3C7CA; font-weight: bold;">Payment Method:</td>\n                            <td style="padding: 8px 0; color: #ffffff;">').concat(l||"PayPal",'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #C3C7CA; font-weight: bold;">Transaction Status:</td>\n                            <td style="padding: 8px 0; color: #ffffff; text-transform: capitalize;">').concat(d||"Completed",'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #C3C7CA; font-weight: bold;">Payment ID:</td>\n                            <td style="padding: 8px 0; color: #ffffff; font-family: monospace; font-size: 14px;">').concat(i,'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #C3C7CA; font-weight: bold;">Order ID:</td>\n                            <td style="padding: 8px 0; color: #ffffff; font-family: monospace; font-size: 14px;">').concat(a,'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #C3C7CA; font-weight: bold;">Enrollment Date:</td>\n                            <td style="padding: 8px 0; color: #ffffff;">').concat(o,"</td>\n                        </tr>\n                        ").concat(c&&c!==t?'\n                        <tr>\n                            <td style="padding: 8px 0; color: #C3C7CA; font-weight: bold;">Payer Name:</td>\n                            <td style="padding: 8px 0; color: #ffffff;">'.concat(c,"</td>\n                        </tr>\n                        "):"","\n                        ").concat(u&&u!==n?'\n                        <tr>\n                            <td style="padding: 8px 0; color: #C3C7CA; font-weight: bold;">Payment Email:</td>\n                            <td style="padding: 8px 0; color: #ffffff;">'.concat(u,"</td>\n                        </tr>\n                        "):"","\n                        ").concat(h?'\n                        <tr>\n                            <td style="padding: 8px 0; color: #C3C7CA; font-weight: bold;">Funding Source:</td>\n                            <td style="padding: 8px 0; color: #ffffff; text-transform: capitalize;">'.concat(h,"</td>\n                        </tr>\n                        "):"",'\n                    </table>\n                </div>\n\n                <h3 style="color: #ffffff; margin-top: 30px;">Here\'s what you can expect:</h3>\n                <ul style="color: #ffffff; line-height: 1.8; padding-left: 20px;">\n                    <li><strong>Live lessons</strong> covering machine learning, deep learning, NLP, and large language models (LLMs).</li>\n                    <li><strong>Hands-on coding exercises</strong> and assignments to strengthen your skills.</li>\n                    <li><strong>Projects and labs</strong> that bring AI concepts to life with real-world applications.</li>\n                    <li><strong>A supportive learning community</strong> to ask questions, share progress, and get feedback.</li>\n                </ul>\n\n                <h3 style="color: #ffffff; margin-top: 30px;">Next Steps:</h3>\n                <ul style="color: #ffffff; line-height: 1.8; padding-left: 20px;">\n                    <li>Log in to your account at <a href="').concat(un,'" style="color: #1D7E99; text-decoration: none;">').concat(un,'</a>.</li>\n                    <li>Check out the course schedule and upcoming sessions on our website.</li>\n                </ul>\n\n                <p style="color: #ffffff; line-height: 1.6; margin-top: 25px;">\n                    We\'re thrilled to have you join our community of learners. If you have any questions, feel free to reply to this email or reach out at\n                    <a href="mailto:').concat(cn,'" style="color: #1D7E99; text-decoration: none;">').concat(cn,'</a>.\n                </p>\n\n                <p style="color: #ffffff; line-height: 1.6; margin-top: 20px;">\n                    Let\'s make your AI journey an exciting and rewarding one!\n                </p>\n\n                <p style="color: #ffffff; margin-top: 30px;">\n                    Best,<br>\n                    <strong>TuneParams Team</strong>\n                </p>\n            </div>\n\n            <div style="text-align: center; padding: 20px; color: #C3C7CA; font-size: 14px; background-color: #000000;">\n                <p>\xa9 2025 ').concat(ln,". All rights reserved.</p>\n                <p>This email was sent to ").concat(n," regarding your course enrollment.</p>\n            </div>\n        </div>\n    "),textContent:"\nHi ".concat(m,",\n\nThank you for registering for our AI Training Course \u2014 we're excited to have you on board! \ud83d\ude80\n\nENROLLMENT DETAILS:\n- Course: ").concat(r,"\n- Amount Paid: $").concat(s,"\n- Payment Method: ").concat(l||"PayPal","\n- Transaction Status: ").concat(d||"Completed","\n- Payment ID: ").concat(i,"\n- Order ID: ").concat(a,"\n- Enrollment Date: ").concat(o,"\n").concat(c&&c!==t?"- Payer Name: ".concat(c):"","\n").concat(u&&u!==n?"- Payment Email: ".concat(u):"","\n").concat(h?"- Funding Source: ".concat(h):"","\n\nHere's what you can expect:\n\n\u2022 Live lessons covering machine learning, deep learning, NLP, and large language models (LLMs).\n\n\u2022 Hands-on coding exercises and assignments to strengthen your skills.\n\n\u2022 Projects and labs that bring AI concepts to life with real-world applications.\n\n\u2022 A supportive learning community to ask questions, share progress, and get feedback.\n\nNext Steps:\n\n\u2022 Log in to your account at ").concat(un,".\n\n\u2022 Check out the course schedule and upcoming sessions on our website.\n\nWe're thrilled to have you join our community of learners. If you have any questions, feel free to reply to this email or reach out at ").concat(cn,".\n\nLet's make your AI journey an exciting and rewarding one! \ud83c\udf1f\n\nBest,\nTuneParams Team\n\n---\nENROLLMENT DETAILS:\n- Course: ").concat(r,"\n- Amount Paid: $").concat(s,"\n- Payment ID: ").concat(i,"\n- Order ID: ").concat(a,"\n- Enrollment Date: ").concat(o,"\n\nThis email was sent to ").concat(n," regarding your course enrollment.\n\xa9 2025 ").concat(ln,". All rights reserved.\n    "),recipientEmail:n,recipientName:t||m}})(e),n={to_email:t.recipientEmail,to_name:t.recipientName,from_name:"".concat(ln," Team"),subject:t.subject,html_content:t.htmlContent,text_content:t.textContent,course_title:e.courseTitle,user_name:e.userName,amount:e.amount,payment_id:e.paymentId,order_id:e.orderId,enrollment_date:e.enrollmentDate,website_url:un,support_email:cn,payment_method:e.paymentMethod||"PayPal",payer_name:e.payerName||"",payer_email:e.payerEmail||"",transaction_status:e.transactionStatus||"Completed",funding_source:e.fundingSource||""};return{success:!0,messageId:(await rn(sn,an,n)).text,emailContent:t,rawTextContent:t.textContent}}catch(t){return{success:!1,error:t.message||"Failed to send email"}}},mn=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{recordEmailSent:r}=await Promise.resolve().then(n.bind(n,417));try{dn();const n=fn(e),i=await rn(sn,an,n);try{await r({userId:t,recipientEmail:e.recipientEmail,recipientName:e.recipientName,emailType:"coupon_notification",subject:n.subject,courseId:e.courseId||null,courseTitle:e.courseTitle||null,emailServiceResponse:i,success:!0,rawTextContent:pn(e),metadata:{couponCode:e.couponCode,couponName:e.couponName,discountType:e.discountType,discountValue:e.discountValue,validUntil:e.validUntil,minOrderAmount:e.minOrderAmount,senderName:e.senderName}})}catch(s){}return{success:!0,response:i,emailId:i.text}}catch(i){try{await r({userId:t,recipientEmail:e.recipientEmail,recipientName:e.recipientName,emailType:"coupon_notification",subject:"\ud83c\udfab Your Exclusive Coupon Code: ".concat(e.couponCode),courseId:e.courseId||null,courseTitle:e.courseTitle||null,success:!1,error:i.message||"Failed to send coupon email",metadata:{couponCode:e.couponCode,couponName:e.couponName,discountType:e.discountType,discountValue:e.discountValue}})}catch(s){}return{success:!1,error:i.message||"Failed to send coupon email"}}},fn=e=>{const{recipientName:t,recipientEmail:n,couponCode:r,couponName:s,discountType:i,discountValue:a,courseTitle:o,courseId:l,validUntil:c,minOrderAmount:u,adminMessage:d,senderName:h}=e,m="percentage"===i?"".concat(a,"% off"):"$".concat(a," off"),f=c?"Valid until ".concat(new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})):"No expiry date",p=u?"Minimum order amount: $".concat(u):"No minimum order requirement";let g="",v="",y="".concat(un,"/courses");o&&l?(g="This coupon is specifically for: **".concat(o,"**"),y="".concat(un,"/courses/").concat(l),v="\n\ud83d\udcda **Course Information**: ".concat(un,"/courses/").concat(l,"\n\ud83c\udfaf **Direct Enrollment**: ").concat(y,"\n        ")):(g="This coupon can be used for any of our courses",v="\n\ud83d\udcda **Browse All Courses**: ".concat(un,"/courses\n\ud83c\udfaf **AI Foundations Course**: ").concat(un,"/courses/FAAI\n\ud83e\udd16 **Reinforcement Learning**: ").concat(un,"/courses/RLAI\n        "));const b=o&&l?"\n**How to Redeem Your Coupon:**\n\n1. \ud83c\udf10 **Visit the course page**: ".concat(y,'\n2. \ud83d\udcdd **Click "Enroll Now"** to start the enrollment process\n3. \ud83d\udcb3 **At checkout**, look for "Have a coupon code?" section\n4. \ud83c\udfab **Enter your coupon code**: `').concat(r,'`\n5. \u2705 **Click "Apply"** to see your discount applied instantly\n6. \ud83d\udcb0 **Complete payment** with your discounted price\n7. \ud83c\udf89 **Start learning immediately** after enrollment\n\n**Need Help?**\n- \ud83d\udce7 Email us at: ').concat(cn,"\n- \ud83c\udf10 Visit our help center: ").concat(un,"/support\n- \ud83d\udcac Live chat available on our website\n        "):"\n**How to Redeem Your Coupon:**\n\n1. \ud83c\udf10 **Browse our courses**: ".concat(un,'/courses\n2. \ud83d\udcda **Select any course** that interests you\n3. \ud83d\udcdd **Click "Enroll Now"** on your chosen course\n4. \ud83d\udcb3 **At checkout**, look for "Have a coupon code?" section\n5. \ud83c\udfab **Enter your coupon code**: `').concat(r,'`\n6. \u2705 **Click "Apply"** to see your discount applied instantly\n7. \ud83d\udcb0 **Complete payment** with your discounted price\n8. \ud83c\udf89 **Start learning immediately** after enrollment\n\n**Need Help?**\n- \ud83d\udce7 Email us at: ').concat(cn,"\n- \ud83c\udf10 Visit our help center: ").concat(un,"/support\n- \ud83d\udcac Live chat available on our website\n        ");return{to_email:n,to_name:t||"Student",from_name:ln,reply_to:cn,subject:"\ud83c\udfab Your Exclusive Coupon Code: ".concat(r),message_title:"\ud83c\udf89 You've Received a Special Discount!",greeting:"Dear ".concat(t||"Student",","),main_content:"".concat(h?"".concat(h," has sent you"):"You have received"," an exclusive coupon code for ").concat(ln,"! Get ready to advance your AI and machine learning skills at a discounted price."),coupon_section:"\n\ud83c\udfab **Your Coupon Code**: `".concat(r,"`\n\ud83c\udf81 **Discount**: ").concat(m,"\n\ud83d\udcdd **Coupon Name**: ").concat(s||"Special Discount","\n\u23f0 **Validity**: ").concat(f,"\n\ud83d\udcb0 **").concat(p,"**\n        "),course_info:g,course_links:v,instructions:b,admin_message:d?'\n**Personal Message:**\n"'.concat(d,'"\n        '):"",cta_section:"\n\ud83d\ude80 **Ready to Start Learning?**\n\n".concat(o&&l?"[**Enroll in ".concat(o," Now \u2192**](").concat(y,")"):"[**Browse All Courses \u2192**](".concat(un,"/courses)"),"\n\n[**Visit TuneParams.ai \u2192**](").concat(un,")\n        "),trust_section:"\n**Why Choose TuneParams.ai?**\n\u2705 Expert-led courses by industry professionals\n\u2705 Hands-on projects and real-world applications\n\u2705 Small batch sizes for personalized attention\n\u2705 Comprehensive curriculum from foundations to advanced topics\n\u2705 Career support and networking opportunities\n        ",footer_info:"\n**Important Information:**\n\u2022 This coupon code is unique to you - please don't share it\n\u2022 Discount will be applied automatically at checkout\n\u2022 For technical issues, contact ".concat(cn,"\n\u2022 Terms and conditions apply\n\nFollow us for updates:\n\ud83d\udcf1 **Website**: ").concat(un,"\n\ud83d\udcbc **LinkedIn**: [TuneParams AI](https://linkedin.com/company/tuneparams-ai)\n\ud83d\udc26 **Twitter**: [@TuneParamsAI](https://twitter.com/tuneparamsai)\n\nThank you for choosing TuneParams.ai for your AI learning journey!\n\nBest regards,\nThe ").concat(ln," Team\n        "),support_email:cn,website_url:un,company_name:ln,enrollment_url:y,email_type:"coupon_notification",coupon_code:r,coupon_name:s,discount_type:i,discount_value:a,course_id:l,timestamp:(new Date).toISOString()}},pn=e=>{const{recipientName:t,couponCode:n,couponName:r,discountType:s,discountValue:i,courseTitle:a,courseId:o,validUntil:l,minOrderAmount:c,adminMessage:u,senderName:d}=e,h="percentage"===s?"".concat(i,"% off"):"$".concat(i," off"),m=l?"Valid until ".concat(new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})):"No expiry date",f=o?"".concat(un,"/courses/").concat(o):"".concat(un,"/courses");return"\nYour Exclusive Coupon Code: ".concat(n,"\n\nDear ").concat(t||"Student",",\n\n").concat(d?"".concat(d," has sent you"):"You have received"," an exclusive coupon code for ").concat(ln,"!\n\nCOUPON DETAILS:\n- Code: ").concat(n,"\n- Discount: ").concat(h,"\n- Name: ").concat(r||"Special Discount","\n- Validity: ").concat(m,"\n- ").concat(c?"Minimum order: $".concat(c):"No minimum order requirement","\n\n").concat(a?"This coupon is for: ".concat(a):"This coupon can be used for any course","\n\nHOW TO REDEEM:\n1. Visit: ").concat(f,'\n2. Select your course and click "Enroll Now"\n3. At checkout, enter coupon code: ').concat(n,'\n4. Click "Apply" to see your discount\n5. Complete payment and start learning!\n\n').concat(u?'Personal Message: "'.concat(u,'"'):"","\n\nNeed help? Email us at ").concat(cn,"\n\nBest regards,\nThe ").concat(ln," Team\n").concat(un,"\n    ")};var gn=n(417);const vn=[{id:"FAAI",title:"Foundations to Frontiers of AI",description:"This beginner-friendly course takes you from the mathematical foundations of AI to hands-on implementation of modern machine learning and generative AI models.",level:"Beginner level",duration:"15 weeks",lessons:25,maxCapacity:30,nextBatchDate:"2025-10-1",price:899,originalPrice:1199,icon:"\ud83e\udd16",image:"/data/FAAI/FAAI_thumbnail.png",category:"Artificial Intelligence",instructor:"NA",instructorBio:"NA",weeklySchedule:[{day:"Thursday",time:"5:30 - 6:30 PM ET",duration:"1 hour",type:"Optional TA Session",note:"Scheduled with 1 week prior notice based on requirement/availability"},{day:"Saturday",time:"9:30 AM - 12:00 PM ET",duration:"2.5 hours (with 15 min break)",type:"Live Session"},{day:"Sunday",time:"9:30 AM - 12:00 PM ET",duration:"2.5 hours (with 15 min break)",type:"Live Session"}],currentBatch:1,batches:[{batchNumber:1,batchName:"Alpha",startDate:"2025-06-01",endDate:"2025-08-15",status:"completed",maxCapacity:30,enrollmentCount:0,classLinks:{zoom:"https://zoom.us/j/batch1-faai",discord:"https://discord.gg/batch1-faai"},schedule:[]},{batchNumber:2,batchName:"Beta",startDate:"2025-10-4",endDate:"2026-01-15",status:"active",maxCapacity:30,enrollmentCount:0,classLinks:{zoom:"https://zoom.us/j/batch2-faai",discord:"https://discord.gg/batch2-faai"},schedule:[{date:"2025-09-02",time:"20:00",duration:90,timezone:"CT",topic:"Introduction to Machine Learning"},{date:"2025-09-09",time:"20:00",duration:90,timezone:"CT",topic:"Foundation Week"},{date:"2025-09-09",time:"22:30",duration:90,timezone:"CT",topic:"Live Demo - AI in Action"},{date:"2025-09-12",time:"20:00",duration:90,timezone:"CT",topic:"Neural Networks"},{date:"2025-09-15",time:"11:00",duration:90,timezone:"CT",topic:"Hands-on Session"}]}],curriculum:[{section:"Foundation",description:"Build essential mathematical and programming foundations needed for AI development",topics:[{title:"Introduction to Machine Learning",description:"Understand core ML concepts, types of learning (supervised, unsupervised, reinforcement), and real-world applications across industries.",keyPoints:["ML fundamentals","Problem types","Industry applications"]},{title:"Vectors and Matrices for ML",description:"Master linear algebra concepts essential for understanding ML algorithms, including vector operations, matrix multiplication, and eigenvalues.",keyPoints:["Vector operations","Matrix algebra","Eigenvalues & eigenvectors"]},{title:"Basic Python for Machine Learning",description:"Learn Python programming fundamentals with focus on NumPy, Pandas, and data manipulation techniques for ML workflows.",keyPoints:["NumPy basics","Pandas for data","ML libraries setup"]}]},{section:"Neural Networks",description:"Deep dive into neural network architectures from linear models to multi-layer perceptrons",topics:[{title:"Linear Regression",description:"Understand the foundation of predictive modeling with linear regression, cost functions, and gradient descent optimization.",keyPoints:["Cost functions","Gradient descent","Model evaluation"]},{title:"Closed-Form Solution for Linear Regression",description:"Learn mathematical derivation of normal equation and compare analytical vs iterative solutions for linear regression.",keyPoints:["Normal equation","Matrix calculus","Computational complexity"]},{title:"Polynomial Regression",description:"Extend linear models to capture non-linear relationships using polynomial features and regularization techniques.",keyPoints:["Feature engineering","Overfitting prevention","Model complexity"]},{title:"Loss Functions",description:"Explore different loss functions for regression and classification, understanding their mathematical properties and use cases.",keyPoints:["MSE vs MAE","Cross-entropy","Custom loss functions"]},{title:"Optimization Methods",description:"Master gradient descent variants including SGD, Adam, and advanced optimization techniques for neural network training.",keyPoints:["SGD variants","Adam optimizer","Learning rate scheduling"]},{title:"Hyperparameter Tuning: Overfitting, Regularization, Model Selection",description:"Learn systematic approaches to prevent overfitting using regularization (L1/L2) and cross-validation for model selection.",keyPoints:["Cross-validation","L1/L2 regularization","Grid search"]},{title:"Logistic Regression & Classification",description:"Transition from regression to classification using logistic regression, sigmoid function, and classification metrics.",keyPoints:["Sigmoid function","Classification metrics","Decision boundaries"]},{title:"Multi layer perceptron (MLP)",description:"Build your first neural network with multiple layers, understanding forward/backward propagation and activation functions.",keyPoints:["Backpropagation","Activation functions","Network architecture"]},{title:"Mini Project: Regression and Classification",description:"Apply learned concepts in a hands-on project implementing both regression and classification models on real datasets.",keyPoints:["End-to-end pipeline","Model comparison","Performance analysis"]}]},{section:"Convolutional Neural Networks",description:"Master computer vision with CNNs and learn to build models that can see and understand images",topics:[{title:"Convolutional Neural Networks (CNNs)",description:"Understand convolution operations, pooling layers, and CNN architectures for image processing and pattern recognition.",keyPoints:["Convolution operations","Pooling layers","Feature maps"]},{title:"Applications of CNNs",description:"Explore real-world CNN applications including image classification, object detection, and medical image analysis.",keyPoints:["Image classification","Object detection","Medical imaging"]},{title:"Project: Application of CNNs",description:"Build and train a CNN model for image classification using popular datasets and evaluate its performance.",keyPoints:["Dataset preparation","Model training","Performance evaluation"]}]},{section:"Natural Language Processing",description:"Dive into language understanding with RNNs, attention mechanisms, and transformer architectures",topics:[{title:"Introduction to NLP",description:"Learn text preprocessing, tokenization, and fundamental NLP concepts for machine understanding of language.",keyPoints:["Text preprocessing","Tokenization","Language modeling"]},{title:"Recurrent Neural Networks (RNNs)",description:"Understand sequence modeling with RNNs and LSTMs for processing sequential data like text and time series.",keyPoints:["Sequence modeling","LSTM architecture","Vanishing gradients"]},{title:"Limitations of RNNs",description:"Explore computational and architectural limitations of RNNs that led to the development of attention mechanisms.",keyPoints:["Sequential bottlenecks","Long-range dependencies","Training difficulties"]},{title:"Attention Mechanism",description:"Learn how attention mechanisms solve RNN limitations by allowing models to focus on relevant parts of input sequences.",keyPoints:["Attention weights","Context vectors","Alignment models"]},{title:"Self-Attention",description:"Master self-attention mechanisms that enable parallel processing and better capture of long-range dependencies.",keyPoints:["Query-key-value","Multi-head attention","Positional encoding"]},{title:"Transformer Architecture",description:"Deep dive into the transformer model that revolutionized NLP, understanding encoder-decoder architecture and applications.",keyPoints:["Encoder-decoder","Layer normalization","Feed-forward networks"]}]},{section:"Large Language Models (LLMs)",description:"Explore the cutting-edge world of large language models and their training methodologies",topics:[{title:"LLM Pre-Training",description:"Understand how large language models are pre-trained on vast text corpora using self-supervised learning techniques.",keyPoints:["Self-supervised learning","Scaling laws","Training dynamics"]},{title:"Continual Pre-Training",description:"Learn techniques for continuing pre-training of existing models on new domains or updated data while preserving knowledge.",keyPoints:["Domain adaptation","Catastrophic forgetting","Knowledge retention"]},{title:"Supervised Fine-Tuning",description:"Master fine-tuning techniques to adapt pre-trained models for specific tasks and domains with labeled data.",keyPoints:["Task adaptation","Learning rates","Evaluation metrics"]},{title:"Alignment of LLMs",description:"Explore techniques like RLHF to align language models with human preferences and improve their safety and helpfulness.",keyPoints:["RLHF","Human feedback","Safety alignment"]},{title:"LLM Inference",description:"Learn optimization techniques for efficient LLM inference including quantization, pruning, and serving strategies.",keyPoints:["Quantization","Pruning","Serving optimization"]},{title:"Introduction to Hugging Face",description:"Get hands-on experience with Hugging Face ecosystem for loading, fine-tuning, and deploying transformer models.",keyPoints:["Model hub","Transformers library","Fine-tuning workflows"]}]},{section:"Advanced Topics",description:"Cutting-edge AI topics including distributed computing, prompt engineering, and agentic systems",topics:[{title:"Distributed Computing for LLMs",description:"Learn techniques for training and serving large models across multiple GPUs and machines using distributed computing.",keyPoints:["Model parallelism","Data parallelism","Distributed training"]},{title:"Prompt Engineering",description:"Master the art and science of crafting effective prompts to get desired outputs from large language models.",keyPoints:["Prompt design","Chain-of-thought","In-context learning"]},{title:"Retrieval-Augmented Generation (RAG)",description:"Build systems that combine language models with external knowledge retrieval for more accurate and up-to-date responses.",keyPoints:["Vector databases","Retrieval systems","Knowledge integration"]},{title:"Agentic AI",description:"Explore autonomous AI agents that can plan, reason, and take actions to accomplish complex tasks in dynamic environments.",keyPoints:["Agent architectures","Planning algorithms","Tool integration"]}]}],prerequisites:["Curious mind","Basic programming experience (Optional)"],outcomes:["Build strong foundations in Artificial Intelligence by combining theory with hands-on coding, so you can confidently move from simple models to advanced architectures.","Think like a practitioner by applying algorithms to real data, running experiments, tuning models, and analyzing trade-offs.","Work with modern AI systems by understanding how neural networks, transformers, and large language models are trained, fine-tuned, and deployed.","Develop end-to-end skills through projects that take you from problem definition to implementation, giving you practical experience you can showcase."],downloadUrl:"/data/sample-course-info.pdf"},{id:"RLAI",title:"Reinforcement Learning",description:"Dive deep into the world of reinforcement learning and AI agents. Learn to build intelligent systems that can learn from their environment, make decisions, and solve complex sequential problems through trial and error.",level:"Advanced",duration:"10 weeks",lessons:16,maxCapacity:25,nextBatchDate:"TBD",price:599,originalPrice:1399,icon:"\ud83c\udfaf",image:"/data/RLAI/RLAI_thumbnail.png",category:"Reinforcement Learning",instructor:"TBD",instructorBio:"Course will be taught by leading experts in reinforcement learning and AI agents with extensive research and industry experience.",weeklySchedule:[{day:"Thursday",time:"5:30 - 6:30 PM ET",duration:"1 hour",type:"Live Session"},{day:"Saturday",time:"9:30 AM - 12:00 PM ET",duration:"2.5 hours (with 15 min break)",type:"Live Session"},{day:"Sunday",time:"9:30 AM - 12:00 PM ET",duration:"2.5 hours (with 15 min break)",type:"Live Session"}],currentBatch:1,batches:[{batchNumber:1,batchName:"Pioneer RL Cohort",startDate:"TBD",endDate:"TBD",status:"upcoming",maxCapacity:25,enrollmentCount:0,classLinks:{zoom:"TBD",discord:"TBD"},schedule:[]}],curriculum:[{section:"Foundations of Reinforcement Learning",topics:["Introduction to RL: Agents, Environments, and Rewards","Markov Decision Processes (MDPs)","Bellman Equations and Dynamic Programming","Value Functions and Policy Functions","Exploration vs Exploitation Dilemma"]},{section:"Classical RL Algorithms",topics:["Monte Carlo Methods","Temporal Difference Learning","Q-Learning and SARSA","Function Approximation in RL","Eligibility Traces and TD(\u03bb)"]},{section:"Deep Reinforcement Learning",topics:["Deep Q-Networks (DQN)","Policy Gradient Methods","Actor-Critic Algorithms","Proximal Policy Optimization (PPO)","Trust Region Policy Optimization (TRPO)"]},{section:"Advanced RL Techniques",topics:["Model-Based Reinforcement Learning","Hierarchical Reinforcement Learning","Multi-Agent Reinforcement Learning","Inverse Reinforcement Learning","Meta-Learning in RL"]},{section:"RL Applications & AI Agents",topics:["Game AI and Strategic Decision Making","Robotics and Control Systems","Financial Trading and Portfolio Management","Autonomous Systems and Self-Driving Cars","Large Language Model Agents"]},{section:"Practical Implementation & Projects",topics:["RL Frameworks: Gym, Stable-Baselines3, Ray RLlib","Building Custom RL Environments","Hyperparameter Tuning for RL","RL Agent Evaluation and Benchmarking","Capstone Project: End-to-End RL Application"]}],prerequisites:["Completion of Foundations to Frontiers of AI or equivalent ML knowledge","Strong programming skills in Python","Understanding of neural networks and deep learning","Familiarity with NumPy, PyTorch/TensorFlow","Basic knowledge of probability and statistics"],outcomes:["Master the fundamental concepts and mathematics of reinforcement learning.","Implement classical RL algorithms from scratch and understand their theoretical foundations.","Build and train deep reinforcement learning agents using modern frameworks.","Apply RL techniques to real-world problems in games, robotics, and decision-making.","Understand multi-agent systems and how agents can learn to cooperate or compete.","Develop practical skills in RL environment design and agent evaluation."],downloadUrl:null,comingSoon:!0}],yn=e=>vn.find(t=>t.id===e),bn=e=>!0===e.comingSoon,wn=e=>e.batches&&0!==e.batches.length?e.batches.find(t=>t.batchNumber===e.currentBatch):null,xn=(e,t)=>e.batches&&0!==e.batches.length?e.batches.find(e=>e.batchNumber===t):null,Nn=e=>e.batches&&0!==e.batches.length?e.batches.filter(e=>"active"===e.status):[],En=e=>!(!e.enrollmentCount||!e.maxCapacity)&&e.enrollmentCount>=e.maxCapacity,Sn=e=>{if(!e.batches||0===e.batches.length)return null;const t=e.batches.filter(e=>"upcoming"===e.status&&!En(e)).sort((e,t)=>new Date(e.startDate)-new Date(t.startDate));if(t.length>0)return t[0];const n=e.batches.filter(e=>"active"===e.status&&!En(e)).sort((e,t)=>new Date(e.startDate)-new Date(t.startDate));return n.length>0?n[0]:null},Cn=e=>({upcoming:"Starting Soon",active:"In Progress",completed:"Completed"}[e.status]||e.status),kn=e=>{const t=new Date(e.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),n=new Date(e.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return"".concat(t," - ").concat(n)},_n=e=>e.batchName&&e.batchName.trim()?e.batchName:"Batch ".concat(e.batchNumber),jn=e=>{if(e.batchName&&e.batchName.trim()){const t=e.batchName.split(" ");return e.batchName.length>20?"".concat(t.slice(0,2).join(" ")," (").concat(e.batchNumber,")"):e.batchName}return"Batch ".concat(e.batchNumber)},Tn=e=>e.schedule&&e.schedule.length>0,An=e=>{if(!e.classLinks)return!1;const{zoom:t,discord:n}=e.classLinks;return t&&"TBD"!==t||n&&"TBD"!==n},In=e=>{if(!e.classLinks)return{};const t={},{zoom:n,discord:r}=e.classLinks;return n&&"TBD"!==n&&(t.zoom=n),r&&"TBD"!==r&&(t.discord=r),t},Pn=async(e,t)=>{try{var n,r,s,i;if(!xt.db)throw new Error("Firestore not initialized");const a=await St(t);if(!a.success)throw new Error("Admin user not found");const o=e.code||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=Math.random().toString(36).substring(2,10).toUpperCase(),n=Date.now().toString(36).toUpperCase();return e?"".concat(e).concat(t).concat(n):"".concat(t).concat(n)}(e.prefix||""),l=(0,Nt.P)((0,Nt.rJ)(xt.db,"coupons"),(0,Nt._M)("code","==",o),(0,Nt.AB)(1));if(!(await(0,Nt.GG)(l)).empty)throw new Error("Coupon code already exists");if(e.courseId){if(!yn(e.courseId))throw new Error("Course not found: ".concat(e.courseId))}if(e.targetUserId){if(!(await St(e.targetUserId)).success)throw new Error("Target user not found: ".concat(e.targetUserId))}if("percentage"===e.discountType&&(e.discountValue<=0||e.discountValue>100))throw new Error("Percentage discount must be between 1 and 100");if("fixed"===e.discountType&&e.discountValue<=0)throw new Error("Fixed discount amount must be greater than 0");const c={code:o,name:e.name||"Coupon ".concat(o),description:e.description||"",discountType:e.discountType,discountValue:parseFloat(e.discountValue),maxDiscountAmount:e.maxDiscountAmount?parseFloat(e.maxDiscountAmount):null,minOrderAmount:e.minOrderAmount?parseFloat(e.minOrderAmount):null,targetType:e.targetType,targetUserId:e.targetUserId||null,targetUserEmail:e.targetUserEmail||null,courseId:e.courseId||null,courseTitle:e.courseTitle||null,usageLimit:e.usageLimit?parseInt(e.usageLimit):null,usageLimitPerUser:e.usageLimitPerUser?parseInt(e.usageLimitPerUser):1,usageCount:0,validFrom:e.validFrom?new Date(e.validFrom):new Date,validUntil:e.validUntil?new Date(e.validUntil):null,status:"active",createdBy:t,createdByEmail:(null===(n=a.data)||void 0===n?void 0:n.email)||null,createdByName:(null===(r=a.data)||void 0===r?void 0:r.displayName)||(null===(s=a.data)||void 0===s||null===(i=s.email)||void 0===i?void 0:i.split("@")[0])||"Unknown Admin",createdAt:(0,Nt.O5)(),updatedAt:(0,Nt.O5)(),usageHistory:[]};return{success:!0,couponId:(await(0,Nt.gS)((0,Nt.rJ)(xt.db,"coupons"),c)).id,couponCode:o,couponData:c}}catch(a){return{success:!1,error:a.message}}},Rn=async(e,t,n,r)=>{try{var s;if(!xt.db)throw new Error("Firestore not initialized");const i=await St(t),o=i.success?null===(s=i.data)||void 0===s?void 0:s.email:null,l=(0,Nt.H9)(xt.db,"coupons",e),c=await(0,Nt.x7)(l);if(!c.exists())throw new Error("Coupon not found");const u=c.data(),d={userId:t,userEmail:o,courseId:n,usedAt:new Date,orderAmount:r.orderAmount,discountAmount:r.discountAmount,finalAmount:r.finalAmount,paymentId:r.paymentId||null,orderId:r.orderId||null,enrollmentType:r.enrollmentType||"payment"},h=[...u.usageHistory||[],d],m={usageCount:(u.usageCount||0)+1,usageHistory:h,updatedAt:new Date};Object.keys(m).forEach(e=>{void 0===m[e]&&delete m[e]}),await(0,Nt.mZ)(l,m);return{success:!0,usageLogId:(await(0,Nt.gS)((0,Nt.rJ)(xt.db,"coupon_usage"),(0,a.A)((0,a.A)({couponId:e,couponCode:u.code},d),{},{createdAt:new Date}))).id}}catch(i){return{success:!1,error:i.message,errorCode:i.code}}},Dn=async e=>{try{if(!xt.db)throw new Error("Firestore not initialized");const t=(0,Nt.P)((0,Nt.rJ)(xt.db,"coupons"),(0,Nt._M)("code","==",e.toUpperCase()),(0,Nt.AB)(1)),n=await(0,Nt.GG)(t);if(n.empty)return{success:!1,error:"Coupon not found"};const r=n.docs[0];return{success:!0,coupon:(0,a.A)({id:r.id},r.data())}}catch(t){return{success:!1,error:t.message}}},Ln=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{if(!xt.db)throw new Error("Firestore not initialized");const s=yn(t);if(!s)throw new Error("Course not found: ".concat(t));const i=Sn(s);if(!i)throw new Error("No available batches for enrollment");const a={userId:e,userEmail:r,courseId:t,courseTitle:n.courseTitle||s.title,batchNumber:i.batchNumber,batchStartDate:i.startDate,batchEndDate:i.endDate,batchStatus:i.status,status:"enrolled",progress:0,paymentId:n.paymentID,orderId:n.orderID,amountPaid:parseFloat(n.amount),termsAccepted:n.termsAccepted||!1,termsAcceptedAt:n.termsAcceptedAt?new Date(n.termsAcceptedAt):null,enrolledAt:(0,Nt.O5)(),lastAccessed:null,completedAt:null,paymentMethod:"paypal",enrollmentSource:"web_purchase"},o="".concat(e,"_").concat(t,"_batch").concat(i.batchNumber),l=(0,Nt.H9)(xt.db,"enrollments",o);return await(0,Nt.BN)(l,a),{success:!0,enrollmentId:o,batchNumber:i.batchNumber,batchInfo:{startDate:i.startDate,endDate:i.endDate,status:i.status}}}catch(s){return{success:!1,error:s.message}}},On=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{if(!xt.db)return{hasAccess:!1,error:"Firestore not initialized"};if(n){const r="".concat(e,"_").concat(t,"_batch").concat(n),s=(0,Nt.H9)(xt.db,"enrollments",r),i=await(0,Nt.x7)(s);if(i.exists()){const e=i.data();return await(0,Nt.mZ)(s,{lastAccessed:(0,Nt.O5)()}),{hasAccess:!0,enrollment:(0,a.A)((0,a.A)({},e),{},{id:i.id})}}return{hasAccess:!1,enrollment:null}}const r=(0,Nt.P)((0,Nt.rJ)(xt.db,"enrollments"),(0,Nt._M)("userId","==",e),(0,Nt._M)("courseId","==",t),(0,Nt._M)("status","==","enrolled")),s=await(0,Nt.GG)(r);if(s.empty)return{hasAccess:!1,enrollment:null};let i=null,o=null;return s.forEach(e=>{const t=e.data();(!i||t.enrolledAt&&(!i.enrolledAt||t.enrolledAt.toDate()>i.enrolledAt.toDate()))&&(i=t,o=e)}),i&&o?(await(0,Nt.mZ)(o.ref,{lastAccessed:(0,Nt.O5)()}),{hasAccess:!0,enrollment:(0,a.A)((0,a.A)({},i),{},{id:o.id}),allEnrollments:s.docs.map(e=>(0,a.A)({id:e.id},e.data()))}):{hasAccess:!1,enrollment:null}}catch(r){return{hasAccess:!1,error:r.message}}},Mn=async(e,t)=>{try{var n,r,s,i,a;const l=await St(t),c=l.success?l.userData:null,u=null===c||void 0===c?void 0:c.email,d=await(async(e,t)=>{try{if(!xt.db)throw new Error("Firestore not initialized");const n=await St(t),r=n.success?n.userData:null,s={paymentId:e.paymentID,orderId:e.orderID,payerId:e.payerID,courseId:e.courseId,courseTitle:e.courseTitle,amount:parseFloat(e.amount),originalAmount:e.originalAmount?parseFloat(e.originalAmount):parseFloat(e.amount),appliedCoupon:e.appliedCoupon||null,discountAmount:e.appliedCoupon?e.appliedCoupon.discountAmount:0,couponCode:e.appliedCoupon?e.appliedCoupon.couponCode:null,userId:t,userEmail:(null===r||void 0===r?void 0:r.email)||e.payerEmail,userName:(null===r||void 0===r?void 0:r.displayName)||e.payerName,payerEmail:e.payerEmail,payerName:e.payerName,status:"completed",transactionStatus:e.transactionStatus,paymentMethod:"paypal",termsAccepted:e.termsAccepted||!1,termsAcceptedAt:e.termsAcceptedAt?new Date(e.termsAcceptedAt):null,paymentDate:e.timestamp?new Date(e.timestamp):new Date,createdAt:(0,Nt.O5)(),updatedAt:(0,Nt.O5)()};return{success:!0,paymentRecordId:(await(0,Nt.gS)((0,Nt.rJ)(xt.db,"payments"),s)).id}}catch(n){return{success:!1,error:n.message}}})(e,t);if(!d.success)throw new Error("Payment recording failed: ".concat(d.error));const h=await Ln(t,e.courseId,e,u);if(!h.success)throw new Error("Enrollment failed: ".concat(h.error));const m=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),f={userName:(null===c||void 0===c?void 0:c.displayName)||(null===c||void 0===c||null===(n=c.email)||void 0===n?void 0:n.split("@")[0])||"Student",userEmail:(null===c||void 0===c?void 0:c.email)||e.payerEmail,courseTitle:e.courseTitle,courseId:e.courseId,amount:e.amount,paymentId:e.paymentID,orderId:e.orderID,enrollmentId:h.enrollmentId,enrollmentDate:m,batchNumber:h.batchNumber,batchStartDate:null===(r=h.batchInfo)||void 0===r?void 0:r.startDate,batchEndDate:null===(s=h.batchInfo)||void 0===s?void 0:s.endDate,batchStatus:null===(i=h.batchInfo)||void 0===i?void 0:i.status,paymentMethod:"PayPal",payerName:e.payerName,payerEmail:e.payerEmail,transactionStatus:e.transactionStatus,paymentSource:e.paymentSource||null,fundingSource:e.fundingSource||null},p=await hn(f);let g=null;try{g=await(0,gn.w9)(f,p,t),g.success}catch(o){}return p.success||p.skipped,{success:!0,paymentRecordId:d.paymentRecordId,enrollmentId:h.enrollmentId,batchNumber:h.batchNumber,batchInfo:h.batchInfo,emailSent:p.success,emailError:p.success?null:p.error,emailTrackingId:(null===(a=g)||void 0===a?void 0:a.emailRecordId)||null,enrollmentData:f}}catch(l){return{success:!1,error:l.message}}},Fn=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{if(!xt.db)throw new Error("Firestore not initialized");let s;if(r){const n="".concat(e,"_").concat(t,"_batch").concat(r);s=(0,Nt.H9)(xt.db,"enrollments",n);if(!(await(0,Nt.x7)(s)).exists())throw new Error("No enrollment found for batch ".concat(r))}else{const n=(0,Nt.P)((0,Nt.rJ)(xt.db,"enrollments"),(0,Nt._M)("userId","==",e),(0,Nt._M)("courseId","==",t),(0,Nt._M)("status","in",["enrolled","active"])),r=await(0,Nt.GG)(n);if(r.empty)throw new Error("No active enrollment found for this course");let i=null,a=null;if(r.forEach(e=>{var t;const n=null===(t=e.data().enrolledAt)||void 0===t?void 0:t.toDate();(!a||n&&n>a)&&(a=n,i=e)}),!i)throw new Error("Could not determine latest enrollment");s=i.ref}const i={progress:Math.min(Math.max(n,0),100),lastAccessed:(0,Nt.O5)(),updatedAt:(0,Nt.O5)()};return n>=100&&(i.completedAt=(0,Nt.O5)(),i.status="completed"),await(0,Nt.mZ)(s,i),{success:!0,enrollmentId:s.id}}catch(s){return{success:!1,error:s.message}}},Un="course_reviews",Vn=async e=>{try{if(!xt.db)throw new Error("Firestore not initialized");const t=(0,Nt.H9)(xt.db,Un,e);return await(0,Nt.kd)(t),{success:!0}}catch(t){return{success:!1,error:t.message}}},zn=function(){let{limit:e=6}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{const t=function(e){let{limit:t=6}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!xt.db)return e({reviews:[],error:"Firestore not initialized"}),()=>{};try{const n=(0,Nt.P)((0,Nt.rJ)(xt.db,Un),(0,Nt.My)("createdAt","desc"),(0,Nt.AB)(t));return(0,Nt.aQ)(n,t=>{const n=t.docs.map(e=>(0,a.A)({id:e.id},e.data()));e({reviews:n,error:null})},t=>{let n=t.message;"permission-denied"===t.code?n="Permission denied accessing reviews. This might be a Firebase configuration issue.":"unavailable"===t.code&&(n="Firebase service temporarily unavailable. Please try again."),e({reviews:[],error:n})})}catch(o){return e({reviews:[],error:o.message}),()=>{}}}(e=>{let{reviews:t,error:r}=e;r?l(r):n(t),i(!1)},{limit:e});return()=>t&&t()},[e]),{reviews:t,loading:s,error:o}},Bn=()=>{const{user:e}=It(),[t,n]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0),[a,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(!e)return n(null),void i(!1);i(!0),o(null);try{const t=await Ut(e.uid);n(t)}catch(t){o(t.message)}finally{i(!1)}})()},[e]);return{userRole:t,loading:s,error:a,hasPermission:async t=>!!e&&await(async(e,t)=>{try{var n;return(null===(n=(await Ut(e)).permissions)||void 0===n?void 0:n.includes(t))||!1}catch(a){return!1}})(e.uid,t),hasRole:e=>(null===t||void 0===t?void 0:t.role)===e,isAdminUser:(null===t||void 0===t?void 0:t.role)===Pt.ADMIN,isInstructorUser:(null===t||void 0===t?void 0:t.role)===Pt.INSTRUCTOR,isStudentUser:(null===t||void 0===t?void 0:t.role)===Pt.STUDENT,isInstructor:(null===t||void 0===t?void 0:t.role)===Pt.INSTRUCTOR||(null===t||void 0===t?void 0:t.role)===Pt.ADMIN,isAdmin:(null===t||void 0===t?void 0:t.role)===Pt.ADMIN,permissions:(null===t||void 0===t?void 0:t.permissions)||[]}},qn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:220;return e?e.length<=t?e:e.slice(0,t-1)+"\u2026":""},Hn=()=>{const{reviews:e,loading:t,error:n}=zn({limit:18}),{isAdminUser:s}=Bn(),[i,a]=(0,r.useState)(0),[o,l]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{if(!e||e.length<=3)return;const t=setInterval(()=>{a(t=>t>=e.length-3?0:t+1)},4e3);return()=>clearInterval(t)},[e]);const c=e?e.slice(i,i+3):[];return(0,_t.jsxs)("section",{className:"home-reviews-section",children:[(0,_t.jsx)("h2",{children:"What Students Say"}),t&&(0,_t.jsx)("div",{className:"reviews-loading",children:"Loading reviews\u2026"}),n&&(0,_t.jsx)("div",{className:"reviews-error",children:String(n)}),!t&&!n&&(0,_t.jsxs)("div",{className:"home-reviews-container",children:[(0,_t.jsx)("div",{className:"home-reviews-row",role:"list",children:c.map(e=>{var t,r;const i=(e.comment||"").length>220,a="/courses/".concat(e.courseId,"#reviews-section"),c=e.userPhotoURL&&!o.has(e.id);return(0,_t.jsxs)("article",{className:"home-review-card",role:"listitem",children:[(0,_t.jsxs)("div",{className:"home-review-header",children:[(0,_t.jsxs)("div",{className:"review-user",children:[(0,_t.jsx)("div",{className:"review-avatar","aria-hidden":!0,children:c?(0,_t.jsx)("img",{src:e.userPhotoURL,alt:e.userName||"User",onError:()=>{return t=e.id,void l(e=>new Set([...e,t]));var t}}):(0,_t.jsx)("div",{className:"default-avatar",children:null===(t=(e.userName||"User").charAt(0))||void 0===t?void 0:t.toUpperCase()})}),(0,_t.jsxs)("div",{children:[(0,_t.jsxs)("div",{className:"review-username",children:[(0,_t.jsx)("span",{children:e.userName||"User"}),e.verified&&(0,_t.jsx)("span",{className:"review-verified",title:"Verified User",children:"\u2713"})]}),(0,_t.jsx)("div",{className:"review-date",children:null!==(r=e.createdAt)&&void 0!==r&&r.toDate?e.createdAt.toDate().toLocaleDateString():""})]})]}),(0,_t.jsx)("button",{className:"review-stars clickable-stars",onClick:()=>{window.location.href="/courses/".concat(e.courseId,"#reviews-section")},title:"Click to view all reviews for this course","aria-label":"".concat(e.rating," out of 5 stars. Click to view reviews for ").concat(e.courseTitle),children:"\u2605".repeat(Math.round(e.rating||0)).padEnd(5,"\u2606")})]}),(0,_t.jsx)("div",{className:"review-course-chip",children:e.courseTitle||e.courseId}),(0,_t.jsx)("p",{className:"home-review-comment",children:qn(e.comment)}),(0,_t.jsxs)("div",{className:"home-review-footer",children:[i&&(0,_t.jsx)(mt,{to:a,className:"home-review-more",children:"Read more \u2192"}),s&&(0,_t.jsx)("button",{className:"home-review-admin-delete-btn",onClick:t=>{t.preventDefault(),(async e=>{if(window.confirm("Are you sure you want to delete ".concat(e.userName,"'s review? This action cannot be undone.")))try{const t=await Vn(e.id);t.success?(alert("Review deleted successfully"),window.location.reload()):alert("Failed to delete review: ".concat(t.error))}catch(n){alert("Failed to delete review. Please try again.")}})(e)},title:"Admin: Delete this review",children:"\ud83d\uddd1\ufe0f"})]})]},e.id)})}),e&&e.length>3&&(0,_t.jsx)("div",{className:"home-reviews-indicators",children:Array.from({length:Math.max(1,e.length-2)}).map((t,n)=>(0,_t.jsx)("button",{className:"review-indicator ".concat(n===i?"active":""),onClick:()=>a(n),"aria-label":"Show reviews ".concat(n+1,"-").concat(Math.min(n+3,e.length))},n))})]})]})},Wn=()=>{const e=ue(),{user:t}=It(),n=()=>{e("/register")},r=()=>{e("/dashboard")};return(0,_t.jsxs)("div",{className:"landing-page-container",children:[(0,_t.jsx)("section",{className:"hero-section",children:(0,_t.jsxs)("div",{className:"hero-content",children:[(0,_t.jsxs)("div",{className:"hero-text",children:[(0,_t.jsx)("h1",{className:"hero-title",children:"Master the World of AI"}),(0,_t.jsx)("p",{className:"hero-subtitle",children:"No prior experience? No problem. Learn from the foundations of AI and build real-world applications in this beginner-friendly course."}),(0,_t.jsx)("p",{className:"hero-description",children:"Start your journey in AI with a hands-on course designed for beginners - from high-school students to experienced professionals and curious learners of all backgrounds."}),(0,_t.jsxs)("div",{className:"hero-buttons",children:[(0,_t.jsx)("button",{className:"cta-primary",onClick:()=>{e("/courses")},children:"Browse Courses"}),t?(0,_t.jsx)("button",{className:"cta-secondary",onClick:r,children:"Go to Dashboard"}):(0,_t.jsx)("button",{className:"cta-secondary",onClick:n,children:"Register Now"})]})]}),(0,_t.jsx)("div",{className:"hero-image",children:(0,_t.jsx)("img",{src:"/logo1024.png",alt:"TuneParams.ai Logo"})})]})}),(0,_t.jsx)("section",{className:"about-section",children:(0,_t.jsxs)("div",{className:"about-content",children:[(0,_t.jsx)("h2",{children:"Why TuneParams.ai?"}),(0,_t.jsx)("p",{children:"At TuneParams.ai, we believe that anyone can become master of Artificial Intelligence with the right guidance. Our Courses simplifies complex topics and helps you build an intuitive and practical understanding of core AI concepts, with no math background required."})]})}),(0,_t.jsx)(Hn,{}),(0,_t.jsxs)("section",{className:"curriculum-section",children:[(0,_t.jsx)("h2",{children:"What You'll Learn"}),(0,_t.jsxs)("div",{className:"curriculum-grid",children:[(0,_t.jsxs)("div",{className:"curriculum-item",children:[(0,_t.jsx)("h3",{children:"Introduction to AI"}),(0,_t.jsx)("p",{children:"Understand what AI is, types of AI, and why it's transforming the world."})]}),(0,_t.jsxs)("div",{className:"curriculum-item",children:[(0,_t.jsx)("h3",{children:"Math Foundations for AI"}),(0,_t.jsx)("p",{children:"Learn essential linear algebra concepts. No prior knowledge required."})]}),(0,_t.jsxs)("div",{className:"curriculum-item",children:[(0,_t.jsx)("h3",{children:"Python for AI"}),(0,_t.jsx)("p",{children:"A crash course on Python to build practical AI applications."})]}),(0,_t.jsxs)("div",{className:"curriculum-item",children:[(0,_t.jsx)("h3",{children:"Neural Networks"}),(0,_t.jsx)("p",{children:"Understand foundations of today's AI applications using Neural Networks."})]}),(0,_t.jsxs)("div",{className:"curriculum-item",children:[(0,_t.jsx)("h3",{children:"Computer Vision & CNNs"}),(0,_t.jsx)("p",{children:"Learn CNNs that power breakthroughs in image recognition and autonomous driving."})]}),(0,_t.jsxs)("div",{className:"curriculum-item",children:[(0,_t.jsx)("h3",{children:"NLP and LLMs"}),(0,_t.jsx)("p",{children:"Explore the world of Natural Language Processing and Large Language Models."})]})]})]}),(0,_t.jsxs)("section",{className:"audience-section",children:[(0,_t.jsx)("h2",{children:"Who Should Take This Course?"}),(0,_t.jsxs)("div",{className:"audience-grid",children:[(0,_t.jsxs)("div",{className:"audience-item",children:[(0,_t.jsx)("div",{className:"audience-icon",children:"\ud83c\udf93"}),(0,_t.jsx)("h3",{children:"Beginners"}),(0,_t.jsx)("p",{children:"Looking to enter the field of AI"})]}),(0,_t.jsxs)("div",{className:"audience-item",children:[(0,_t.jsx)("div",{className:"audience-icon",children:"\ud83d\udcda"}),(0,_t.jsx)("h3",{children:"Students"}),(0,_t.jsx)("p",{children:"High school students seeking an applied introduction to AI"})]}),(0,_t.jsxs)("div",{className:"audience-item",children:[(0,_t.jsx)("div",{className:"audience-icon",children:"\ud83d\udcbc"}),(0,_t.jsx)("h3",{children:"Professionals"}),(0,_t.jsx)("p",{children:"Experienced IT professionals wanting to upskill"})]}),(0,_t.jsxs)("div",{className:"audience-item",children:[(0,_t.jsx)("div",{className:"audience-icon",children:"\ud83d\udc68\u200d\ud83d\udcbb"}),(0,_t.jsx)("h3",{children:"Developers"}),(0,_t.jsx)("p",{children:"Software developers looking to integrate AI into their applications"})]}),(0,_t.jsxs)("div",{className:"audience-item",children:[(0,_t.jsx)("div",{className:"audience-icon",children:"\ud83d\udcca"}),(0,_t.jsx)("h3",{children:"Data Analysts"}),(0,_t.jsx)("p",{children:"Data professionals wanting to advance to machine learning roles"})]}),(0,_t.jsxs)("div",{className:"audience-item",children:[(0,_t.jsx)("div",{className:"audience-icon",children:"\ud83d\udd0d"}),(0,_t.jsx)("h3",{children:"Curious Minds"}),(0,_t.jsx)("p",{children:"Anyone curious about how AI works behind the scenes"})]})]})]}),(0,_t.jsxs)("section",{className:"format-section",children:[(0,_t.jsxs)("div",{className:"format-content",children:[(0,_t.jsx)("h2",{children:"Course Format"}),(0,_t.jsxs)("div",{className:"format-grid",children:[(0,_t.jsxs)("div",{className:"format-item",children:[(0,_t.jsx)("span",{className:"format-icon",children:"\ud83c\udfa5"}),(0,_t.jsx)("span",{children:"Live Classes - 4 hours per week"})]}),(0,_t.jsxs)("div",{className:"format-item",children:[(0,_t.jsx)("span",{className:"format-icon",children:"\ud83d\udcbb"}),(0,_t.jsx)("span",{children:"Coding labs for assignments"})]}),(0,_t.jsxs)("div",{className:"format-item",children:[(0,_t.jsx)("span",{className:"format-icon",children:"\ud83d\udccb"}),(0,_t.jsx)("span",{children:"Downloadable slides"})]}),(0,_t.jsxs)("div",{className:"format-item",children:[(0,_t.jsx)("span",{className:"format-icon",children:"\ufffd"}),(0,_t.jsx)("span",{children:"Two projects: mid-term and final"})]})]})]}),(0,_t.jsx)("div",{className:"format-image",children:(0,_t.jsx)("img",{src:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=500&h=400&fit=crop&auto=format",alt:"Online Learning"})})]}),(0,_t.jsxs)("section",{className:"cta-section",children:[(0,_t.jsx)("h2",{children:t?"Continue Your Learning Journey":"Ready to Level Up Your Skills?"}),t?(0,_t.jsx)("button",{className:"cta-final",onClick:r,children:"Go to Dashboard"}):(0,_t.jsx)("button",{className:"cta-final",onClick:n,children:"Register Here"})]})]})},Gn=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!xt.db)throw new Error("Firestore not initialized");let n;n=t?(0,Nt.P)((0,Nt.rJ)(xt.db,"enrollments"),(0,Nt._M)("courseId","==",e),(0,Nt._M)("batchNumber","==",t),(0,Nt._M)("status","==","enrolled")):(0,Nt.P)((0,Nt.rJ)(xt.db,"enrollments"),(0,Nt._M)("courseId","==",e),(0,Nt._M)("status","==","enrolled"));const r=await(0,Nt.GG)(n);return{success:!0,count:r.size}}catch(n){return{success:!1,error:n.message,count:0}}},Kn=async e=>{try{if(!xt.db)throw new Error("Firestore not initialized");const t=(0,Nt.P)((0,Nt.rJ)(xt.db,"course_reviews"),(0,Nt._M)("courseId","==",e)),n=await(0,Nt.GG)(t),r=[];n.forEach(e=>{const t=e.data();t.rating&&"number"===typeof t.rating&&r.push(t.rating)});const s=r.length;let i=0;if(s>0){i=r.reduce((e,t)=>e+t,0)/s}return{success:!0,averageRating:parseFloat(i.toFixed(1)),reviewCount:s,hasReviews:s>0}}catch(t){return{success:!1,error:t.message,averageRating:0,reviewCount:0,hasReviews:!1}}},Qn=async e=>{try{const[t,n]=await Promise.all([Gn(e),Kn(e)]);return{success:!0,stats:{enrollmentCount:t.success?t.count:0,averageRating:n.success?n.averageRating:0,reviewCount:n.success?n.reviewCount:0,hasReviews:!!n.success&&n.hasReviews},errors:{enrollment:t.success?null:t.error,rating:n.success?null:n.error}}}catch(t){return{success:!1,error:t.message,stats:{enrollmentCount:0,averageRating:0,reviewCount:0,hasReviews:!1}}}},Jn=(e,t)=>{let n=()=>{},r=()=>{},s={count:0,error:null},i={averageRating:0,reviewCount:0,hasReviews:!1,error:null};const a=()=>{t({enrollmentCount:s.count,averageRating:i.averageRating,reviewCount:i.reviewCount,hasReviews:i.hasReviews,errors:{enrollment:s.error,rating:i.error}})};return n=((e,t)=>{if(!xt.db)return t({count:0,error:"Firestore not initialized"}),()=>{};try{const n=(0,Nt.P)((0,Nt.rJ)(xt.db,"enrollments"),(0,Nt._M)("courseId","==",e),(0,Nt._M)("status","==","enrolled"));return(0,Nt.aQ)(n,e=>{const n=e.size;t({count:n,error:null})},e=>{t({count:0,error:e.message})})}catch(n){return t({count:0,error:n.message}),()=>{}}})(e,e=>{s=e,a()}),r=((e,t)=>{if(!xt.db)return t({averageRating:0,reviewCount:0,hasReviews:!1,error:"Firestore not initialized"}),()=>{};try{const n=(0,Nt.P)((0,Nt.rJ)(xt.db,"course_reviews"),(0,Nt._M)("courseId","==",e));return(0,Nt.aQ)(n,e=>{const n=[];e.forEach(e=>{const t=e.data();t.rating&&"number"===typeof t.rating&&n.push(t.rating)});const r=n.length;let s=0;if(r>0){const e=n.reduce((e,t)=>e+t,0);s=parseFloat((e/r).toFixed(1))}t({averageRating:s,reviewCount:r,hasReviews:r>0,error:null})},e=>{t({averageRating:0,reviewCount:0,hasReviews:!1,error:e.message})})}catch(n){return t({averageRating:0,reviewCount:0,hasReviews:!1,error:n.message}),()=>{}}})(e,e=>{i=e,a()}),()=>{n(),r()}},Yn=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[n,s]=(0,r.useState)({enrollmentCount:0,averageRating:0,reviewCount:0,hasReviews:!1}),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(e){if(t){return Jn(e,e=>{var t,n;s({enrollmentCount:e.enrollmentCount,averageRating:e.averageRating,reviewCount:e.reviewCount,hasReviews:e.hasReviews}),null!==(t=e.errors)&&void 0!==t&&t.enrollment||null!==(n=e.errors)&&void 0!==n&&n.rating?l(e.errors.enrollment||e.errors.rating):l(null),a(!1)})}(async()=>{a(!0);try{const t=await Qn(e);t.success?(s(t.stats),l(null)):l(t.error)}catch(t){l(t.message)}finally{a(!1)}})()}else a(!1)},[e,t]),{stats:n,loading:i,error:o}},$n=e=>{let{rating:t,maxRating:n=5,showNumeric:r=!0,reviewCount:s=0,showReviewCount:i=!0,size:o="medium",readonly:l=!0,onClick:c=null,clickable:u=!1}=e;const d=parseFloat(t)||0,h=d>0,m=[];for(let a=1;a<=n;a++){const e=a<=Math.floor(d),t=a===Math.ceil(d)&&d%1!==0;m.push((0,_t.jsx)("span",{className:"star ".concat(e?"filled":""," ").concat(t?"half":""," ").concat(o),children:e?"\u2605":t?"\u2b50":"\u2606"},a))}if(!h)return(0,_t.jsx)("div",{className:"star-rating no-rating",children:(0,_t.jsx)("span",{className:"no-rating-text",children:"No ratings yet"})});const f=u?"button":"div",p=u?{onClick:e=>{u&&c&&(e.preventDefault(),e.stopPropagation(),c())},type:"button","aria-label":"".concat(d.toFixed(1)," out of ").concat(n," stars. Click to view reviews."),title:"Click to view reviews",style:{cursor:"pointer"}}:{};return(0,_t.jsxs)(f,(0,a.A)((0,a.A)({className:"star-rating ".concat(o," ").concat(l?"readonly":""," ").concat(u?"clickable":"")},p),{},{children:[(0,_t.jsx)("div",{className:"stars-container",children:m}),r&&(0,_t.jsx)("span",{className:"rating-numeric",children:d.toFixed(1)}),i&&s>0&&(0,_t.jsxs)("span",{className:"review-count",children:["(",s," review",1!==s?"s":"",")"]})]}))},Xn=e=>{let{course:t,isEnrolled:n=!1}=e;const s=ue(),{user:i}=It(),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),{stats:u,loading:d}=Yn(t.id,!1),h=bn(t),m=d?t.students||0:u.enrollmentCount,f=t.maxCapacity||0,p=!h&&f>0&&m/f>=.8,g=!h&&f>0&&m>=f,v=function(e){return!h||"TBD"!==e&&"N/A"!==e&&null!==e&&0!==e?e||(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TBD"):"Coming Soon"};return(0,_t.jsxs)("div",{className:"course-card",onClick:()=>{s("/courses/".concat(t.id))},children:[n?(0,_t.jsx)("div",{className:"enrollment-status enrolled",children:"\u2705 Enrolled"}):h?(0,_t.jsx)("div",{className:"enrollment-status coming-soon",children:"Coming Soon"}):p&&(0,_t.jsx)("div",{className:"enrollment-status ".concat(g?"full":"nearly-full"),children:g?"Course Full":"Few Seats Left"}),(0,_t.jsx)("div",{className:"course-image",children:!t.image||a?(0,_t.jsx)("div",{className:"course-image-fallback",children:t.icon}):(0,_t.jsxs)("div",{className:"course-image-container",children:[!l&&(0,_t.jsx)("div",{className:"course-image-loading",children:t.icon}),(0,_t.jsx)("img",{src:t.image,alt:t.title,className:"course-image-img ".concat(l?"loaded":"loading"),onError:()=>{o(!0)},onLoad:()=>{c(!0)},style:{display:l?"block":"none"}})]})}),(0,_t.jsx)("h3",{className:"course-title",children:t.title}),(0,_t.jsx)("p",{className:"course-description",children:t.description}),(0,_t.jsxs)("div",{className:"course-meta",children:[(0,_t.jsx)("span",{className:"course-level",children:v(t.level)}),(0,_t.jsxs)("span",{className:"course-duration",children:["\u23f1\ufe0f ",v(t.duration)]})]}),(0,_t.jsxs)("div",{className:"course-stats",children:[(0,_t.jsxs)("span",{className:"course-stat",children:["\ud83d\udcda ",v(t.lessons)," lessons"]}),(0,_t.jsx)("div",{className:"course-stat course-rating-stat",children:h?"Coming Soon":(0,_t.jsx)($n,{rating:d?t.rating:u.hasReviews?u.averageRating:t.rating,reviewCount:d?0:u.reviewCount,showReviewCount:!d&&u.hasReviews,size:"small",showNumeric:!0})})]}),(0,_t.jsxs)("div",{className:"course-price",children:[t.originalPrice&&!h&&(0,_t.jsxs)("span",{className:"original-price",children:["$",t.originalPrice]}),h?"Price TBD":"$".concat(t.price)]}),(0,_t.jsx)("div",{className:"course-action",children:(0,_t.jsx)("button",{className:"btn enroll-btn ".concat(h?"coming-soon":""," ").concat(n?"enrolled":""),onClick:e=>{e.stopPropagation(),s(i?n?"/course/".concat(t.id,"/dashboard"):"/courses/".concat(t.id):"/login")},disabled:h,children:n?"Continue Learning":h?"Coming Soon":i?"Enroll Now":"Login to Enroll"})})]})},Zn=async(e,t)=>{try{if(!xt.db)throw new Error("Firestore not initialized");const n=(0,Nt.P)((0,Nt.rJ)(xt.db,"enrollments"),(0,Nt._M)("courseId","==",e),(0,Nt._M)("batchNumber","==",t),(0,Nt._M)("status","==","enrolled")),r=await(0,Nt.GG)(n);return{success:!0,count:r.size}}catch(n){return{success:!1,error:n.message,count:0}}},er=async e=>{try{if(!xt.db)throw new Error("Firestore not initialized");const t=yn(e);if(!t||!t.batches)return{success:!1,error:"Course not found or no batches defined"};const n={};for(const r of t.batches){const t=await Zn(e,r.batchNumber);n[r.batchNumber]=(0,a.A)((0,a.A)({},r),{},{enrollmentCount:t.success?t.count:0,error:t.success?null:t.error})}return{success:!0,batchStats:n}}catch(t){return{success:!1,error:t.message,batchStats:{}}}},tr=async(e,t,n)=>{try{if(!xt.db)return{success:!1,error:"Firestore not initialized"};const r="".concat(e,"_").concat(t,"_batch").concat(n),s=(0,Nt.H9)(xt.db,"enrollments",r),i=await(0,Nt.x7)(s);return i.exists()?{success:!0,enrollment:(0,a.A)({id:i.id},i.data())}:{success:!1,enrollment:null}}catch(r){return{success:!1,error:r.message}}},nr=async(e,t)=>{try{if(!xt.db)return{success:!1,error:"Firestore not initialized"};const n=(0,Nt.P)((0,Nt.rJ)(xt.db,"enrollments"),(0,Nt._M)("userId","==",e),(0,Nt._M)("courseId","==",t)),r=await(0,Nt.GG)(n),s=[];return r.forEach(e=>{s.push((0,a.A)({id:e.id},e.data()))}),s.sort((e,t)=>(e.batchNumber||0)-(t.batchNumber||0)),{success:!0,enrollments:s}}catch(n){return{success:!1,error:n.message,enrollments:[]}}},rr=async e=>{try{const t=yn(e);if(!t)return{success:!1,error:"Course not found"};const n=Sn(t);if(!n)return{success:!0,batch:null,reason:"No available batches"};const r=await Zn(e,n.batchNumber);return{success:!0,batch:(0,a.A)((0,a.A)({},n),{},{enrollmentCount:r.success?r.count:0})}}catch(t){return{success:!1,error:t.message}}},sr=async(e,t,n)=>{try{const r=await tr(e,t,n);if(!r.success||!r.enrollment)return{success:!1,error:"User not enrolled in this batch"};const s=yn(t);if(!s)return{success:!1,error:"Course not found"};const i=xn(s,n);return i?{success:!0,classLinks:i.classLinks||{},batch:i,enrollment:r.enrollment}:{success:!1,error:"Batch not found"}}catch(r){return{success:!1,error:r.message}}},ir=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{user:n}=It(),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[m,f]=(0,r.useState)(null),[p,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),b=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!n||!e)return i(!1),l(null),!1;g(!0),y(null);try{const r=await On(n.uid,e,t);return r.error?(y(r.error),i(!1),l(null),!1):(i(r.hasAccess),l(r.enrollment),r.hasAccess)}catch(r){return y(r.message),i(!1),l(null),!1}finally{g(!1)}},[n]),w=(0,r.useCallback)(async()=>{if(n){g(!0),y(null);try{const e=await(async e=>{try{if(!xt.db)return{success:!1,error:"Firestore not initialized"};const t=(0,Nt.P)((0,Nt.rJ)(xt.db,"enrollments"),(0,Nt._M)("userId","==",e)),n=await(0,Nt.GG)(t),r=[];return n.forEach(e=>{r.push((0,a.A)({id:e.id},e.data()))}),{success:!0,enrollments:r}}catch(v){return{success:!1,error:v.message,enrollments:[]}}})(n.uid);e.success?u(e.enrollments):(y(e.error),u([]))}catch(e){y(e.message),u([])}finally{g(!1)}}else u([])},[n]),x=(0,r.useCallback)(async e=>{if(n&&e)try{const t=await nr(n.uid,e);t.success?h(t.enrollments):(y(t.error),h([]))}catch(t){y(t.message),h([])}else h([])},[n]),N=(0,r.useCallback)(async(e,t)=>{if(n&&e&&t)try{const r=await sr(n.uid,e,t);r.success?f(r.classLinks):(y(r.error),f(null))}catch(r){y(r.message),f(null)}else f(null)},[n]),E=(0,r.useCallback)(async e=>{if(!n)throw new Error("User must be logged in to enroll");g(!0),y(null);try{const t=await Mn(e,n.uid);if(!t.success)throw new Error(t.error);return await b(e.courseId,t.batchNumber),await w(),await x(e.courseId),t}catch(t){throw y(t.message),t}finally{g(!1)}},[n,b,w,x]),S=(0,r.useCallback)(async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!n)throw new Error("User must be logged in");try{const s=await Fn(n.uid,e,t,r);return s.success&&(await b(e,r),await w(),await x(e)),s}catch(s){throw y(s.message),s}},[n,b,w,x]),C=(0,r.useCallback)(()=>c.length>0,[c]),k=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)return c.find(n=>n.courseId===e&&n.batchNumber===t);{const t=c.filter(t=>t.courseId===e);return t.sort((e,t)=>{var n,r,s,i;const a=(null===(n=e.enrolledAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||new Date(0);return((null===(s=t.enrolledAt)||void 0===s||null===(i=s.toDate)||void 0===i?void 0:i.call(s))||new Date(0))-a})[0]}},[c]),_=(0,r.useCallback)(e=>c.filter(t=>t.courseId===e),[c]),j=(0,r.useCallback)(e=>c.some(t=>t.courseId===e),[c]);return(0,r.useEffect)(()=>{e&&(b(e,t),x(e))},[e,t,b,x]),(0,r.useEffect)(()=>{o&&o.courseId&&o.batchNumber&&N(o.courseId,o.batchNumber)},[o,N]),(0,r.useEffect)(()=>{w()},[w]),{hasAccess:s,enrollment:o,allEnrollments:c,courseEnrollments:d,batchClassLinks:m,loading:p,error:v,checkAccess:b,loadEnrollments:w,loadCourseEnrollments:x,loadBatchClassLinks:N,processEnrollment:E,updateProgress:S,hasAnyCourseAccess:C,getEnrollmentForCourseBatch:k,getEnrollmentsForCourse:_,hasAccessToAnyCourse:j,clearError:()=>y(null)}},ar=()=>{const{user:e}=It(),[t,n]=(0,r.useState)("All"),{allEnrollments:s}=ir(),i=["All",...new Set(vn.map(e=>e.category))],a="All"===t?vn:vn.filter(e=>e.category===t);return(0,_t.jsxs)("div",{className:"courses-page-container",children:[(0,_t.jsxs)("div",{className:"courses-header",children:[(0,_t.jsx)("h1",{className:"courses-title",children:"Available Courses"}),(0,_t.jsxs)("p",{className:"courses-subtitle",children:["Discover our comprehensive collection of AI courses designed to take you from beginner to expert.",!e&&" Login to enroll and track your progress!"]})]}),(0,_t.jsx)("div",{className:"courses-filters",children:i.map(e=>(0,_t.jsx)("button",{className:"filter-btn ".concat(t===e?"active":""),onClick:()=>n(e),children:e},e))}),(0,_t.jsx)("div",{className:"courses-grid",children:a.map(t=>{return(0,_t.jsx)(Xn,{course:t,isEnrolled:(n=t.id,!(!e||!s)&&s.some(e=>e.courseId===n))},t.id);var n})})]})},or=()=>"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COMPANY_EMAIL:"contact@tuneparams.com",REACT_APP_COMPANY_NAME:"TuneParams AI Learning Platform",REACT_APP_COMPANY_PHONE:"+1 (469) 702-1086",REACT_APP_EMAILJS_PUBLIC_KEY:"g2ZIKXu5CMAtlW-yr",REACT_APP_EMAILJS_SERVICE_ID:"service_6nnlhkw",REACT_APP_EMAILJS_TEMPLATE_ID:"template_660cmfs",REACT_APP_ENABLE_COUPONS:"true",REACT_APP_FIREBASE_API_KEY:"AIzaSyCn55V2y3cXp4Ln0NWjlauU8rgZgMgwDyc",REACT_APP_FIREBASE_APP_ID:"1:995918337622:web:505babbabe198e3f0d0df7",REACT_APP_FIREBASE_AUTH_DOMAIN:"tuneparams.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"995918337622",REACT_APP_FIREBASE_PROJECT_ID:"tuneparams",REACT_APP_FIREBASE_STORAGE_BUCKET:"tuneparams.firebasestorage.app",REACT_APP_FORMSPREE_FORM_ID:"xkgbylng",REACT_APP_FROM_EMAIL:"noreply@tuneparams.com",REACT_APP_GITHUB_URL:"https://github.com/TuneParams-ai",REACT_APP_HERO_IMAGE_URL:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=500&h=400&fit=crop&auto=format",REACT_APP_LINKEDIN_URL:"https://www.linkedin.com/in/tuneparams/",REACT_APP_PAYPAL_CLIENT_ID:"Acpw6Y9AC_WmjeowDefzez5UraQz8Is2eli9_B1EiyTmkiilTremv-JSsTzcT65epfBO3BHiBmn7X-OF",REACT_APP_PAYPAL_ENVIRONMENT:"live",REACT_APP_SUPPORT_EMAIL:"contact@tuneparams.com",REACT_APP_TWITTER_URL:"https://twitter.com/tuneparams",REACT_APP_WEBSITE_URL:"https://www.tuneparams.ai"}.REACT_APP_ENABLE_PROGRESS_TRACKING,lr=e=>{let{userId:t,courseId:n,originalAmount:s,onCouponApplied:i,onCouponRemoved:a,disabled:o=!1}=e;const[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1),[h,m]=(0,r.useState)(""),[f,p]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1);const y=async()=>{if(l.trim()){d(!0),m("");try{const e=await(async(e,t,n,r)=>{try{if(!xt.db)throw new Error("Firestore not initialized");const s=(0,Nt.P)((0,Nt.rJ)(xt.db,"coupons"),(0,Nt._M)("code","==",e.toUpperCase()),(0,Nt.AB)(1)),i=await(0,Nt.GG)(s);if(i.empty)return{valid:!1,error:"Invalid coupon code"};const a=i.docs[0],o=a.data();if("active"!==o.status)return{valid:!1,error:"Coupon is not active"};const l=new Date;if(o.validFrom&&o.validFrom.toDate()>l)return{valid:!1,error:"Coupon is not yet valid"};if(o.validUntil&&o.validUntil.toDate()<l)return{valid:!1,error:"Coupon has expired"};if("user_specific"===o.targetType&&o.targetUserId!==t)return{valid:!1,error:"This coupon is not valid for your account"};if("course_specific"===o.targetType&&o.courseId!==n)return{valid:!1,error:"This coupon is not valid for this course"};if(o.minOrderAmount&&r<o.minOrderAmount)return{valid:!1,error:"Minimum order amount of $".concat(o.minOrderAmount," required")};if(o.usageLimit&&o.usageCount>=o.usageLimit)return{valid:!1,error:"Coupon usage limit exceeded"};const c=o.usageHistory.filter(e=>e.userId===t).length;if(o.usageLimitPerUser&&c>=o.usageLimitPerUser)return{valid:!1,error:"You have already used this coupon the maximum number of times"};let u=0;"percentage"===o.discountType?(u=r*o.discountValue/100,o.maxDiscountAmount&&u>o.maxDiscountAmount&&(u=o.maxDiscountAmount)):"fixed"===o.discountType&&(u=Math.min(o.discountValue,r));const d=Math.max(0,r-u);return{valid:!0,couponId:a.id,couponCode:o.code,discountType:o.discountType,discountValue:o.discountValue,discountAmount:u,originalAmount:r,finalAmount:d,savings:u,couponData:o}}catch(h){return{valid:!1,error:h.message}}})(l.trim(),t,n,s);e.valid?(p(e),m(""),c(""),i&&i(e)):(m(e.error),p(null))}catch(e){m("Failed to validate coupon code"),p(null)}finally{d(!1)}}else m("Please enter a coupon code")},b=e=>{if("percentage"===e.discountType){var t;let n="".concat(e.discountValue,"% off");return null!==(t=e.couponData)&&void 0!==t&&t.maxDiscountAmount&&e.discountAmount>=e.couponData.maxDiscountAmount&&(n+=" (max $".concat(e.couponData.maxDiscountAmount,")")),n}return"$".concat(e.discountValue," off")};return(0,_t.jsx)("div",{className:"coupon-input-container",children:f?(0,_t.jsxs)("div",{className:"applied-coupon-section",children:[(0,_t.jsxs)("div",{className:"applied-coupon-info",children:[(0,_t.jsxs)("div",{className:"coupon-success",children:[(0,_t.jsx)("span",{className:"success-icon",children:"\u2705"}),(0,_t.jsxs)("div",{className:"coupon-details",children:[(0,_t.jsxs)("div",{className:"coupon-code-applied",children:["Code: ",(0,_t.jsx)("strong",{children:f.couponCode})]}),(0,_t.jsx)("div",{className:"coupon-discount",children:b(f)})]})]}),(0,_t.jsx)("button",{onClick:()=>{p(null),m(""),c(""),v(!1),a&&a()},className:"remove-coupon-btn",disabled:o,title:"Remove coupon",children:"\u2715"})]}),(0,_t.jsxs)("div",{className:"price-breakdown",children:[(0,_t.jsxs)("div",{className:"price-row",children:[(0,_t.jsx)("span",{children:"Original Price:"}),(0,_t.jsxs)("span",{children:["$",f.originalAmount.toFixed(2)]})]}),(0,_t.jsxs)("div",{className:"price-row discount-row",children:[(0,_t.jsxs)("span",{children:["Discount (",b(f),"):"]}),(0,_t.jsxs)("span",{children:["-$",f.discountAmount.toFixed(2)]})]}),(0,_t.jsxs)("div",{className:"price-row total-row",children:[(0,_t.jsx)("span",{children:(0,_t.jsx)("strong",{children:"Final Price:"})}),(0,_t.jsx)("span",{children:(0,_t.jsxs)("strong",{children:["$",f.finalAmount.toFixed(2)]})})]}),f.savings>0&&(0,_t.jsxs)("div",{className:"savings-badge",children:["You save $",f.savings.toFixed(2),"!"]})]})]}):(0,_t.jsx)(_t.Fragment,{children:g?(0,_t.jsxs)("div",{className:"coupon-input-section",children:[(0,_t.jsxs)("div",{className:"coupon-input-header",children:[(0,_t.jsx)("h4",{children:"Enter your coupon code"}),(0,_t.jsx)("button",{type:"button",className:"coupon-close-btn",onClick:()=>v(!1),disabled:o||u,children:"\u2715"})]}),(0,_t.jsxs)("div",{className:"coupon-input-group",children:[(0,_t.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value.toUpperCase()),onKeyPress:e=>{"Enter"===e.key&&y()},placeholder:"Enter coupon code",className:"coupon-input",disabled:o||u,maxLength:20}),(0,_t.jsx)("button",{onClick:y,disabled:o||u||!l.trim(),className:"apply-coupon-btn",children:u?"Applying...":"Apply"})]}),h&&(0,_t.jsx)("div",{className:"coupon-error",children:h})]}):(0,_t.jsx)("div",{className:"coupon-toggle-section",children:(0,_t.jsx)("button",{type:"button",className:"coupon-toggle-btn",onClick:()=>v(!0),disabled:o,children:"Have a coupon code?"})})})})},cr=e=>{let{courseId:t,courseTitle:n,coursePrice:s,onSuccess:i,onError:a,onCancel:o,disabled:l=!1}=e;const{user:c}=It(),u=(0,r.useRef)(),[d,h]=(0,r.useState)(!0),[m,f]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),[x,N]=(0,r.useState)(null),[E,S]=(0,r.useState)(s),[C]=(0,r.useState)(s),k="Acpw6Y9AC_WmjeowDefzez5UraQz8Is2eli9_B1EiyTmkiilTremv-JSsTzcT65epfBO3BHiBmn7X-OF";(0,r.useEffect)(()=>{(()=>{if(window.paypal)return f(!0),void h(!1);const e=document.createElement("script");e.src="https://www.paypal.com/sdk/js?client-id=".concat(k,"&currency=USD"),e.async=!0,e.onload=()=>{f(!0),h(!1)},e.onerror=()=>{h(!1),a&&a(new Error("PayPal SDK failed to load"))},document.body.appendChild(e)})()},[k,a]);const _=e=>{N(e),S(e.finalAmount)},j=()=>{N(null),S(C)},T=async()=>{if(c&&x&&!(E>0))try{const r={courseId:t,courseTitle:n,originalAmount:C,termsAccepted:p,appliedCoupon:x},s=await(async(e,t)=>{try{var n,r,s,i,a,o,l;const d=await St(t),h=d.success?d.userData:null,m=null===h||void 0===h?void 0:h.email;if(!m)throw new Error("User email not found");const f={courseId:e.courseId,courseTitle:e.courseTitle,amount:0,originalAmount:e.originalAmount,paymentID:"FREE_".concat(Date.now(),"_").concat(t.substring(0,8)),orderID:"FREE_ORDER_".concat(Date.now()),payerEmail:m,payerName:(null===h||void 0===h?void 0:h.displayName)||(null===h||void 0===h||null===(n=h.email)||void 0===n?void 0:n.split("@")[0])||"Student",transactionStatus:"Free_Enrollment",timestamp:(new Date).toISOString(),termsAccepted:e.termsAccepted||!0,termsAcceptedAt:(new Date).toISOString(),appliedCoupon:e.appliedCoupon,paymentMethod:"Free_Coupon",fundingSource:"Coupon_100_Percent_Off"},p=await Ln(t,e.courseId,f,m);if(!p.success)throw new Error("Enrollment failed: ".concat(p.error));const g=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),v={userName:(null===h||void 0===h?void 0:h.displayName)||(null===h||void 0===h||null===(r=h.email)||void 0===r?void 0:r.split("@")[0])||"Student",userEmail:m,courseTitle:e.courseTitle,courseId:e.courseId,amount:0,originalAmount:e.originalAmount,paymentId:f.paymentID,orderId:f.orderID,enrollmentId:p.enrollmentId,enrollmentDate:g,batchNumber:p.batchNumber,batchStartDate:null===(s=p.batchInfo)||void 0===s?void 0:s.startDate,batchEndDate:null===(i=p.batchInfo)||void 0===i?void 0:i.endDate,batchStatus:null===(a=p.batchInfo)||void 0===a?void 0:a.status,paymentMethod:"Free Enrollment (100% Off Coupon)",payerName:f.payerName,payerEmail:f.payerEmail,transactionStatus:"Free Enrollment",paymentSource:null,fundingSource:"Coupon_100_Percent_Off",appliedCoupon:e.appliedCoupon},y=await hn(v);let b=null;try{b=await(0,gn.w9)(v,y,t),b.success}catch(c){}if(e.appliedCoupon)try{await Rn(e.appliedCoupon.couponId,t,e.courseId,{orderAmount:e.originalAmount,discountAmount:e.appliedCoupon.discountAmount,finalAmount:0,paymentId:f.paymentID,orderId:f.orderID,enrollmentType:"free_coupon"})}catch(u){}return{success:!0,enrollmentId:p.enrollmentId,batchNumber:p.batchNumber,batchInfo:p.batchInfo,emailSent:y.success,emailTrackingId:null===(o=b)||void 0===o?void 0:o.emailRecordId,paymentId:f.paymentID,orderId:f.orderID,enrollmentType:"free_coupon",couponUsed:(null===(l=e.appliedCoupon)||void 0===l?void 0:l.couponCode)||null}}catch(d){return{success:!1,error:d.message}}})(r,c.uid);var e;if(s.success){if(i)i({orderID:s.orderId,payerID:c.uid,paymentID:s.paymentId,courseId:t,courseTitle:n,amount:0,originalAmount:C,payerEmail:c.email,payerName:c.displayName||(null===(e=c.email)||void 0===e?void 0:e.split("@")[0])||"Student",transactionStatus:"Free_Enrollment",timestamp:(new Date).toISOString(),paymentSource:null,fundingSource:"Coupon_100_Percent_Off",termsAccepted:p,termsAcceptedAt:(new Date).toISOString(),appliedCoupon:x,enrollmentType:"free_coupon",enrollmentId:s.enrollmentId,batchNumber:s.batchNumber,batchInfo:s.batchInfo})}else a&&a(new Error(s.error))}catch(r){a&&a(r)}},A=(0,r.useCallback)(()=>{u.current&&window.paypal&&(u.current.innerHTML="",window.paypal.Buttons({createOrder:(e,r)=>r.order.create({purchase_units:[{amount:{value:E.toString(),currency_code:"USD"},description:x?"Enrollment for ".concat(n," (Coupon: ").concat(x.couponCode,")"):"Enrollment for ".concat(n),custom_id:t,soft_descriptor:"TuneParams Course"}],application_context:{brand_name:"TuneParams.ai",landing_page:"BILLING",user_action:"PAY_NOW"}}),onApprove:async(e,r)=>{try{const e=await r.order.capture();if(i){const r=e.payer.name?"".concat(e.payer.name.given_name||""," ").concat(e.payer.name.surname||"").trim():"Student",a=e.purchase_units[0].payments.captures[0].payment_source||{},o=e.purchase_units[0].payments.captures[0].funding_source||null;if(i({orderID:e.id,payerID:e.payer.payer_id,paymentID:e.purchase_units[0].payments.captures[0].id,courseId:t,courseTitle:n,amount:E,originalAmount:C,payerEmail:e.payer.email_address,payerName:r,transactionStatus:e.status,timestamp:(new Date).toISOString(),paymentSource:a,fundingSource:o,payerAddress:e.payer.address||null,termsAccepted:p,termsAcceptedAt:(new Date).toISOString(),appliedCoupon:x}),x)try{(await Rn(x.couponId,null===c||void 0===c?void 0:c.uid,t,{orderAmount:C,discountAmount:x.discountAmount,finalAmount:E,paymentId:e.purchase_units[0].payments.captures[0].id,orderId:e.id})).success}catch(s){}}}catch(o){a&&a(o)}},onError:e=>{a&&a(e)},onCancel:e=>{o&&o(e)},style:{layout:"vertical",color:"blue",shape:"rect",label:"paypal",height:45}}).render(u.current))},[E,n,t,i,a,o,x,C,p,c]);return(0,r.useEffect)(()=>{m&&!l&&E>0&&p?A():u.current&&(u.current.innerHTML="")},[m,l,E,p,A]),d?(0,_t.jsxs)("div",{className:"paypal-loading",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{children:"Loading PayPal..."})]}):m?l?(0,_t.jsx)("div",{className:"paypal-disabled",children:(0,_t.jsx)("p",{children:"Payment not available for this course."})}):E<=0&&x?(0,_t.jsxs)("div",{className:"paypal-checkout-container",children:[c&&(0,_t.jsx)(lr,{userId:c.uid,courseId:t,originalAmount:C,onCouponApplied:_,onCouponRemoved:j,disabled:l}),(0,_t.jsxs)("div",{className:"payment-summary",children:[(0,_t.jsx)("h4",{children:"Enrollment Summary"}),(0,_t.jsxs)("div",{className:"payment-details",children:[(0,_t.jsxs)("div",{className:"payment-item",children:[(0,_t.jsx)("span",{children:"Course:"}),(0,_t.jsx)("span",{children:n})]}),(0,_t.jsxs)("div",{className:"payment-item",children:[(0,_t.jsx)("span",{children:"Original Price:"}),(0,_t.jsxs)("span",{children:["$",C.toFixed(2)]})]}),(0,_t.jsxs)("div",{className:"payment-item discount-item",children:[(0,_t.jsxs)("span",{children:["Discount (",x.couponCode,"):"]}),(0,_t.jsxs)("span",{children:["-$",x.discountAmount.toFixed(2)]})]}),(0,_t.jsxs)("div",{className:"payment-item total free-total",children:[(0,_t.jsx)("span",{children:(0,_t.jsx)("strong",{children:"Total:"})}),(0,_t.jsx)("span",{children:(0,_t.jsx)("strong",{children:"FREE!"})})]}),(0,_t.jsx)("div",{className:"savings-info free-course",children:"Congratulations! You get this course for FREE with your coupon!"})]})]}),(0,_t.jsxs)("div",{className:"terms-conditions-section",children:[(0,_t.jsx)("div",{className:"terms-checkbox-container",children:(0,_t.jsxs)("label",{className:"terms-checkbox-label",children:[(0,_t.jsx)("input",{type:"checkbox",checked:p,onChange:e=>g(e.target.checked),className:"terms-checkbox"}),(0,_t.jsx)("span",{className:"checkmark"}),(0,_t.jsxs)("span",{className:"terms-text",children:["I agree to the ",(0,_t.jsx)("button",{type:"button",className:"terms-link",onClick:()=>y(!0),children:"Terms and Conditions"})," and ",(0,_t.jsx)("button",{type:"button",className:"terms-link",onClick:()=>w(!0),children:"Privacy Policy"})]})]})}),!p&&(0,_t.jsx)("p",{className:"terms-requirement",children:"Please accept the Terms and Conditions to proceed with enrollment."})]}),(0,_t.jsxs)("div",{className:"direct-enrollment-section",children:[(0,_t.jsx)("button",{onClick:T,disabled:!p,className:"direct-enrollment-btn ".concat(p?"":"disabled"),children:"Enroll Now - FREE!"}),!p&&(0,_t.jsx)("div",{className:"enrollment-disabled-overlay",children:(0,_t.jsx)("p",{children:"Accept terms to enable enrollment"})})]}),(0,_t.jsxs)("div",{className:"enrollment-security",children:[(0,_t.jsx)("p",{children:"\ud83c\udf93 Free enrollment with 100% off coupon"}),(0,_t.jsx)("p",{children:"No payment required - instant access after enrollment"})]}),v&&(0,_t.jsx)("div",{className:"modal-overlay",onClick:()=>y(!1),children:(0,_t.jsxs)("div",{className:"modal-content terms-modal",onClick:e=>e.stopPropagation(),children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsx)("h2",{children:"Terms and Conditions"}),(0,_t.jsx)("button",{className:"modal-close",onClick:()=>y(!1),children:"\xd7"})]}),(0,_t.jsx)("div",{className:"modal-body",children:(0,_t.jsxs)("div",{className:"terms-content",children:[(0,_t.jsx)("h3",{children:"Course Enrollment Terms"}),(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Effective Date:"})," [TO BE UPDATED]"]}),(0,_t.jsx)("h4",{children:"1. Course Access and Duration"}),(0,_t.jsx)("p",{children:"Upon successful enrollment and payment, you will gain access to the course materials for the duration specified in the course description. Access begins on the batch start date and continues through the course completion."}),(0,_t.jsx)("h4",{children:"2. Payment and Refund Policy"}),(0,_t.jsx)("p",{children:"[PLACEHOLDER] - Refund terms and conditions to be defined. Generally, refunds may be available within the first 7 days of course start, subject to specific conditions."}),(0,_t.jsx)("h4",{children:"3. Course Completion and Certification"}),(0,_t.jsx)("p",{children:"Course completion requirements will be communicated during the course. Certificates may be provided upon successful completion of all course requirements."}),(0,_t.jsx)("h4",{children:"4. Code of Conduct"}),(0,_t.jsx)("p",{children:"Students are expected to maintain respectful and professional conduct in all course interactions, including live sessions, forums, and group activities."}),(0,_t.jsx)("h4",{children:"5. Intellectual Property"}),(0,_t.jsx)("p",{children:"All course materials, including videos, slides, and assignments, are proprietary to TuneParams.ai and are for personal educational use only."}),(0,_t.jsx)("h4",{children:"6. Technical Requirements"}),(0,_t.jsx)("p",{children:"Students are responsible for ensuring they have the necessary technical requirements and stable internet connection to participate in online sessions."}),(0,_t.jsx)("p",{children:(0,_t.jsx)("em",{children:"Note: These terms are subject to updates. Full terms and conditions will be provided upon enrollment completion."})})]})}),(0,_t.jsx)("div",{className:"modal-footer",children:(0,_t.jsx)("button",{className:"btn btn-primary",onClick:()=>y(!1),children:"Close"})})]})}),b&&(0,_t.jsx)("div",{className:"modal-overlay",onClick:()=>w(!1),children:(0,_t.jsxs)("div",{className:"modal-content privacy-modal",onClick:e=>e.stopPropagation(),children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsx)("h2",{children:"Privacy Policy"}),(0,_t.jsx)("button",{className:"modal-close",onClick:()=>w(!1),children:"\xd7"})]}),(0,_t.jsx)("div",{className:"modal-body",children:(0,_t.jsxs)("div",{className:"privacy-content",children:[(0,_t.jsx)("h3",{children:"Privacy Policy"}),(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Effective Date:"})," [TO BE UPDATED]"]}),(0,_t.jsx)("h4",{children:"1. Information We Collect"}),(0,_t.jsx)("p",{children:"We collect information necessary for course enrollment, including name, email address, payment information, and course progress data."}),(0,_t.jsx)("h4",{children:"2. How We Use Your Information"}),(0,_t.jsx)("p",{children:"Your information is used to provide course access, communicate course updates, process payments, and improve our educational services."}),(0,_t.jsx)("h4",{children:"3. Information Sharing"}),(0,_t.jsx)("p",{children:"[PLACEHOLDER] - We do not sell or share personal information with third parties except as necessary for course delivery and payment processing."}),(0,_t.jsx)("h4",{children:"4. Data Security"}),(0,_t.jsx)("p",{children:"We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction."}),(0,_t.jsx)("h4",{children:"5. Your Rights"}),(0,_t.jsx)("p",{children:"You have the right to access, update, or delete your personal information. Contact us for any privacy-related requests."}),(0,_t.jsx)("h4",{children:"6. Contact Information"}),(0,_t.jsx)("p",{children:"For privacy-related questions, please contact us at [CONTACT EMAIL TO BE ADDED]."}),(0,_t.jsx)("p",{children:(0,_t.jsx)("em",{children:"Note: This privacy policy is subject to updates. Full privacy policy will be provided upon enrollment completion."})})]})}),(0,_t.jsx)("div",{className:"modal-footer",children:(0,_t.jsx)("button",{className:"btn btn-primary",onClick:()=>w(!1),children:"Close"})})]})})]}):E<=0?(0,_t.jsx)("div",{className:"paypal-disabled",children:(0,_t.jsx)("p",{children:"Payment not available for this course."})}):(0,_t.jsxs)("div",{className:"paypal-checkout-container",children:[c&&(0,_t.jsx)(lr,{userId:c.uid,courseId:t,originalAmount:C,onCouponApplied:_,onCouponRemoved:j,disabled:l}),(0,_t.jsxs)("div",{className:"payment-summary",children:[(0,_t.jsx)("h4",{children:"Payment Summary"}),(0,_t.jsxs)("div",{className:"payment-details",children:[(0,_t.jsxs)("div",{className:"payment-item",children:[(0,_t.jsx)("span",{children:"Course:"}),(0,_t.jsx)("span",{children:n})]}),x&&(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"payment-item",children:[(0,_t.jsx)("span",{children:"Original Price:"}),(0,_t.jsxs)("span",{children:["$",C.toFixed(2)]})]}),(0,_t.jsxs)("div",{className:"payment-item discount-item",children:[(0,_t.jsxs)("span",{children:["Discount (",x.couponCode,"):"]}),(0,_t.jsxs)("span",{children:["-$",x.discountAmount.toFixed(2)]})]})]}),(0,_t.jsxs)("div",{className:"payment-item total",children:[(0,_t.jsx)("span",{children:"Total:"}),(0,_t.jsxs)("span",{children:["$",E.toFixed(2)]})]}),x&&x.savings>0&&(0,_t.jsxs)("div",{className:"savings-info",children:["You save $",x.savings.toFixed(2),"!"]})]})]}),(0,_t.jsxs)("div",{className:"terms-conditions-section",children:[(0,_t.jsx)("div",{className:"terms-checkbox-container",children:(0,_t.jsxs)("label",{className:"terms-checkbox-label",children:[(0,_t.jsx)("input",{type:"checkbox",checked:p,onChange:e=>g(e.target.checked),className:"terms-checkbox"}),(0,_t.jsx)("span",{className:"checkmark"}),(0,_t.jsxs)("span",{className:"terms-text",children:["I agree to the ",(0,_t.jsx)("button",{type:"button",className:"terms-link",onClick:()=>y(!0),children:"Terms and Conditions"})," and ",(0,_t.jsx)("button",{type:"button",className:"terms-link",onClick:()=>w(!0),children:"Privacy Policy"})]})]})}),!p&&(0,_t.jsx)("p",{className:"terms-requirement",children:"Please accept the Terms and Conditions to proceed with payment."})]}),(0,_t.jsx)("div",{ref:u,className:"paypal-button-container",style:{minHeight:"45px",opacity:p?1:.5,pointerEvents:p?"auto":"none"}}),!p&&(0,_t.jsx)("div",{className:"payment-disabled-overlay",children:(0,_t.jsx)("p",{children:"Accept terms to enable payment"})}),(0,_t.jsxs)("div",{className:"payment-security",children:[(0,_t.jsx)("p",{children:"\ud83d\udd12 Secure payment powered by PayPal"}),(0,_t.jsx)("p",{children:"Your payment information is encrypted and secure"})]}),v&&(0,_t.jsx)("div",{className:"modal-overlay",onClick:()=>y(!1),children:(0,_t.jsxs)("div",{className:"modal-content terms-modal",onClick:e=>e.stopPropagation(),children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsx)("h2",{children:"Terms and Conditions"}),(0,_t.jsx)("button",{className:"modal-close",onClick:()=>y(!1),children:"\xd7"})]}),(0,_t.jsx)("div",{className:"modal-body",children:(0,_t.jsxs)("div",{className:"terms-content",children:[(0,_t.jsx)("h3",{children:"Terms and Conditions for Foundations to Frontiers of AI Course Offered by TuneParams"}),(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Effective Date:"})," September 1, 2025"]}),(0,_t.jsx)("p",{children:'These Terms and Conditions ("Agreement") govern your registration and participation in the AI Online Live Course (the "Course") provided by TuneParams ("we," "us," "our"). By registering for the Course, you agree to be legally bound by this Agreement.'}),(0,_t.jsx)("h4",{children:"1. Acceptance of Terms"}),(0,_t.jsx)("p",{children:"By accessing or using TuneParams.ai's platform, services, or content, users acknowledge that they have read, understood, and agree to be bound by these Terms and Conditions. If users do not agree with any part of these Terms, they must refrain from using the platform."}),(0,_t.jsx)("h4",{children:"2. Fees and Payment"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Full payment of the advertised course fee is required at registration."}),(0,_t.jsx)("li",{children:"Accepted payment methods: PayPal, debit card, credit card, or other methods introduced by us."}),(0,_t.jsx)("li",{children:"All fees are in USD unless otherwise noted. Currency conversion, bank, or transaction fees are your responsibility."}),(0,_t.jsx)("li",{children:"Access to the Course is granted only after successful payment."}),(0,_t.jsx)("li",{children:"Fees are non-transferable and non-refundable except as outlined in Section 7 (Cancellations and Refunds)."}),(0,_t.jsx)("li",{children:"If payment is disputed, reversed, or charged back, your enrollment and access will be suspended immediately. We reserve the right to pursue remedies for fraudulent chargebacks."})]}),(0,_t.jsx)("h4",{children:"3. Eligibility"}),(0,_t.jsx)("p",{children:"To register, you must:"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Be at least 16 years of age. Minors must provide written parental/guardian consent."}),(0,_t.jsx)("li",{children:"Have access to a functioning computer, microphone, camera, and reliable internet."}),(0,_t.jsx)("li",{children:"Be proficient in English (spoken and written)."}),(0,_t.jsx)("li",{children:"Ensure participation is lawful under the regulations of your country of residence."})]}),(0,_t.jsx)("h4",{children:"4. User Obligations"}),(0,_t.jsx)("p",{children:"Users agree to provide accurate, complete, and current information during registration and throughout their use of the platform. Users are responsible for maintaining the confidentiality of their login credentials and for all activities conducted under their account. Misuse, fraudulent activity, or sharing of accounts is strictly prohibited."}),(0,_t.jsx)("h4",{children:"5. Roles and Access"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Users may be Students, Instructors, or Administrators, each with specific access rights."}),(0,_t.jsx)("li",{children:"Instructors may not promise specific outcomes, certifications, or employment opportunities."}),(0,_t.jsx)("li",{children:"Administrators retain final authority on account management, course access, refunds, and dispute resolution."})]}),(0,_t.jsx)("h4",{children:"6. Intellectual Property"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"All materials (videos, slides, assignments, recordings, notes, graphics, software, and others) are the exclusive property of TuneParams or its licensors."}),(0,_t.jsx)("li",{children:"You are granted a limited, personal, non-transferable license to access content only during your enrollment."}),(0,_t.jsxs)("li",{children:["You may not:",(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Copy, reproduce, share, resell, or distribute any material."}),(0,_t.jsx)("li",{children:"Record live sessions or create derivative works."}),(0,_t.jsx)("li",{children:"Use the content for commercial, non-commercial, educational, or research purposes outside this Course."})]})]}),(0,_t.jsx)("li",{children:"Unauthorized use may result in immediate removal without refund and potential legal action."})]}),(0,_t.jsx)("h4",{children:"7. Intellectual Property"}),(0,_t.jsx)("p",{children:"All content, including but not limited to text, software, code, graphics, images, trademarks, service marks, and logos provided on TuneParams.ai is the exclusive property of TuneParams.ai or its licensors. Unauthorized use, reproduction, modification, distribution, or exploitation of this content without express permission is prohibited."}),(0,_t.jsx)("h4",{children:"8. Technology Requirements"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"You are responsible for ensuring your equipment and internet meet minimum requirements."}),(0,_t.jsx)("li",{children:"Installing required apps/software, platform updates, or compatibility issues on your side do not qualify for refunds."}),(0,_t.jsx)("li",{children:"Missed sessions due to personal or technical issues are your responsibility. Recordings, if available, may substitute but are not guaranteed."})]}),(0,_t.jsx)("h4",{children:"9. Cancellations and Refunds"}),(0,_t.jsx)("p",{children:(0,_t.jsx)("strong",{children:"Student Cancellations:"})}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Full (100%) refund within 7 calendar days of the official course start date, provided you have not attended more than one (1) live session."}),(0,_t.jsx)("li",{children:"No refunds after 7 days or if more than one session has been attended."})]}),(0,_t.jsx)("p",{children:(0,_t.jsx)("strong",{children:"Provider Cancellations:"})}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"If canceled before start: full refund."}),(0,_t.jsxs)("li",{children:["If canceled after start:",(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Less than 60% delivered \u2192 100% refund."}),(0,_t.jsx)("li",{children:"60% or more delivered \u2192 50% refund."})]})]})]}),(0,_t.jsx)("p",{children:(0,_t.jsx)("strong",{children:"Partial Cancellations / Rescheduling:"})}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Instructor substitutions, schedule adjustments, or rescheduling do not entitle refunds."}),(0,_t.jsx)("li",{children:"Postponed sessions will be rescheduled without additional cost."})]}),(0,_t.jsx)("h4",{children:"10. Termination of Access"}),(0,_t.jsx)("p",{children:"TuneParams.ai reserves the right to suspend or terminate user accounts or restrict access to services at its sole discretion, without prior notice, if users violate these Terms, engage in unlawful activity, or compromise the platform's integrity. Users may also terminate their accounts by following the platform's account deletion procedures."}),(0,_t.jsx)("h4",{children:"11. Community Forums, Reviews, and Communication"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Forums and community spaces are for educational discussion only. Prohibited uses include spam, illegal content, and copyright infringement."}),(0,_t.jsx)("li",{children:"We reserve the right to remove posts, suspend access, or ban users."}),(0,_t.jsx)("li",{children:"Reviews must be from verified students and must be respectful, accurate, and relevant. We may edit or remove reviews that violate these conditions."}),(0,_t.jsx)("li",{children:"By submitting reviews or feedback, you grant us the right to display them, including for promotional purposes."}),(0,_t.jsx)("li",{children:"You consent to receive service-related communications (confirmations, updates, receipts). Marketing communications require opt-in."})]}),(0,_t.jsx)("h4",{children:"12. Platform Availability and Technical Limitations"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"We do not guarantee uninterrupted or error-free operation of the platform."}),(0,_t.jsx)("li",{children:"Temporary downtime may occur due to maintenance, upgrades, or external factors."}),(0,_t.jsx)("li",{children:"We are not liable for outages of third-party services (Zoom, PayPal, Firebase, EmailJS, etc.)."})]}),(0,_t.jsx)("h4",{children:"13. Data Protection and Privacy"}),(0,_t.jsx)("p",{children:"TuneParams.ai collects and processes personal data in accordance with its Privacy Policy, which forms an integral part of these Terms. We employ reasonable safeguards to protect user data but cannot guarantee absolute security. Users are responsible for ensuring their devices and networks are secure when accessing the platform."}),(0,_t.jsx)("h4",{children:"14. Limitation of Liability"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"We make no guarantees regarding outcomes (employment, certification, skills, or opportunities)."}),(0,_t.jsx)("li",{children:"We are not liable for technical issues, missed sessions, or indirect damages (income loss, reputation harm, or opportunities)."}),(0,_t.jsx)("li",{children:"Our maximum liability is limited to the total course fee paid."})]}),(0,_t.jsx)("h4",{children:"15. Certificates"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsxs)("li",{children:["Certificates are awarded only upon:",(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Attending at least 95% of sessions."}),(0,_t.jsx)("li",{children:"Completing all required assignments and assessments."})]})]}),(0,_t.jsx)("li",{children:"Certificates are digital only."}),(0,_t.jsx)("li",{children:"Certificates may be revoked in cases of academic dishonesty or issuance error."})]}),(0,_t.jsx)("h4",{children:"16. Third-Party Links and Content"}),(0,_t.jsx)("p",{children:"The platform may include links to external websites or resources. TuneParams.ai is not responsible for the content, accuracy, or practices of third-party sites. Accessing third-party content is at the user's own risk, and users are encouraged to review the respective terms and policies of such sites."}),(0,_t.jsx)("h4",{children:"17. Governing Law and Jurisdiction"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"This Agreement is governed by the laws of the United States of America."}),(0,_t.jsx)("li",{children:"Disputes are subject to the exclusive jurisdiction of U.S. courts unless local law requires otherwise."})]}),(0,_t.jsx)("h4",{children:"18. Data Privacy and Confidentiality"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"We collect necessary personal data (name, email, payment details, assignments, attendance, and communications)."}),(0,_t.jsx)("li",{children:"Data is used to manage enrollment, deliver the Course, issue certificates, and provide support."}),(0,_t.jsx)("li",{children:"Session recordings may include your participation. Enrollment constitutes consent."}),(0,_t.jsx)("li",{children:"We do not sell or rent your data. Data may be shared with trusted service providers under confidentiality agreements or with authorities if required by law."}),(0,_t.jsx)("li",{children:"Student submissions may be used anonymously for academic, research, or promotional purposes unless you opt out in writing."}),(0,_t.jsx)("li",{children:"We comply with applicable data privacy laws (including GDPR/CCPA principles)."})]}),(0,_t.jsx)("h4",{children:"19. Dispute Resolution"}),(0,_t.jsx)("p",{children:"Any disputes arising out of or relating to these Terms or the use of TuneParams.ai services shall first be attempted to be resolved amicably through informal negotiations. If unresolved, disputes shall be subject to binding arbitration under the rules of the American Arbitration Association, with the place of arbitration being Dallas, Texas. Users agree to waive any right to a jury trial or participation in class action lawsuits."}),(0,_t.jsx)("h4",{children:"20. Entire Agreement"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"This Agreement constitutes the full understanding between you and TuneParams and supersedes all prior communications."}),(0,_t.jsx)("li",{children:"If any provision is deemed invalid, the remaining provisions remain enforceable."})]}),(0,_t.jsx)("h4",{children:"21. Instructor Status and Disclaimer"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Instructors, mentors, guest speakers, or teaching assistants may participate on a voluntary basis."}),(0,_t.jsx)("li",{children:"Such individuals are not employees, contractors, or representatives of TuneParams."}),(0,_t.jsx)("li",{children:"No agency, partnership, or employment relationship is created."})]}),(0,_t.jsx)("h4",{children:"22. Professional Disclaimer and Risk Acknowledgment"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"The Course is educational only and does not constitute professional, legal, medical, financial, or career advice."}),(0,_t.jsx)("li",{children:"No guarantees of results, employment, or success are made."}),(0,_t.jsx)("li",{children:"You are solely responsible for how you apply the information and skills learned."}),(0,_t.jsx)("li",{children:"By enrolling, you assume all associated risks."})]}),(0,_t.jsx)("p",{children:(0,_t.jsx)("strong",{children:"By completing your registration, you confirm that you have read, understood, and agreed to these Terms and Conditions."})})]})}),(0,_t.jsx)("div",{className:"modal-footer",children:(0,_t.jsx)("button",{className:"btn btn-primary",onClick:()=>y(!1),children:"Close"})})]})}),b&&(0,_t.jsx)("div",{className:"modal-overlay",onClick:()=>w(!1),children:(0,_t.jsxs)("div",{className:"modal-content privacy-modal",onClick:e=>e.stopPropagation(),children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsx)("h2",{children:"Privacy Policy"}),(0,_t.jsx)("button",{className:"modal-close",onClick:()=>w(!1),children:"\xd7"})]}),(0,_t.jsx)("div",{className:"modal-body",children:(0,_t.jsxs)("div",{className:"privacy-content",children:[(0,_t.jsx)("h3",{children:"Privacy Policy"}),(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Effective Date:"})," [TO BE UPDATED]"]}),(0,_t.jsx)("h4",{children:"1. Information We Collect"}),(0,_t.jsx)("p",{children:"We collect information necessary for course enrollment, including name, email address, payment information, and course progress data."}),(0,_t.jsx)("h4",{children:"2. How We Use Your Information"}),(0,_t.jsx)("p",{children:"Your information is used to provide course access, communicate course updates, process payments, and improve our educational services."}),(0,_t.jsx)("h4",{children:"3. Information Sharing"}),(0,_t.jsx)("p",{children:"[PLACEHOLDER] - We do not sell or share personal information with third parties except as necessary for course delivery and payment processing."}),(0,_t.jsx)("h4",{children:"4. Data Security"}),(0,_t.jsx)("p",{children:"We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction."}),(0,_t.jsx)("h4",{children:"5. Your Rights"}),(0,_t.jsx)("p",{children:"You have the right to access, update, or delete your personal information. Contact us for any privacy-related requests."}),(0,_t.jsx)("h4",{children:"6. Contact Information"}),(0,_t.jsx)("p",{children:"For privacy-related questions, please contact us at [CONTACT EMAIL TO BE ADDED]."}),(0,_t.jsx)("p",{children:(0,_t.jsx)("em",{children:"Note: This privacy policy is subject to updates. Full privacy policy will be provided upon enrollment completion."})})]})}),(0,_t.jsx)("div",{className:"modal-footer",children:(0,_t.jsx)("button",{className:"btn btn-primary",onClick:()=>w(!1),children:"Close"})})]})})]}):(0,_t.jsx)("div",{className:"paypal-error",children:(0,_t.jsx)("p",{children:"Failed to load PayPal. Please refresh the page and try again."})})},ur=e=>{let{isOpen:t,onClose:n,paymentData:r,onGoToDashboard:s,enrollmentResult:i}=e;if(!t)return null;return(0,_t.jsx)("div",{className:"modal-overlay",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,_t.jsxs)("div",{className:"payment-success-modal",children:[(0,_t.jsxs)("div",{className:"success-header",children:[(0,_t.jsx)("div",{className:"success-icon",children:"\u2705"}),(0,_t.jsx)("h2",{children:"Payment Successful!"}),(0,_t.jsx)("p",{children:"Welcome to your new course"})]}),(0,_t.jsxs)("div",{className:"payment-details",children:[(0,_t.jsx)("h3",{children:"Payment Details"}),(0,_t.jsxs)("div",{className:"detail-grid",children:[(0,_t.jsxs)("div",{className:"detail-item",children:[(0,_t.jsx)("span",{className:"label",children:"Course:"}),(0,_t.jsx)("span",{className:"value",children:null===r||void 0===r?void 0:r.courseTitle})]}),(0,_t.jsxs)("div",{className:"detail-item",children:[(0,_t.jsx)("span",{className:"label",children:"Amount Paid:"}),(0,_t.jsxs)("span",{className:"value",children:["$",null===r||void 0===r?void 0:r.amount]})]}),(0,_t.jsxs)("div",{className:"detail-item",children:[(0,_t.jsx)("span",{className:"label",children:"Transaction ID:"}),(0,_t.jsx)("span",{className:"value",children:null===r||void 0===r?void 0:r.paymentID})]}),(0,_t.jsxs)("div",{className:"detail-item",children:[(0,_t.jsx)("span",{className:"label",children:"Order ID:"}),(0,_t.jsx)("span",{className:"value",children:null===r||void 0===r?void 0:r.orderID})]}),(0,_t.jsxs)("div",{className:"detail-item",children:[(0,_t.jsx)("span",{className:"label",children:"Date:"}),(0,_t.jsx)("span",{className:"value",children:new Date(null===r||void 0===r?void 0:r.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),(0,_t.jsxs)("div",{className:"next-steps",children:[(0,_t.jsx)("h3",{children:"What's Next?"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsxs)("li",{children:["\ud83d\udce7 A confirmation email has been sent to ",null===r||void 0===r?void 0:r.payerEmail,!1===(null===i||void 0===i?void 0:i.emailSent)&&(0,_t.jsx)("span",{style:{color:"#f57c00",marginLeft:"8px"},children:"(Email service unavailable)"})]}),(0,_t.jsx)("li",{children:"\ud83d\udcda You now have access to all course materials"}),(0,_t.jsx)("li",{children:"\ud83c\udfaf You can start learning immediately"}),(0,_t.jsx)("li",{children:"\ud83d\udcac Join our course community for support"})]})]}),(0,_t.jsx)("div",{className:"modal-actions",children:(0,_t.jsx)("button",{className:"btn",onClick:s,children:"\ud83d\ude80 Go to Dashboard"})}),(0,_t.jsx)("button",{className:"close-modal",onClick:n,"aria-label":"Close modal",children:"\xd7"})]})})},dr=e=>{let{course:t,className:n=""}=e;const{isAdminUser:s,loading:i}=Bn(),[a,o]=(0,r.useState)({}),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null);if((0,r.useEffect)(()=>{(async()=>{if(t&&t.batches&&s){d(!0),m(null);try{const e=await er(t.id);e.success?o(e.batchStats):m("Failed to load batch stats: ".concat(e.error));const n=await rr(t.id);n.success&&c(n.batch)}catch(e){m("Error loading batch information: ".concat(e.message))}finally{d(!1)}}})()},[t,s]),i||!s||null===t||void 0===t||!t.batches)return null;const f=(e=>e.batches&&0!==e.batches.length?e.batches.filter(e=>"upcoming"===e.status):[])(t),p=Nn(t);return(0,_t.jsxs)("div",{className:"admin-batch-info ".concat(n),children:[(0,_t.jsxs)("div",{className:"admin-batch-header",children:[(0,_t.jsx)("h3",{children:"\ud83d\udcca Batch Management (Admin Only)"}),(0,_t.jsxs)("div",{className:"batch-summary",children:[(0,_t.jsxs)("span",{className:"batch-count",children:["Total: ",t.batches.length]}),(0,_t.jsxs)("span",{className:"batch-count",children:["Active: ",p.length]}),(0,_t.jsxs)("span",{className:"batch-count",children:["Upcoming: ",f.length]})]})]}),h&&(0,_t.jsx)("div",{className:"admin-batch-error",children:(0,_t.jsxs)("p",{children:["\u26a0\ufe0f ",h]})}),u&&(0,_t.jsx)("div",{className:"admin-batch-loading",children:(0,_t.jsx)("p",{children:"Loading batch information..."})}),l&&(0,_t.jsxs)("div",{className:"next-enrollment-batch",children:[(0,_t.jsx)("h4",{children:"\ud83c\udfaf Auto-Enrollment Target"}),(0,_t.jsxs)("div",{className:"batch-card highlight",children:[(0,_t.jsxs)("div",{className:"batch-card-header",children:[(0,_t.jsx)("span",{className:"batch-number",title:"Batch ".concat(l.batchNumber),children:_n(l)}),(0,_t.jsx)("span",{className:"batch-status batch-status-".concat(l.status),children:Cn(l)})]}),(0,_t.jsxs)("div",{className:"batch-card-details",children:[(0,_t.jsxs)("div",{className:"batch-dates",children:["\ud83d\udcc5 ",kn(l)]}),(0,_t.jsxs)("div",{className:"batch-enrollment-info",children:["\ud83d\udc65 ",l.enrollmentCount||0," / ",l.maxCapacity," enrolled"]}),(0,_t.jsx)("div",{className:"capacity-bar",children:(0,_t.jsx)("div",{className:"capacity-fill",style:{width:"".concat((l.enrollmentCount||0)/l.maxCapacity*100,"%")}})}),(0,_t.jsx)("div",{className:"auto-assign-note",children:"\u2139\ufe0f New enrollments will be automatically assigned to this batch"})]})]})]}),(0,_t.jsxs)("div",{className:"all-batches",children:[(0,_t.jsx)("h4",{children:"\ud83d\udccb All Batches"}),(0,_t.jsx)("div",{className:"batches-grid",children:t.batches.map(e=>{const t=(a[e.batchNumber]||e).enrollmentCount||0,n=t/e.maxCapacity*100;return(0,_t.jsxs)("div",{className:"batch-card",children:[(0,_t.jsxs)("div",{className:"batch-card-header",children:[(0,_t.jsx)("span",{className:"batch-number",title:"Batch ".concat(e.batchNumber),children:jn(e)}),(0,_t.jsx)("span",{className:"batch-status batch-status-".concat(e.status),children:Cn(e)})]}),(0,_t.jsxs)("div",{className:"batch-card-details",children:[(0,_t.jsxs)("div",{className:"batch-dates",children:["\ud83d\udcc5 ",kn(e)]}),(0,_t.jsxs)("div",{className:"batch-enrollment-info",children:["\ud83d\udc65 ",t," / ",e.maxCapacity," enrolled",(0,_t.jsxs)("span",{className:"enrollment-percentage",children:["(",Math.round(n),"%)"]})]}),(0,_t.jsx)("div",{className:"capacity-bar",children:(0,_t.jsx)("div",{className:"capacity-fill",style:{width:"".concat(n,"%")}})}),e.classLinks&&(0,_t.jsxs)("div",{className:"batch-links",children:["\ud83d\udd17 Links:",e.classLinks.zoom&&(0,_t.jsx)("span",{className:"link-indicator",children:"Zoom"}),e.classLinks.discord&&(0,_t.jsx)("span",{className:"link-indicator",children:"Discord"})]})]})]},e.batchNumber)})})]})]})},hr=function(e){let{limit:t=20}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e)return;o(!0);const n=function(e,t){let{limit:n=20}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!xt.db)return t({reviews:[],error:"Firestore not initialized"}),()=>{};try{const r=(0,Nt.P)((0,Nt.rJ)(xt.db,Un),(0,Nt._M)("courseId","==",e),(0,Nt.My)("createdAt","desc"),(0,Nt.AB)(n));return(0,Nt.aQ)(r,e=>{const n=e.docs.map(e=>(0,a.A)({id:e.id},e.data()));t({reviews:n,error:null})},e=>{let n=e.message;"permission-denied"===e.code?n="Permission denied accessing reviews. This might be a Firebase configuration issue.":"unavailable"===e.code&&(n="Firebase service temporarily unavailable. Please try again."),t({reviews:[],error:n})})}catch(l){return t({reviews:[],error:l.message}),()=>{}}}(e,e=>{let{reviews:t,error:n}=e;n?c(n):s(t),o(!1)},{limit:t});return()=>n&&n()},[e,t]),{reviews:n,loading:i,error:l}},mr=e=>{let{value:t=0}=e;const n=Math.max(0,Math.min(5,Number(t)));return(0,_t.jsx)("span",{className:"review-stars","aria-label":"".concat(n," out of 5"),children:"\u2605".repeat(Math.round(n)).padEnd(5,"\u2606")})},fr=e=>{var t;let{review:n,showCourseTitle:s=!1,isOwner:i=!1,isAdmin:a=!1,onEdit:o,onDelete:l,onAdminDelete:c}=e;const[u,d]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!1);if(!n)return null;const{userName:f,userPhotoURL:p,rating:g,comment:v,verified:y,createdAt:b,courseTitle:w}=n,x=null!==b&&void 0!==b&&b.toDate?b.toDate().toLocaleDateString():"",N=(E=f)?E!==E.toLowerCase()||E.includes(" ")?E:E.replace(/([a-z])([A-Z])/g,"$1 $2").split(/[._-]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ").trim()||E:"User";var E;const S=(v||"").length>300,C=S&&!u?v.slice(0,300)+"...":v,k=p&&!h;return(0,_t.jsxs)("div",{className:"review-card",id:"review-".concat(n.id),children:[a&&!i&&c&&(0,_t.jsx)("button",{className:"review-admin-delete-corner",onClick:c,title:"Admin: Delete this review",children:"\ud83d\uddd1\ufe0f"}),(0,_t.jsxs)("div",{className:"review-card-header",children:[(0,_t.jsxs)("div",{className:"review-user",children:[(0,_t.jsx)("div",{className:"review-avatar","aria-hidden":!0,children:k?(0,_t.jsx)("img",{src:p,alt:N||"User",onError:()=>{m(!0)}}):(0,_t.jsx)("div",{className:"default-avatar",children:null===(t=(N||"User").charAt(0))||void 0===t?void 0:t.toUpperCase()})}),(0,_t.jsxs)("div",{children:[(0,_t.jsxs)("div",{className:"review-username",children:[(0,_t.jsx)("span",{children:N||"User"}),y&&(0,_t.jsx)("span",{className:"review-verified",title:"Verified User",children:"\u2713"})]}),x&&(0,_t.jsx)("div",{className:"review-date",children:x})]})]}),(0,_t.jsx)(mr,{value:g})]}),s&&w&&(0,_t.jsx)("div",{className:"review-course-chip",children:w}),(0,_t.jsxs)("div",{className:"review-comment-section",children:[(0,_t.jsx)("p",{className:"review-comment ".concat(u?"expanded":""),children:C}),S&&(0,_t.jsx)("button",{className:"review-expand-btn",onClick:()=>d(!u),children:u?"Show less":"Read more"})]}),i&&(0,_t.jsxs)("div",{className:"review-actions",children:[o&&(0,_t.jsx)("button",{className:"btn btn-secondary btn-small",onClick:o,children:"Edit"}),l&&(0,_t.jsx)("button",{className:"btn btn-secondary btn-small",onClick:l,children:"Delete"})]})]})},pr=e=>{if(!e)return null;const t="string"===typeof e?e:String(e);if(t.toLowerCase().includes("requires an index")){const e=t.match(/https?:\/\/\S+/),n=e?e[0]:"https://console.firebase.google.com/";return(0,_t.jsxs)("div",{children:["This query needs a Firestore composite index."," ",(0,_t.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:"Create index"}),(0,_t.jsx)("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:4},children:"Fields: courseId Asc, createdAt Desc (Collection: course_reviews)"})]})}return t},gr=e=>{let{reviews:t=[],loading:n=!1,error:r=null,showCourseTitle:s=!1,currentUserId:i,isCurrentUserAdmin:a=!1,onEdit:o,onDelete:l,onAdminDelete:c}=e;return n?(0,_t.jsx)("div",{className:"reviews-loading",children:"Loading reviews..."}):r?(0,_t.jsx)("div",{className:"reviews-error",children:pr(r)}):t.length?(0,_t.jsx)("div",{className:"reviews-list",children:t.map(e=>(0,_t.jsx)(fr,{review:e,showCourseTitle:s,isOwner:i&&e.userId===i,isAdmin:a,onEdit:o?()=>o(e):void 0,onDelete:l?()=>l(e):void 0,onAdminDelete:c?()=>c(e):void 0},e.id))}):(0,_t.jsx)("div",{className:"reviews-empty",children:"No reviews yet."})},vr=e=>{let{value:t=0,onChange:n}=e;return(0,_t.jsx)("div",{className:"star-input",role:"radiogroup","aria-label":"Rating",children:[1,2,3,4,5].map(e=>(0,_t.jsx)("button",{type:"button",className:"star ".concat(e<=t?"active":""),onClick:()=>n(e),"aria-checked":t===e,role:"radio",children:e<=t?"\u2605":"\u2606"},e))})},yr=e=>{let{courseId:t,courseTitle:n,onSubmitted:s}=e;const{user:i}=It(),o=null===i||void 0===i?void 0:i.uid,[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(0),[h,m]=(0,r.useState)(""),[f,p]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),[w,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(o)if(null!==i&&void 0!==i&&i.displayName)b(i.displayName);else try{var e;const n=await St(o);var t;if(n.success&&null!==(e=n.userData)&&void 0!==e&&e.displayName)b(n.userData.displayName);else b((null===i||void 0===i||null===(t=i.email)||void 0===t?void 0:t.split("@")[0])||"User")}catch(f){var n;b((null===i||void 0===i||null===(n=i.email)||void 0===n?void 0:n.split("@")[0])||"User")}})()},[i,o]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{if(!o||!t)return;const n=await(async(e,t)=>{try{if(!xt.db)throw new Error("Firestore not initialized");const n=(0,Nt.H9)(xt.db,Un,"".concat(t,"_").concat(e)),r=await(0,Nt.x7)(n);return r.exists()?{success:!0,review:(0,a.A)({id:r.id},r.data())}:{success:!0,review:null}}catch(f){return{success:!1,error:f.message,review:null}}})(o,t);e&&(n.success&&n.review?(d(n.review.rating||0),m(n.review.comment||""),v(!0)):(d(0),m(""),v(!1)))})(),()=>{e=!1}},[o,t]);const N=async e=>{if(e.preventDefault(),!o)return void p("Please log in to leave a review.");c(!0),p(null);let r=(null===i||void 0===i?void 0:i.photoURL)||(null===i||void 0===i?void 0:i.photoUrl)||"";if(!r&&o)try{var s;const e=await St(o);e.success&&null!==(s=e.userData)&&void 0!==s&&s.photoURL&&(r=e.userData.photoURL)}catch(f){}const l=await(async e=>{let{userId:t,userName:n,userEmail:r,userPhotoURL:s,courseId:i,courseTitle:o,rating:l,comment:c}=e;try{if(!xt.db)throw new Error("Firestore not initialized");if(!t)throw new Error("User not authenticated");if(!i)throw new Error("Course ID required");const e=Number(l);if(!Number.isFinite(e)||e<1||e>5)throw new Error("Rating must be between 1 and 5");const d=(c||"").trim();if(0===d.length)throw new Error("Comment is required");if(d.length>3e3)throw new Error("Comment too long (max 3000 characters)");let h=r;if(!h){var u;const e=await St(t);h=e.success?null===(u=e.userData)||void 0===u?void 0:u.email:null}if(!h)throw new Error("Unable to determine user email. Please ensure you are logged in properly.");const m=await On(t,i),f=!(null===m||void 0===m||!m.hasAccess),p="".concat(i,"_").concat(t),g=(0,Nt.H9)(xt.db,Un,p),v=(await(0,Nt.x7)(g)).exists()?{updatedAt:(0,Nt.O5)()}:{createdAt:(0,Nt.O5)(),updatedAt:(0,Nt.O5)()};return await(0,Nt.BN)(g,(0,a.A)({userId:t,userEmail:h,userName:n,userPhotoURL:s||"",courseId:i,courseTitle:o,rating:e,comment:d,verified:f},v),{merge:!0}),{success:!0,reviewId:p}}catch(f){return{success:!1,error:f.message}}})({userId:o,userName:y,userEmail:null===i||void 0===i?void 0:i.email,userPhotoURL:r,courseId:t,courseTitle:n,rating:u,comment:h});return c(!1),l.success?(v(!0),!0):(p(l.error||"Failed to submit review"),!1)},E=async()=>{if(!o)return!1;if(!window.confirm("Delete your review?"))return!1;c(!0),p(null);const e=await(async(e,t)=>{try{if(!xt.db)throw new Error("Firestore not initialized");const n=(0,Nt.H9)(xt.db,Un,"".concat(e,"_").concat(t));return await(0,Nt.kd)(n),{success:!0}}catch(f){return{success:!1,error:f.message}}})(t,o);return c(!1),e.success?(d(0),m(""),v(!1),!0):(p(e.error||"Failed to delete review"),!1)};if(!o)return(0,_t.jsx)("div",{className:"review-form-login",children:"Log in to write a review."});const S=()=>{x(!w),w||p(null)};return(0,_t.jsxs)("div",{className:"review-form-container",children:[(0,_t.jsx)("div",{className:"review-form-toggle",children:(0,_t.jsx)("button",{className:"btn ".concat(g?"btn-secondary":"btn-primary"," review-toggle-btn"),onClick:S,type:"button",children:w?"\u2715 Cancel":g?"Edit Review":"Write a Review"})}),w&&(0,_t.jsxs)("form",{className:"review-form",onSubmit:async e=>{e.preventDefault();await N(e)&&(x(!1),s&&s())},children:[(0,_t.jsx)("div",{className:"review-form-header",children:(0,_t.jsx)("h4",{children:g?"Edit your review":"Write a review"})}),(0,_t.jsx)(vr,{value:u,onChange:d}),(0,_t.jsxs)("div",{className:"review-textarea-container",children:[(0,_t.jsx)("textarea",{className:"review-textarea",value:h,maxLength:3e3,onChange:e=>m(e.target.value),placeholder:"Share your experience...",rows:4,required:!0}),(0,_t.jsx)("div",{className:"character-counter",children:(0,_t.jsxs)("span",{className:h.length>2700?"character-counter-warning":"",children:[h.length,"/3000 characters"]})})]}),f&&(0,_t.jsx)("div",{className:"review-error",children:f}),(0,_t.jsxs)("div",{className:"review-form-actions",children:[(0,_t.jsx)("button",{className:"btn",type:"submit",disabled:l||u<1,children:l?"Saving...":g?"Update Review":"Submit Review"}),g&&(0,_t.jsx)("button",{className:"btn btn-secondary",type:"button",onClick:async()=>{await E()&&(x(!1),s&&s())},disabled:l,children:"Delete"}),(0,_t.jsx)("button",{className:"btn btn-tertiary",type:"button",onClick:S,children:"Cancel"})]})]})]})},br=e=>{let{courseId:t,courseTitle:n}=e;const{user:s,loading:i}=It(),{isAdminUser:a}=Bn(),{reviews:o,loading:l,error:c}=hr(t,{limit:20}),u=r.useMemo(()=>{if(null===o||void 0===o||!o.length)return null;const e=o.reduce((e,t)=>e+(Number(t.rating)||0),0);return Math.round(e/o.length*10)/10},[o]),d=r.useCallback(async e=>{if(a){if(window.confirm("Are you sure you want to delete ".concat(e.userName,"'s review? This action cannot be undone.")))try{const t=await Vn(e.id);t.success?alert("Review deleted successfully"):alert("Failed to delete review: ".concat(t.error))}catch(t){alert("Failed to delete review. Please try again.")}}else alert("You do not have permission to delete reviews.")},[a]);return(0,_t.jsxs)("section",{className:"course-section",id:"reviews-section",children:[(0,_t.jsx)("h3",{children:"Student Reviews"}),(0,_t.jsx)("div",{className:"course-reviews-summary",children:l?(0,_t.jsx)("p",{children:"Loading reviews..."}):c?(0,_t.jsxs)("div",{children:[(0,_t.jsxs)("p",{className:"course-detail-error-text",children:["Error loading reviews: ",c]}),(0,_t.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:"Reviews should be visible to all users. If you're seeing this error, there might be a Firebase configuration issue."})]}):(0,_t.jsxs)("p",{children:[u?"\u2b50 ".concat(u," / 5"):"No ratings yet",null!==o&&void 0!==o&&o.length?" \xb7 ".concat(o.length," review").concat(o.length>1?"s":""):""]})}),!i&&(0,_t.jsx)(yr,{courseId:t,courseTitle:n,onSubmitted:()=>{}}),(0,_t.jsx)("div",{className:"course-reviews-list",id:"reviews-list",children:(0,_t.jsx)(gr,{reviews:o,loading:l,error:c,currentUserId:null===s||void 0===s?void 0:s.uid,isCurrentUserAdmin:a,onAdminDelete:d})})]})},wr=e=>{let{curriculum:t}=e;const[n,s]=(0,r.useState)({}),[i,o]=(0,r.useState)({});return(0,_t.jsx)("div",{className:"curriculum-list",children:t.map((e,t)=>(0,_t.jsxs)("div",{className:"curriculum-item",children:[(0,_t.jsxs)("div",{className:"section-header clickable",onClick:()=>(e=>{s(t=>(0,a.A)((0,a.A)({},t),{},{[e]:!t[e]}))})(t),children:[(0,_t.jsxs)("div",{className:"section-title-container",children:[(0,_t.jsxs)("div",{className:"section-title-with-count",children:[(0,_t.jsx)("h3",{children:e.section}),(0,_t.jsxs)("span",{className:"topic-count",children:[e.topics?e.topics.length:0," topics"]})]}),(0,_t.jsx)("span",{className:"expand-icon ".concat(n[t]?"expanded":""),children:"\u25bc"})]}),e.description&&(0,_t.jsx)("p",{className:"section-description",children:e.description})]}),n[t]&&e.topics&&e.topics.length>0&&(0,_t.jsx)("ul",{className:"topics-list expanded",children:e.topics.map((e,n)=>{const r="".concat(t,"-").concat(n),s=i[r],l="string"===typeof e?e:e.title,c="object"===typeof e&&(e.description||e.duration||e.keyPoints);return(0,_t.jsxs)("li",{className:"topic-item",children:[(0,_t.jsxs)("div",{className:"topic-header ".concat(c?"clickable":""),onClick:()=>c&&((e,t)=>{const n="".concat(e,"-").concat(t);o(e=>(0,a.A)((0,a.A)({},e),{},{[n]:!e[n]}))})(t,n),children:[(0,_t.jsx)("span",{className:"topic-title",children:l}),c&&(0,_t.jsx)("span",{className:"topic-expand-icon ".concat(s?"expanded":""),children:"\u25bc"})]}),c&&s&&(0,_t.jsxs)("div",{className:"topic-details",children:[e.description&&(0,_t.jsx)("p",{className:"topic-description",children:e.description}),(0,_t.jsxs)("div",{className:"topic-meta",children:[e.duration&&(0,_t.jsxs)("span",{className:"topic-duration",children:["\u23f1\ufe0f ",e.duration]}),e.keyPoints&&e.keyPoints.length>0&&(0,_t.jsxs)("div",{className:"key-points",children:[(0,_t.jsx)("strong",{children:"Key Points:"}),(0,_t.jsx)("ul",{className:"key-points-list",children:e.keyPoints.map((e,t)=>(0,_t.jsx)("li",{children:e},t))})]})]})]})]},n)})})]},t))})},xr=()=>{const{courseId:e}=de(),t=ue(),{user:n}=It(),[s,i]=(0,r.useState)(!1),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),h=or(),[m,f]=(0,r.useState)(!1),{hasAccess:p,enrollment:g,loading:v,error:y,processEnrollment:b,clearError:w}=ir(e),{stats:x,loading:N}=Yn(e,!0),E=yn(e),S=(0,r.useCallback)(async e=>{try{const t=await b(e);t.success&&(o(e),c(t),i(!0),f(!1))}catch(t){alert("Enrollment failed: ".concat(t.message,". Please contact support with your payment details.")),f(!1)}},[b]),C=(0,r.useCallback)(e=>{alert("Payment failed. Please try again or contact support."),f(!1)},[]),k=(0,r.useCallback)(e=>{f(!1)},[]),_=(0,r.useCallback)(()=>{i(!1),t("/course/".concat(e,"/dashboard"))},[t,e]),j=(0,r.useCallback)(()=>{t("/courses")},[t]);(0,r.useEffect)(()=>{let e=!1;const t=()=>{"#reviews-section"!==window.location.hash||e||(e=!0,setTimeout(()=>{let e=document.getElementById("reviews-section");e||(e=document.querySelector(".reviews-section")||document.querySelector('[id*="review"]')||document.querySelector(".home-reviews-section")),e&&(e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),e.style.transition="box-shadow 0.3s ease",e.style.boxShadow="0 0 15px rgba(255, 193, 7, 0.4)",setTimeout(()=>{e.style.boxShadow=""},1500))},200))};t();const n=()=>{e=!1,t()};return window.addEventListener("hashchange",n),()=>{window.removeEventListener("hashchange",n)}},[]);const T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"N/A";return!bn(E)||"TBD"!==e&&"N/A"!==e&&null!==e&&0!==e?e||t:"Coming Soon"},A=bn(E);if(!E)return(0,_t.jsx)("div",{className:"course-detail-container",children:(0,_t.jsx)("div",{className:"course-detail-header",children:(0,_t.jsx)("div",{className:"course-hero",children:(0,_t.jsxs)("div",{className:"course-hero-content",children:[(0,_t.jsx)("div",{className:"course-icon-large",children:"\u2753"}),(0,_t.jsxs)("div",{className:"course-info",children:[(0,_t.jsx)("h1",{className:"course-detail-title",children:"Course Not Found"}),(0,_t.jsx)("p",{className:"course-detail-description",children:"The course you're looking for doesn't exist or has been removed."})]})]})})})});const I=!Sn(E);return(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"course-detail-container",children:[(0,_t.jsxs)("div",{className:"course-detail-header",style:{backgroundImage:E.image?"url(".concat(E.image,")"):"none"},children:[(0,_t.jsx)("div",{className:"course-detail-header-overlay"}),(0,_t.jsxs)("div",{className:"course-detail-header-content",children:[(0,_t.jsx)("button",{className:"btn btn-secondary btn-small back-btn",onClick:j,children:"\u2190 Back to Courses"}),(0,_t.jsxs)("div",{className:"course-hero",children:[(0,_t.jsxs)("div",{className:"course-hero-content",children:[(0,_t.jsx)("div",{className:"course-icon-large",children:T(E.icon,"\ud83d\udcda")}),(0,_t.jsxs)("div",{className:"course-info",children:[(0,_t.jsx)("h1",{className:"course-detail-title",children:T(E.title)}),(0,_t.jsx)("p",{className:"course-detail-description",children:T(E.description)}),(0,_t.jsxs)("div",{className:"course-meta-detail",children:[(0,_t.jsx)("span",{className:"course-level-detail",children:T(E.level)}),(0,_t.jsxs)("span",{className:"course-duration-detail",children:["\u23f1\ufe0f ",T(E.duration)]}),(0,_t.jsx)("div",{className:"course-rating-detail",children:A?(0,_t.jsx)("span",{children:"\u2b50 Coming Soon"}):(0,_t.jsx)($n,{rating:N?E.rating:x.hasReviews?x.averageRating:E.rating,reviewCount:N?0:x.reviewCount,showReviewCount:!N&&x.hasReviews,size:"small",showNumeric:!0,clickable:!0,onClick:()=>{if(u)return;d(!0);setTimeout(()=>{let e=document.getElementById("reviews-section");if(!e){const t=document.querySelectorAll("h3"),n=Array.from(t).find(e=>e.textContent.includes("Student Reviews")||e.textContent.includes("Reviews"));e=(null===n||void 0===n?void 0:n.closest("section"))||(null===n||void 0===n?void 0:n.parentElement)}if(!e){const t=document.querySelectorAll(".course-section");e=Array.from(t).find(e=>e.textContent.includes("Student Reviews"))}e?(e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),e.style.transition="box-shadow 0.3s ease",e.style.boxShadow="0 0 0 3px rgba(255, 193, 7, 0.5)",setTimeout(()=>{e.style.boxShadow="",d(!1)},1500)):(d(!1),alert("Reviews section not found. Please scroll down manually to see reviews."))},100)}})})]})]})]}),(0,_t.jsxs)("div",{className:"course-enrollment",children:[!p&&!v&&(0,_t.jsxs)("div",{className:"course-price-detail",children:[E.originalPrice&&!A&&(0,_t.jsxs)("span",{className:"original-price-detail",children:["$",E.originalPrice]}),(0,_t.jsx)("span",{className:"current-price-detail",children:A?"Price TBD":E.price?"$".concat(E.price):"Price N/A"})]}),v&&(0,_t.jsxs)("div",{className:"enrollment-loading",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{children:"Checking enrollment status..."})]}),y&&(0,_t.jsxs)("div",{className:"enrollment-error",children:[(0,_t.jsx)("p",{className:"course-detail-error-text",children:y}),(0,_t.jsx)("button",{className:"btn btn-secondary course-detail-access-button",onClick:w,children:"Retry"})]}),!v&&!m&&(0,_t.jsx)(_t.Fragment,{children:p?(0,_t.jsxs)("div",{className:"enrollment-success",children:[(0,_t.jsxs)("div",{className:"course-detail-enrollment-success",children:[(0,_t.jsx)("p",{className:"course-detail-success-title",children:"\u2705 Enrolled"}),h&&g&&(0,_t.jsxs)("p",{className:"course-detail-progress-text",children:["Progress: ",g.progress||0,"%"]})]}),(0,_t.jsx)("button",{className:"btn enroll-btn-detail",onClick:()=>t("/course/".concat(e,"/dashboard")),children:"Go to Dashboard \u2192"})]}):(0,_t.jsx)("button",{className:"btn enroll-btn-detail ".concat(I?"full":""," ").concat(A?"coming-soon":""),onClick:()=>{if(!n)return void t("/login");if(w(),bn(E))return void alert("This course is still in planning phase. Please check back for updates!");Sn(E)?p?t("/dashboard"):f(!0):alert("No available batches for enrollment at this time. Please check back later or contact us for more information.")},disabled:I||A,children:A?"Coming Soon":I?"No Available Batches":n?"Enroll Now":"Login to Enroll"})}),m&&(0,_t.jsxs)("div",{className:"enrollment-options",children:[(0,_t.jsx)("button",{className:"back-to-enroll-btn",onClick:()=>f(!1),children:"\u2190 Back to Course Details"}),(0,_t.jsx)(cr,{courseId:E.id,courseTitle:E.title,coursePrice:E.price,onSuccess:S,onError:C,onCancel:k,disabled:I||A||!E.price})]}),!p&&!v&&(()=>{const e=Sn(E);return e&&!A&&(0,_t.jsxs)("div",{className:"next-batch-info",children:[(0,_t.jsx)("span",{className:"next-batch-label",children:"Next Batch Starts:"}),(0,_t.jsx)("span",{className:"next-batch-date",children:new Date(e.startDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})})()]})]})]})]}),(0,_t.jsxs)("div",{className:"course-content",children:[(0,_t.jsxs)("div",{className:"course-main",children:[(0,_t.jsxs)("section",{className:"course-section",children:[(0,_t.jsx)("h2",{children:"What You'll Learn"}),E.outcomes&&E.outcomes.length>0?(0,_t.jsx)("ul",{className:"outcomes-list",children:E.outcomes.map((e,t)=>(0,_t.jsx)("li",{children:e},t))}):(0,_t.jsx)("div",{className:"na-message",children:(0,_t.jsx)("p",{children:"Learning outcomes information is not available at this time."})})]}),(0,_t.jsxs)("section",{className:"course-section",children:[(0,_t.jsx)("h2",{children:"Weekly Schedule"}),E.weeklySchedule&&E.weeklySchedule.length>0?(0,_t.jsxs)("div",{className:"weekly-schedule-container",children:[(0,_t.jsx)("div",{className:"weekly-schedule-list",children:E.weeklySchedule.map((e,t)=>(0,_t.jsxs)("div",{className:"schedule-item",children:[(0,_t.jsxs)("div",{className:"schedule-info",children:[(0,_t.jsx)("span",{className:"day-name",children:e.day}),(0,_t.jsx)("span",{className:"session-type",children:e.type}),(0,_t.jsx)("span",{className:"schedule-time",children:e.time})]}),e.note&&(0,_t.jsx)("div",{className:"session-note",children:(0,_t.jsx)("small",{children:e.note})})]},t))}),(0,_t.jsxs)("p",{className:"schedule-note",children:[(0,_t.jsx)("strong",{children:"Note:"})," All times are in Eastern Time (ET). Detailed schedules provided after enrollment."]})]}):(0,_t.jsx)("div",{className:"na-message",children:(0,_t.jsx)("p",{children:"Weekly schedule information will be available closer to the course start date."})})]}),(0,_t.jsxs)("section",{className:"course-section",children:[(0,_t.jsx)("h2",{children:"Course Content"}),E.curriculum&&E.curriculum.length>0?(0,_t.jsx)(wr,{curriculum:E.curriculum}):(0,_t.jsxs)("div",{className:"na-message",children:[(0,_t.jsx)("p",{children:"Detailed curriculum information is not available at this time."}),(0,_t.jsx)("p",{children:"Course details coming soon"})]})]})]}),(0,_t.jsxs)("div",{className:"course-sidebar",children:[(0,_t.jsxs)("section",{className:"course-section",children:[(0,_t.jsx)("h3",{children:"Prerequisites"}),E.prerequisites&&E.prerequisites.length>0?(0,_t.jsx)("ul",{className:"prerequisites-list",children:E.prerequisites.map((e,t)=>(0,_t.jsx)("li",{children:e},t))}):(0,_t.jsx)("div",{className:"na-message",children:(0,_t.jsx)("p",{children:"No specific prerequisites listed."})})]}),(0,_t.jsxs)("section",{className:"course-section",children:[(0,_t.jsx)("h3",{children:"Course Information"}),(0,_t.jsxs)("div",{className:"course-additional-info",children:[(0,_t.jsxs)("div",{className:"info-item",children:[(0,_t.jsx)("strong",{children:"Category:"})," ",T(E.category)]}),(0,_t.jsxs)("div",{className:"info-item",children:[(0,_t.jsx)("strong",{children:"Level:"})," ",T(E.level)]}),(0,_t.jsxs)("div",{className:"info-item",children:[(0,_t.jsx)("strong",{children:"Duration:"})," ",T(E.duration)]}),(0,_t.jsxs)("div",{className:"info-item",children:[(0,_t.jsx)("strong",{children:"Total Lessons:"})," ",T(E.lessons)]}),(0,_t.jsxs)("div",{className:"info-item",children:[(0,_t.jsx)("strong",{children:"Next Batch:"})," ",(()=>{const e=Sn(E);return e?new Date(e.startDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"})()]})]})]}),(0,_t.jsx)(br,{courseId:E.id,courseTitle:E.title})]})]}),(0,_t.jsx)(dr,{course:E})]}),(0,_t.jsx)(ur,{isOpen:s,onClose:()=>i(!1),paymentData:a,enrollmentResult:l,onGoToDashboard:_})]})},Nr=()=>{const{courseId:e}=de(),{user:t,loading:n}=It(),{hasAccess:s,enrollment:i,loading:a}=ir(e),{isAdminUser:o,loading:l}=Bn(),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(null),[m,f]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{const t=yn(e);if(t&&(u(t),!l&&!a&&!n))if(o){var r;const e=wn(t),n=Nn(t);h(e||(n.length>0?n[0]:null===(r=t.batches)||void 0===r?void 0:r[0]))}else if(i){var s;const e=null===(s=t.batches)||void 0===s?void 0:s.find(e=>e.batchNumber===i.batchNumber);h(e)}else{var c;const e=wn(t),n=Nn(t);h(e||(n.length>0?n[0]:null===(c=t.batches)||void 0===c?void 0:c[0]))}f(!1)},[e,i,o,l,a,n]),m||a||l||n)return(0,_t.jsx)("div",{className:"course-dashboard-container",children:(0,_t.jsxs)("div",{className:"loading-state",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("h2",{children:"Loading dashboard..."}),(0,_t.jsx)("p",{children:"Please wait while we verify your access..."})]})});if(!n&&!t)return(0,_t.jsx)(ke,{to:"/login",replace:!0});if(!n&&t&&a)return(0,_t.jsx)("div",{className:"course-dashboard-container",children:(0,_t.jsxs)("div",{className:"loading-state",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("h2",{children:"Verifying enrollment..."}),(0,_t.jsx)("p",{children:"Checking your course access..."})]})});if(!n&&!l&&!a&&t&&!(o||t&&s))return(0,_t.jsx)("div",{className:"course-dashboard-container",children:(0,_t.jsxs)("div",{className:"access-denied",children:[(0,_t.jsx)("h2",{children:"Access Denied"}),(0,_t.jsx)("p",{children:"You need to be enrolled in this course to access the dashboard."}),(0,_t.jsx)(mt,{to:"/course/".concat(e),className:"back-to-course-btn",children:"View Course Details"})]})});if(!c)return(0,_t.jsx)("div",{className:"course-dashboard-container",children:(0,_t.jsxs)("div",{className:"error-state",children:[(0,_t.jsx)("h2",{children:"Course not found"}),(0,_t.jsx)(mt,{to:"/courses",className:"back-to-courses-btn",children:"Back to Courses"})]})});const p=e=>{if(!e.date||!e.time)return"TBD";const[t,n,r]=e.date.split("-").map(Number),[s,i]=e.time.split(":").map(Number),a=new Date(t,n-1,r,s,i,0,0),o=a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"short",day:"numeric"}),l=a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),c=e.timezone?" (".concat(e.timezone,")"):"",u=e.duration?" \u2022 ".concat(e.duration," mins"):"";return"".concat(o," at ").concat(l).concat(c).concat(u)},g=e=>(0,_t.jsx)("span",{className:"status-badge ".concat({upcoming:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800"}[e.status]),children:{upcoming:"Starting Soon",active:"In Progress",completed:"Completed"}[e.status]}),v=e=>{switch(e){case"live":return(0,_t.jsxs)("span",{className:"live-badge",children:[(0,_t.jsx)("span",{className:"live-indicator"}),"LIVE"]});case"scheduled":return(0,_t.jsx)("span",{className:"scheduled-badge",children:"SCHEDULED"});case"completed":return(0,_t.jsx)("span",{className:"completed-badge",children:"COMPLETED"});default:return null}};return m?(0,_t.jsx)("div",{className:"course-dashboard",children:(0,_t.jsx)("div",{className:"loading-container",children:(0,_t.jsx)("div",{className:"loading-spinner",children:"Loading course dashboard..."})})}):c?c.batches&&0!==c.batches.length?(0,_t.jsx)("div",{className:"course-dashboard",children:(0,_t.jsxs)("div",{className:"dashboard-container",children:[(0,_t.jsxs)("div",{className:"course-header",children:[(0,_t.jsxs)("div",{className:"course-info",children:[(0,_t.jsxs)("h1",{children:[c.title," Dashboard"]}),(0,_t.jsx)("p",{className:"course-description",children:c.description})]}),(0,_t.jsxs)("div",{className:"navigation-links",children:[(0,_t.jsx)(mt,{to:"/courses",className:"back-link",children:"\u2190 Back to Courses"}),(0,_t.jsx)(mt,{to:"/courses/".concat(e),className:"course-detail-link",children:"Course Details"})]})]}),o&&(0,_t.jsxs)("div",{className:"batch-selector",children:[(0,_t.jsx)("h2",{children:"Select Batch"}),(0,_t.jsx)("div",{className:"batch-tabs",children:c.batches.map(e=>(0,_t.jsxs)("button",{className:"batch-tab ".concat((null===d||void 0===d?void 0:d.batchNumber)===e.batchNumber?"active":""),onClick:()=>h(e),children:[(0,_t.jsx)("span",{className:"batch-name",children:_n(e)}),(0,_t.jsx)("span",{className:"batch-dates",children:kn(e)}),g(e)]},e.batchNumber))})]}),d&&(0,_t.jsxs)("div",{className:"dashboard-content",children:[(0,_t.jsxs)("div",{className:"quick-access-section",children:[(0,_t.jsx)("h2",{children:"Quick Access"}),(0,_t.jsxs)("div",{className:"quick-access-grid",children:[(0,_t.jsxs)("div",{className:"access-card zoom-card",children:[(0,_t.jsx)("div",{className:"card-icon",children:"\ud83d\udcf9"}),(0,_t.jsx)("h3",{children:"Zoom Classroom"}),In(d).zoom?(0,_t.jsx)("a",{href:In(d).zoom,target:"_blank",rel:"noopener noreferrer",className:"access-link",children:"Join Class"}):(0,_t.jsx)("span",{className:"link-unavailable",children:"Link will be shared soon"})]}),(0,_t.jsxs)("div",{className:"access-card discord-card",children:[(0,_t.jsx)("div",{className:"card-icon",children:"\ud83d\udcac"}),(0,_t.jsx)("h3",{children:"Discord Community"}),In(d).discord?(0,_t.jsx)("a",{href:In(d).discord,target:"_blank",rel:"noopener noreferrer",className:"access-link",children:"Join Discussion"}):(0,_t.jsx)("span",{className:"link-unavailable",children:"Link will be shared soon"})]}),(0,_t.jsxs)("div",{className:"access-card materials-card",children:[(0,_t.jsx)("div",{className:"card-icon",children:"\ud83d\udcda"}),(0,_t.jsx)("h3",{children:"Course Materials"}),(0,_t.jsx)("span",{className:"link-unavailable",children:"Materials will be available soon"})]})]})]}),(0,_t.jsxs)("div",{className:"schedule-section",children:[(0,_t.jsx)("h2",{children:"Class Schedule"}),Tn(d)?(0,_t.jsx)("div",{className:"schedule-list",children:d.schedule.map((e,t)=>{const n=(e=>{if(!e.date||!e.time)return"scheduled";const t=new Date,[n,r,s]=e.date.split("-").map(Number),[i,a]=e.time.split(":").map(Number),o=new Date(n,r-1,s,i,a,0,0),l=e.duration||90,c=(t-new Date(o.getTime()+60*l*1e3))/6e4;return(t-o)/6e4>=-30&&c<=0?"live":c>0?"completed":"scheduled"})(e);return(0,_t.jsxs)("div",{className:"schedule-card ".concat("live"===n?"live-class":"completed"===n?"completed-class":"scheduled-class"),children:[(0,_t.jsxs)("div",{className:"schedule-header",children:[(0,_t.jsxs)("div",{className:"date-time-info",children:[(0,_t.jsx)("h3",{children:e.topic||"Topic TBD"}),(0,_t.jsx)("p",{className:"date-time",children:p(e)})]}),v(n)]}),(0,_t.jsx)("div",{className:"schedule-content",children:"live"===n&&An(d)&&(0,_t.jsx)("a",{href:In(d).zoom||d.classLinks.zoom,target:"_blank",rel:"noopener noreferrer",className:"join-now-btn",children:"Join Class"})})]},t)})}):(0,_t.jsxs)("div",{className:"no-schedule",children:[(0,_t.jsx)("div",{className:"no-schedule-icon",children:"\ud83d\udcc5"}),"completed"===d.status?(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)("h3",{children:"No Schedule Available"}),(0,_t.jsx)("p",{children:"This batch has been completed. Schedule is no longer available."})]}):(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)("h3",{children:"Schedule Coming Soon"}),(0,_t.jsx)("p",{children:"The class schedule for this batch will be announced soon. Stay tuned!"})]})]})]}),o&&(0,_t.jsxs)("div",{className:"batch-info-section",children:[(0,_t.jsx)("h2",{children:"Batch Information"}),(0,_t.jsxs)("div",{className:"batch-info-grid",children:[(0,_t.jsxs)("div",{className:"info-card",children:[(0,_t.jsx)("h4",{children:"Batch Name"}),(0,_t.jsx)("p",{children:_n(d)})]}),(0,_t.jsxs)("div",{className:"info-card",children:[(0,_t.jsx)("h4",{children:"Duration"}),(0,_t.jsx)("p",{children:kn(d)})]}),(0,_t.jsxs)("div",{className:"info-card",children:[(0,_t.jsx)("h4",{children:"Status"}),(0,_t.jsx)("p",{children:g(d)})]}),(0,_t.jsxs)("div",{className:"info-card",children:[(0,_t.jsx)("h4",{children:"Capacity"}),(0,_t.jsxs)("p",{children:[d.enrollmentCount||0," / ",d.maxCapacity," students"]})]})]})]})]})]})}):(0,_t.jsx)("div",{className:"course-dashboard",children:(0,_t.jsx)("div",{className:"dashboard-container",children:(0,_t.jsxs)("div",{className:"course-header",children:[(0,_t.jsx)("h1",{children:c.title}),(0,_t.jsx)("p",{children:"No batches available for this course yet."}),(0,_t.jsx)(mt,{to:"/courses",className:"back-link",children:"Back to Courses"})]})})}):(0,_t.jsx)("div",{className:"course-dashboard",children:(0,_t.jsxs)("div",{className:"error-container",children:[(0,_t.jsx)("h1",{children:"Course Not Found"}),(0,_t.jsx)("p",{children:"The course you're looking for doesn't exist."}),(0,_t.jsx)(mt,{to:"/courses",className:"back-link",children:"Back to Courses"})]})})},Er=()=>{const e=ue(),{allEnrollments:t,loading:n,error:r}=ir(),s=or(),i=t.map(e=>{var t,n;const r=yn(e.courseId);return(0,a.A)({id:e.courseId,title:e.courseTitle||(null===r||void 0===r?void 0:r.title)||"Unknown Course",progress:e.progress||0,status:e.status||"enrolled",enrolledDate:(null===(t=e.enrolledAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date(e.enrolledAt)||new Date},r)});return(0,_t.jsxs)("div",{className:"dashboard-container",children:[(0,_t.jsxs)("div",{className:"dashboard-header",children:[(0,_t.jsx)("h1",{children:"My Dashboard"}),(0,_t.jsx)("p",{children:"Welcome! Here are your enrolled courses."})]}),(0,_t.jsxs)("div",{className:"dashboard-content",children:[(0,_t.jsxs)("section",{className:"enrolled-courses",children:[(0,_t.jsx)("h2",{children:"My Courses"}),n&&(0,_t.jsx)("div",{className:"dashboard-loading-state",children:(0,_t.jsx)("p",{children:"Loading your courses..."})}),r&&(0,_t.jsx)("div",{className:"dashboard-error-state",children:(0,_t.jsxs)("p",{className:"dashboard-error-text",children:["Error loading courses: ",r]})}),!n&&!r&&i.length>0?(0,_t.jsx)("div",{className:"courses-grid",children:i.map(t=>(0,_t.jsxs)("div",{className:"course-dashboard-card",children:[(0,_t.jsxs)("div",{className:"course-header",children:[(0,_t.jsx)("h3",{children:t.title}),(0,_t.jsx)("span",{className:"course-status",children:t.status})]}),s&&(0,_t.jsxs)("div",{className:"course-progress",children:[(0,_t.jsx)("div",{className:"progress-bar",children:(0,_t.jsx)("div",{className:"progress-fill",style:{width:"".concat(t.progress,"%")}})}),(0,_t.jsxs)("span",{className:"progress-text",children:[t.progress,"% Complete"]})]}),(0,_t.jsx)("div",{className:"course-actions",children:(0,_t.jsx)("button",{className:"btn",onClick:()=>e("/course/".concat(t.id,"/dashboard")),children:"Course Dashboard"})}),(0,_t.jsx)("div",{className:"enrollment-info",children:(0,_t.jsxs)("small",{children:["Enrolled: ",t.enrolledDate.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})})]},t.id))}):!n&&!r&&(0,_t.jsxs)("div",{className:"no-courses",children:[(0,_t.jsx)("div",{className:"no-courses-icon",children:"\ud83d\udcda"}),(0,_t.jsx)("h3",{children:"No courses enrolled yet"}),(0,_t.jsx)("p",{children:"Start your learning journey by enrolling in one of our courses!"}),(0,_t.jsx)("button",{className:"btn",onClick:()=>e("/courses"),children:"Browse Courses"})]})]}),(0,_t.jsxs)("section",{className:"quick-actions",children:[(0,_t.jsx)("h2",{children:"Quick Actions"}),(0,_t.jsxs)("div",{className:"actions-grid",children:[(0,_t.jsxs)("div",{className:"action-card",children:[(0,_t.jsx)("div",{className:"action-icon",children:"\ud83d\udcd6"}),(0,_t.jsx)("h4",{children:"Browse Courses"}),(0,_t.jsx)("p",{children:"Discover new courses to expand your skills"}),(0,_t.jsx)("button",{className:"btn btn-secondary",onClick:()=>e("/courses"),children:"View All Courses"})]}),(0,_t.jsxs)("div",{className:"action-card",children:[(0,_t.jsx)("div",{className:"action-icon",children:"\ud83d\udcac"}),(0,_t.jsx)("h4",{children:"Get Support"}),(0,_t.jsx)("p",{children:"Need help? Contact our support team"}),(0,_t.jsx)("button",{className:"btn btn-secondary",onClick:()=>e("/contact"),children:"Contact Support"})]})]})]})]})]})};const Sr=function(){const[e,t]=(0,r.useState)({name:"",email:"",phone:"",message:""}),[n,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)({}),[u,d]=(0,r.useState)({}),h=(e,t)=>{const n=(0,a.A)({},l);switch(e){case"name":t.trim()?t.trim().length<2?n.name="Name must be at least 2 characters":delete n.name:n.name="Name is required";break;case"email":const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;t.trim()?e.test(t)?delete n.email:n.email="Please enter a valid email address":n.email="Email is required";break;case"phone":if(t&&t.length>0){/^[+]?[\d\s\-()]+$/.test(t)?delete n.phone:n.phone="Please enter a valid phone number"}else delete n.phone;break;case"message":t.trim()?t.trim().length<10?n.message="Message must be at least 10 characters":delete n.message:n.message="Message is required"}return c(n),0===Object.keys(n).length},m=e=>{const{name:n,value:r}=e.target;t(e=>(0,a.A)((0,a.A)({},e),{},{[n]:r})),u[n]&&h(n,r),i&&o(null)},f=e=>{const{name:t,value:n}=e.target;d(e=>(0,a.A)((0,a.A)({},e),{},{[t]:!0})),h(t,n)};return(0,_t.jsx)("div",{className:"contact-page-container",children:(0,_t.jsxs)("div",{className:"contact-card",children:[(0,_t.jsxs)("div",{className:"contact-header",children:[(0,_t.jsx)("h1",{className:"contact-title",children:"Contact Us"}),(0,_t.jsx)("p",{className:"contact-subtitle",children:"Have questions or suggestions? We'd love to hear from you!"})]}),(0,_t.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),d({name:!0,email:!0,phone:!0,message:!0}),(()=>{const t=["name","email","message"].every(t=>(h(t,e[t]),!l[t]));return e.phone&&h("phone",e.phone),t&&0===Object.keys(l).length})()){s(!0),o(null);try{const n="xkgbylng";if(!n)throw new Error("Contact form not configured");(await fetch("https://formspree.io/f/".concat(n),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:e.name,email:e.email,phone:e.phone,message:e.message,_subject:"New contact form submission from ".concat(e.name)})})).ok?(o("success"),t({name:"",email:"",phone:"",message:""}),c({}),d({})):o("error")}catch(r){o("error")}finally{s(!1)}}else o("validation")},className:"contact-form",children:["validation"===i&&(0,_t.jsx)("div",{className:"form-message error",children:(0,_t.jsx)("p",{children:"\u274c Please fix the errors below and try again."})}),"success"===i&&(0,_t.jsx)("div",{className:"form-message success",children:(0,_t.jsx)("p",{children:"\u2705 Thank you for your message! We'll get back to you within 24 hours."})}),"error"===i&&(0,_t.jsxs)("div",{className:"form-message error",children:[(0,_t.jsx)("p",{children:"\u274c Sorry, there was an error sending your message."}),(0,_t.jsxs)("p",{className:"contact-form-note",children:["Please try again or email us directly at"," ",(0,_t.jsx)("a",{href:"mailto:".concat("contact@tuneparams.com"),className:"contact-form-link",children:"contact@tuneparams.com"})]})]}),(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"form-label",children:"Name"}),(0,_t.jsx)("input",{type:"text",name:"name",value:e.name,onChange:m,onBlur:f,placeholder:"Your full name",required:!0,className:"form-input ".concat(l.name?"error":"")}),l.name&&(0,_t.jsx)("span",{className:"field-error",children:l.name})]}),(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"form-label",children:"Email Address"}),(0,_t.jsx)("input",{type:"email",name:"email",value:e.email,onChange:m,onBlur:f,placeholder:"Your email address",required:!0,className:"form-input ".concat(l.email?"error":"")}),l.email&&(0,_t.jsx)("span",{className:"field-error",children:l.email})]}),(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsxs)("label",{className:"form-label",children:["Phone Number ",(0,_t.jsx)("span",{className:"optional-text",children:"(optional)"})]}),(0,_t.jsx)("input",{type:"tel",name:"phone",value:e.phone,onChange:m,onBlur:f,placeholder:"Your phone number",className:"form-input ".concat(l.phone?"error":"")}),l.phone&&(0,_t.jsx)("span",{className:"field-error",children:l.phone})]}),(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"form-label",children:"Message"}),(0,_t.jsx)("textarea",{name:"message",value:e.message,onChange:m,onBlur:f,placeholder:"Tell us about your question or feedback...",rows:"5",required:!0,className:"form-textarea ".concat(l.message?"error":"")}),l.message&&(0,_t.jsx)("span",{className:"field-error",children:l.message}),(0,_t.jsxs)("div",{className:"character-count",children:[e.message.length,"/500 characters"]})]}),(0,_t.jsx)("button",{type:"submit",className:"btn",disabled:n,children:n?"Sending...":"Send Message"})]}),(0,_t.jsxs)("div",{className:"alternative-contact",children:[(0,_t.jsx)("p",{children:"Having trouble with the form? You can also reach us directly:"}),(0,_t.jsx)("a",{href:"mailto:".concat("contact@tuneparams.com","?subject=Contact Form Inquiry&body=Hello TuneParams.ai team,%0D%0A%0D%0AI would like to inquire about..."),className:"btn",children:"\ud83d\udce7 Send Email Directly"})]}),(0,_t.jsxs)("div",{className:"contact-info",children:[(0,_t.jsxs)("div",{className:"contact-grid",children:[(0,_t.jsxs)("div",{className:"contact-item",children:[(0,_t.jsx)("div",{className:"contact-item-icon",children:"\ud83d\udce7"}),(0,_t.jsx)("div",{className:"contact-item-title",children:"Email"}),(0,_t.jsx)("div",{className:"contact-item-text",children:"contact@tuneparams.com"})]}),(0,_t.jsxs)("div",{className:"contact-item",children:[(0,_t.jsx)("div",{className:"contact-item-icon",children:"\ud83d\udd52"}),(0,_t.jsx)("div",{className:"contact-item-title",children:"Response Time"}),(0,_t.jsx)("div",{className:"contact-item-text",children:"Within 24 hours"})]})]}),(0,_t.jsxs)("div",{className:"social-section",children:[(0,_t.jsx)("p",{children:"Follow us on social media"}),(0,_t.jsxs)("div",{className:"social-buttons",children:[(0,_t.jsx)("a",{href:"https://www.linkedin.com/in/tuneparams/",target:"_blank",rel:"noopener noreferrer",className:"social-btn linkedin",children:"LinkedIn"}),(0,_t.jsx)("a",{href:"https://twitter.com/tuneparams",target:"_blank",rel:"noopener noreferrer",className:"social-btn twitter",children:"Twitter"}),(0,_t.jsx)("a",{href:"https://github.com/TuneParams-ai",target:"_blank",rel:"noopener noreferrer",className:"social-btn github",children:"GitHub"})]})]})]})]})})},Cr=()=>(0,_t.jsx)("div",{className:"about-page-container",children:(0,_t.jsxs)("div",{className:"about-card metallic-border metallic-glow",children:[(0,_t.jsxs)("header",{className:"about-header",children:[(0,_t.jsx)("h1",{className:"about-title",children:"\ud83d\udc4b About Us"}),(0,_t.jsxs)("p",{className:"about-subtitle",children:["Hello! from ",(0,_t.jsx)("span",{className:"metallic-text",children:"TuneParams"})]})]}),(0,_t.jsxs)("section",{className:"about-section",children:[(0,_t.jsx)("p",{children:"Our journey begins with our instructors \u2014 PhDs in Machine Learning from top-tier universities, with over 8 years of research experience and 2 years building state-of-the-art AI models in industry. They have worked on cutting-edge applications and now bring their expertise to guide you, from foundational concepts to advanced mastery."}),(0,_t.jsx)("p",{children:"Together, we\u2019re a small, passionate team with diverse backgrounds, united by a shared mission: to make a positive societal impact through Artificial Intelligence. We start with accessible, practical, and impactful AI courses designed for learners from all\xa0walks\xa0of\xa0life."}),(0,_t.jsxs)("p",{className:"about-highlight metallic-border",children:["At ",(0,_t.jsx)("strong",{children:"TuneParams.ai"}),", we don\u2019t just teach you. We prepare you to become an AI expert - confident, capable, and ready to thrive in the era of AI."]})]})]})}),kr=()=>{const[e,t]=(0,r.useState)({email:"",password:""}),[n,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,m]=(0,r.useState)(!1),{signInWithEmail:f,signInWithGoogle:p,resendVerificationEmail:g}=It(),v=ue(),y=oe(),[b]=vt();(0,r.useEffect)(()=>{var e;const t=b.get("message"),n=b.get("verified"),r=b.get("emailVerified"),s=null===(e=y.state)||void 0===e?void 0:e.from;s&&"/login"!==s.pathname?d("Please log in to access this page."):"verify-email"===t?d("Registration successful! Please check your email and click the verification link before signing in. If you don't see the email, please check your **SPAM**/junk folder."):"true"!==n&&"true"!==r||d("Email verified successfully! You can now sign in.")},[b,y]);const w=e=>{const{name:n,value:r}=e.target;t(e=>(0,a.A)((0,a.A)({},e),{},{[n]:r})),l&&c(""),h&&m(!1)};return(0,_t.jsx)("div",{className:"login-page-container",children:(0,_t.jsxs)("div",{className:"login-card",children:[(0,_t.jsxs)("div",{className:"login-header",children:[(0,_t.jsx)("h1",{className:"login-title",children:"Welcome Back"}),(0,_t.jsx)("p",{className:"login-subtitle",children:"Sign in to your account"})]}),l&&(0,_t.jsx)("div",{className:"login-error-message",children:l}),u&&(0,_t.jsx)("div",{className:"login-success-message",children:u}),(0,_t.jsxs)("button",{type:"button",onClick:async()=>{o(!0),c(""),d("");const e=await p();if(e.success){var t,n;const e=(null===(t=y.state)||void 0===t||null===(n=t.from)||void 0===n?void 0:n.pathname)||"/dashboard";v(e)}else c(e.error);o(!1)},disabled:i,className:"google-sign-in-button",children:[(0,_t.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[(0,_t.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,_t.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,_t.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,_t.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),i?"Signing in...":"Continue with Google"]}),(0,_t.jsxs)("div",{className:"divider-container",children:[(0,_t.jsx)("hr",{className:"divider-line"}),(0,_t.jsx)("span",{className:"divider-text",children:"or"}),(0,_t.jsx)("hr",{className:"divider-line"})]}),(0,_t.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0),c(""),d("");const n=await f(e.email,e.password);if(n.success){var r,s;const e=(null===(r=y.state)||void 0===r||null===(s=r.from)||void 0===s?void 0:s.pathname)||"/dashboard";v(e)}else c(n.error),n.requiresVerification?(m(!0),d("Need to resend verification email? Use the 'Resend Verification' button below. Please check your **SPAM**/junk folder if you don't see the email.")):m(!1);o(!1)},className:"login-form",children:[(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"form-label",children:"Email Address"}),(0,_t.jsx)("input",{type:"email",name:"email",value:e.email,onChange:w,placeholder:"Enter your email",required:!0,className:"form-input"})]}),(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"form-label",children:"Password"}),(0,_t.jsxs)("div",{className:"password-field-container",children:[(0,_t.jsx)("input",{type:n?"text":"password",name:"password",value:e.password,onChange:w,placeholder:"Enter your password",required:!0,className:"form-input"}),(0,_t.jsx)("button",{type:"button",onClick:()=>s(!n),className:"password-toggle-button",children:n?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]})]}),(0,_t.jsx)("div",{className:"forgot-password-container",children:(0,_t.jsx)(mt,{to:"/forgot-password",className:"forgot-password-link",children:"Forgot your password?"})}),(0,_t.jsx)("button",{type:"submit",className:"btn",disabled:i,children:i?"Signing in...":"Sign In"}),h&&(0,_t.jsx)("button",{type:"button",onClick:async()=>{if(!e.email||!e.password)return void c("Please enter both email and password to resend verification.");o(!0),c(""),d("Sending verification email...");const t=await g(e.email,e.password);t.success?(d(t.message),m(!1)):(c(t.error),d("")),o(!1)},disabled:i,className:"btn btn-secondary",style:{marginTop:"15px",backgroundColor:"#6c757d",border:"none"},children:i?"Sending...":"Resend Verification Email"})]}),(0,_t.jsx)("div",{className:"login-footer",children:(0,_t.jsxs)("p",{className:"footer-text",children:["Don't have an account?"," ",(0,_t.jsx)(mt,{to:"/register",className:"footer-link",children:"Sign up"})]})})]})})},_r=()=>{const[e,t]=(0,r.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[n,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),{registerWithEmail:h,signInWithGoogle:m}=It(),f=ue(),p=e=>{const{name:n,value:r}=e.target;t(e=>(0,a.A)((0,a.A)({},e),{},{[n]:r})),u&&d("")};return(0,_t.jsx)("div",{className:"register-page-container",children:(0,_t.jsxs)("div",{className:"register-card",children:[(0,_t.jsxs)("div",{className:"register-header",children:[(0,_t.jsx)("h1",{className:"register-title",children:"Create Account"}),(0,_t.jsx)("p",{className:"register-subtitle",children:"Join our learning platform"})]}),u&&(0,_t.jsx)("div",{className:"register-error-message",children:u}),(0,_t.jsxs)("button",{type:"button",onClick:async()=>{c(!0),d("");const e=await m();e.success?f("/dashboard"):d(e.error),c(!1)},disabled:l,className:"register-google-button",children:[(0,_t.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[(0,_t.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,_t.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,_t.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,_t.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),l?"Signing up...":"Continue with Google"]}),(0,_t.jsxs)("div",{className:"register-divider-container",children:[(0,_t.jsx)("hr",{className:"register-divider-line"}),(0,_t.jsx)("span",{className:"register-divider-text",children:"or"}),(0,_t.jsx)("hr",{className:"register-divider-line"})]}),(0,_t.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e.password!==e.confirmPassword)return void d("Passwords don't match!");if(e.password.length<6)return void d("Password must be at least 6 characters long!");c(!0),d("");const n=await h(e.email,e.password,e.firstName,e.lastName);n.success?n.requiresVerification?(d(""),alert(n.message||"Registration successful! Please check your email and verify your account before signing in. If you don't see the email, please check your **SPAM**/junk folder."),f("/login?message=verify-email")):f("/dashboard"):d(n.error),c(!1)},className:"register-form",children:[(0,_t.jsxs)("div",{className:"name-fields-row",children:[(0,_t.jsxs)("div",{className:"form-field-half",children:[(0,_t.jsx)("label",{className:"form-label",children:"First Name"}),(0,_t.jsx)("input",{type:"text",name:"firstName",value:e.firstName,onChange:p,placeholder:"First name",required:!0,className:"form-input"})]}),(0,_t.jsxs)("div",{className:"form-field-half",children:[(0,_t.jsx)("label",{className:"form-label",children:"Last Name"}),(0,_t.jsx)("input",{type:"text",name:"lastName",value:e.lastName,onChange:p,placeholder:"Last name",required:!0,className:"form-input"})]})]}),(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"form-label",children:"Email Address"}),(0,_t.jsx)("input",{type:"email",name:"email",value:e.email,onChange:p,placeholder:"Enter your email",required:!0,className:"form-input"})]}),(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"form-label",children:"Password"}),(0,_t.jsxs)("div",{className:"password-field-container",children:[(0,_t.jsx)("input",{type:n?"text":"password",name:"password",value:e.password,onChange:p,placeholder:"Create a password",required:!0,className:"form-input"}),(0,_t.jsx)("button",{type:"button",onClick:()=>s(!n),className:"password-toggle-button",children:n?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]})]}),(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"form-label",children:"Confirm Password"}),(0,_t.jsxs)("div",{className:"password-field-container",children:[(0,_t.jsx)("input",{type:i?"text":"password",name:"confirmPassword",value:e.confirmPassword,onChange:p,placeholder:"Confirm your password",required:!0,className:"form-input"}),(0,_t.jsx)("button",{type:"button",onClick:()=>o(!i),className:"password-toggle-button",children:i?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]})]}),(0,_t.jsx)("button",{type:"submit",className:"btn",disabled:l,children:l?"Creating account...":"Create Account"})]}),(0,_t.jsx)("div",{className:"register-footer",children:(0,_t.jsxs)("p",{className:"footer-text",children:["Already have an account?"," ",(0,_t.jsx)(mt,{to:"/login",className:"footer-link",children:"Sign in"})]})})]})})},jr=()=>{const[e]=vt(),t=ue(),{verifyEmail:n}=It(),[s,i]=(0,r.useState)("verifying"),[a,o]=(0,r.useState)("Verifying your email...");return(0,r.useEffect)(()=>{(async()=>{const r=e.get("mode"),s=e.get("oobCode");if("verifyEmail"===r&&s)try{const e=await n(s);e.success?(i("success"),o("Email verified successfully! You can now sign in."),setTimeout(()=>{t("/login?verified=true")},3e3)):(i("error"),o(e.error||"Email verification failed."))}catch(a){i("error"),o("Email verification failed. Please try again.")}else i("error"),o("Invalid verification link.")})()},[e,n,t]),(0,_t.jsx)("div",{className:"verify-email-container",children:(0,_t.jsxs)("div",{className:"verify-email-card",children:[(0,_t.jsx)("div",{className:"verify-email-header",children:(0,_t.jsx)("h2",{children:"Email Verification"})}),(0,_t.jsxs)("div",{className:"verify-email-content",children:["verifying"===s&&(0,_t.jsxs)("div",{className:"verification-status",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{children:a})]}),"success"===s&&(0,_t.jsxs)("div",{className:"verification-status success",children:[(0,_t.jsx)("div",{className:"success-icon",children:"\u2705"}),(0,_t.jsx)("p",{children:a}),(0,_t.jsx)("p",{className:"redirect-message",children:"Redirecting to login..."})]}),"error"===s&&(0,_t.jsxs)("div",{className:"verification-status error",children:[(0,_t.jsx)("div",{className:"error-icon",children:"\u274c"}),(0,_t.jsx)("p",{children:a}),(0,_t.jsx)("button",{className:"btn btn-primary",onClick:()=>t("/login"),children:"Go to Login"})]})]})]})})},Tr=()=>{const[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),{sendPasswordReset:d}=It(),[h]=vt();(0,r.useEffect)(()=>{"true"===h.get("passwordReset")&&l("Password reset successful! You can now sign in with your new password.")},[h]);return(0,_t.jsx)("div",{className:"forgot-password-page-container",children:(0,_t.jsxs)("div",{className:"forgot-password-card",children:[(0,_t.jsxs)("div",{className:"forgot-password-header",children:[(0,_t.jsx)("h1",{className:"forgot-password-title",children:"Reset Your Password"}),(0,_t.jsx)("p",{className:"forgot-password-subtitle",children:c?"Check your email for reset instructions. If you don't see the email, please check your **SPAM**/junk folder.":"Enter your email address and we'll send you instructions to reset your password"})]}),i&&(0,_t.jsx)("div",{className:"forgot-password-error-message",children:i}),o&&(0,_t.jsx)("div",{className:"forgot-password-success-message",children:o}),c?(0,_t.jsxs)("div",{className:"email-sent-container",children:[(0,_t.jsxs)("div",{className:"forgot-password-success-container",children:[(0,_t.jsx)("div",{className:"forgot-password-success-icon",children:"\ud83d\udce7"}),(0,_t.jsx)("h3",{className:"forgot-password-success-title",children:"Email Sent!"}),(0,_t.jsxs)("p",{className:"forgot-password-success-text",children:["We've sent password reset instructions to ",(0,_t.jsx)("strong",{children:e})]}),(0,_t.jsx)("p",{className:"forgot-password-success-note",children:"Don't see the email? Check your spam folder or try again."})]}),(0,_t.jsx)("button",{onClick:()=>{u(!1),l(""),a("")},className:"btn btn-secondary forgot-password-back-button",children:"Send Another Email"})]}):(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!e.trim())return void a("Please enter your email address.");s(!0),a(""),l("");const n=await d(e);n.success?(l(n.message),u(!0)):a(n.error),s(!1)},className:"forgot-password-form",children:[(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"form-label",children:"Email Address"}),(0,_t.jsx)("input",{type:"email",value:e,onChange:e=>{t(e.target.value),i&&a("")},placeholder:"Enter your email address",required:!0,className:"form-input"})]}),(0,_t.jsx)("button",{type:"submit",className:"btn",disabled:n,children:n?"Sending...":"Send Reset Email"})]}),(0,_t.jsxs)("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"15px",marginTop:"20px",fontSize:"0.9rem",color:"var(--text-color)"},children:[(0,_t.jsx)("strong",{children:"\ud83d\udcdd Note:"})," Password reset works even if your email is not verified. After resetting your password, you'll also be able to verify your email if needed."]})]}),(0,_t.jsxs)("div",{className:"forgot-password-footer",children:[(0,_t.jsxs)("p",{className:"footer-text",children:["Remember your password?"," ",(0,_t.jsx)(mt,{to:"/login",className:"footer-link",children:"Back to Sign In"})]}),(0,_t.jsxs)("p",{className:"footer-text",children:["Don't have an account?"," ",(0,_t.jsx)(mt,{to:"/register",className:"footer-link",children:"Sign up"})]})]})]})})},Ar=()=>{const{user:e}=It(),[t,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(new Map),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(""),[h,m]=(0,r.useState)(Pt.STUDENT),[f,p]=(0,r.useState)("");(0,r.useEffect)(()=>{g()},[]);const g=async()=>{o(!0),c(null);try{const e=await Ct();if(e.success){n(e.users);const t=e.users.map(async e=>{const t=await Ut(e.id);return[e.id,t.role]}),r=await Promise.all(t),s=new Map(r);i(s)}else c(e.error),await v()}catch(e){c(e.message),await v()}finally{o(!1)}},v=async()=>{try{const[e,t]=await Promise.all([(0,Nt.GG)((0,Nt.P)((0,Nt.rJ)(xt.db,"enrollments"))),(0,Nt.GG)((0,Nt.P)((0,Nt.rJ)(xt.db,"payments")))]),r=new Map;e.docs.forEach(e=>{const t=e.data();t.userId&&r.set(t.userId,{id:t.userId,uid:t.userId,displayName:t.userId,email:null,source:"enrollment"})}),t.docs.forEach(e=>{const t=e.data();if(t.userId){const e=r.get(t.userId);r.set(t.userId,{id:t.userId,uid:t.userId,displayName:t.payerEmail||(null===e||void 0===e?void 0:e.displayName)||t.userId,email:t.payerEmail,source:e?"both":"payment"})}});const s=Array.from(r.values());n(s);const a=s.map(async e=>{const t=await Ut(e.id);return[e.id,t.role]}),o=await Promise.all(a),l=new Map(o);i(l)}catch(e){c(e.message)}};return(0,_t.jsxs)("div",{className:"admin-role-manager",children:[(0,_t.jsx)("h3",{children:"\ud83d\udc51 Role Management"}),a&&(0,_t.jsx)("p",{children:"Loading users..."}),l&&(0,_t.jsxs)("p",{className:"admin-role-error",children:["\u274c ",l]}),f&&(0,_t.jsxs)("p",{className:"admin-role-success",children:["\u2705 ",f]}),(0,_t.jsxs)("div",{className:"admin-role-form",children:[(0,_t.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"admin-role-select",children:[(0,_t.jsx)("option",{value:"",children:"Select User"}),t.map(e=>(0,_t.jsxs)("option",{value:e.id||e.uid,children:[e.displayName||e.email," ",e.email?"(".concat(e.email,")"):"",s.get(e.id||e.uid)?" - Current: ".concat(s.get(e.id||e.uid)):""]},e.id||e.uid))]}),(0,_t.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"admin-role-select",children:[(0,_t.jsx)("option",{value:Pt.STUDENT,children:"Student"}),(0,_t.jsx)("option",{value:Pt.INSTRUCTOR,children:"Instructor"}),(0,_t.jsx)("option",{value:Pt.ADMIN,children:"Admin"})]}),(0,_t.jsx)("button",{onClick:async()=>{if(u&&h){o(!0),c(null),p(null);try{const t=await(async(e,t,n)=>{try{if(!xt.db)throw new Error("Firestore not initialized");if(!Object.values(Pt).includes(t))throw new Error("Invalid role: ".concat(t));const r={userId:e,role:t,permissions:Ft[t]||[],assignedBy:n,assignedAt:(0,Nt.O5)(),updatedAt:(0,Nt.O5)(),isActive:!0},s=(0,Nt.H9)(xt.db,"user_roles",e);await(0,Nt.BN)(s,r);const i=(0,Nt.H9)(xt.db,"users",e);return await(0,Nt.BN)(i,{role:t,updatedAt:(0,Nt.O5)()},{merge:!0}),{success:!0,role:r}}catch(l){return{success:!1,error:l.message}}})(u,h,e.uid);if(t.success){const t=await Ut(u);i(e=>new Map(e).set(u,t.role)),await async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{const s={action:e,targetUserId:t,performedBy:n,details:r,timestamp:(0,Nt.O5)(),ipAddress:null};await(0,Nt.gS)((0,Nt.rJ)(xt.db,"role_audit_log"),s)}catch(l){}}("assign_role",u,e.uid,{newRole:h,timestamp:(new Date).toISOString()}),p("Successfully assigned ".concat(h," role to user")),d(""),m(Pt.STUDENT)}else c("Error: ".concat(t.error))}catch(t){c("Error assigning role: ".concat(t.message))}finally{o(!1)}}else c("Please select both a user and a role")},disabled:!u||!h||a,className:"admin-role-button ".concat(u&&h&&!a?"":"loading"),children:a?"Assigning...":"Assign Role"}),(0,_t.jsx)("button",{onClick:async()=>{o(!0),c(null),p(null);try{const e=await(0,Nt.GG)((0,Nt.rJ)(xt.db,"user_roles"));let t=0;const n=e.docs.map(async e=>{const n=e.data(),r=e.id,s=(0,Nt.H9)(xt.db,"users",r);return await(0,Nt.BN)(s,{role:n.role,updatedAt:(0,Nt.O5)()},{merge:!0}),t++,{userId:r,role:n.role}});await Promise.all(n),p("Successfully synced ".concat(t," user roles between collections")),await g()}catch(e){c("Error syncing user roles: ".concat(e.message))}finally{o(!1)}},disabled:a,className:"admin-role-button sync-button ".concat(a?"loading":""),title:"Sync roles from user_roles collection to users collection",children:a?"Syncing...":"\ud83d\udd04 Sync All Roles"})]}),"            ",t.length>0&&(0,_t.jsxs)("div",{className:"admin-current-roles",children:[(0,_t.jsx)("h4",{children:"Current User Roles:"}),(0,_t.jsx)("div",{className:"admin-roles-list",children:t.map(e=>(0,_t.jsxs)("div",{className:"admin-role-user-item",children:[(0,_t.jsxs)("div",{className:"admin-role-user-info",children:[(0,_t.jsx)("div",{className:"admin-role-user-name",children:e.displayName||e.email}),e.email&&(0,_t.jsxs)("div",{className:"admin-role-user-email",children:["(",e.email,")"]}),(0,_t.jsxs)("div",{className:"admin-role-user-id",children:["ID: ",e.id||e.uid]})]}),(0,_t.jsx)("div",{className:"admin-role-badge ".concat((s.get(e.id||e.uid)||"student").toLowerCase()),children:s.get(e.id||e.uid)||"student"})]},e.id||e.uid))})]}),(0,_t.jsxs)("div",{className:"admin-setup-note",children:[(0,_t.jsx)("strong",{children:"\u26a0\ufe0f Quick Setup:"}),(0,_t.jsx)("br",{}),"To make yourself an admin immediately:",(0,_t.jsx)("br",{}),"1. Ensure you have an account and have logged in at least once",(0,_t.jsx)("br",{}),"2. Use the Firestore console to manually add your role",(0,_t.jsx)("br",{}),"3. Or run the setup script below to create your admin role"]})]})},Ir=()=>{const[e,t]=(0,r.useState)({totalPayments:0,totalEnrollments:0,totalUsers:0,totalRevenue:0}),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(null),o=async()=>{s(!0),a(null);try{const[e,n,r]=await Promise.all([(0,Nt.GG)((0,Nt.P)((0,Nt.rJ)(xt.db,"payments"))),(0,Nt.GG)((0,Nt.P)((0,Nt.rJ)(xt.db,"enrollments"))),(0,Nt.GG)((0,Nt.P)((0,Nt.rJ)(xt.db,"users")))]);let s=0;e.docs.forEach(e=>{const t=e.data();t.amount&&"number"===typeof t.amount&&(s+=t.amount)}),t({totalPayments:e.size,totalEnrollments:n.size,totalUsers:r.size,totalRevenue:s})}catch(e){a(e.message)}finally{s(!1)}};return(0,r.useEffect)(()=>{o()},[]),(0,_t.jsxs)("div",{children:[(0,_t.jsxs)("div",{className:"admin-section-header",children:[(0,_t.jsx)("h2",{children:"\ud83d\udcca Dashboard Overview"}),(0,_t.jsx)("button",{onClick:o,className:"admin-refresh-button",disabled:n,children:n?"Loading...":"\ud83d\udd04 Refresh"})]}),i&&(0,_t.jsxs)("p",{className:"admin-error",children:["Error: ",i]}),(0,_t.jsxs)("div",{className:"admin-stats-grid",children:[(0,_t.jsxs)("div",{className:"admin-stat-card",children:[(0,_t.jsx)("div",{className:"admin-stat-icon",children:"\ud83d\udcb3"}),(0,_t.jsxs)("div",{className:"admin-stat-content",children:[(0,_t.jsx)("h3",{children:"Total Payments"}),(0,_t.jsx)("p",{className:"admin-stat-number",children:e.totalPayments})]})]}),(0,_t.jsxs)("div",{className:"admin-stat-card",children:[(0,_t.jsx)("div",{className:"admin-stat-icon",children:"\ud83d\udcda"}),(0,_t.jsxs)("div",{className:"admin-stat-content",children:[(0,_t.jsx)("h3",{children:"Total Enrollments"}),(0,_t.jsx)("p",{className:"admin-stat-number",children:e.totalEnrollments})]})]}),(0,_t.jsxs)("div",{className:"admin-stat-card",children:[(0,_t.jsx)("div",{className:"admin-stat-icon",children:"\ud83d\udc65"}),(0,_t.jsxs)("div",{className:"admin-stat-content",children:[(0,_t.jsx)("h3",{children:"Total Users"}),(0,_t.jsx)("p",{className:"admin-stat-number",children:e.totalUsers})]})]}),(0,_t.jsxs)("div",{className:"admin-stat-card",children:[(0,_t.jsx)("div",{className:"admin-stat-icon",children:"\ud83d\udcb0"}),(0,_t.jsxs)("div",{className:"admin-stat-content",children:[(0,_t.jsx)("h3",{children:"Total Revenue"}),(0,_t.jsxs)("p",{className:"admin-stat-number",children:["$",e.totalRevenue]})]})]})]}),(0,_t.jsx)("div",{className:"admin-overview-actions",children:(0,_t.jsxs)("div",{className:"admin-action-card",children:[(0,_t.jsx)("h3",{children:"\ud83c\udfaf Quick Actions"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"View detailed payment records in the Payments tab"}),(0,_t.jsx)("li",{children:"Manage user enrollments in the Enrollments tab"}),(0,_t.jsx)("li",{children:"Track and update student progress in the Progress Tracking tab"}),(0,_t.jsx)("li",{children:"Configure coupon discounts in the Coupons tab"}),(0,_t.jsx)("li",{children:"Assign user roles in the Role Management section"}),(0,_t.jsx)("li",{children:"Test system functionality using admin tools"})]})]})})]})},Pr=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),l=async()=>{s(!0),o(null);try{const e=(0,Nt.P)((0,Nt.rJ)(xt.db,"payments"),(0,Nt.My)("createdAt","desc")),n=(await(0,Nt.GG)(e)).docs.map(e=>(0,a.A)({id:e.id},e.data()));t(n)}catch(e){o(e.message)}finally{s(!1)}};return(0,r.useEffect)(()=>{l()},[]),(0,_t.jsxs)("div",{children:[(0,_t.jsxs)("div",{className:"admin-section-header",children:[(0,_t.jsxs)("h2",{children:["Payment Records (",e.length,")"]}),(0,_t.jsx)("button",{onClick:l,className:"admin-refresh-button",disabled:n,children:n?"Loading...":"\ud83d\udd04 Refresh"})]}),i&&(0,_t.jsxs)("p",{className:"admin-error",children:["Error: ",i]}),(0,_t.jsx)("div",{className:"admin-table-container",children:(0,_t.jsxs)("table",{className:"admin-table",children:[(0,_t.jsx)("thead",{children:(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("th",{children:"Date"}),(0,_t.jsx)("th",{children:"Course"}),(0,_t.jsx)("th",{children:"User Email"}),(0,_t.jsx)("th",{children:"Amount"}),(0,_t.jsx)("th",{children:"Payment ID"}),(0,_t.jsx)("th",{children:"Status"})]})}),(0,_t.jsx)("tbody",{children:e.map(e=>{var t,n,r;return(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("td",{children:(null===(t=e.paymentDate)||void 0===t||null===(n=t.toDate)||void 0===n||null===(r=n.call(t))||void 0===r?void 0:r.toLocaleDateString())||"N/A"}),(0,_t.jsx)("td",{children:e.courseTitle}),(0,_t.jsx)("td",{children:e.userEmail||e.payerEmail}),(0,_t.jsxs)("td",{children:["$",e.amount]}),(0,_t.jsx)("td",{className:"payment-id",children:e.paymentId}),(0,_t.jsx)("td",{children:(0,_t.jsx)("span",{className:"status-".concat(e.status),children:e.status})})]},e.id)})})]})}),0===e.length&&!n&&(0,_t.jsx)("div",{className:"admin-empty-state",children:(0,_t.jsx)("p",{children:"No payment records found."})})]})},Rr=e=>{let{isOpen:t,onClose:n,onSuccess:s}=e;const{user:i}=It(),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[m,f]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[x,N]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&E()},[t]);const E=async()=>{N(!0);try{const e=(0,Nt.P)((0,Nt.rJ)(xt.db,"users")),t=(await(0,Nt.GG)(e)).docs.map(e=>(0,a.A)({id:e.id},e.data()));l(t)}catch(e){w("Failed to load users")}finally{N(!1)}},S=()=>{u(""),h(""),f(""),g(""),w(null)},C=()=>{S(),n()},k=vn.find(e=>e.id===d),_=(null===k||void 0===k?void 0:k.batches)||[],j=k?Sn(k):null;return t?(0,_t.jsx)("div",{className:"modal-overlay",children:(0,_t.jsxs)("div",{className:"modal-content manual-enrollment-modal",children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsx)("h2",{children:"Manual User Enrollment"}),(0,_t.jsx)("button",{className:"modal-close-btn",onClick:C,children:"\xd7"})]}),(0,_t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c&&d){y(!0),w(null);try{const e=await async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";try{if(!xt.db)throw new Error("Firestore not initialized");const a=yn(t);if(!a)throw new Error("Course not found: ".concat(t));let o;var i;if(r){if(o=null===(i=a.batches)||void 0===i?void 0:i.find(e=>e.batchNumber===r),!o)throw new Error("Batch ".concat(r," not found for course ").concat(t))}else if(o=Sn(a),!o)throw new Error("No available batches for enrollment");const l="".concat(e,"_").concat(t,"_batch").concat(o.batchNumber),c=(0,Nt.H9)(xt.db,"enrollments",l);if((await(0,Nt.x7)(c)).exists())throw new Error("User is already enrolled in ".concat(a.title," - Batch ").concat(o.batchNumber));const u=await St(e),d=u.success?u.userData:null,h={userId:e,userEmail:null===d||void 0===d?void 0:d.email,courseId:t,courseTitle:a.title,batchNumber:o.batchNumber,batchStartDate:o.startDate,batchEndDate:o.endDate,batchStatus:o.status,status:"enrolled",progress:0,enrollmentType:"manual",manualEnrollmentBy:n,manualEnrollmentNotes:s,amountPaid:0,termsAccepted:null,termsAcceptedAt:null,enrolledAt:(0,Nt.O5)(),lastAccessed:null,completedAt:null,paymentMethod:"manual",enrollmentSource:"admin_manual"};return await(0,Nt.BN)(c,h),{success:!0,enrollmentId:l,batchNumber:o.batchNumber,batchInfo:{startDate:o.startDate,endDate:o.endDate,status:o.status,batchName:o.batchName}}}catch(b){return{success:!1,error:b.message}}}(c,d,i.uid,m?parseInt(m):null,p);e.success?(null===s||void 0===s||s(e),S(),n()):w(e.error)}catch(t){w(t.message)}finally{y(!1)}}else w("Please select both user and course")},children:[(0,_t.jsxs)("div",{className:"modal-body",children:[b&&(0,_t.jsx)("div",{className:"error-message",children:b}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"user-select",children:"Select User *"}),x?(0,_t.jsx)("div",{className:"loading-indicator",children:"Loading users..."}):(0,_t.jsxs)("select",{id:"user-select",value:c,onChange:e=>u(e.target.value),required:!0,children:[(0,_t.jsx)("option",{value:"",children:"-- Select User --"}),o.map(e=>(0,_t.jsxs)("option",{value:e.id,children:[e.displayName||e.email," (",e.email,")"]},e.id))]})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"course-select",children:"Select Course *"}),(0,_t.jsxs)("select",{id:"course-select",value:d,onChange:e=>{h(e.target.value),f("")},required:!0,children:[(0,_t.jsx)("option",{value:"",children:"-- Select Course --"}),vn.map(e=>(0,_t.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),k&&(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"batch-select",children:"Select Batch"}),(0,_t.jsxs)("select",{id:"batch-select",value:m,onChange:e=>f(e.target.value),children:[(0,_t.jsxs)("option",{value:"",children:["Auto-assign to next available batch",j&&" (".concat(_n(j),")")]}),_.map(e=>(0,_t.jsxs)("option",{value:e.batchNumber,children:[_n(e)," - ",e.status]},e.batchNumber))]})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"notes",children:"Notes (Optional)"}),(0,_t.jsx)("textarea",{id:"notes",value:p,onChange:e=>g(e.target.value),placeholder:"Add any notes about this manual enrollment...",rows:3})]}),k&&(0,_t.jsxs)("div",{className:"course-info",children:[(0,_t.jsx)("h4",{children:"Course Information"}),(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Title:"})," ",k.title]}),(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Duration:"})," ",k.duration]}),(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Level:"})," ",k.level]}),j&&(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Next Available Batch:"})," ",_n(j)]})]})]}),(0,_t.jsxs)("div",{className:"modal-footer",children:[(0,_t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:C,disabled:v,children:"Cancel"}),(0,_t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:v||!c||!d,children:v?"Enrolling...":"Enroll User"})]})]})]})}):null},Dr=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)("all"),[u,d]=(0,r.useState)("all"),[h,m]=(0,r.useState)(!1),f=or(),p=async()=>{s(!0),o(null);try{const e=(0,Nt.P)((0,Nt.rJ)(xt.db,"enrollments"),(0,Nt.My)("enrolledAt","desc")),n=(await(0,Nt.GG)(e)).docs.map(e=>(0,a.A)({id:e.id},e.data()));t(n)}catch(e){o(e.message)}finally{s(!1)}};(0,r.useEffect)(()=>{p()},[]);const g=e.filter(e=>{var t;const n="all"===l||(null===(t=e.batchNumber)||void 0===t?void 0:t.toString())===l,r="all"===u||e.courseId===u;return n&&r}),v=[...new Set(e.map(e=>e.courseId))].filter(Boolean),y=[...new Set(e.map(e=>e.batchNumber))].filter(Boolean).sort((e,t)=>e-t),b={};return g.forEach(e=>{const t="".concat(e.courseId,"_batch").concat(e.batchNumber||"legacy");if(!b[t]){let n=e.batchNumber||"Legacy";if(e.batchNumber){const t=yn(e.courseId);if(t){const r=xn(t,e.batchNumber);n=r?jn(r):"Batch ".concat(e.batchNumber)}}b[t]={courseId:e.courseId,courseTitle:e.courseTitle,batchNumber:e.batchNumber||"Legacy",batchDisplayName:n,count:0,totalRevenue:0}}b[t].count++,b[t].totalRevenue+=e.amountPaid||0}),(0,_t.jsxs)("div",{children:[(0,_t.jsxs)("div",{className:"admin-section-header",children:[(0,_t.jsxs)("h2",{children:["Course Enrollments (",g.length,")"]}),(0,_t.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,_t.jsx)("button",{onClick:()=>m(!0),className:"admin-add-button",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"\u2795 Manual Enroll"}),(0,_t.jsx)("button",{onClick:p,className:"admin-refresh-button",disabled:n,children:n?"Loading...":"\ud83d\udd04 Refresh"})]})]}),i&&(0,_t.jsxs)("p",{className:"admin-error",children:["Error: ",i]}),(0,_t.jsx)("div",{className:"admin-filters",children:(0,_t.jsxs)("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:[(0,_t.jsxs)("div",{children:[(0,_t.jsx)("label",{htmlFor:"course-filter",children:"Filter by Course:"}),(0,_t.jsxs)("select",{id:"course-filter",value:u,onChange:e=>d(e.target.value),children:[(0,_t.jsx)("option",{value:"all",children:"All Courses"}),v.map(e=>(0,_t.jsx)("option",{value:e,children:e},e))]})]}),(0,_t.jsxs)("div",{children:[(0,_t.jsx)("label",{htmlFor:"batch-filter",children:"Filter by Batch:"}),(0,_t.jsxs)("select",{id:"batch-filter",value:l,onChange:e=>c(e.target.value),children:[(0,_t.jsx)("option",{value:"all",children:"All Batches"}),y.map(e=>(0,_t.jsxs)("option",{value:e.toString(),children:["Batch ",e]},e))]})]})]})}),Object.keys(b).length>0&&(0,_t.jsxs)("div",{className:"batch-summary",style:{marginBottom:"30px"},children:[(0,_t.jsx)("h3",{children:"Batch Summary"}),(0,_t.jsx)("div",{className:"admin-table-container",children:(0,_t.jsxs)("table",{className:"admin-table",children:[(0,_t.jsx)("thead",{children:(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("th",{children:"Course"}),(0,_t.jsx)("th",{children:"Batch"}),(0,_t.jsx)("th",{children:"Enrollments"}),(0,_t.jsx)("th",{children:"Total Revenue"})]})}),(0,_t.jsx)("tbody",{children:Object.values(b).map((e,t)=>(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("td",{children:e.courseTitle||e.courseId}),(0,_t.jsx)("td",{children:(0,_t.jsx)("span",{className:"batch-badge batch-".concat(e.batchNumber),title:"Batch ".concat(e.batchNumber),children:e.batchDisplayName})}),(0,_t.jsx)("td",{children:e.count}),(0,_t.jsxs)("td",{children:["$",e.totalRevenue.toFixed(2)]})]},t))})]})})]}),(0,_t.jsx)("h3",{children:"Detailed Enrollments"}),(0,_t.jsx)("div",{className:"admin-table-container",children:(0,_t.jsxs)("table",{className:"admin-table",children:[(0,_t.jsx)("thead",{children:(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("th",{children:"Enrolled Date"}),(0,_t.jsx)("th",{children:"Course"}),(0,_t.jsx)("th",{children:"Batch"}),(0,_t.jsx)("th",{children:"User ID"}),f&&(0,_t.jsx)("th",{children:"Progress"}),(0,_t.jsx)("th",{children:"Status"}),(0,_t.jsx)("th",{children:"Amount Paid"})]})}),(0,_t.jsx)("tbody",{children:g.map(e=>{var t,n,r;return(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("td",{children:(null===(t=e.enrolledAt)||void 0===t||null===(n=t.toDate)||void 0===n||null===(r=n.call(t))||void 0===r?void 0:r.toLocaleDateString())||"N/A"}),(0,_t.jsx)("td",{children:(0,_t.jsxs)("div",{children:[(0,_t.jsx)("strong",{children:e.courseTitle}),(0,_t.jsx)("br",{}),(0,_t.jsxs)("small",{style:{color:"#666"},children:["(",e.courseId,")"]})]})}),(0,_t.jsx)("td",{children:(0,_t.jsx)("span",{className:"batch-badge batch-".concat(e.batchNumber||"legacy"),children:(()=>{if(!e.batchNumber)return"Legacy";const t=yn(e.courseId);if(t){const n=xn(t,e.batchNumber);if(n)return jn(n)}return"Batch ".concat(e.batchNumber)})()})}),(0,_t.jsx)("td",{className:"user-id",children:e.userId}),f&&(0,_t.jsx)("td",{children:(0,_t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,_t.jsx)("div",{style:{width:"60px",height:"8px",backgroundColor:"rgba(29, 126, 153, 0.2)",borderRadius:"4px",overflow:"hidden"},children:(0,_t.jsx)("div",{style:{width:"".concat(e.progress||0,"%"),height:"100%",backgroundColor:e.progress>=100?"#4caf50":e.progress>=50?"#ff9800":"#2196f3",transition:"width 0.3s ease"}})}),(0,_t.jsxs)("span",{children:[e.progress||0,"%"]})]})}),(0,_t.jsx)("td",{children:(0,_t.jsx)("span",{className:"status-".concat(e.status),children:e.status})}),(0,_t.jsxs)("td",{children:["$",e.amountPaid]})]},e.id)})})]})}),0===g.length&&!n&&(0,_t.jsx)("div",{className:"admin-empty-state",children:(0,_t.jsx)("p",{children:"No enrollment records found for the selected filters."})}),(0,_t.jsx)("style",{jsx:!0,children:"\n                .batch-badge {\n                    display: inline-block;\n                    padding: 4px 8px;\n                    border-radius: 12px;\n                    font-size: 12px;\n                    font-weight: bold;\n                    text-align: center;\n                    min-width: 60px;\n                }\n\n                .batch-1 {\n                    background-color: rgba(59, 130, 246, 0.2);\n                    color: #60a5fa;\n                    border: 1px solid rgba(59, 130, 246, 0.3);\n                }\n\n                .batch-2 {\n                    background-color: rgba(168, 85, 247, 0.2);\n                    color: #c084fc;\n                    border: 1px solid rgba(168, 85, 247, 0.3);\n                }\n\n                .batch-3 {\n                    background-color: rgba(34, 197, 94, 0.2);\n                    color: #4ade80;\n                    border: 1px solid rgba(34, 197, 94, 0.3);\n                }\n\n                .batch-legacy {\n                    background-color: rgba(107, 114, 128, 0.2);\n                    color: var(--secondary-text-color);\n                    border: 1px solid rgba(107, 114, 128, 0.3);\n                }\n\n                .admin-filters {\n                    border: 1px solid rgba(29, 126, 153, 0.2);\n                }\n\n                .batch-summary {\n                    border-top: 2px solid var(--primary-color);\n                    padding-top: 20px;\n                }\n\n                .batch-summary h3 {\n                    margin-bottom: 15px;\n                    color: #333;\n                }\n            "}),(0,_t.jsx)(Rr,{isOpen:h,onClose:()=>m(!1),onSuccess:e=>{p()}})]})},Lr=e=>{let{emails:t,formatDate:n}=e;const[s,i]=r.useState(null);return(0,_t.jsx)("div",{className:"email-table-container",children:(0,_t.jsx)("div",{style:{overflowX:"auto"},children:(0,_t.jsxs)("table",{className:"email-table",children:[(0,_t.jsx)("thead",{className:"email-table-header",children:(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("th",{className:"email-table-header-cell",children:"\ud83d\udcc5 Date"}),(0,_t.jsx)("th",{className:"email-table-header-cell",children:"\ud83d\udc64 Recipient"}),(0,_t.jsx)("th",{className:"email-table-header-cell",children:"\ud83d\udce7 Type"}),(0,_t.jsx)("th",{className:"email-table-header-cell",children:"\ud83d\udcda Course"}),(0,_t.jsx)("th",{className:"email-table-header-cell",children:"\u2705 Status"}),(0,_t.jsx)("th",{className:"email-table-header-cell",children:"\ud83d\udcb3 Payment ID"}),(0,_t.jsx)("th",{className:"email-table-header-cell-center",children:"\u2699\ufe0f Actions"})]})}),(0,_t.jsx)("tbody",{children:0===t.length?(0,_t.jsx)("tr",{children:(0,_t.jsx)("td",{colSpan:"7",className:"table-empty-state",children:(0,_t.jsxs)("div",{className:"table-empty-content",children:[(0,_t.jsx)("div",{className:"table-empty-icon",children:"\ud83d\udce7"}),(0,_t.jsx)("h3",{className:"table-empty-title",children:"No emails to display"}),(0,_t.jsx)("p",{className:"table-empty-text",children:"Emails will appear here once they are sent through the system."})]})})}):t.map((e,t)=>{var a;return(0,_t.jsxs)(r.Fragment,{children:[(0,_t.jsxs)("tr",{className:"email-table-row ".concat(t%2===0?"even":"odd"),children:[(0,_t.jsx)("td",{className:"email-table-cell",children:(0,_t.jsx)("div",{className:"cell-date",children:n(e.sentAt)})}),(0,_t.jsx)("td",{className:"email-table-cell",children:(0,_t.jsxs)("div",{className:"cell-recipient",children:[(0,_t.jsx)("div",{className:"recipient-name",children:e.recipientName||"N/A"}),(0,_t.jsx)("div",{className:"recipient-email",children:e.recipientEmail})]})}),(0,_t.jsx)("td",{className:"email-table-cell",children:(0,_t.jsx)("span",{className:"email-type-badge ".concat("enrollment_confirmation"===e.emailType?"enrollment":"other"),children:null===(a=e.emailType)||void 0===a?void 0:a.replace("_"," ")})}),(0,_t.jsx)("td",{className:"email-table-cell",children:(0,_t.jsxs)("div",{className:"cell-course",children:[(0,_t.jsx)("div",{className:"course-title",children:e.courseTitle||"N/A"}),e.amount&&(0,_t.jsxs)("div",{className:"course-amount",children:["$",e.amount]})]})}),(0,_t.jsx)("td",{className:"email-table-cell",children:(0,_t.jsxs)("div",{className:"cell-status",children:[(0,_t.jsx)("span",{className:"status-badge ".concat("sent"===e.status?"success":"error"),children:e.status}),e.errorMessage&&(0,_t.jsx)("div",{className:"error-message",children:e.errorMessage})]})}),(0,_t.jsx)("td",{className:"email-table-cell payment-id-cell",children:(0,_t.jsx)("div",{className:"payment-id",children:e.paymentId?e.paymentId.substring(0,12)+"...":"N/A"})}),(0,_t.jsx)("td",{className:"email-table-cell actions-cell",children:(0,_t.jsx)("button",{onClick:()=>{return t=e.id,void i(s===t?null:t);var t},className:"action-button ".concat(s===e.id?"hide":"view"),children:s===e.id?"\ud83d\ude48 Hide":"\ud83d\udc41\ufe0f View"})})]}),s===e.id&&(0,_t.jsx)("tr",{children:(0,_t.jsx)("td",{colSpan:"7",className:"email-details-section",children:(0,_t.jsxs)("div",{className:"email-details-content",children:[(0,_t.jsx)("h4",{className:"email-details-title",children:"\ud83d\udccb Email Details"}),(0,_t.jsxs)("div",{className:"email-details-grid",children:[(0,_t.jsxs)("div",{className:"email-detail-card",children:[(0,_t.jsx)("div",{className:"detail-label",children:"\ud83d\udce7 Subject"}),(0,_t.jsx)("div",{className:"detail-value",children:e.subject||"N/A"})]}),(0,_t.jsxs)("div",{className:"email-detail-card",children:[(0,_t.jsx)("div",{className:"detail-label",children:"\ud83d\uded2 Order ID"}),(0,_t.jsx)("div",{className:"detail-value detail-code",children:e.orderId||"N/A"})]}),(0,_t.jsxs)("div",{className:"email-detail-card",children:[(0,_t.jsx)("div",{className:"detail-label",children:"\ud83c\udf93 Enrollment ID"}),(0,_t.jsx)("div",{className:"detail-value detail-code",children:e.enrollmentId||"N/A"})]}),(0,_t.jsxs)("div",{className:"email-detail-card",children:[(0,_t.jsx)("div",{className:"detail-label",children:"\ud83d\udd27 Service Response"}),(0,_t.jsx)("div",{className:"detail-value detail-small",children:e.emailServiceResponse||"N/A"})]})]}),e.rawTextContent&&(0,_t.jsx)("div",{className:"email-content-section",children:(0,_t.jsxs)("div",{className:"email-detail-card",children:[(0,_t.jsx)("div",{className:"email-content-header",children:"\ud83d\udcdd Email Content"}),(0,_t.jsx)("div",{className:"email-content-viewer",children:(0,_t.jsx)("pre",{className:"email-content-pre",children:e.rawTextContent})})]})})]})})})]},e.id)})})]})})})},Or=()=>{const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)("overview"),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[m,f]=(0,r.useState)("enrollment_confirmation");(0,r.useEffect)(()=>{p()},[]);const p=async()=>{a(!0);try{const e=await(0,gn.CB)();e.success&&t(e.statistics)}catch(e){}finally{a(!1)}},g=e=>{if(!e)return"N/A";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return i&&!e?(0,_t.jsxs)("div",{className:"loading-container",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{className:"loading-text",children:"Loading email tracking data..."})]}):(0,_t.jsx)("div",{className:"email-tracking-container",children:(0,_t.jsxs)("div",{className:"email-tracking-card",children:[(0,_t.jsx)("h2",{className:"email-tracking-title",children:"\ud83d\udce7 Email Tracking Dashboard"}),(0,_t.jsx)("div",{className:"tab-navigation",children:[{key:"overview",label:"Overview",icon:"\ud83d\udcca"},{key:"search",label:"Search Emails",icon:"\ud83d\udd0d"},{key:"by-type",label:"By Type",icon:"\ud83d\udcdd"}].map(e=>(0,_t.jsxs)("button",{onClick:()=>l(e.key),className:"tab-button ".concat(o===e.key?"active":""),children:[(0,_t.jsx)("span",{children:e.icon}),e.label]},e.key))}),"overview"===o&&e&&(0,_t.jsxs)("div",{children:[(0,_t.jsx)("div",{className:"stats-grid",children:[{title:"Total Emails",value:e.totalEmails,color:"#667eea",icon:"\ud83d\udce7"},{title:"Sent Successfully",value:e.sentSuccessfully,color:"#10b981",icon:"\u2705"},{title:"Failed",value:e.failed,color:"#ef4444",icon:"\u274c"},{title:"Success Rate",value:"".concat(e.successRate,"%"),color:"#06b6d4",icon:"\ud83d\udcca"}].map((e,t)=>(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("div",{className:"stat-icon",children:e.icon}),(0,_t.jsx)("h3",{className:"stat-title",children:e.title}),(0,_t.jsx)("p",{className:"stat-value",style:{color:e.color},children:e.value})]},t))}),(0,_t.jsxs)("div",{className:"overview-grid",children:[(0,_t.jsxs)("div",{className:"overview-card",children:[(0,_t.jsx)("h3",{className:"overview-card-title",children:"\ud83d\udce7 Email Types"}),Object.entries(e.emailTypes).map(e=>{let[t,n]=e;return(0,_t.jsxs)("div",{className:"overview-list-item",children:[(0,_t.jsx)("span",{className:"overview-item-label",children:t.replace("_"," ").toUpperCase()}),(0,_t.jsx)("div",{className:"overview-badge primary",children:n})]},t)})]}),(0,_t.jsxs)("div",{className:"overview-card",children:[(0,_t.jsx)("h3",{className:"overview-card-title",children:"\ud83d\udcda Course Emails"}),Object.entries(e.courses).map(e=>{let[t,n]=e;const r=t.split("_").slice(1).join("_");return(0,_t.jsxs)("div",{className:"overview-list-item",children:[(0,_t.jsx)("span",{className:"overview-item-label overview-item-truncate",children:r}),(0,_t.jsx)("div",{className:"overview-badge success",children:n})]},t)})]})]})]}),"search"===o&&(0,_t.jsxs)("div",{children:[(0,_t.jsxs)("div",{className:"search-section",children:[(0,_t.jsx)("h3",{className:"search-title",children:"\ud83d\udce7 Search by Email Address"}),(0,_t.jsxs)("div",{className:"search-form",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{className:"form-label",children:"Email Address"}),(0,_t.jsx)("input",{type:"email",placeholder:"Enter email address to search...",value:c,onChange:e=>u(e.target.value),className:"form-input"})]}),(0,_t.jsx)("button",{onClick:async()=>{if(c.trim()){a(!0);try{const e=await(0,gn.CP)(c.trim());e.success&&s(e.emails)}catch(e){}finally{a(!1)}}},disabled:i,className:"search-button primary",children:i?"Searching...":"\ud83d\udd0d Search by Email"})]})]}),(0,_t.jsxs)("div",{className:"search-section",children:[(0,_t.jsx)("h3",{className:"search-title",children:"\ud83d\udd0d General Search"}),(0,_t.jsxs)("div",{className:"search-form",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{className:"form-label",children:"Search Term"}),(0,_t.jsx)("input",{type:"text",placeholder:"Search by name, course, payment ID, etc...",value:d,onChange:e=>h(e.target.value),className:"form-input general-search-input"})]}),(0,_t.jsx)("button",{onClick:async()=>{if(d.trim()){a(!0);try{const e=await(0,gn.uw)(d.trim());e.success&&s(e.emails)}catch(e){}finally{a(!1)}}},disabled:i,className:"search-button success",children:i?"Searching...":"\ud83d\udd0d General Search"})]})]}),n.length>0?(0,_t.jsxs)("div",{children:[(0,_t.jsxs)("h3",{className:"search-results-title",children:["\ud83c\udfaf Search Results (",n.length,")"]}),(0,_t.jsx)(Lr,{emails:n,formatDate:g})]}):c.trim()||d.trim()?(0,_t.jsxs)("div",{className:"empty-state",children:[(0,_t.jsx)("div",{className:"empty-state-icon",children:"\ud83d\udd0d"}),(0,_t.jsx)("h3",{className:"empty-state-title",children:"No emails found"}),(0,_t.jsx)("p",{className:"empty-state-text",children:"Try adjusting your search terms or check if the email address is correct."})]}):null]}),"by-type"===o&&(0,_t.jsxs)("div",{children:[(0,_t.jsxs)("div",{className:"search-section",children:[(0,_t.jsx)("h3",{className:"search-title",children:"\ud83d\udcdd Filter by Email Type"}),(0,_t.jsxs)("div",{className:"search-form",children:[(0,_t.jsxs)("div",{className:"form-group-small",children:[(0,_t.jsx)("label",{className:"form-label",children:"Email Type"}),(0,_t.jsxs)("select",{value:m,onChange:e=>f(e.target.value),className:"form-select",children:[(0,_t.jsx)("option",{value:"enrollment_confirmation",children:"\ud83d\udce7 Enrollment Confirmation"}),(0,_t.jsx)("option",{value:"course_reminder",children:"\u23f0 Course Reminder"}),(0,_t.jsx)("option",{value:"payment_receipt",children:"\ud83e\uddfe Payment Receipt"})]})]}),(0,_t.jsx)("button",{onClick:async()=>{a(!0);try{const e=await(0,gn.Xu)(m);e.success&&s(e.emails)}catch(e){}finally{a(!1)}},disabled:i,className:"search-button primary",children:i?"Loading...":"\ud83d\udcca Load Emails"})]})]}),n.length>0?(0,_t.jsxs)("div",{children:[(0,_t.jsxs)("h3",{className:"search-results-title",children:["\ud83d\udccb ",m.replace("_"," ").toUpperCase()," Emails (",n.length,")"]}),(0,_t.jsx)(Lr,{emails:n,formatDate:g})]}):(0,_t.jsxs)("div",{className:"empty-state",children:[(0,_t.jsx)("div",{className:"empty-state-icon",children:"\ud83d\udce7"}),(0,_t.jsxs)("h3",{className:"empty-state-title",children:["No ",m.replace("_"," ")," emails found"]}),(0,_t.jsx)("p",{className:"empty-state-text",children:'Click "Load Emails" to fetch emails of this type.'})]})]})]})})},Mr=()=>{const{user:e}=It(),[t,n]=(0,r.useState)("create"),[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(""),[m,f]=(0,r.useState)(""),[p,g]=(0,r.useState)(null),[v,y]=(0,r.useState)({name:"",description:"",discountType:"percentage",discountValue:"",maxDiscountAmount:"",minOrderAmount:"",targetType:"general",targetUserId:"",targetUserEmail:"",courseId:"",usageLimit:"",usageLimitPerUser:"1",validFrom:"",validUntil:"",customCode:"",prefix:"",sendEmail:!1,emailMessage:""});(0,r.useEffect)(()=>{b(),w(),x()},[]);const b=async()=>{u(!0);try{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(!xt.db)throw new Error("Firestore not initialized");let t=(0,Nt.rJ)(xt.db,"coupons");e.status&&(t=(0,Nt.P)(t,(0,Nt._M)("status","==",e.status))),e.targetType&&(t=(0,Nt.P)(t,(0,Nt._M)("targetType","==",e.targetType))),e.courseId&&(t=(0,Nt.P)(t,(0,Nt._M)("courseId","==",e.courseId))),t=(0,Nt.P)(t,(0,Nt.My)("createdAt","desc"));const n=await(0,Nt.GG)(t),r=[];return n.forEach(e=>{r.push((0,a.A)({id:e.id},e.data()))}),{success:!0,coupons:r}}catch(d){return{success:!1,error:d.message,coupons:[]}}}();e.success?i(e.coupons):h(e.error)}catch(e){h("Failed to load coupons")}finally{u(!1)}},w=async()=>{try{const e=await Ct();e.success&&l(e.users)}catch(e){}},x=async()=>{try{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if(!xt.db)throw new Error("Firestore not initialized");let t=(0,Nt.rJ)(xt.db,"coupon_usage");e&&(t=(0,Nt.P)(t,(0,Nt._M)("couponId","==",e))),t=(0,Nt.P)(t,(0,Nt.My)("createdAt","desc"));const n=await(0,Nt.GG)(t),r=[];let s=0,i=0;return n.forEach(e=>{const t=(0,a.A)({id:e.id},e.data());r.push(t),s+=t.discountAmount||0,i+=t.orderAmount||0}),{success:!0,stats:{totalUsage:r.length,totalDiscount:s,totalOrders:i,averageDiscount:r.length>0?s/r.length:0,usageRecords:r}}}catch(d){return{success:!1,error:d.message}}}();e.success&&g(e.stats)}catch(e){}},N=(e,t)=>{if(y(n=>(0,a.A)((0,a.A)({},n),{},{[e]:t})),"customCode"===e&&t&&t.trim()&&y(e=>(0,a.A)((0,a.A)({},e),{},{prefix:""})),"prefix"===e&&t&&t.trim()&&y(e=>(0,a.A)((0,a.A)({},e),{},{customCode:""})),"targetUserId"===e&&t){const e=o.find(e=>e.id===t);e&&y(t=>(0,a.A)((0,a.A)({},t),{},{targetUserEmail:e.email}))}if("courseId"===e&&t){const e=vn.find(e=>e.id===t);e&&y(t=>(0,a.A)((0,a.A)({},t),{},{courseTitle:e.title}))}},E=async t=>{t.preventDefault(),u(!0),h(""),f("");try{if(!v.discountValue||parseFloat(v.discountValue)<=0)throw new Error("Please enter a valid discount value");if("user_specific"===v.targetType&&!v.targetUserId)throw new Error("Please select a target user for user-specific coupons");if("course_specific"===v.targetType&&!v.courseId)throw new Error("Please select a target course for course-specific coupons");if(v.customCode&&v.customCode.trim()){const e=v.customCode.trim().toUpperCase();if(e.length<3)throw new Error("Custom coupon code must be at least 3 characters long");if(e.length>20)throw new Error("Custom coupon code must be 20 characters or less");if(!/^[A-Z0-9]+$/.test(e))throw new Error("Custom coupon code can only contain letters and numbers")}let t=(0,a.A)({},v);if(t.courseId){const e=vn.find(e=>e.id===t.courseId);e&&(t.courseTitle=e.title)}t.customCode&&t.customCode.trim()&&(t.code=t.customCode.trim().toUpperCase());const s=await Pn(t,e.uid);if(s.success){let i="\ud83c\udf89 Coupon Generated Successfully!\n\n";if(i+="\ud83d\udccb Coupon Details:\n",i+="\u2022 Code: ".concat(s.couponCode,"\n"),i+="\u2022 Name: ".concat(t.name,"\n"),i+="\u2022 Discount: ".concat("percentage"===t.discountType?t.discountValue+"%":"$"+t.discountValue," off\n"),i+="\u2022 Type: ".concat("general"===t.targetType?"General (Available to all)":"user_specific"===t.targetType?"User-specific":"Course-specific","\n"),"user_specific"===t.targetType&&t.targetUserEmail&&(i+="\u2022 Target User: ".concat(t.targetUserEmail,"\n")),t.courseId){const e=vn.find(e=>e.id===t.courseId);i+="\u2022 Course: ".concat((null===e||void 0===e?void 0:e.title)||"Unknown Course","\n")}if(t.validUntil&&(i+="\u2022 Valid Until: ".concat(new Date(t.validUntil).toLocaleDateString(),"\n")),t.usageLimit&&(i+="\u2022 Usage Limit: ".concat(t.usageLimit," uses\n")),t.minOrderAmount&&(i+="\u2022 Minimum Order: $".concat(t.minOrderAmount,"\n")),i+="\u2022 Created by: ".concat((null===e||void 0===e?void 0:e.displayName)||(null===e||void 0===e?void 0:e.email)||"Admin","\n"),i+="\n\u2705 The coupon is now active and ready to use!",f(i),t.sendEmail&&"user_specific"===t.targetType&&t.targetUserEmail)try{var n;const r=o.find(e=>e.id===t.targetUserId),i=vn.find(e=>e.id===t.courseId),a={recipientName:(null===r||void 0===r?void 0:r.displayName)||(null===r||void 0===r||null===(n=r.email)||void 0===n?void 0:n.split("@")[0])||"Student",recipientEmail:t.targetUserEmail,couponCode:s.couponCode,couponName:t.name,discountType:t.discountType,discountValue:t.discountValue,courseTitle:(null===i||void 0===i?void 0:i.title)||null,courseId:t.courseId||null,validUntil:t.validUntil||null,minOrderAmount:t.minOrderAmount||null,adminMessage:t.emailMessage||null,senderName:(null===e||void 0===e?void 0:e.displayName)||"Admin"},l=await mn(a,t.targetUserId);l.success?f(e=>e+" Email sent successfully!"):l.skipped?f(e=>e+" (Email service not configured)"):h("Coupon created but failed to send email: "+l.error)}catch(r){h("Coupon created but failed to send email")}y({name:"",description:"",discountType:"percentage",discountValue:"",maxDiscountAmount:"",minOrderAmount:"",targetType:"general",targetUserId:"",targetUserEmail:"",courseId:"",usageLimit:"",usageLimitPerUser:"1",validFrom:"",validUntil:"",customCode:"",prefix:"",sendEmail:!1,emailMessage:""}),b(),x()}else h(s.error)}catch(s){h(s.message)}finally{u(!1)}},S=async(t,n)=>{try{const r=await(async(e,t,n)=>{try{if(!xt.db)throw new Error("Firestore not initialized");const r=(0,Nt.H9)(xt.db,"coupons",e);return await(0,Nt.mZ)(r,{status:t,updatedAt:(0,Nt.O5)(),lastModifiedBy:n}),{success:!0}}catch(d){return{success:!1,error:d.message}}})(t,n,e.uid);r.success?(f("Coupon status updated to ".concat(n)),b()):h(r.error)}catch(r){h("Failed to update coupon status")}},C=async t=>{if(window.confirm("Are you sure you want to delete this coupon?"))try{const n=await(async(e,t)=>{try{if(!xt.db)throw new Error("Firestore not initialized");const n=(0,Nt.H9)(xt.db,"coupons",e),r=await(0,Nt.x7)(n);if(!r.exists())throw new Error("Coupon not found");return r.data().usageCount>0?(await(0,Nt.mZ)(n,{status:"inactive",deletedAt:(0,Nt.O5)(),deletedBy:t,updatedAt:(0,Nt.O5)()}),{success:!0,message:"Coupon marked as inactive (cannot delete used coupons)"}):(await(0,Nt.kd)(n),{success:!0,message:"Coupon deleted successfully"})}catch(d){return{success:!1,error:d.message}}})(t,e.uid);n.success?(f(n.message),b(),x()):h(n.error)}catch(n){h("Failed to delete coupon")}},k=async t=>{u(!0),h(""),f("");try{const n=(null===e||void 0===e?void 0:e.uid)||"test_user_".concat(Date.now()),r=await(async(e,t)=>{try{const s=await Dn(e);if(!s.success)return{success:!1,error:"Coupon not found: ".concat(e)};const i=s.coupon,a={orderAmount:100,discountAmount:25,finalAmount:75,paymentId:"TEST_".concat(Date.now()),orderId:"TEST_ORDER_".concat(Date.now()),enrollmentType:"test"},o=await Rn(i.id,t,"test-course",a);if(o.success){const t=await Dn(e);if(t.success){var n,r;const e=t.coupon;return{success:!0,message:"Test coupon usage recorded successfully",before:{usageCount:i.usageCount,historyLength:(null===(n=i.usageHistory)||void 0===n?void 0:n.length)||0},after:{usageCount:e.usageCount,historyLength:(null===(r=e.usageHistory)||void 0===r?void 0:r.length)||0},usageLogId:o.usageLogId}}}return{success:!1,error:"Failed to record test usage",details:o}}catch(d){return{success:!1,error:d.message}}})(t,n);if(r.success)f("\u2705 Test successful for ".concat(t,"!\n\nBefore: ").concat(r.before.usageCount," uses, ").concat(r.before.historyLength," history records\nAfter: ").concat(r.after.usageCount," uses, ").concat(r.after.historyLength," history records\n\nUsage Log ID: ").concat(r.usageLogId,"\n\nTest User ID: ").concat(n)),b(),x();else{const e=r.details?"\n\nDetails: ".concat(JSON.stringify(r.details,null,2)):"";h("\u274c Test failed: ".concat(r.error).concat(e))}}catch(n){h("\u274c Test error: ".concat(n.message,"\n\nStack: ").concat(n.stack))}finally{u(!1)}},_=async e=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e);else{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),t.remove()}f('Coupon code "'.concat(e,'" copied to clipboard!'))}catch(t){h("Failed to copy coupon code to clipboard")}},j=e=>"percentage"===e.discountType?"".concat(e.discountValue,"% off"):"$".concat(e.discountValue," off"),T=e=>e?e.toDate?e.toDate().toLocaleDateString():new Date(e).toLocaleDateString():"No expiry",A=e=>{switch(e.targetType){case"user_specific":return"User: ".concat(e.targetUserEmail||"Unknown user");case"course_specific":return"Course: ".concat(e.courseTitle||e.courseId);case"general":return"All users";default:return e.targetType}};return(0,_t.jsxs)("div",{className:"admin-coupon-manager",children:[(0,_t.jsx)("h2",{children:"Coupon Management"}),!1,d&&(0,_t.jsx)("div",{className:"error-message",children:d}),m&&(0,_t.jsx)("div",{className:"success-message",children:m}),(0,_t.jsxs)("div",{className:"coupon-tabs",children:[(0,_t.jsx)("button",{onClick:()=>n("create"),className:"tab-button ".concat("create"===t?"active":""),children:"\ud83c\udfab Create Coupon"}),(0,_t.jsx)("button",{onClick:()=>n("manage"),className:"tab-button ".concat("manage"===t?"active":""),children:"\ud83d\udccb Manage Coupons"}),(0,_t.jsx)("button",{onClick:()=>n("stats"),className:"tab-button ".concat("stats"===t?"active":""),children:"\ud83d\udcca Usage Statistics"})]}),(0,_t.jsxs)("div",{className:"coupon-content",children:["create"===t&&(0,_t.jsxs)("div",{className:"coupon-form-container",children:[(0,_t.jsx)("h3",{children:"Create New Coupon"}),(0,_t.jsxs)("form",{onSubmit:E,className:"coupon-form",children:[(0,_t.jsx)("div",{className:"form-row",children:(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Coupon Name *"}),(0,_t.jsx)("input",{type:"text",value:v.name,onChange:e=>N("name",e.target.value),placeholder:"e.g., Summer Sale 2025",required:!0})]})}),(0,_t.jsxs)("div",{className:"coupon-code-section",children:[(0,_t.jsx)("h4",{children:"\ud83c\udfab Coupon Code Configuration"}),(0,_t.jsxs)("div",{className:"form-row",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Custom Code (Optional)"}),(0,_t.jsx)("input",{type:"text",value:v.customCode,onChange:e=>N("customCode",e.target.value.toUpperCase()),placeholder:"e.g., SAVE25, EARLY10, WELCOME50",maxLength:20}),(0,_t.jsx)("small",{children:"Set an exact coupon code (recommended for general use coupons like SAVE25, EARLY10)"})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"OR Random Code Prefix (Optional)"}),(0,_t.jsx)("input",{type:"text",value:v.prefix,onChange:e=>N("prefix",e.target.value.toUpperCase()),placeholder:"e.g., SUMMER",maxLength:10,disabled:v.customCode&&v.customCode.trim()}),(0,_t.jsx)("small",{children:"Prefix for auto-generated code (will add random suffix)"})]})]}),v.customCode&&v.customCode.trim()&&(0,_t.jsxs)("div",{className:"code-preview",children:[(0,_t.jsx)("strong",{children:"Preview Code: "}),(0,_t.jsx)("span",{className:"preview-code",children:v.customCode.toUpperCase()})]}),!v.customCode&&v.prefix&&(0,_t.jsxs)("div",{className:"code-preview",children:[(0,_t.jsx)("strong",{children:"Preview Code: "}),(0,_t.jsxs)("span",{className:"preview-code",children:[v.prefix,"XXXXXX"]}),(0,_t.jsx)("small",{children:" (X's will be replaced with random characters)"})]})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Description"}),(0,_t.jsx)("textarea",{value:v.description,onChange:e=>N("description",e.target.value),placeholder:"Brief description of the coupon",rows:3})]}),(0,_t.jsxs)("div",{className:"form-row",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Discount Type *"}),(0,_t.jsxs)("select",{value:v.discountType,onChange:e=>N("discountType",e.target.value),required:!0,children:[(0,_t.jsx)("option",{value:"percentage",children:"Percentage (%)"}),(0,_t.jsx)("option",{value:"fixed",children:"Fixed Amount ($)"})]})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsxs)("label",{children:["Discount Value *","percentage"===v.discountType?" (1-100)":" ($)"]}),(0,_t.jsx)("input",{type:"number",value:v.discountValue,onChange:e=>N("discountValue",e.target.value),placeholder:"percentage"===v.discountType?"50":"300",min:"1",max:"percentage"===v.discountType?"100":void 0,step:"percentage"===v.discountType?"1":"0.01",required:!0})]})]}),"percentage"===v.discountType&&(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Maximum Discount Amount ($) (Optional)"}),(0,_t.jsx)("input",{type:"number",value:v.maxDiscountAmount,onChange:e=>N("maxDiscountAmount",e.target.value),placeholder:"e.g., 500",min:"0",step:"0.01"}),(0,_t.jsx)("small",{children:"Maximum dollar amount that can be discounted"})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Minimum Order Amount ($) (Optional)"}),(0,_t.jsx)("input",{type:"number",value:v.minOrderAmount,onChange:e=>N("minOrderAmount",e.target.value),placeholder:"e.g., 100",min:"0",step:"0.01"})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Target Type *"}),(0,_t.jsxs)("select",{value:v.targetType,onChange:e=>N("targetType",e.target.value),required:!0,children:[(0,_t.jsx)("option",{value:"general",children:"General (All Users)"}),(0,_t.jsx)("option",{value:"user_specific",children:"User Specific"}),(0,_t.jsx)("option",{value:"course_specific",children:"Course Specific"})]})]}),"user_specific"===v.targetType&&(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Target User *"}),(0,_t.jsxs)("select",{value:v.targetUserId,onChange:e=>N("targetUserId",e.target.value),required:!0,children:[(0,_t.jsx)("option",{value:"",children:"Select a user..."}),o.map(e=>(0,_t.jsxs)("option",{value:e.id,children:[e.displayName||e.email," (",e.email,")"]},e.id))]})]}),"course_specific"===v.targetType&&(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Target Course *"}),(0,_t.jsxs)("select",{value:v.courseId,onChange:e=>N("courseId",e.target.value),required:!0,children:[(0,_t.jsx)("option",{value:"",children:"Select a course..."}),vn.map(e=>(0,_t.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,_t.jsxs)("div",{className:"form-row",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Total Usage Limit (Optional)"}),(0,_t.jsx)("input",{type:"number",value:v.usageLimit,onChange:e=>N("usageLimit",e.target.value),placeholder:"e.g., 100",min:"1"}),(0,_t.jsx)("small",{children:"Maximum number of times this coupon can be used"})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Usage Limit Per User"}),(0,_t.jsx)("input",{type:"number",value:v.usageLimitPerUser,onChange:e=>N("usageLimitPerUser",e.target.value),min:"1",required:!0})]})]}),(0,_t.jsxs)("div",{className:"form-row",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Valid From (Optional)"}),(0,_t.jsx)("input",{type:"datetime-local",value:v.validFrom,onChange:e=>N("validFrom",e.target.value)})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Valid Until (Optional)"}),(0,_t.jsx)("input",{type:"datetime-local",value:v.validUntil,onChange:e=>N("validUntil",e.target.value)})]})]}),"user_specific"===v.targetType&&v.targetUserEmail&&(0,_t.jsxs)("div",{className:"email-options-section",children:[(0,_t.jsx)("h4",{children:"\ud83d\udce7 Email Options"}),(0,_t.jsx)("div",{className:"form-group",children:(0,_t.jsxs)("label",{className:"checkbox-label",children:[(0,_t.jsx)("input",{type:"checkbox",checked:v.sendEmail,onChange:e=>N("sendEmail",e.target.checked)}),(0,_t.jsx)("span",{className:"checkmark"}),"Send coupon code to user via email"]})}),v.sendEmail&&(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Personal Message (Optional)"}),(0,_t.jsx)("textarea",{value:v.emailMessage,onChange:e=>N("emailMessage",e.target.value),placeholder:"Add a personal message to include with the coupon email...",rows:3}),(0,_t.jsx)("small",{children:"This message will be included in the email along with the coupon details."})]})]}),(0,_t.jsx)("button",{type:"submit",disabled:c,className:"create-coupon-btn",children:c?"Creating...":"Create Coupon"})]})]}),"manage"===t&&(0,_t.jsxs)("div",{className:"coupons-list-container",children:[(0,_t.jsx)("h3",{children:"Manage Coupons"}),0===s.length?(0,_t.jsx)("p",{children:"No coupons found."}):(0,_t.jsx)("div",{className:"coupons-table",children:(0,_t.jsxs)("table",{children:[(0,_t.jsx)("thead",{children:(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("th",{children:"Code"}),(0,_t.jsx)("th",{children:"Name"}),(0,_t.jsx)("th",{children:"Discount"}),(0,_t.jsx)("th",{children:"Target"}),(0,_t.jsx)("th",{children:"Usage"}),(0,_t.jsx)("th",{children:"Valid Until"}),(0,_t.jsx)("th",{children:"Created By"}),(0,_t.jsx)("th",{children:"Status"}),(0,_t.jsx)("th",{children:"Actions"})]})}),(0,_t.jsx)("tbody",{children:s.map(t=>(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("td",{className:"coupon-code",children:(0,_t.jsxs)("span",{className:"coupon-code-text",onClick:()=>_(t.code),title:"Click to copy coupon code",children:[t.code," \ud83d\udccb"]})}),(0,_t.jsx)("td",{children:t.name}),(0,_t.jsx)("td",{children:j(t)}),(0,_t.jsx)("td",{children:A(t)}),(0,_t.jsxs)("td",{children:[t.usageCount||0,t.usageLimit&&" / ".concat(t.usageLimit)]}),(0,_t.jsx)("td",{children:T(t.validUntil)}),(0,_t.jsx)("td",{title:t.createdByEmail||"Unknown",children:t.createdByName||t.createdByEmail||"Unknown"}),(0,_t.jsx)("td",{children:(0,_t.jsx)("span",{className:"status-badge status-".concat(t.status),children:t.status})}),(0,_t.jsx)("td",{children:(0,_t.jsxs)("div",{className:"action-buttons",children:["active"===t.status?(0,_t.jsx)("button",{onClick:()=>S(t.id,"inactive"),className:"btn-deactivate",title:"Deactivate",children:"\ud83d\udd34"}):(0,_t.jsx)("button",{onClick:()=>S(t.id,"active"),className:"btn-activate",title:"Activate",children:"\ud83d\udfe2"}),"user_specific"===t.targetType&&t.targetUserEmail&&(0,_t.jsx)("button",{onClick:()=>(async t=>{if("user_specific"===t.targetType&&t.targetUserEmail)try{var n;u(!0);const r=o.find(e=>e.id===t.targetUserId),s=vn.find(e=>e.id===t.courseId),i={recipientName:(null===r||void 0===r?void 0:r.displayName)||(null===r||void 0===r||null===(n=r.email)||void 0===n?void 0:n.split("@")[0])||"Student",recipientEmail:t.targetUserEmail,couponCode:t.code,couponName:t.name,discountType:t.discountType,discountValue:t.discountValue,courseTitle:(null===s||void 0===s?void 0:s.title)||null,courseId:t.courseId||null,validUntil:t.validUntil||null,minOrderAmount:t.minOrderAmount||null,adminMessage:"Your exclusive coupon code is ready to use! This coupon ".concat(t.usageCount>0?"has been used "+t.usageCount+" time(s)":"has not been used yet","."),senderName:(null===e||void 0===e?void 0:e.displayName)||"Admin"},a=await mn(i,t.targetUserId);a.success?f("Coupon email sent successfully!"):a.skipped?h("Email service not configured"):h("Failed to send coupon email: "+a.error)}catch(r){h("Failed to send coupon email")}finally{u(!1)}else h("Can only send emails for user-specific coupons")})(t),className:"btn-email",title:"Send Email",disabled:c,children:"\ud83d\udce7"}),(0,_t.jsx)("button",{onClick:()=>_(t.code),className:"btn-copy",title:"Copy Coupon Code",children:"\ud83d\udccb"}),(0,_t.jsx)("button",{onClick:()=>k(t.code),className:"btn-test",title:"Test Usage Recording",disabled:c,children:"\ud83e\uddea"}),(0,_t.jsx)("button",{onClick:()=>C(t.id),className:"btn-delete",title:"Delete",children:"\ud83d\uddd1\ufe0f"})]})})]},t.id))})]})})]}),"stats"===t&&(0,_t.jsxs)("div",{className:"usage-stats-container",children:[(0,_t.jsx)("h3",{children:"Coupon Usage Statistics"}),p?(0,_t.jsxs)("div",{className:"stats-grid",children:[(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("h4",{children:"Total Usage"}),(0,_t.jsx)("p",{className:"stat-value",children:p.totalUsage})]}),(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("h4",{children:"Total Discount Given"}),(0,_t.jsxs)("p",{className:"stat-value",children:["$",p.totalDiscount.toFixed(2)]})]}),(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("h4",{children:"Total Order Value"}),(0,_t.jsxs)("p",{className:"stat-value",children:["$",p.totalOrders.toFixed(2)]})]}),(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("h4",{children:"Average Discount"}),(0,_t.jsxs)("p",{className:"stat-value",children:["$",p.averageDiscount.toFixed(2)]})]})]}):(0,_t.jsx)("p",{children:"Loading statistics..."}),p&&p.usageRecords.length>0&&(0,_t.jsxs)("div",{className:"recent-usage",children:[(0,_t.jsx)("h4",{children:"Recent Usage"}),(0,_t.jsx)("div",{className:"usage-table",children:(0,_t.jsxs)("table",{children:[(0,_t.jsx)("thead",{children:(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("th",{children:"Date"}),(0,_t.jsx)("th",{children:"Coupon Code"}),(0,_t.jsx)("th",{children:"User"}),(0,_t.jsx)("th",{children:"Course"}),(0,_t.jsx)("th",{children:"Discount"}),(0,_t.jsx)("th",{children:"Order Total"})]})}),(0,_t.jsx)("tbody",{children:p.usageRecords.slice(0,10).map(e=>{var t,n;return(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("td",{children:T(e.usedAt)}),(0,_t.jsx)("td",{className:"coupon-code",children:(0,_t.jsxs)("span",{className:"coupon-code-text",onClick:()=>_(e.couponCode),title:"Click to copy coupon code",children:[e.couponCode," \ud83d\udccb"]})}),(0,_t.jsx)("td",{children:e.userId}),(0,_t.jsx)("td",{children:e.courseId}),(0,_t.jsxs)("td",{children:["$",null===(t=e.discountAmount)||void 0===t?void 0:t.toFixed(2)]}),(0,_t.jsxs)("td",{children:["$",null===(n=e.orderAmount)||void 0===n?void 0:n.toFixed(2)]})]},e.id)})})]})})]})]})]})]})},Fr=()=>{const[e,t]=(0,r.useState)("overview"),[n,s]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),[f,p]=(0,r.useState)(null),[g,v]=(0,r.useState)(""),y=or();(0,r.useEffect)(()=>{b(),w()},[]);const b=async()=>{c(!0);try{const e=(0,Nt.rJ)(xt.db,"enrollments"),t=(0,Nt.P)(e,(0,Nt.My)("enrolledAt","desc")),n=(await(0,Nt.GG)(t)).docs.map(e=>{var t,n;return(0,a.A)((0,a.A)({id:e.id},e.data()),{},{enrolledAt:(null===(t=e.data().enrolledAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date(e.data().enrolledAt)})});s(n)}catch(e){d("Failed to load enrollments: "+e.message)}finally{c(!1)}},w=async()=>{try{const e=await Ct();e.success&&o(e.users)}catch(e){}},x=e=>{const t=i.find(t=>t.id===e);return t?t.displayName||t.email:e};return(0,_t.jsxs)("div",{className:"admin-progress-manager",children:[(0,_t.jsx)("h2",{children:"Progress Tracking Management"}),!y&&(0,_t.jsx)("div",{className:"warning-banner",children:(0,_t.jsxs)("div",{className:"warning-content",children:[(0,_t.jsx)("span",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,_t.jsxs)("div",{className:"warning-text",children:[(0,_t.jsx)("strong",{children:"Progress Tracking System Disabled"}),(0,_t.jsxs)("p",{children:["The progress tracking system is currently disabled in the environment configuration. Progress bars and tracking features will not be visible to users. To enable progress tracking, set ",(0,_t.jsx)("code",{children:"REACT_APP_ENABLE_PROGRESS_TRACKING=true"})," in your .env file."]})]})]})}),u&&(0,_t.jsx)("div",{className:"error-message",children:u}),h&&(0,_t.jsx)("div",{className:"success-message",children:h}),(0,_t.jsxs)("div",{className:"progress-tabs",children:[(0,_t.jsx)("button",{onClick:()=>t("overview"),className:"tab-button ".concat("overview"===e?"active":""),children:"\ud83d\udcca Overview"}),(0,_t.jsx)("button",{onClick:()=>t("manage"),className:"tab-button ".concat("manage"===e?"active":""),children:"\ud83d\udcdd Manage Progress"})]}),(0,_t.jsxs)("div",{className:"progress-content",children:["overview"===e&&(()=>{const e=(()=>{const e={totalEnrollments:n.length,completedCourses:n.filter(e=>e.progress>=100).length,inProgress:n.filter(e=>e.progress>0&&e.progress<100).length,notStarted:n.filter(e=>0===(e.progress||0)).length,averageProgress:0};if(n.length>0){const t=n.reduce((e,t)=>e+(t.progress||0),0);e.averageProgress=(t/n.length).toFixed(1)}return e})();return(0,_t.jsx)("div",{className:"progress-overview",children:(0,_t.jsxs)("div",{className:"stats-grid",children:[(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("h4",{children:"Total Enrollments"}),(0,_t.jsx)("p",{className:"stat-value",children:e.totalEnrollments})]}),(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("h4",{children:"Completed Courses"}),(0,_t.jsx)("p",{className:"stat-value",children:e.completedCourses})]}),(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("h4",{children:"In Progress"}),(0,_t.jsx)("p",{className:"stat-value",children:e.inProgress})]}),(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("h4",{children:"Not Started"}),(0,_t.jsx)("p",{className:"stat-value",children:e.notStarted})]}),(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("h4",{children:"Average Progress"}),(0,_t.jsxs)("p",{className:"stat-value",children:[e.averageProgress,"%"]})]})]})})})(),"manage"===e&&(0,_t.jsxs)("div",{className:"progress-management",children:[(0,_t.jsx)("h3",{children:"Manage Student Progress"}),0===n.length?(0,_t.jsx)("p",{children:"No enrollments found."}):(0,_t.jsx)("div",{className:"enrollments-table",children:(0,_t.jsxs)("table",{children:[(0,_t.jsx)("thead",{children:(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("th",{children:"Student"}),(0,_t.jsx)("th",{children:"Course"}),(0,_t.jsx)("th",{children:"Batch"}),(0,_t.jsx)("th",{children:"Progress"}),(0,_t.jsx)("th",{children:"Enrolled Date"}),(0,_t.jsx)("th",{children:"Actions"})]})}),(0,_t.jsx)("tbody",{children:n.map(e=>{return(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("td",{children:x(e.userId)}),(0,_t.jsx)("td",{children:e.courseTitle}),(0,_t.jsx)("td",{children:(0,_t.jsxs)("span",{className:"batch-badge batch-".concat(e.batchNumber),children:["Batch ",e.batchNumber]})}),(0,_t.jsx)("td",{children:(0,_t.jsxs)("div",{className:"progress-display",children:[(0,_t.jsx)("div",{className:"progress-bar-small",children:(0,_t.jsx)("div",{className:"progress-fill-small",style:{width:"".concat(e.progress||0,"%")}})}),(0,_t.jsxs)("span",{className:"progress-text-small",children:[e.progress||0,"%"]})]})}),(0,_t.jsx)("td",{children:(t=e.enrolledAt,t?t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A")}),(0,_t.jsx)("td",{children:(0,_t.jsx)("button",{onClick:()=>p(e),className:"btn-update-progress",title:"Update Progress",children:"\ud83d\udcdd"})})]},e.id);var t})})]})}),f&&(0,_t.jsx)("div",{className:"modal-overlay",children:(0,_t.jsxs)("div",{className:"progress-update-modal",children:[(0,_t.jsx)("h4",{children:"Update Progress"}),(0,_t.jsxs)("div",{className:"modal-content",children:[(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Student:"})," ",x(f.userId)]}),(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Course:"})," ",f.courseTitle]}),(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Current Progress:"})," ",f.progress||0,"%"]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"New Progress (%)"}),(0,_t.jsx)("input",{type:"number",value:g,onChange:e=>v(e.target.value),placeholder:"Enter progress (0-100)",min:"0",max:"100"})]}),(0,_t.jsxs)("div",{className:"modal-actions",children:[(0,_t.jsx)("button",{onClick:()=>(async e=>{if(!g||g<0||g>100)d("Please enter a valid progress value between 0 and 100");else{c(!0);try{const t=await Fn(e.userId,e.courseId,parseInt(g),e.batchNumber);t.success?(m("Progress updated successfully for ".concat(e.courseTitle)),p(null),v(""),await b()):d(t.error||"Failed to update progress")}catch(t){d("Failed to update progress: "+t.message)}finally{c(!1)}}})(f),disabled:l,className:"btn-confirm",children:l?"Updating...":"Update Progress"}),(0,_t.jsx)("button",{onClick:()=>{p(null),v("")},className:"btn-cancel",children:"Cancel"})]})]})]})})]})]})]})},Ur=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!xt.db)throw new Error("Firestore not initialized");const{searchTerm:n="",searchFields:r=[],filters:s={},orderByField:i="createdAt",orderDirection:o="desc",limitCount:l=100,exactMatch:c=!1,caseSensitive:u=!1}=t;let d=(0,Nt.rJ)(xt.db,e);if(n&&n.trim())d=(0,Nt.P)(d,(0,Nt.AB)(1e3));else{const t=[];if(Object.entries(s).forEach(e=>{let[n,r]=e;null!==r&&void 0!==r&&""!==r&&t.push((0,Nt._M)(n,"==",r))}),i)try{t.push((0,Nt.My)(i,o))}catch(us){}if(t.push((0,Nt.AB)(l)),t.length>0)try{d=(0,Nt.P)(d,...t)}catch(us){d=(0,Nt.P)((0,Nt.rJ)(xt.db,e),(0,Nt.AB)(l))}}const h=await(0,Nt.GG)(d),m=[];h.forEach(e=>{m.push((0,a.A)({id:e.id},e.data()))});let f=m;if(n&&n.trim()&&r.length>0){const e=u?n.trim():n.trim().toLowerCase();f=m.filter(t=>r.some(n=>{const r=Vr(t,n);if(!r)return!1;const s=u?r.toString():r.toString().toLowerCase();return c?s===e:s.includes(e)}))}return{success:!0,results:f,totalCount:f.length,hasMore:h.docs.length===(n?1e3:l)}}catch(n){return{success:!1,error:n.message,results:[],totalCount:0}}},Vr=(e,t)=>t.split(".").reduce((e,t)=>e&&void 0!==e[t]?e[t]:null,e),zr=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["users","coupons","emails_sent","forum_threads","enrollments","payments","coupon_usage","course_reviews"];try{const n=t.map(async t=>{let n=[];switch(t){case"users":n=["email","displayName","firstName","lastName"];break;case"coupons":n=["code","name","description","targetUserEmail"];break;case"emails_sent":n=["recipientEmail","recipientName","subject","courseTitle"];break;case"forum_threads":n=["title","content","authorName"];break;case"enrollments":n=["userEmail","userName","courseId","courseTitle"];break;case"payments":n=["userEmail","courseId","courseTitle","paymentId"];break;case"coupon_usage":n=["couponCode","userEmail","courseId","paymentId"];break;case"course_reviews":n=["userName","userEmail","courseId","courseTitle","comment"];break;default:n=["name","title","email"]}const r=await Ur(t,{searchTerm:e,searchFields:n,limitCount:20});return(0,a.A)({collection:t},r)}),r=await Promise.all(n);return{success:!0,results:r.filter(e=>e.success),errors:r.filter(e=>!e.success)}}catch(n){return{success:!1,error:n.message,results:[]}}},Br=()=>{const[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),u=async()=>{try{const e=await(0,Nt.GG)((0,Nt.rJ)(xt.db,"coupons")),t=[];return e.forEach(e=>{const n=e.data();t.push((0,a.A)({id:e.id},n)),n.code}),t}catch(l){throw l}},d=async()=>{if(e.trim()){o(!0),c("");try{await u();const t=await zr(e);t.success?s(t.results):c(t.error)}catch(t){c("Search failed: "+t.message)}finally{o(!1)}}else s([])},h=(e,t)=>{return null===t||void 0===t?"null":"object"===typeof t&&t.toDate?(n=t)?n.toDate?n.toDate().toLocaleString():new Date(n).toLocaleString():"N/A":"object"===typeof t?JSON.stringify(t,null,2):String(t);var n};return(0,_t.jsxs)("div",{style:{padding:"20px",maxWidth:"1400px",margin:"0 auto"},children:[(0,_t.jsx)("h2",{children:"\ud83d\udd0d Search All Collections"}),(0,_t.jsx)("p",{style:{color:"#666",marginBottom:"20px"},children:"Search across: users, coupons, emails_sent, forum_threads, enrollments, payments, coupon_usage, course_reviews"}),(0,_t.jsxs)("div",{style:{marginBottom:"20px",display:"flex",gap:"10px"},children:[(0,_t.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),onKeyPress:e=>{"Enter"===e.key&&d()},placeholder:"Search across all collections... (try: C4GHPCLDMF8PH9P6)",style:{flex:1,padding:"10px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"16px"}}),(0,_t.jsx)("button",{onClick:d,disabled:i,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:i?"not-allowed":"pointer",fontSize:"16px"},children:i?"Searching...":"Search"}),(0,_t.jsx)("button",{onClick:u,style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"Test Coupons"})]}),(0,_t.jsxs)("div",{style:{marginBottom:"20px",color:"#666",fontSize:"14px"},children:["\ud83d\udca1 ",(0,_t.jsx)("strong",{children:"Debug tip:"})," Open browser console (F12) to see detailed search logs"]}),l&&(0,_t.jsxs)("div",{style:{color:"red",backgroundColor:"#ffebee",padding:"10px",borderRadius:"4px",marginBottom:"20px"},children:["Error: ",l]}),0===n.length&&e.trim()&&!i&&(0,_t.jsxs)("div",{style:{color:"#666",backgroundColor:"#f5f5f5",padding:"20px",borderRadius:"4px",textAlign:"center"},children:['No results found for "',e,'"']}),n.map((e,t)=>(0,_t.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,_t.jsxs)("h3",{style:{color:"#333",borderBottom:"2px solid #007bff",paddingBottom:"10px",marginBottom:"15px"},children:["Collection: ",e.collection," (",e.totalCount," results)"]}),e.results.map((e,t)=>(0,_t.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"4px",marginBottom:"15px",backgroundColor:"#fafafa"},children:[(0,_t.jsxs)("div",{style:{backgroundColor:"#007bff",color:"white",padding:"8px 12px",fontWeight:"bold",borderRadius:"4px 4px 0 0"},children:["Document ID: ",e.id]}),(0,_t.jsx)("div",{style:{padding:"12px"},children:(0,_t.jsx)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:(0,_t.jsx)("tbody",{children:Object.entries(e).filter(e=>{let[t]=e;return"id"!==t}).map(e=>{let[t,n]=e;return(0,_t.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,_t.jsx)("td",{style:{padding:"8px",fontWeight:"bold",backgroundColor:"#f8f9fa",width:"200px",verticalAlign:"top"},children:t}),(0,_t.jsx)("td",{style:{padding:"8px",wordBreak:"break-word",maxWidth:"400px"},children:(0,_t.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"12px",maxHeight:"200px",overflow:"auto"},children:h(0,n)})})]},t)})})})})]},e.id||t))]},t))]})},qr=()=>{const{user:e}=It(),[t,n]=(0,r.useState)("overview"),[s,i]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{if(!e)return i(!1),void o(!1);try{const t=await Vt(e.uid);i(!!t)}catch(t){i(!1)}finally{o(!1)}})()},[e]);const l=e&&["contact@tuneparams.com","abhinaykotla@gmail.com","admin@tuneparams.com"].includes(e.email),c=s||l;return e?a?(0,_t.jsx)("div",{className:"admin-loading",children:(0,_t.jsx)("h2",{children:"Checking admin permissions..."})}):c?(0,_t.jsxs)("div",{className:"admin-container",children:[(0,_t.jsx)("h1",{children:"Admin Dashboard"}),(0,_t.jsxs)("div",{className:"admin-tabs",children:[(0,_t.jsx)("button",{onClick:()=>n("overview"),className:"admin-tab-button ".concat("overview"===t?"active":""),children:"\ud83d\udcca Overview"}),(0,_t.jsx)("button",{onClick:()=>n("payments"),className:"admin-tab-button ".concat("payments"===t?"active":""),children:"\ud83d\udcb3 Payments"}),(0,_t.jsx)("button",{onClick:()=>n("enrollments"),className:"admin-tab-button ".concat("enrollments"===t?"active":""),children:"\ud83d\udcda Enrollments"}),(0,_t.jsx)("button",{onClick:()=>n("emails"),className:"admin-tab-button ".concat("emails"===t?"active":""),children:"\ud83d\udce7 Email Tracking"}),(0,_t.jsx)("button",{onClick:()=>n("coupons"),className:"admin-tab-button ".concat("coupons"===t?"active":""),children:"\ud83c\udfab Coupons"}),(0,_t.jsx)("button",{onClick:()=>n("progress"),className:"admin-tab-button ".concat("progress"===t?"active":""),children:"\ud83d\udcc8 Progress Tracking"}),(0,_t.jsx)("button",{onClick:()=>n("search"),className:"admin-tab-button ".concat("search"===t?"active":""),children:"\ud83d\udd0d Search"}),(0,_t.jsx)("button",{onClick:()=>n("roles"),className:"admin-tab-button ".concat("roles"===t?"active":""),children:"\ud83d\udc51 Role Management"})]}),(0,_t.jsxs)("div",{className:"admin-content",children:["overview"===t&&(0,_t.jsx)(Ir,{}),"payments"===t&&(0,_t.jsx)(Pr,{}),"enrollments"===t&&(0,_t.jsx)(Dr,{}),"emails"===t&&(0,_t.jsx)(Or,{}),"coupons"===t&&(0,_t.jsx)(Mr,{}),"progress"===t&&(0,_t.jsx)(Fr,{}),"search"===t&&(0,_t.jsx)(Br,{}),"roles"===t&&(0,_t.jsx)(Ar,{})]})]}):(0,_t.jsxs)("div",{className:"admin-access-denied",children:[(0,_t.jsx)("h2",{children:"Access Denied"}),(0,_t.jsx)("p",{children:"You don't have permission to access this page."}),(0,_t.jsx)("p",{children:"Please contact an administrator to assign you admin privileges."})]}):(0,_t.jsx)("div",{className:"admin-access-denied",children:(0,_t.jsx)("h2",{children:"Please log in to access admin panel"})})},Hr="general",Wr="courses",Gr="ai_ml",Kr="careers",Qr="projects",Jr="help",Yr={[Hr]:"General Discussion",[Wr]:"Course Discussions",[Gr]:"AI & Machine Learning",[Kr]:"Career Advice",[Qr]:"Project Showcase",[Jr]:"Help & Support"},$r=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{let n;n=e?(0,Nt.P)((0,Nt.rJ)(xt.db,"forum_threads"),(0,Nt._M)("category","==",e),(0,Nt.AB)(t)):(0,Nt.P)((0,Nt.rJ)(xt.db,"forum_threads"),(0,Nt.AB)(t));const r=await(0,Nt.GG)(n),s=[];return r.forEach(e=>{var t,n,r;s.push((0,a.A)((0,a.A)({id:e.id},e.data()),{},{createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),updatedAt:null===(n=e.data().updatedAt)||void 0===n?void 0:n.toDate(),lastReplyAt:null===(r=e.data().lastReplyAt)||void 0===r?void 0:r.toDate()}))}),s.sort((e,t)=>e.createdAt?t.createdAt?t.createdAt.getTime()-e.createdAt.getTime():-1:1),{success:!0,threads:s,lastDoc:r.docs[r.docs.length-1],hasMore:r.docs.length===t}}catch(n){return{success:!1,error:n.message}}},Xr=async e=>{try{const t=(0,Nt.P)((0,Nt.rJ)(xt.db,"forum_replies"),(0,Nt._M)("threadId","==",e)),n=(await(0,Nt.GG)(t)).docs.map(e=>(0,Nt.kd)(e.ref));return await Promise.all(n),await(0,Nt.kd)((0,Nt.H9)(xt.db,"forum_threads",e)),{success:!0}}catch(t){return{success:!1,error:t.message}}},Zr=async(e,t)=>{try{const n=(0,Nt.H9)(xt.db,"forum_threads",e),r=await(0,Nt.x7)(n);if(!r.exists())return{success:!1,error:"Thread not found"};const s=r.data().likedBy||[];if(s.includes(t)){const e=s.filter(e=>e!==t);return await(0,Nt.mZ)(n,{likedBy:e}),{success:!0,liked:!1,likeCount:e.length}}{const e=[...s,t];return await(0,Nt.mZ)(n,{likedBy:e}),{success:!0,liked:!0,likeCount:e.length}}}catch(n){return{success:!1,error:n.message}}},es=e=>{if(!e)return{display:"Unknown",tooltip:"Unknown"};const t=(e=>{if(!e)return"Unknown";const t=new Date-e,n=Math.floor(t/1e3),r=Math.floor(n/60),s=Math.floor(r/60),i=Math.floor(s/24),a=Math.floor(i/7),o=Math.floor(i/30),l=Math.floor(i/365);return n<60?n<=1?"Just now":"".concat(n," seconds ago"):r<60?1===r?"1 minute ago":"".concat(r," minutes ago"):s<24?1===s?"1 hour ago":"".concat(s," hours ago"):i<7?1===i?"1 day ago":"".concat(i," days ago"):a<4?1===a?"1 week ago":"".concat(a," weeks ago"):o<12?1===o?"1 month ago":"".concat(o," months ago"):1===l?"1 year ago":"".concat(l," years ago")})(e);return{display:t,tooltip:e.toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}},ts=e=>{var t,n,s,i;let{thread:a,onClick:o,onDelete:l,onLike:c}=e;const{user:u}=It(),{userRole:d}=Bn(),[h,m]=(0,r.useState)(!1),[f,p]=(0,r.useState)((null===(t=a.likedBy)||void 0===t?void 0:t.length)||0),[g,v]=(0,r.useState)(!!u&&(null===(n=a.likedBy)||void 0===n?void 0:n.includes(u.uid))),y=es(a.createdAt),b=es(a.lastReplyAt),w=u&&(u.uid===a.authorId||"admin"===(null===d||void 0===d?void 0:d.role));return(0,_t.jsxs)("div",{className:"thread-card",onClick:e=>{e.target.closest(".delete-btn")||e.target.closest(".like-btn")||o&&o()},children:[(0,_t.jsxs)("div",{className:"thread-header",children:[(0,_t.jsxs)("div",{className:"thread-title-row",children:[(0,_t.jsxs)("h3",{className:"thread-title",children:[a.isPinned&&(0,_t.jsx)("span",{className:"pin-icon",title:"Pinned",children:"\ud83d\udccc"}),a.title]}),(0,_t.jsx)("span",{className:"thread-category",style:{backgroundColor:"var(--category-".concat(a.category,"-color)")},children:Yr[a.category]||"General"})]}),(0,_t.jsxs)("p",{className:"thread-preview",children:[(N=a.content,(new DOMParser).parseFromString(N,"text/html").body.textContent||"").substring(0,150),"..."]})]}),(0,_t.jsxs)("div",{className:"thread-footer",children:[(0,_t.jsxs)("div",{className:"thread-author",children:[(0,_t.jsxs)("div",{className:"author-avatar",children:[a.authorAvatar?(0,_t.jsx)("img",{src:a.authorAvatar,alt:a.authorName,onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="flex"}}):null,(0,_t.jsx)("div",{className:"default-avatar",style:{display:a.authorAvatar?"none":"flex"},children:null===(s=a.authorName)||void 0===s||null===(i=s.charAt(0))||void 0===i?void 0:i.toUpperCase()})]}),(0,_t.jsxs)("div",{className:"author-info",children:[(0,_t.jsx)("span",{className:"author-name",children:a.authorName}),(0,_t.jsxs)("span",{className:"post-date",title:y.tooltip,children:["posted ",y.display]})]})]}),(0,_t.jsxs)("div",{className:"thread-stats",children:[(0,_t.jsxs)("span",{className:"stat-item",title:"Replies",children:[(0,_t.jsx)("span",{className:"stat-icon",children:"\ud83d\udcac"}),a.replyCount]}),(0,_t.jsxs)("span",{className:"stat-item",title:"Views",children:[(0,_t.jsx)("span",{className:"stat-icon",children:"\ud83d\udc40"}),(x=a.viewCount,Math.round(x||0))]}),(0,_t.jsxs)("button",{className:"like-btn ".concat(g?"liked":""),onClick:async e=>{if(e.stopPropagation(),u){if(!h){m(!0);try{const e=await Zr(a.id,u.uid);e.success&&(v(e.liked),p(e.likeCount),c&&c(a.id,e.liked,e.likeCount))}catch(t){}finally{m(!1)}}}else alert("Please log in to like threads")},disabled:h,title:g?"Unlike":"Like",children:[(0,_t.jsx)("span",{className:"like-icon",children:"\ud83d\udc4d"}),(0,_t.jsx)("span",{className:"like-count",children:f})]}),a.lastReplyAt&&a.lastReplyAt.getTime()!==a.createdAt.getTime()&&(0,_t.jsxs)("span",{className:"stat-item",title:"Last reply: ".concat(b.tooltip),children:[(0,_t.jsx)("span",{className:"stat-icon",children:"\u23f1\ufe0f"}),b.display]}),w&&(0,_t.jsx)("button",{className:"delete-btn thread-stats-delete",onClick:async e=>{e.stopPropagation(),window.confirm("Are you sure you want to delete this thread? This action cannot be undone.")&&l&&await l(a.id)},title:"Delete thread",children:"\ud83d\uddd1\ufe0f"})]})]})]});var x,N},ns=e=>{let{onClose:t,onThreadCreated:n}=e;const{user:s}=It(),[i,o]=(0,r.useState)({title:"",content:"",category:Hr,tags:""}),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)({}),h=e=>{const{name:t,value:n}=e.target;o(e=>(0,a.A)((0,a.A)({},e),{},{[t]:n})),u[t]&&d(e=>(0,a.A)((0,a.A)({},e),{},{[t]:""}))};return(0,_t.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,_t.jsxs)("div",{className:"modal-content create-thread-modal",onClick:e=>e.stopPropagation(),children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsxs)("div",{className:"modal-header-content",children:[(0,_t.jsx)("h2",{children:"Start a New Discussion"}),(0,_t.jsx)("p",{className:"modal-subtitle",children:"Share your thoughts and connect with the community"})]}),(0,_t.jsx)("button",{onClick:t,className:"close-btn","aria-label":"Close modal",children:"\xd7"})]}),(0,_t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return i.title.trim()?i.title.length<5?e.title="Title must be at least 5 characters long":i.title.length>200&&(e.title="Title must be less than 200 characters long"):e.title="Title is required",i.content.trim()?i.content.length<10?e.content="Content must be at least 10 characters long":i.content.length>5e3&&(e.content="Content must be less than 5000 characters long"):e.content="Content is required",d(e),0===Object.keys(e).length})()){c(!0);try{const e=(0,a.A)((0,a.A)({},i),{},{tags:i.tags.split(",").map(e=>e.trim()).filter(Boolean),authorId:s.uid,authorEmail:s.email,authorName:s.name||s.displayName||"Anonymous",authorAvatar:s.photoURL||null}),t=await(async e=>{try{return{success:!0,id:(await(0,Nt.gS)((0,Nt.rJ)(xt.db,"forum_threads"),(0,a.A)((0,a.A)({},e),{},{createdAt:(0,Nt.O5)(),updatedAt:(0,Nt.O5)(),viewCount:0,replyCount:0,isPinned:!1,isLocked:!1,likedBy:[],reportedBy:[],lastReplyAt:(0,Nt.O5)()}))).id}}catch(t){return{success:!1,error:t.message}}})(e);t.success?n():d({form:t.error})}catch(t){d({form:"An unexpected error occurred."})}finally{c(!1)}}},className:"modal-form",children:[(0,_t.jsx)("div",{className:"form-row",children:(0,_t.jsxs)("div",{className:"form-group form-group-title",children:[(0,_t.jsxs)("label",{htmlFor:"title",children:[(0,_t.jsx)("span",{className:"label-text",children:"Discussion Title"}),(0,_t.jsx)("span",{className:"label-required",children:"*"})]}),(0,_t.jsx)("input",{type:"text",id:"title",name:"title",value:i.title,onChange:h,placeholder:"Enter a clear and descriptive title...",className:u.title?"input-error":"",maxLength:"200",required:!0}),(0,_t.jsxs)("div",{className:"input-helper-row",children:[(0,_t.jsx)("small",{className:"input-helper",children:"A good title helps others understand your discussion"}),(0,_t.jsxs)("small",{className:"char-counter",children:[i.title.length,"/200"]})]}),u.title&&(0,_t.jsx)("p",{className:"error-text",children:u.title})]})}),(0,_t.jsx)("div",{className:"form-row",children:(0,_t.jsxs)("div",{className:"form-group form-group-category",children:[(0,_t.jsxs)("label",{htmlFor:"category",children:[(0,_t.jsx)("span",{className:"label-text",children:"Category"}),(0,_t.jsx)("span",{className:"label-required",children:"*"})]}),(0,_t.jsx)("select",{id:"category",name:"category",value:i.category,onChange:h,className:"select-styled",children:Object.entries(Yr).map(e=>{let[t,n]=e;return(0,_t.jsx)("option",{value:t,children:n},t)})})]})}),(0,_t.jsx)("div",{className:"form-row",children:(0,_t.jsxs)("div",{className:"form-group form-group-content",children:[(0,_t.jsxs)("label",{htmlFor:"content",children:[(0,_t.jsx)("span",{className:"label-text",children:"Content"}),(0,_t.jsx)("span",{className:"label-required",children:"*"})]}),(0,_t.jsxs)("div",{className:"content-input-wrapper",children:[(0,_t.jsx)("textarea",{id:"content",name:"content",value:i.content,onChange:h,placeholder:"Share your thoughts, questions, or ideas with the community. Be descriptive and helpful to get the best responses...",rows:"10",className:u.content?"input-error":"",maxLength:"5000",required:!0}),(0,_t.jsx)("div",{className:"content-helper",children:(0,_t.jsxs)("div",{className:"helper-row",children:[(0,_t.jsx)("small",{children:"Tip: Use clear formatting and provide context for better engagement"}),(0,_t.jsxs)("small",{className:"char-counter",children:[i.content.length,"/5000 characters"]})]})})]}),u.content&&(0,_t.jsx)("p",{className:"error-text",children:u.content})]})}),(0,_t.jsx)("div",{className:"form-row",children:(0,_t.jsxs)("div",{className:"form-group form-group-tags",children:[(0,_t.jsxs)("label",{htmlFor:"tags",children:[(0,_t.jsx)("span",{className:"label-text",children:"Tags"}),(0,_t.jsx)("span",{className:"label-optional",children:"(optional)"})]}),(0,_t.jsx)("input",{type:"text",id:"tags",name:"tags",value:i.tags,onChange:h,placeholder:"e.g., python, machine-learning, career-advice",className:"tags-input"}),(0,_t.jsx)("small",{className:"input-helper",children:"Separate tags with commas to help others find your discussion"})]})}),u.form&&(0,_t.jsxs)("div",{className:"form-error-container",children:[(0,_t.jsx)("div",{className:"form-error-icon",children:"\u26a0\ufe0f"}),(0,_t.jsx)("p",{className:"error-text form-error",children:u.form})]}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)("button",{type:"button",className:"btn-secondary",onClick:t,children:"Cancel"}),(0,_t.jsx)("button",{type:"submit",className:"btn-primary",disabled:l,children:l?(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)("span",{className:"loading-spinner-small"}),"Posting..."]}):"Post Discussion"})]})]})]})})};class rs extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){var e;return this.state.hasError?(0,_t.jsx)("div",{className:"forum-container",children:(0,_t.jsxs)("div",{className:"error-state",children:[(0,_t.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,_t.jsx)("h3",{children:"Something went wrong"}),(0,_t.jsx)("p",{children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,_t.jsx)("button",{className:"create-thread-btn",onClick:()=>this.setState({hasError:!1,error:null}),children:"Try Again"})]})}):this.props.children}}const ss=()=>{const{user:e}=It(),t=ue(),[n,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(""),[h,m]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!0),[g,v]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)(null),N=(0,r.useRef)(null);(0,r.useEffect)(()=>{N.current=g},[g]);const E=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];o(!0),x(null);try{const t=e?null:N.current,n=await $r(l,10,t);n.success?(s(t=>e?n.threads:[...t,...n.threads]),p(n.hasMore),v(n.lastDoc)):(x(n.error),s([]),p(!1))}catch(w){x(w.message),s([]),p(!1)}finally{o(!1)}},[l]);(0,r.useEffect)(()=>{document.title="Community Forums - TuneParams.ai";const e=document.querySelector('link[rel="icon"]'),t=Date.now();if(e)e.href="/favicon.ico?v=".concat(t);else{const e=document.createElement("link");e.rel="icon",e.href="/favicon.ico?v=".concat(t),e.type="image/x-icon",document.head.appendChild(e)}let n=document.querySelector('link[rel="shortcut icon"]');n?n.href="/favicon.ico?v=".concat(t):(n=document.createElement("link"),n.rel="shortcut icon",n.href="/favicon.ico?v=".concat(t),n.type="image/x-icon",document.head.appendChild(n))},[]),(0,r.useEffect)(()=>{b(!1),v(null),N.current=null;(async()=>{o(!0),x(null);try{const e=await $r(l,10,null);e.success?(s(e.threads),p(e.hasMore),v(e.lastDoc)):(x(e.error),s([]),p(!1))}catch(w){x(w.message),s([]),p(!1)}finally{o(!1)}})()},[l]);const S=async e=>{if(e&&(e.preventDefault(),e.stopPropagation()),!u||!u.trim())return b(!1),d(""),void E(!0);o(!0),b(!0),x(null);try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let n;n=t?(0,Nt.P)((0,Nt.rJ)(xt.db,"forum_threads"),(0,Nt._M)("category","==",t)):(0,Nt.P)((0,Nt.rJ)(xt.db,"forum_threads"));const r=await(0,Nt.GG)(n),s=[],i=e.toLowerCase();return r.forEach(e=>{const t=e.data();var n,r,o;(t.title.toLowerCase().includes(i)||t.content.toLowerCase().includes(i))&&s.push((0,a.A)((0,a.A)({id:e.id},t),{},{createdAt:null===(n=t.createdAt)||void 0===n?void 0:n.toDate(),updatedAt:null===(r=t.updatedAt)||void 0===r?void 0:r.toDate(),lastReplyAt:null===(o=t.lastReplyAt)||void 0===o?void 0:o.toDate()}))}),s.sort((e,t)=>e.createdAt?t.createdAt?t.createdAt.getTime()-e.createdAt.getTime():-1:1),{success:!0,threads:s.slice(0,20)}}catch(w){return{success:!1,error:w.message}}}(u.trim(),l);e.success?(s(e.threads),p(!1)):x(e.error||"Search failed")}catch(w){x(w.message||"An error occurred during search")}finally{o(!1)}},C=()=>{e?m(!0):t("/login")},k=async e=>{o(!0);try{(await Xr(e)).success?s(t=>t.filter(t=>t.id!==e)):alert("Failed to delete thread. Please try again.")}catch(w){alert("An error occurred while deleting the thread.")}finally{o(!1)}},_=(t,n,r)=>{s(r=>r.map(r=>r.id===t?(0,a.A)((0,a.A)({},r),{},{likedBy:n?[...r.likedBy||[],e.uid]:(r.likedBy||[]).filter(t=>t!==e.uid)}):r))};return(0,_t.jsxs)("div",{className:"forum-container",children:[(0,_t.jsxs)("div",{className:"forum-header",children:[(0,_t.jsxs)("div",{className:"forum-title",children:[(0,_t.jsx)("h1",{children:"Community Forums"}),(0,_t.jsx)("p",{children:"Join the conversation and connect with fellow learners"})]}),(0,_t.jsxs)("div",{className:"forum-header-actions",children:[(0,_t.jsxs)("div",{className:"search-form-compact",children:[(0,_t.jsx)("input",{type:"text",placeholder:"Search discussions...",value:u,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),S())},className:"search-input-compact"}),(0,_t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),S()},className:"search-btn-compact",children:"\ud83d\udd0d"}),u&&(0,_t.jsx)("button",{type:"button",onClick:()=>{d(""),b(!1),E(!0)},className:"search-btn-compact clear-btn",children:"\u2715"})]}),(0,_t.jsx)("button",{className:"create-thread-btn",onClick:C,children:e?"Start New Discussion":"Login to Post"})]})]}),(0,_t.jsx)("div",{className:"forum-controls",children:(0,_t.jsxs)("div",{className:"category-filter",children:[(0,_t.jsx)("button",{className:"category-btn ".concat(null===l?"active":""),onClick:()=>c(null),children:"All Categories"}),Object.entries(Yr).map(e=>{let[t,n]=e;return(0,_t.jsx)("button",{className:"category-btn ".concat(l===t?"active":""),onClick:()=>c(t),children:n},t)})]})}),(0,_t.jsx)("div",{className:"forum-content",children:w?(0,_t.jsxs)("div",{className:"error-state",children:[(0,_t.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,_t.jsx)("h3",{children:"Error Loading Forum"}),(0,_t.jsx)("p",{children:w}),(0,_t.jsx)("button",{className:"create-thread-btn",onClick:()=>{x(null),E(!0)},children:"Try Again"})]}):i&&0===n.length?(0,_t.jsxs)("div",{className:"loading-state",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{children:"Loading discussions..."})]}):0===n.length?(0,_t.jsxs)("div",{className:"empty-state",children:[(0,_t.jsx)("div",{className:"empty-icon",children:"\ud83d\udcac"}),(0,_t.jsx)("h3",{children:"No discussions found"}),(0,_t.jsx)("p",{children:y?"Try a different search term.":"Be the first to start a discussion!"}),!y&&(0,_t.jsx)("button",{className:"create-thread-btn",onClick:C,children:e?"Start First Discussion":"Login to Post"})]}):(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)("div",{className:"threads-list",children:n.map(e=>(0,_t.jsx)(ts,{thread:e,onClick:()=>t("/forums/thread/".concat(e.id)),onDelete:k,onLike:_},e.id))}),f&&!y&&(0,_t.jsx)("button",{className:"load-more-btn",onClick:()=>E(),disabled:i,children:i?"Loading...":"Load More"})]})}),h&&(0,_t.jsx)(ns,{onClose:()=>m(!1),onThreadCreated:()=>{m(!1),E(!0)}})]})},is=()=>(0,_t.jsx)(rs,{children:(0,_t.jsx)(ss,{})}),as=e=>{var t,n,s,i;let{reply:a,onDelete:o,onLike:l}=e;const{user:c}=It(),{userRole:u}=Bn(),[d,h]=(0,r.useState)(!1),[m,f]=(0,r.useState)((null===(t=a.likedBy)||void 0===t?void 0:t.length)||0),[p,g]=(0,r.useState)(!!c&&(null===(n=a.likedBy)||void 0===n?void 0:n.includes(c.uid))),v=es(a.createdAt),y=c&&(c.uid===a.authorId||"admin"===(null===u||void 0===u?void 0:u.role));return(0,_t.jsxs)("div",{className:"reply-card",children:[(0,_t.jsxs)("div",{className:"reply-author",children:[(0,_t.jsxs)("div",{className:"author-avatar-reply",children:[a.authorAvatar?(0,_t.jsx)("img",{src:a.authorAvatar,alt:a.authorName,onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="flex"}}):null,(0,_t.jsx)("div",{className:"default-avatar-reply",style:{display:a.authorAvatar?"none":"flex"},children:(null===(s=a.authorName)||void 0===s||null===(i=s.charAt(0))||void 0===i?void 0:i.toUpperCase())||"A"})]}),(0,_t.jsxs)("div",{className:"author-info-reply",children:[(0,_t.jsx)("span",{className:"author-name-reply",children:a.authorName||"Anonymous"}),(0,_t.jsx)("span",{className:"post-date-reply",title:v.tooltip,children:v.display})]})]}),(0,_t.jsxs)("div",{className:"reply-content-wrapper",children:[(0,_t.jsx)("div",{className:"reply-content",dangerouslySetInnerHTML:{__html:a.content}}),(0,_t.jsxs)("div",{className:"reply-footer",children:[(0,_t.jsxs)("button",{className:"like-btn reply-like-btn ".concat(p?"liked":""),onClick:async e=>{if(e.stopPropagation(),c){if(!d){h(!0);try{const e=await(async(e,t)=>{try{const n=(0,Nt.H9)(xt.db,"forum_replies",e),r=await(0,Nt.x7)(n);if(!r.exists())return{success:!1,error:"Reply not found"};const s=r.data().likedBy||[];if(s.includes(t)){const e=s.filter(e=>e!==t);return await(0,Nt.mZ)(n,{likedBy:e}),{success:!0,liked:!1,likeCount:e.length}}{const e=[...s,t];return await(0,Nt.mZ)(n,{likedBy:e}),{success:!0,liked:!0,likeCount:e.length}}}catch(n){return{success:!1,error:n.message}}})(a.id,c.uid);e.success&&(g(e.liked),f(e.likeCount),l&&l(a.id,e.liked,e.likeCount))}catch(t){}finally{h(!1)}}}else alert("Please log in to like replies")},disabled:d,title:p?"Unlike":"Like",children:[(0,_t.jsx)("span",{className:"like-icon",children:"\ud83d\udc4d"}),(0,_t.jsx)("span",{className:"like-count",children:m})]}),y&&(0,_t.jsx)("button",{className:"delete-btn reply-delete-btn",onClick:async e=>{e.stopPropagation(),window.confirm("Are you sure you want to delete this reply? This action cannot be undone.")&&o&&await o(a.id)},title:"Delete reply",children:"\ud83d\uddd1\ufe0f"})]})]})]})},os=e=>{let{threadId:t,onReplyPosted:n}=e;const{user:s}=It(),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null);return(0,_t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.trim()){c(!0),d(null);try{const e={threadId:t,content:i,authorId:s.uid,authorEmail:s.email,authorName:s.name||s.displayName||"Anonymous",authorAvatar:s.photoURL||null},r=await(async e=>{try{const t=await(0,Nt.gS)((0,Nt.rJ)(xt.db,"forum_replies"),(0,a.A)((0,a.A)({},e),{},{createdAt:(0,Nt.O5)(),updatedAt:(0,Nt.O5)(),likedBy:[],reportedBy:[]})),n=(0,Nt.H9)(xt.db,"forum_threads",e.threadId);return await(0,Nt.mZ)(n,{replyCount:(0,Nt.GV)(1),lastReplyAt:(0,Nt.O5)(),lastReplyBy:e.authorName}),{success:!0,id:t.id}}catch(u){return{success:!1,error:u.message}}})(e);r.success?(o(""),n()):d(r.error)}catch(r){d("Failed to post reply.")}finally{c(!1)}}else d("Reply cannot be empty.")},className:"reply-form",children:[(0,_t.jsx)("h3",{children:"Leave a Reply"}),(0,_t.jsx)("textarea",{value:i,onChange:e=>o(e.target.value),placeholder:"Write your reply... You can use basic HTML for formatting.",rows:"5",required:!0}),u&&(0,_t.jsx)("p",{className:"error-text",children:u}),(0,_t.jsx)("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Posting...":"Post Reply"})]})},ls=()=>{var e,t,n,s,i;const{threadId:o}=de(),{user:l}=It(),{userRole:c}=Bn(),u=ue(),[d,h]=(0,r.useState)(null),[m,f]=(0,r.useState)([]),[p,g]=(0,r.useState)(!0),[v,y]=(0,r.useState)(null),b=(0,r.useCallback)(async()=>{g(!0),y(null);try{const e=await(async e=>{try{const i=(0,Nt.H9)(xt.db,"forum_threads",e),o=await(0,Nt.x7)(i);if(o.exists()){var t,n,r;try{await(0,Nt.mZ)(i,{viewCount:(0,Nt.GV)(.5)})}catch(s){}return{success:!0,thread:(0,a.A)((0,a.A)({id:o.id},o.data()),{},{createdAt:null===(t=o.data().createdAt)||void 0===t?void 0:t.toDate(),updatedAt:null===(n=o.data().updatedAt)||void 0===n?void 0:n.toDate(),lastReplyAt:null===(r=o.data().lastReplyAt)||void 0===r?void 0:r.toDate()})}}return{success:!1,error:"Thread not found"}}catch(v){return{success:!1,error:v.message}}})(o);if(e.success){h(e.thread);const t=await(async e=>{try{const t=(0,Nt.P)((0,Nt.rJ)(xt.db,"forum_replies"),(0,Nt._M)("threadId","==",e)),n=await(0,Nt.GG)(t),r=[];return n.forEach(e=>{var t,n;r.push((0,a.A)((0,a.A)({id:e.id},e.data()),{},{createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),updatedAt:null===(n=e.data().updatedAt)||void 0===n?void 0:n.toDate()}))}),r.sort((e,t)=>e.createdAt?t.createdAt?e.createdAt.getTime()-t.createdAt.getTime():-1:1),{success:!0,replies:r}}catch(v){return{success:!1,error:v.message}}})(o);t.success?f(t.replies):(y("Failed to load replies: ".concat(t.error)),f([]))}else y("Failed to load thread: ".concat(e.error))}catch(e){y("Failed to load thread data.")}finally{g(!1)}},[o]);(0,r.useEffect)(()=>{b()},[b]);const w=async e=>{try{const t=await(async(e,t)=>{try{await(0,Nt.kd)((0,Nt.H9)(xt.db,"forum_replies",e));const n=(0,Nt.H9)(xt.db,"forum_threads",t);return await(0,Nt.mZ)(n,{replyCount:(0,Nt.GV)(-1)}),{success:!0}}catch(v){return{success:!1,error:v.message}}})(e,o);t.success?(f(t=>t.filter(t=>t.id!==e)),h(e=>(0,a.A)((0,a.A)({},e),{},{replyCount:Math.max(0,e.replyCount-1)}))):alert("Failed to delete reply. Please try again.")}catch(v){alert("An error occurred while deleting the reply.")}},x=(e,t,n)=>{f(n=>n.map(n=>n.id===e?(0,a.A)((0,a.A)({},n),{},{likedBy:t?[...n.likedBy||[],l.uid]:(n.likedBy||[]).filter(e=>e!==l.uid)}):n))};if(p)return(0,_t.jsxs)("div",{className:"loading-state-detail",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{children:"Loading discussion..."})]});if(v)return(0,_t.jsxs)("div",{className:"error-state-detail",children:[(0,_t.jsx)("h3",{children:"Error"}),(0,_t.jsx)("p",{children:v}),(0,_t.jsx)(mt,{to:"/forums",className:"btn-primary",children:"Back to Forums"})]});if(!d)return null;const N=es(d.createdAt),E=l&&(l.uid===d.authorId||"admin"===(null===c||void 0===c?void 0:c.role));return(0,_t.jsxs)("div",{className:"thread-detail-container",children:[(0,_t.jsxs)("div",{className:"thread-detail-header",children:[(0,_t.jsxs)("div",{className:"thread-header-top",children:[(0,_t.jsx)(mt,{to:"/forums",className:"back-link",children:"\u2190 Back to Forums"}),E&&(0,_t.jsx)("button",{className:"delete-btn thread-delete-btn",onClick:async()=>{if(window.confirm("Are you sure you want to delete this thread? This action cannot be undone."))try{(await Xr(o)).success?u("/forums"):alert("Failed to delete thread. Please try again.")}catch(v){alert("An error occurred while deleting the thread.")}},title:"Delete thread",children:"\ud83d\uddd1\ufe0f Delete Thread"})]}),(0,_t.jsx)("h1",{children:d.title}),(0,_t.jsxs)("div",{className:"thread-meta",children:[(0,_t.jsxs)("div",{className:"author-info-detail",children:[(0,_t.jsxs)("div",{className:"author-avatar-detail",children:[d.authorAvatar?(0,_t.jsx)("img",{src:d.authorAvatar,alt:d.authorName,onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,_t.jsx)("div",{className:"default-avatar-detail",style:{display:d.authorAvatar?"none":"flex"},children:(null===(e=d.authorName)||void 0===e||null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase())||"A"})]}),(0,_t.jsxs)("span",{children:["By ",d.authorName]})]}),(0,_t.jsx)("span",{children:"\u2022"}),(0,_t.jsx)("span",{title:N.tooltip,children:N.display})]})]}),(0,_t.jsx)("div",{className:"thread-content-detail",dangerouslySetInnerHTML:{__html:d.content}}),(0,_t.jsx)("div",{className:"thread-actions",children:(0,_t.jsxs)("button",{className:"like-btn thread-like-btn ".concat(null!==(n=d.likedBy)&&void 0!==n&&n.includes(null===l||void 0===l?void 0:l.uid)?"liked":""),onClick:async()=>{if(l)try{const e=await Zr(o,l.uid);e.success&&h(t=>(0,a.A)((0,a.A)({},t),{},{likedBy:e.liked?[...t.likedBy||[],l.uid]:(t.likedBy||[]).filter(e=>e!==l.uid)}))}catch(v){}else alert("Please log in to like threads")},title:null!==(s=d.likedBy)&&void 0!==s&&s.includes(null===l||void 0===l?void 0:l.uid)?"Unlike":"Like",children:[(0,_t.jsx)("span",{className:"like-icon",children:"\ud83d\udc4d"}),(0,_t.jsx)("span",{className:"like-count",children:(null===(i=d.likedBy)||void 0===i?void 0:i.length)||0})]})}),(0,_t.jsxs)("div",{className:"replies-section",children:[(0,_t.jsxs)("h2",{children:[m.length," ",1===m.length?"Reply":"Replies"]}),(0,_t.jsx)("div",{className:"replies-list",children:m.map(e=>(0,_t.jsx)(as,{reply:e,onDelete:w,onLike:x},e.id))})]}),(0,_t.jsx)("div",{className:"reply-form-section",children:l?(0,_t.jsx)(os,{threadId:o,onReplyPosted:()=>{b()}}):(0,_t.jsxs)("div",{className:"login-prompt",children:[(0,_t.jsx)("p",{children:"You must be logged in to reply."}),(0,_t.jsx)(mt,{to:"/login",className:"btn-primary",children:"Login to Reply"})]})})]})};const cs=function(){return(0,_t.jsx)(Tt,{children:(0,_t.jsx)(dt,{children:(0,_t.jsxs)("div",{className:"app-container",children:[(0,_t.jsx)(Bt,{}),(0,_t.jsx)("main",{children:(0,_t.jsxs)(Te,{children:[(0,_t.jsx)(_e,{path:"/",element:(0,_t.jsx)(Wn,{})}),(0,_t.jsx)(_e,{path:"/courses",element:(0,_t.jsx)(ar,{})}),(0,_t.jsx)(_e,{path:"/courses/:courseId",element:(0,_t.jsx)(xr,{})}),(0,_t.jsx)(_e,{path:"/course/:courseId/dashboard",element:(0,_t.jsx)(Ht,{children:(0,_t.jsx)(Nr,{})})}),(0,_t.jsx)(_e,{path:"/dashboard",element:(0,_t.jsx)(Ht,{children:(0,_t.jsx)(Er,{})})}),(0,_t.jsx)(_e,{path:"/contact",element:(0,_t.jsx)(Sr,{})}),(0,_t.jsx)(_e,{path:"/about",element:(0,_t.jsx)(Cr,{})}),(0,_t.jsx)(_e,{path:"/about-us",element:(0,_t.jsx)(Cr,{})}),(0,_t.jsx)(_e,{path:"/forums",element:(0,_t.jsx)(is,{})}),(0,_t.jsx)(_e,{path:"/forums/thread/:threadId",element:(0,_t.jsx)(ls,{})}),(0,_t.jsx)(_e,{path:"/login",element:(0,_t.jsx)(kr,{})}),(0,_t.jsx)(_e,{path:"/register",element:(0,_t.jsx)(_r,{})}),(0,_t.jsx)(_e,{path:"/verify-email",element:(0,_t.jsx)(jr,{})}),(0,_t.jsx)(_e,{path:"/forgot-password",element:(0,_t.jsx)(Tr,{})}),(0,_t.jsx)(_e,{path:"/admin/dashboard",element:(0,_t.jsx)(Ht,{children:(0,_t.jsx)(qr,{})})}),(0,_t.jsx)(_e,{path:"*",element:(0,_t.jsx)(ke,{to:"/",replace:!0})})]})}),(0,_t.jsx)(qt,{})]})})})};s.createRoot(document.getElementById("root")).render((0,_t.jsx)(r.StrictMode,{children:(0,_t.jsx)(At,{children:(0,_t.jsx)(cs,{})})}))})();
//# sourceMappingURL=main.717a6904.js.map