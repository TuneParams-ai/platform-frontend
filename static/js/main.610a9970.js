/*! For license information please see main.610a9970.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),s=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var j=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===j?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case N:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case p:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return P(e(t))}catch(To){}}return null}var R=Array.isArray,D=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},M=[],F=-1;function U(e){return{current:e}}function V(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var B=U(null),q=U(null),H=U(null),W=U(null);function G(e,t){switch(z(H,t),z(q,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ad(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(B),z(B,e)}function K(){V(B),V(q),V(H)}function Q(e){null!==e.memoizedState&&z(W,e);var t=B.current,n=ad(t,e.type);t!==n&&(z(q,e),z(B,n))}function Y(e){q.current===e&&(V(B),V(q)),W.current===e&&(V(W),Yd._currentValue=O)}var $=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,X=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,se=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,ae=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(me(e)/pe|0)|0},me=Math.log,pe=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=ye(r):0!==(a&=o)?s=ye(a):n||0!==(n=o&~e)&&(s=ye(n)):0!==(o=r&~i)?s=ye(o):0!==a?s=ye(a):n||0!==(n=r&~e)&&(s=ye(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ee(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Ne(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _e(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Te(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var je=Math.random().toString(36).slice(2),Pe="__reactFiber$"+je,Re="__reactProps$"+je,De="__reactContainer$"+je,Le="__reactEvents$"+je,Oe="__reactListeners$"+je,Me="__reactHandles$"+je,Fe="__reactResources$"+je,Ue="__reactMarker$"+je;function Ve(e){delete e[Pe],delete e[Re],delete e[Le],delete e[Oe],delete e[Me]}function ze(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[De]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Pe])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Pe]||e[De]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Ue]=!0}var Ge=new Set,Ke={};function Qe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ke[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var $e,Je,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(s=t,$.call(et,s)||!$.call(Ze,s)&&(Xe.test(s)?et[s]=!0:(Ze[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===$e)try{throw Error()}catch(To){var t=To.stack.trim().match(/\n( *(at )?)/);$e=t&&t[1]||"",Je=-1<To.stack.indexOf("\n    at")?" (<anonymous>)":-1<To.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+$e+e+Je}var it=!1;function at(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(To){var r=To}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(To){return"\nError generating stack: "+To.message+"\n"+To.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function pt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?yt(e,a,ct(t)):null!=n?yt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,n,r,s,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function yt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(R(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function kt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&Nt(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&Nt(e,i,t[i])}function _t(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function jt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Rt=null;function Dt(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Re]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Re]||null;if(!s)throw Error(a(90));gt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Lt=!1;function Ot(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Pt||null!==Rt)&&(Bc(),Pt&&(t=Pt,e=Rt,Rt=Pt=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Re]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Ft)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Dh){Ut=!1}var zt=null,Bt=null,qt=null;function Ht(){if(qt)return qt;var e,t,n=Bt,r=n.length,s="value"in zt?zt.value:zt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return qt=s.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Kt(){return!1}function Qt(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Gt:Kt,this.isPropagationStopped=Kt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Yt,$t,Jt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Qt(Xt),en=h({},Xt,{view:0,detail:0}),tn=Qt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Yt=e.screenX-Jt.screenX,$t=e.screenY-Jt.screenY):$t=Yt=0,Jt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),rn=Qt(nn),sn=Qt(h({},nn,{dataTransfer:0})),an=Qt(h({},en,{relatedTarget:0})),on=Qt(h({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Qt(h({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Qt(h({},Xt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function mn(){return fn}var pn=Qt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Qt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Qt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),yn=Qt(h({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Qt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Qt(h({},Xt,{newState:0,oldState:0})),xn=[9,13,27,32],En=Ft&&"CompositionEvent"in window,Sn=null;Ft&&"documentMode"in document&&(Sn=document.documentMode);var Nn=Ft&&"TextEvent"in window&&!Sn,kn=Ft&&(!En||Sn&&8<Sn&&11>=Sn),_n=String.fromCharCode(32),Cn=!1;function Tn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Rn(e,t,n,r){Pt?Rt?Rt.push(r):Rt=[r]:Pt=r,0<(t=Wu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Dn=null,Ln=null;function On(e){Mu(e,0)}function Mn(e){if(ht(qe(e)))return e}function Fn(e,t){if("change"===e)return t}var Un=!1;if(Ft){var Vn;if(Ft){var zn="oninput"in document;if(!zn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),zn="function"===typeof Bn.oninput}Vn=zn}else Vn=!1;Un=Vn&&(!document.documentMode||9<document.documentMode)}function qn(){Dn&&(Dn.detachEvent("onpropertychange",Hn),Ln=Dn=null)}function Hn(e){if("value"===e.propertyName&&Mn(Ln)){var t=[];Rn(t,Ln,e,jt(e)),Ot(On,t)}}function Wn(e,t,n){"focusin"===e?(qn(),Ln=n,(Dn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&qn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(Ln)}function Kn(e,t){if("click"===e)return Mn(t)}function Qn(e,t){if("input"===e||"change"===e)return Mn(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$.call(t,s)||!Yn(e[s],t[s]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,r=Jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,sr=null,ir=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&$n(ir,r)||(ir=r,0<(r=Wu(sr,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),mr=hr("animationiteration"),pr=hr("animationstart"),gr=hr("transitionrun"),vr=hr("transitionstart"),yr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){wr.set(e,t),Qe(t,[e])}xr.push("scrollEnd");var Sr=new WeakMap;function Nr(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var kr=[],_r=0,Cr=0;function Tr(){for(var e=_r,t=Cr=_r=0;t<e;){var n=kr[t];kr[t++]=null;var r=kr[t];kr[t++]=null;var s=kr[t];kr[t++]=null;var i=kr[t];if(kr[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&Pr(n,s,i)}}function Ir(e,t,n,r){kr[_r++]=e,kr[_r++]=t,kr[_r++]=n,kr[_r++]=r,Cr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return Ir(e,t,n,r),Rr(e)}function jr(e,t){return Ir(e,null,null,t),Rr(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-fe(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Rr(e){if(50<Rc)throw Rc=0,Dc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dr={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,n,r){return new Lr(e,t,n,r)}function Mr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,r,s,i){var o=0;if(r=e,"function"===typeof e)Mr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Or(31,n,t,s)).elementType=C,e.lanes=i,e;case g:return zr(n.children,s,i,t);case v:o=8,s|=24;break;case y:return(e=Or(12,n,t,2|s)).elementType=y,e.lanes=i,e;case S:return(e=Or(13,n,t,s)).elementType=S,e.lanes=i,e;case N:return(e=Or(19,n,t,s)).elementType=N,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case x:o=10;break e;case w:o=9;break e;case E:o=11;break e;case k:o=14;break e;case _:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Or(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function zr(e,t,n,r){return(e=Or(7,e,r,t)).lanes=n,e}function Br(e,t,n){return(e=Or(6,e,null,t)).lanes=n,e}function qr(e,t,n){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Wr=0,Gr=null,Kr=0,Qr=[],Yr=0,$r=null,Jr=1,Xr="";function Zr(e,t){Hr[Wr++]=Kr,Hr[Wr++]=Gr,Gr=e,Kr=t}function es(e,t,n){Qr[Yr++]=Jr,Qr[Yr++]=Xr,Qr[Yr++]=$r,$r=e;var r=Jr;e=Xr;var s=32-fe(r)-1;r&=~(1<<s),n+=1;var i=32-fe(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Jr=1<<32-fe(t)+s|n<<s|r,Xr=i+e}else Jr=1<<i|n<<s|r,Xr=e}function ts(e){null!==e.return&&(Zr(e,1),es(e,1,0))}function ns(e){for(;e===Gr;)Gr=Hr[--Wr],Hr[Wr]=null,Kr=Hr[--Wr],Hr[Wr]=null;for(;e===$r;)$r=Qr[--Yr],Qr[Yr]=null,Xr=Qr[--Yr],Qr[Yr]=null,Jr=Qr[--Yr],Qr[Yr]=null}var rs=null,ss=null,is=!1,as=null,os=!1,ls=Error(a(519));function cs(e){throw ps(Nr(Error(a(418,"")),e)),ls}function us(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Re]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Lu.length;n++)Fu(Lu[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Ju(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=Xu),t=!0):t=!1,t||cs(e)}function ds(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 13:return void(os=!1);case 27:case 3:return void(os=!0);default:rs=rs.return}}function hs(e){if(e!==rs)return!1;if(!is)return ds(e),is=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),ds(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,md(e.type)?(e=bd,bd=null,ss=e):ss=n):ss=rs?yd(e.stateNode.nextSibling):null;return!0}function fs(){ss=rs=null,is=!1}function ms(){var e=as;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),as=null),e}function ps(e){null===as?as=[e]:as.push(e)}var gs=U(null),vs=null,ys=null;function bs(e,t,n){z(gs,t._currentValue),t._currentValue=n}function ws(e){e._currentValue=gs.current,V(gs)}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var o=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),xs(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),xs(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Ss(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;Yn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===W.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}s=s.return}null!==e&&Es(t,e,n,r),t.flags|=262144}function Ns(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ks(e){vs=e,ys=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function _s(e){return Ts(vs,e)}function Cs(e,t){return null===vs&&ks(e),Ts(e,t)}function Ts(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ys){if(null===e)throw Error(a(308));ys=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ys=ys.next=t;return n}var Is="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},As=r.unstable_scheduleCallback,js=r.unstable_NormalPriority,Ps={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rs(){return{controller:new Is,data:new Map,refCount:0}}function Ds(e){e.refCount--,0===e.refCount&&As(js,function(){e.controller.abort()})}var Ls=null,Os=0,Ms=0,Fs=null;function Us(){if(0===--Os&&null!==Ls){null!==Fs&&(Fs.status="fulfilled");var e=Ls;Ls=null,Ms=0,Fs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Vs=D.S;D.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ls){var n=Ls=[];Os=0,Ms=Au(),Fs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Os++,t.then(Us,Us)}(0,t),null!==Vs&&Vs(e,t)};var zs=U(null);function Bs(){var e=zs.current;return null!==e?e:sc.pooledCache}function qs(e,t){z(zs,null===t?zs.current:t.pool)}function Hs(){var e=Bs();return null===e?null:{parent:Ps._currentValue,pool:e}}var Ws=Error(a(460)),Gs=Error(a(474)),Ks=Error(a(542)),Qs={then:function(){}};function Ys(e){return"fulfilled"===(e=e.status)||"rejected"===e}function $s(){}function Js(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then($s,$s),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then($s,$s);else{if(null!==(e=sc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Xs=t,Ws}}var Xs=null;function Zs(){if(null===Xs)throw Error(a(459));var e=Xs;return Xs=null,e}function ei(e){if(e===Ws||e===Ks)throw Error(a(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&rc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Rr(e),Pr(e,null,n),t}return Ir(e,r,t,n),Rr(e)}function ai(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function oi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Fs)throw Fs}}function ui(e,t,n,r){li=!1;var s=e.updateQueue;ti=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var f=-536870913&o.lane,m=f!==o.lane;if(m?(ac&f)===f:(r&f)===f){0!==f&&f===Ms&&(li=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;f=t;var v=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(v,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=g.payload)?p.call(v,d,f):p)||void 0===f)break e;d=h({},d,f);break e;case 2:ti=!0}}null!==(f=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=s.callbacks)?s.callbacks=[f]:m.push(f))}else m={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,a|=f;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(m=o).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),mc|=a,e.lanes=a,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)di(n[e],t)}var fi=U(null),mi=U(0);function pi(e,t){z(mi,e=hc),z(fi,t),hc=e|t.baseLanes}function gi(){z(mi,hc),z(fi,fi.current)}function vi(){hc=mi.current,V(fi),V(mi)}var yi=0,bi=null,wi=null,xi=null,Ei=!1,Si=!1,Ni=!1,ki=0,_i=0,Ci=null,Ti=0;function Ii(){throw Error(a(321))}function Ai(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function ji(e,t,n,r,s,i){return yi=i,bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?Wa:Ga,Ni=!1,i=n(r,s),Ni=!1,Si&&(i=Ri(t,n,r,s)),Pi(e),i}function Pi(e){D.H=Ha;var t=null!==wi&&null!==wi.next;if(yi=0,xi=wi=bi=null,Ei=!1,_i=0,Ci=null,t)throw Error(a(300));null===e||Co||null!==(e=e.dependencies)&&Ns(e)&&(Co=!0)}function Ri(e,t,n,r){bi=e;var s=0;do{if(Si&&(Ci=null),_i=0,Si=!1,25<=s)throw Error(a(301));if(s+=1,xi=wi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}D.H=Ka,i=t(n,r)}while(Si);return i}function Di(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?Vi(t):t,e=e.useState()[0],(null!==wi?wi.memoizedState:null)!==e&&(bi.flags|=1024),t}function Li(){var e=0!==ki;return ki=0,e}function Oi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Mi(e){if(Ei){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ei=!1}yi=0,xi=wi=bi=null,Si=!1,_i=ki=0,Ci=null}function Fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xi?bi.memoizedState=xi=e:xi=xi.next=e,xi}function Ui(){if(null===wi){var e=bi.alternate;e=null!==e?e.memoizedState:null}else e=wi.next;var t=null===xi?bi.memoizedState:xi.next;if(null!==t)xi=t,wi=e;else{if(null===e){if(null===bi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(wi=e).memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},null===xi?bi.memoizedState=xi=e:xi=xi.next=e}return xi}function Vi(e){var t=_i;return _i+=1,null===Ci&&(Ci=[]),e=Js(Ci,e,t),t=bi,null===(null===xi?t.memoizedState:xi.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?Wa:Ga),e}function zi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Vi(e);if(e.$$typeof===x)return _s(e)}throw Error(a(438,String(e)))}function Bi(e){var t=null,n=bi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function qi(e,t){return"function"===typeof t?t(e):t}function Hi(e){return Wi(Ui(),wi,e)}function Wi(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ac&h)===h:(yi&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ms&&(d=!0);else{if((yi&f)===f){u=u.next,f===Ms&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,bi.lanes|=f,mc|=f}h=u.action,Ni&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,bi.lanes|=h,mc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Yn(i,e.memoizedState)&&(Co=!0,d&&null!==(n=Fs)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Gi(e){var t=Ui(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);Yn(i,t.memoizedState)||(Co=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ki(e,t,n){var r=bi,s=Ui(),i=is;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Yn((wi||s).memoizedState,n);if(o&&(s.memoizedState=n,Co=!0),s=s.queue,ga(2048,8,$i.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==xi&&1&xi.memoizedState.tag){if(r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Yi.bind(null,r,s,n,t),null),null===sc)throw Error(a(349));i||0!==(124&yi)||Qi(r,t,n)}return n}function Qi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Yi(e,t,n,r){t.value=n,t.getSnapshot=r,Ji(t)&&Xi(e)}function $i(e,t,n){return n(function(){Ji(t)&&Xi(e)})}function Ji(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function Xi(e){var t=jr(e,2);null!==t&&Mc(t,e,2)}function Zi(e){var t=Fi();if("function"===typeof e){var n=e;if(e=n(),Ni){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:e},t}function ea(e,t,n,r){return e.baseState=n,Wi(e,wi,"function"===typeof r?r:qi)}function ta(e,t,n,r,s){if(za(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==D.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,na(t,i)):(i.next=n.next,t.pending=n.next=i)}}function na(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=D.T,a={};D.T=a;try{var o=n(s,r),l=D.S;null!==l&&l(a,o),ra(e,t,o)}catch(c){ia(e,t,c)}finally{D.T=i}}else try{ra(e,t,i=n(s,r))}catch(u){ia(e,t,u)}}function ra(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){sa(e,t,n)},function(n){return ia(e,t,n)}):sa(e,t,n)}function sa(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function ia(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==r)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(is){var n=sc.formState;if(null!==n){e:{var r=bi;if(is){if(ss){t:{for(var s=ss,i=os;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=yd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ss=yd(s.nextSibling),r="F!"===s.data;break e}}cs(r)}r=!1}r&&(t=n[0])}}return(n=Fi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=r,n=Fa.bind(null,bi,r),r.dispatch=n,r=Zi(!1),i=Va.bind(null,bi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=Fi()).queue=s,n=ta.bind(null,bi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return ua(Ui(),wi,e)}function ua(e,t,n){if(t=Wi(e,t,oa)[0],e=Hi(qi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Vi(t)}catch(To){if(To===Ws)throw Ks;throw To}else r=t;var s=(t=Ui()).queue,i=s.dispatch;return n!==t.memoizedState&&(bi.flags|=2048,fa(9,{destroy:void 0,resource:void 0},da.bind(null,s,n),null)),[r,i,e]}function da(e,t){e.action=t}function ha(e){var t=Ui(),n=wi;if(null!==n)return ua(t,n,e);Ui(),t=t.memoizedState;var r=(n=Ui()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function fa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ma(){return Ui().memoizedState}function pa(e,t,n,r){var s=Fi();r=void 0===r?null:r,bi.flags|=e,s.memoizedState=fa(1|t,{destroy:void 0,resource:void 0},n,r)}function ga(e,t,n,r){var s=Ui();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==wi&&null!==r&&Ai(r,wi.memoizedState.deps)?s.memoizedState=fa(t,i,n,r):(bi.flags|=e,s.memoizedState=fa(1|t,i,n,r))}function va(e,t){pa(8390656,8,e,t)}function ya(e,t){ga(2048,8,e,t)}function ba(e,t){return ga(4,2,e,t)}function wa(e,t){return ga(4,4,e,t)}function xa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ea(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4,4,xa.bind(null,t,e),n)}function Sa(){}function Na(e,t){var n=Ui();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ai(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ka(e,t){var n=Ui();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ai(t,r[1]))return r[0];if(r=e(),Ni){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function _a(e,t,n){return void 0===n||0!==(1073741824&yi)?e.memoizedState=t:(e.memoizedState=n,e=Oc(),bi.lanes|=e,mc|=e,n)}function Ca(e,t,n,r){return Yn(n,t)?n:null!==fi.current?(e=_a(e,n,r),Yn(e,t)||(Co=!0),e):0===(42&yi)?(Co=!0,e.memoizedState=n):(e=Oc(),bi.lanes|=e,mc|=e,t)}function Ta(e,t,n,r,s){var i=L.p;L.p=0!==i&&8>i?i:8;var a=D.T,o={};D.T=o,Va(e,!1,t,n);try{var l=s(),c=D.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ua(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Lc());else Ua(e,t,r,Lc())}catch(u){Ua(e,t,{then:function(){},status:"rejected",reason:u},Lc())}finally{L.p=i,D.T=a}}function Ia(){}function Aa(e,t,n,r){if(5!==e.tag)throw Error(a(476));var s=ja(e).queue;Ta(e,s,t,O,null===n?Ia:function(){return Pa(e),n(r)})}function ja(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Pa(e){Ua(e,ja(e).next.queue,{},Lc())}function Ra(){return _s(Yd)}function Da(){return Ui().memoizedState}function La(){return Ui().memoizedState}function Oa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lc(),r=ii(t,e=si(n),n);return null!==r&&(Mc(r,t,n),ai(r,t,n)),t={cache:Rs()},void(e.payload=t)}t=t.return}}function Ma(e,t,n){var r=Lc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},za(e)?Ba(t,n):null!==(n=Ar(e,t,n,r))&&(Mc(n,e,r),qa(n,t,r))}function Fa(e,t,n){Ua(e,t,n,Lc())}function Ua(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(za(e))Ba(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Yn(o,a))return Ir(e,t,s,0),null===sc&&Tr(),!1}catch(l){}if(null!==(n=Ar(e,t,s,r)))return Mc(n,e,r),qa(n,t,r),!0}return!1}function Va(e,t,n,r){if(r={lane:2,revertLane:Au(),action:r,hasEagerState:!1,eagerState:null,next:null},za(e)){if(t)throw Error(a(479))}else null!==(t=Ar(e,n,r,2))&&Mc(t,e,2)}function za(e){var t=e.alternate;return e===bi||null!==t&&t===bi}function Ba(e,t){Si=Ei=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qa(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Ha={readContext:_s,use:zi,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useLayoutEffect:Ii,useInsertionEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useSyncExternalStore:Ii,useId:Ii,useHostTransitionStatus:Ii,useFormState:Ii,useActionState:Ii,useOptimistic:Ii,useMemoCache:Ii,useCacheRefresh:Ii},Wa={readContext:_s,use:zi,useCallback:function(e,t){return Fi().memoizedState=[e,void 0===t?null:t],e},useContext:_s,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,pa(4194308,4,xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pa(4194308,4,e,t)},useInsertionEffect:function(e,t){pa(4,2,e,t)},useMemo:function(e,t){var n=Fi();t=void 0===t?null:t;var r=e();if(Ni){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Fi();if(void 0!==n){var s=n(t);if(Ni){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Ma.bind(null,bi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Fi().memoizedState=e},useState:function(e){var t=(e=Zi(e)).queue,n=Fa.bind(null,bi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Sa,useDeferredValue:function(e,t){return _a(Fi(),e,t)},useTransition:function(){var e=Zi(!1);return e=Ta.bind(null,bi,e.queue,!0,!1),Fi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bi,s=Fi();if(is){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===sc)throw Error(a(349));0!==(124&ac)||Qi(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,va($i.bind(null,r,i,e),[e]),r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Yi.bind(null,r,i,n,t),null),n},useId:function(){var e=Fi(),t=sc.identifierPrefix;if(is){var n=Xr;t="\xab"+t+"R"+(n=(Jr&~(1<<32-fe(Jr)-1)).toString(32)+n),0<(n=ki++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ti++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ra,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Fi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Va.bind(null,bi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Bi,useCacheRefresh:function(){return Fi().memoizedState=Oa.bind(null,bi)}},Ga={readContext:_s,use:zi,useCallback:Na,useContext:_s,useEffect:ya,useImperativeHandle:Ea,useInsertionEffect:ba,useLayoutEffect:wa,useMemo:ka,useReducer:Hi,useRef:ma,useState:function(){return Hi(qi)},useDebugValue:Sa,useDeferredValue:function(e,t){return Ca(Ui(),wi.memoizedState,e,t)},useTransition:function(){var e=Hi(qi)[0],t=Ui().memoizedState;return["boolean"===typeof e?e:Vi(e),t]},useSyncExternalStore:Ki,useId:Da,useHostTransitionStatus:Ra,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Ui(),0,e,t)},useMemoCache:Bi,useCacheRefresh:La},Ka={readContext:_s,use:zi,useCallback:Na,useContext:_s,useEffect:ya,useImperativeHandle:Ea,useInsertionEffect:ba,useLayoutEffect:wa,useMemo:ka,useReducer:Gi,useRef:ma,useState:function(){return Gi(qi)},useDebugValue:Sa,useDeferredValue:function(e,t){var n=Ui();return null===wi?_a(n,e,t):Ca(n,wi.memoizedState,e,t)},useTransition:function(){var e=Gi(qi)[0],t=Ui().memoizedState;return["boolean"===typeof e?e:Vi(e),t]},useSyncExternalStore:Ki,useId:Da,useHostTransitionStatus:Ra,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Ui();return null!==wi?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Bi,useCacheRefresh:La},Qa=null,Ya=0;function $a(e){var t=Ya;return Ya+=1,null===Qa&&(Qa=[]),Js(Qa,e,t)}function Ja(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Xa(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Br(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===_&&Za(i)===t.type)?(Ja(t=s(t,n.props),n),t.return=e,t):(Ja(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=zr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return Ja(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=qr(t,e.mode,n)).return=e,t;case _:return h(e,t=(0,t._init)(t._payload),n)}if(R(t)||A(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,$a(t),n);if(t.$$typeof===x)return h(e,Cs(e,t),n);Xa(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===s?c(e,t,n,r):null;case p:return n.key===s?u(e,t,n,r):null;case _:return f(e,t,n=(s=n._init)(n._payload),r)}if(R(n)||A(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,$a(n),r);if(n.$$typeof===x)return f(e,t,Cs(e,n),r);Xa(e,n)}return null}function v(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return v(e,t,n,r=(0,r._init)(r._payload),s)}if(R(r)||A(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return v(e,t,n,$a(r),s);if(r.$$typeof===x)return v(e,t,n,Cs(t,r),s);Xa(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===_&&Za(b)===c.type){n(l,c.sibling),Ja(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=zr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Ja(d=Vr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case p:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=qr(u,l.mode,d)).return=l,l=d}return o(l);case _:return y(l,c,u=(b=u._init)(u._payload),d)}if(R(u))return function(s,a,o,l){for(var c=null,u=null,d=a,m=a=0,p=null;null!==d&&m<o.length;m++){d.index>m?(p=d,d=null):p=d.sibling;var g=f(s,d,o[m],l);if(null===g){null===d&&(d=p);break}e&&d&&null===g.alternate&&t(s,d),a=i(g,a,m),null===u?c=g:u.sibling=g,u=g,d=p}if(m===o.length)return n(s,d),is&&Zr(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(a=i(d,a,m),null===u?c=d:u.sibling=d,u=d);return is&&Zr(s,m),c}for(d=r(d);m<o.length;m++)null!==(p=v(d,s,m,o[m],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?m:p.key),a=i(p,a,m),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(s,e)}),is&&Zr(s,m),c}(l,c,u,d);if(A(u)){if("function"!==typeof(b=A(u)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,m=o,p=o=0,g=null,y=l.next();null!==m&&!y.done;p++,y=l.next()){m.index>p?(g=m,m=null):g=m.sibling;var b=f(s,m,y.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(s,m),o=i(b,o,p),null===d?u=b:d.sibling=b,d=b,m=g}if(y.done)return n(s,m),is&&Zr(s,p),u;if(null===m){for(;!y.done;p++,y=l.next())null!==(y=h(s,y.value,c))&&(o=i(y,o,p),null===d?u=y:d.sibling=y,d=y);return is&&Zr(s,p),u}for(m=r(m);!y.done;p++,y=l.next())null!==(y=v(m,s,p,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?p:y.key),o=i(y,o,p),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(s,e)}),is&&Zr(s,p),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,$a(u),d);if(u.$$typeof===x)return y(l,c,Cs(l,u),d);Xa(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Br(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{Ya=0;var s=y(e,t,n,r);return Qa=null,s}catch(To){if(To===Ws||To===Ks)throw To;var i=Or(29,To,null,e.mode);return i.lanes=r,i.return=e,i}}}var to=eo(!0),no=eo(!1),ro=U(null),so=null;function io(e){var t=e.alternate;z(co,1&co.current),z(ro,e),null===so&&(null===t||null!==fi.current||null!==t.memoizedState)&&(so=e)}function ao(e){if(22===e.tag){if(z(co,co.current),z(ro,e),null===so){var t=e.alternate;null!==t&&null!==t.memoizedState&&(so=e)}}else oo()}function oo(){z(co,co.current),z(ro,ro.current)}function lo(e){V(ro),so===e&&(so=null),V(co)}var co=U(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||vd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lc(),s=si(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Mc(t,e,r),ai(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lc(),s=si(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Mc(t,e,r),ai(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lc(),r=si(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ii(e,r,n))&&(Mc(t,e,n),ai(t,e,n))}};function mo(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,r)||!$n(s,i))}function po(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function go(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var vo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yo(e){vo(e)}function bo(e){console.error(e)}function wo(e){vo(e)}function xo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Eo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function So(e,t,n){return(n=si(n)).tag=3,n.payload={element:null},n.callback=function(){xo(e,t)},n}function No(e){return(e=si(e)).tag=3,e}function ko(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){Eo(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){Eo(t,n,r),"function"!==typeof s&&(null===kc?kc=new Set([this]):kc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var _o=Error(a(461)),Co=!1;function Io(e,t,n,r){t.child=null===e?no(t,null,n,r):to(t,e.child,n,r)}function Ao(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return ks(t),r=ji(e,t,n,a,i,s),o=Li(),null===e||Co?(is&&o&&ts(t),t.flags|=1,Io(e,t,r,s),t.child):(Oi(e,t,s),$o(e,t,s))}function jo(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Mr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Po(e,t,i,r,s))}if(i=e.child,!Jo(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(a,r)&&e.ref===t.ref)return $o(e,t,s)}return t.flags|=1,(e=Fr(i,r)).ref=t.ref,e.return=t,t.child=e}function Po(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if($n(i,r)&&e.ref===t.ref){if(Co=!1,t.pendingProps=r=i,!Jo(e,s))return t.lanes=e.lanes,$o(e,t,s);0!==(131072&e.flags)&&(Co=!0)}}return Oo(e,t,n,r,s)}function Ro(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==i?i.baseLanes|n:n,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Do(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Do(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qs(0,null!==i?i.cachePool:null),null!==i?pi(t,i):gi(),ao(t)}else null!==i?(qs(0,i.cachePool),pi(t,i),oo(),t.memoizedState=null):(null!==e&&qs(0,null),gi(),oo());return Io(e,t,s,n),t.child}function Do(e,t,n,r){var s=Bs();return s=null===s?null:{parent:Ps._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&qs(0,null),gi(),ao(t),null!==e&&Ss(e,t,r,!0),null}function Lo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Oo(e,t,n,r,s){return ks(t),n=ji(e,t,n,r,void 0,s),r=Li(),null===e||Co?(is&&r&&ts(t),t.flags|=1,Io(e,t,n,s),t.child):(Oi(e,t,s),$o(e,t,s))}function Mo(e,t,n,r,s,i){return ks(t),t.updateQueue=null,n=Ri(t,r,n,s),Pi(e),r=Li(),null===e||Co?(is&&r&&ts(t),t.flags|=1,Io(e,t,n,i),t.child):(Oi(e,t,i),$o(e,t,i))}function Fo(e,t,n,r,s){if(ks(t),null===t.stateNode){var i=Dr,a=n.contextType;"object"===typeof a&&null!==a&&(i=_s(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=fo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ni(t),a=n.contextType,i.context="object"===typeof a&&null!==a?_s(a):Dr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ho(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&fo.enqueueReplaceState(i,i.state,null),ui(t,r,i,s),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=go(n,o);i.props=l;var c=i.context,u=n.contextType;a=Dr,"object"===typeof u&&null!==u&&(a=_s(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&po(t,i,r,a),ti=!1;var h=t.memoizedState;i.state=h,ui(t,r,i,s),ci(),c=t.memoizedState,o||h!==c||ti?("function"===typeof d&&(ho(t,n,d,r),c=t.memoizedState),(l=ti||mo(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ri(e,t),u=go(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Dr,"object"===typeof c&&null!==c&&(l=_s(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&po(t,i,r,l),ti=!1,h=t.memoizedState,i.state=h,ui(t,r,i,s),ci();var f=t.memoizedState;a!==d||h!==f||ti||null!==e&&null!==e.dependencies&&Ns(e.dependencies)?("function"===typeof o&&(ho(t,n,o,r),f=t.memoizedState),(u=ti||mo(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ns(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Lo(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=to(t,e.child,null,s),t.child=to(t,null,n,s)):Io(e,t,n,s),t.memoizedState=i.state,e=t.child):e=$o(e,t,s),e}function Uo(e,t,n,r){return fs(),t.flags|=256,Io(e,t,n,r),t.child}var Vo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:Hs()}}function Bo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=vc),e}function qo(e,t,n){var r,s=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(is){if(i?io(t):oo(),is){var l,c=ss;if(l=c){e:{for(l=c,c=os;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==$r?{id:Jr,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},(l=Or(18,null,null,0)).stateNode=c,l.return=t,t.child=l,rs=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return vd(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=s.children,s=s.fallback,i?(oo(),c=Wo({mode:"hidden",children:c},i=t.mode),s=zr(s,i,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(i=t.child).memoizedState=zo(n),i.childLanes=Bo(e,r,n),t.memoizedState=Vo,s):(io(t),Ho(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(io(t),t.flags&=-257,t=Go(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),i=s.fallback,c=t.mode,s=Wo({mode:"visible",children:s.children},c),(i=zr(i,c,n,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,to(t,e.child,null,n),(s=t.child).memoizedState=zo(n),s.childLanes=Bo(e,r,n),t.memoizedState=Vo,t=i);else if(io(t),vd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(a(419))).stack="",s.digest=r,ps({value:s,source:null,stack:null}),t=Go(e,t,n)}else if(Co||Ss(e,t,n,!1),r=0!==(n&e.childLanes),Co||r){if(null!==(r=sc)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:Te(s))&(r.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,jr(e,s),Mc(r,e,s),_o;"$?"===c.data||Qc(),t=Go(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=yd(c.nextSibling),rs=t,is=!0,as=null,os=!1,null!==e&&(Qr[Yr++]=Jr,Qr[Yr++]=Xr,Qr[Yr++]=$r,Jr=e.id,Xr=e.overflow,$r=t),(t=Ho(t,s.children)).flags|=4096);return t}return i?(oo(),i=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=Fr(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Fr(u,i):(i=zr(i,c,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,null===(c=e.child.memoizedState)?c=zo(n):(null!==(l=c.cachePool)?(u=Ps._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hs(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=Bo(e,r,n),t.memoizedState=Vo,s):(io(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ho(e,t){return(t=Wo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wo(e,t){return(e=Or(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Go(e,t,n){return to(t,e.child,null,n),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ko(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function Qo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Yo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Io(e,t,r.children,n),0!==(2&(r=co.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ko(e,n,t);else if(19===e.tag)Ko(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(co,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Qo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===uo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Qo(t,!0,n,null,i);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $o(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ss(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Jo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ns(e))}function Xo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Co=!0;else{if(!Jo(e,n)&&0===(128&t.flags))return Co=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),bs(0,Ps,e.memoizedState.cache),fs();break;case 27:case 5:Q(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:bs(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(io(t),t.flags|=128,null):0!==(n&t.child.childLanes)?qo(e,t,n):(io(t),null!==(e=$o(e,t,n))?e.sibling:null);io(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ss(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return Yo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),z(co,co.current),r)break;return null;case 22:case 23:return t.lanes=0,Ro(e,t,n);case 24:bs(0,Ps,e.memoizedState.cache)}return $o(e,t,n)}(e,t,n);Co=0!==(131072&e.flags)}else Co=!1,is&&0!==(1048576&t.flags)&&es(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((s=r.$$typeof)===E){t.tag=11,t=Ao(null,t,r,e,n);break e}if(s===k){t.tag=14,t=jo(null,t,r,e,n);break e}}throw t=P(r)||r,Error(a(306,t,""))}Mr(r)?(e=go(r,e),t.tag=1,t=Fo(null,t,r,e,n)):(t.tag=0,t=Oo(null,t,r,e,n))}return t;case 0:return Oo(e,t,t.type,t.pendingProps,n);case 1:return Fo(e,t,r=t.type,s=go(r,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,ri(e,t),ui(t,r,null,n);var o=t.memoizedState;if(r=o.cache,bs(0,Ps,r),r!==i.cache&&Es(t,[Ps],n,!0),ci(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Uo(e,t,r,n);break e}if(r!==s){ps(s=Nr(Error(a(424)),t)),t=Uo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=yd(e.firstChild),rs=t,is=!0,as=null,os=!0,n=no(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===s){t=$o(e,t,n);break e}Io(e,t,r,n)}t=t.child}return t;case 26:return Lo(e,t),null===e?(n=Id(t.type,null,t.pendingProps,null))?t.memoizedState=n:is||(n=t.type,e=t.pendingProps,(r=sd(H.current).createElement(n))[Pe]=t,r[Re]=e,td(r,n,e),We(r),t.stateNode=r):t.memoizedState=Id(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&is&&(r=t.stateNode=xd(t.type,t.pendingProps,H.current),rs=t,os=!0,s=ss,md(t.type)?(bd=s,ss=yd(r.firstChild)):ss=s),Io(e,t,t.pendingProps.children,n),Lo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&is&&((s=r=ss)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,os))?(t.stateNode=r,rs=t,ss=yd(r.firstChild),os=!1,s=!0):s=!1),s||cs(t)),Q(t),s=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,od(s,i)?r=null:null!==o&&od(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=ji(e,t,Di,null,null,n),Yd._currentValue=s),Lo(e,t),Io(e,t,r,n),t.child;case 6:return null===e&&is&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,os))?(t.stateNode=n,rs=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return qo(e,t,n);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,n):Io(e,t,r,n),t.child;case 11:return Ao(e,t,t.type,t.pendingProps,n);case 7:return Io(e,t,t.pendingProps,n),t.child;case 8:case 12:return Io(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bs(0,t.type,r.value),Io(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,ks(t),r=r(s=_s(s)),t.flags|=1,Io(e,t,r,n),t.child;case 14:return jo(e,t,t.type,t.pendingProps,n);case 15:return Po(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Wo(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ro(e,t,n);case 24:return ks(t),r=_s(Ps),null===e?(null===(s=Bs())&&(s=sc,i=Rs(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},ni(t),bs(0,Ps,s)):(0!==(e.lanes&n)&&(ri(e,t),ui(t,null,null,n),ci()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),bs(0,Ps,r)):(r=i.cache,bs(0,Ps,r),r!==s.cache&&Es(t,[Ps],n,!0))),Io(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Zo(e){e.flags|=4}function el(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Bd(t)){if(null!==(t=ro.current)&&((4194048&ac)===ac?null!==so:(62914560&ac)!==ac&&0===(536870912&ac)||t!==so))throw Xs=Qs,Gs;e.flags|=8192}}function tl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yc|=t)}function nl(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sl(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ws(Ps),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?Zo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ms())),rl(t),null;case 26:return n=t.memoizedState,null===e?(Zo(t),null!==n?(rl(t),el(t,n)):(rl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Zo(t),rl(t),el(t,n)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Zo(t),rl(t),t.flags&=-16777217),null;case 27:Y(t),n=H.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return rl(t),null}e=B.current,hs(t)?us(t):(e=xd(s,r,n),t.stateNode=e,Zo(t))}return rl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return rl(t),null}if(e=B.current,hs(t))us(t);else{switch(s=sd(H.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?s.createElement(n,{is:r.is}):s.createElement(n)}}e[Pe]=t,e[Re]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(td(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Zo(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Zo(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=H.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=rs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Ju(e.nodeValue,n)))||cs(t)}else(e=sd(e).createTextNode(r))[Pe]=t,t.stateNode=e}return rl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[Pe]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),s=!1}else s=ms(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tl(t,t.updateQueue),rl(t),null;case 4:return K(),null===e&&zu(t.stateNode.containerInfo),rl(t),null;case 10:return ws(t.type),rl(t),null;case 19:if(V(co),null===(s=t.memoizedState))return rl(t),null;if(r=0!==(128&t.flags),null===(i=s.rendering))if(r)nl(s,!1);else{if(0!==fc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=uo(e))){for(t.flags|=128,nl(s,!1),e=i.updateQueue,t.updateQueue=e,tl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return z(co,1&co.current|2),t.child}e=e.sibling}null!==s.tail&&te()>Sc&&(t.flags|=128,r=!0,nl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,tl(t,e),nl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!is)return rl(t),null}else 2*te()-s.renderingStartTime>Sc&&536870912!==n&&(t.flags|=128,r=!0,nl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=co.current,z(co,r?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return lo(t),vi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(n=t.updateQueue)&&tl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(zs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ws(Ps),rl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ws(Ps),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(co),null;case 4:return K(),null;case 10:return ws(t.type),null;case 22:case 23:return lo(t),vi(),null!==e&&V(zs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ws(Ps),null;default:return null}}function al(e,t){switch(ns(t),t.tag){case 3:ws(Ps),K();break;case 26:case 27:case 5:Y(t);break;case 4:K();break;case 13:lo(t);break;case 19:V(co);break;case 10:ws(t.type);break;case 22:case 23:lo(t),vi(),null!==e&&V(zs);break;case 24:ws(Ps)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){du(t,t.return,o)}}function ll(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){du(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){du(t,t.return,u)}}function cl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(r){du(e,e.return,r)}}}function ul(e,t,n){n.props=go(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){du(e,t,r)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){du(e,t,s)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){du(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){du(e,t,i)}else n.current=null}function fl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){du(e,e.return,s)}}function ml(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||Zu(e,t,m,null,r,h)}}for(var f in r){var m=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":i=m;break;case"name":s=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:m!==h&&Zu(e,t,f,m,r,h)}}return void gt(e,o,l,c,u,d,i,s);case"select":for(i in m=o=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(i)||Zu(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Zu(e,t,s,i,r,c)}return t=l,n=o,r=m,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zu(e,t,l,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=s||null!=i))switch(o){case"value":f=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==i&&Zu(e,t,o,s,r,i)}return void wt(e,f,m);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else Zu(e,t,p,null,r,f);for(c in r)if(f=r[c],m=n[c],r.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zu(e,t,c,f,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Zu(e,t,g,null,r,f);for(u in r)if(f=r[u],m=n[u],r.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Zu(e,t,u,f,r,m)}return;default:if(_t(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&ed(e,t,v,void 0,r,f);for(d in r)f=r[d],m=n[d],!r.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||ed(e,t,d,f,r,m);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&Zu(e,t,y,null,r,f);for(h in r)f=r[h],m=n[h],!r.hasOwnProperty(h)||f===m||null==f&&null==m||Zu(e,t,h,f,r,m)}(r,e.type,n,t),r[Re]=t}catch(s){du(e,e.return,s)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xu));else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);td(t,r,n),t[Pe]=e,t[Re]=n}catch(i){du(e,e.return,i)}}var wl=!1,xl=!1,El=!1,Sl="function"===typeof WeakSet?WeakSet:Set,Nl=null;function kl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&ol(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){du(n,n.return,a)}else{var s=go(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){du(n,n.return,o)}}64&r&&cl(n),512&r&&dl(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(a){du(n,n.return,a)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&fl(n),512&r&&dl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&jl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||xl,s=wl;var i=xl;wl=r,(xl=t)&&!i?Vl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),wl=s,xl=i}break;case 30:break;default:Fl(e,n)}}function _l(e){var t=e.alternate;null!==t&&(e.alternate=null,_l(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ve(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,Tl=!1;function Il(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:xl||hl(n,t),Il(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||hl(n,t);var r=Cl,s=Tl;md(n.type)&&(Cl=n.stateNode,Tl=!1),Il(e,t,n),Ed(n.stateNode),Cl=r,Tl=s;break;case 5:xl||hl(n,t);case 6:if(r=Cl,s=Tl,Cl=null,Il(e,t,n),Tl=s,null!==(Cl=r))if(Tl)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(a){du(n,t,a)}else try{Cl.removeChild(n.stateNode)}catch(a){du(n,t,a)}break;case 18:null!==Cl&&(Tl?(pd(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Th(e)):pd(Cl,n.stateNode));break;case 4:r=Cl,s=Tl,Cl=n.stateNode.containerInfo,Tl=!0,Il(e,t,n),Cl=r,Tl=s;break;case 0:case 11:case 14:case 15:xl||ll(2,n,t),xl||ll(4,n,t),Il(e,t,n);break;case 1:xl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),Il(e,t,n);break;case 21:Il(e,t,n);break;case 22:xl=(r=xl)||null!==n.memoizedState,Il(e,t,n),xl=r;break;default:Il(e,t,n)}}function jl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Th(e)}catch(n){du(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){Cl=l.stateNode,Tl=!1;break e}break;case 5:Cl=l.stateNode,Tl=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,Tl=!0;break e}l=l.return}if(null===Cl)throw Error(a(160));Al(i,o,s),Cl=null,Tl=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ll(t,e),t=t.sibling}var Dl=null;function Ll(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ol(e),4&r&&(ll(3,e,e.return),ol(3,e),ll(5,e,e.return));break;case 1:Rl(t,e),Ol(e),512&r&&(xl||null===n||hl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Dl;if(Rl(t,e),Ol(e),512&r&&(xl||null===n||hl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Ue]||i[Pe]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),td(i,r,n),i[Pe]=e,We(i),r=i;break e;case"link":var o=Vd("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}td(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(o=Vd("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}td(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(a(468,r))}i[Pe]=e,We(i),r=i}e.stateNode=r}else zd(s,e.type,e.stateNode);else e.stateNode=Ld(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?zd(s,e.type,e.stateNode):Ld(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ol(e),512&r&&(xl||null===n||hl(n,n.return)),null!==n&&4&r&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ol(e),512&r&&(xl||null===n||hl(n,n.return)),32&e.flags){s=e.stateNode;try{Et(s,"")}catch(m){du(e,e.return,m)}}4&r&&null!=e.stateNode&&ml(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(El=!0);break;case 6:if(Rl(t,e),Ol(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){du(e,e.return,m)}}break;case 3:if(Ud=null,s=Dl,Dl=kd(t.containerInfo),Rl(t,e),Dl=s,Ol(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Th(t.containerInfo)}catch(m){du(e,e.return,m)}El&&(El=!1,Ml(e));break;case 4:r=Dl,Dl=kd(e.stateNode.containerInfo),Rl(t,e),Ol(e),Dl=r;break;case 12:default:Rl(t,e),Ol(e);break;case 13:Rl(t,e),Ol(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Ec=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,d=xl;if(wl=u||s,xl=d||c,Rl(t,e),xl=d,wl=u,Ol(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||wl||xl||Ul(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){du(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(m){du(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:Rl(t,e),Ol(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Ol(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;yl(e,gl(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(Et(i,""),n.flags&=-33),yl(e,gl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;vl(e,gl(e),o);break;default:throw Error(a(161))}}catch(l){du(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Ul(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),Ul(t);break;case 27:Ed(t.stateNode);case 26:case 5:hl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Vl(s,i,n),ol(4,i);break;case 1:if(Vl(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){du(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)di(l[s],o)}catch(c){du(r,r.return,c)}}n&&64&a&&cl(i),dl(i,i.return);break;case 27:bl(i);case 26:case 5:Vl(s,i,n),n&&null===r&&4&a&&fl(i),dl(i,i.return);break;case 12:Vl(s,i,n);break;case 13:Vl(s,i,n),n&&4&a&&jl(s,i);break;case 22:null===i.memoizedState&&Vl(s,i,n),dl(i,i.return);break;case 30:break;default:Vl(s,i,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ds(n))}function Bl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ds(e))}function ql(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,n,r),2048&s&&ol(9,t);break;case 1:case 13:default:ql(e,t,n,r);break;case 3:ql(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ds(e)));break;case 12:if(2048&s){ql(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){du(t,t.return,l)}}else ql(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?ql(e,t,n,r):Gl(e,t):2&i._visibility?ql(e,t,n,r):(i._visibility|=2,Wl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&s&&zl(a,t);break;case 24:ql(e,t,n,r),2048&s&&Bl(t.alternate,t)}}function Wl(e,t,n,r,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Wl(i,a,o,l,s),ol(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Wl(i,a,o,l,s):Gl(i,a):(u._visibility|=2,Wl(i,a,o,l,s)),s&&2048&c&&zl(a.alternate,a);break;case 24:Wl(i,a,o,l,s),s&&2048&c&&Bl(a.alternate,a);break;default:Wl(i,a,o,l,s)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Gl(n,r),2048&s&&zl(r.alternate,r);break;case 24:Gl(n,r),2048&s&&Bl(r.alternate,r);break;default:Gl(n,r)}t=t.sibling}}var Kl=8192;function Ql(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Ql(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===qd)throw Error(a(475));var r=qd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Ad(n.href),i=e.querySelector(jd(s));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Wd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void We(i);i=e.ownerDocument||e,n=Pd(n),(s=Sd.get(s))&&Md(n,s),We(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),td(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Wd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Dl;Dl=kd(e.stateNode.containerInfo),Ql(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Ql(e),Kl=t):Ql(e))}}function $l(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nl=r,ec(r,e)}$l(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:Jl(e),2048&e.flags&&ll(9,e,e.return);break;case 3:case 12:default:Jl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):Jl(e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nl=r,ec(r,e)}$l(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ll(8,t,t.return),Zl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function ec(e,t){for(;null!==Nl;){var n=Nl;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ds(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Nl=r;else e:for(n=e;null!==Nl;){var s=(r=Nl).sibling,i=r.return;if(_l(r),r===n){Nl=null;break e}if(null!==s){s.return=i,Nl=s;break e}Nl=i}}}var tc={getCacheForType:function(e){var t=_s(Ps),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},nc="function"===typeof WeakMap?WeakMap:Map,rc=0,sc=null,ic=null,ac=0,oc=0,lc=null,cc=!1,uc=!1,dc=!1,hc=0,fc=0,mc=0,pc=0,gc=0,vc=0,yc=0,bc=null,wc=null,xc=!1,Ec=0,Sc=1/0,Nc=null,kc=null,_c=0,Cc=null,Tc=null,Ic=0,Ac=0,jc=null,Pc=null,Rc=0,Dc=null;function Lc(){if(0!==(2&rc)&&0!==ac)return ac&-ac;if(null!==D.T){return 0!==Ms?Ms:Au()}return Ae()}function Oc(){0===vc&&(vc=0===(536870912&ac)||is?Ee():536870912);var e=ro.current;return null!==e&&(e.flags|=32),vc}function Mc(e,t,n){(e!==sc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Hc(e,0),zc(e,ac,vc,!1)),ke(e,n),0!==(2&rc)&&e===sc||(e===sc&&(0===(2&rc)&&(pc|=n),4===fc&&zc(e,ac,vc,!1)),Su(e))}function Fc(e,t,n){if(0!==(6&rc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),s=r?function(e,t){var n=rc;rc|=2;var r=Gc(),s=Kc();sc!==e||ac!==t?(Nc=null,Sc=te()+500,Hc(e,t)):uc=we(e,t);e:for(;;)try{if(0!==oc&&null!==ic){t=ic;var i=lc;t:switch(oc){case 1:oc=0,lc=null,eu(e,t,i,1);break;case 2:case 9:if(Ys(i)){oc=0,lc=null,Zc(t);break}t=function(){2!==oc&&9!==oc||sc!==e||(oc=7),Su(e)},i.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Ys(i)?(oc=0,lc=null,Zc(t)):(oc=0,lc=null,eu(e,t,i,7));break;case 5:var o=null;switch(ic.tag){case 26:o=ic.memoizedState;case 5:case 27:var l=ic;if(!o||Bd(o)){oc=0,lc=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,tu(u)):ic=null}break t}}oc=0,lc=null,eu(e,t,i,5);break;case 6:oc=0,lc=null,eu(e,t,i,6);break;case 8:qc(),fc=6;break e;default:throw Error(a(462))}}Jc();break}catch(d){Wc(e,d)}return ys=vs=null,D.H=r,D.A=s,rc=n,null!==ic?0:(sc=null,ac=0,Tr(),fc)}(e,t):Yc(e,t,!0),i=r;;){if(0===s){uc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!i||Vc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=i,pc|=i,s=4;break e}i=wc,wc=s,null!==i&&(null===wc?wc=i:wc.push.apply(wc,i))}s=o}if(i=!1,2!==s)continue}}if(1===s){Hc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,vc,!cc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=Ec+300-te())){if(zc(r,t,vc,!cc),0!==be(r,0,!0))break e;r.timeoutHandle=cd(Uc.bind(null,r,n,wc,Nc,xc,t,vc,pc,yc,cc,i,2,-0,0),s)}else Uc(r,n,wc,Nc,xc,t,vc,pc,yc,cc,i,0,-0,0)}break}s=Yc(e,t,!1),i=!1}Su(e)}function Uc(e,t,n,r,s,i,o,l,c,u,d,h,f,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(qd={stylesheets:null,count:0,unsuspend:Hd},Yl(t),null!==(h=function(){if(null===qd)throw Error(a(475));var e=qd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(ru.bind(null,e,t,i,n,r,s,o,l,c,d,1,f,m)),void zc(e,i,o,!u);ru(e,t,i,n,r,s,o,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Yn(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~gc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-fe(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&_e(e,n,t)}function Bc(){return 0!==(6&rc)||(Nu(0,!1),!1)}function qc(){if(null!==ic){if(0===oc)var e=ic.return;else ys=vs=null,Mi(e=ic),Qa=null,Ya=0,e=ic;for(;null!==e;)al(e.alternate,e),e=e.return;ic=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),qc(),sc=e,ic=n=Fr(e.current,null),ac=t,oc=0,lc=null,cc=!1,uc=we(e,t),dc=!1,yc=vc=gc=pc=mc=fc=0,wc=bc=null,xc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-fe(r),i=1<<s;t|=e[s],r&=~i}return hc=t,Tr(),n}function Wc(e,t){bi=null,D.H=Ha,t===Ws||t===Ks?(t=Zs(),oc=3):t===Gs?(t=Zs(),oc=4):oc=t===_o?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lc=t,null===ic&&(fc=1,xo(e,Nr(t,e.current)))}function Gc(){var e=D.H;return D.H=Ha,null===e?Ha:e}function Kc(){var e=D.A;return D.A=tc,e}function Qc(){fc=4,cc||(4194048&ac)!==ac&&null!==ro.current||(uc=!0),0===(134217727&mc)&&0===(134217727&pc)||null===sc||zc(sc,ac,vc,!1)}function Yc(e,t,n){var r=rc;rc|=2;var s=Gc(),i=Kc();sc===e&&ac===t||(Nc=null,Hc(e,t)),t=!1;var a=fc;e:for(;;)try{if(0!==oc&&null!==ic){var o=ic,l=lc;switch(oc){case 8:qc(),a=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var c=oc;if(oc=0,lc=null,eu(e,o,l,c),n&&uc){a=0;break e}break;default:c=oc,oc=0,lc=null,eu(e,o,l,c)}}$c(),a=fc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,ys=vs=null,rc=r,D.H=s,D.A=i,null===ic&&(sc=null,ac=0,Tr()),a}function $c(){for(;null!==ic;)Xc(ic)}function Jc(){for(;null!==ic&&!Z();)Xc(ic)}function Xc(e){var t=Xo(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function Zc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Mo(n,t,t.pendingProps,t.type,void 0,ac);break;case 11:t=Mo(n,t,t.pendingProps,t.type.render,t.ref,ac);break;case 5:Mi(t);default:al(n,t),t=Xo(n,t=ic=Ur(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function eu(e,t,n,r){ys=vs=null,Mi(t),Qa=null,Ya=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ss(t,n,s,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===so?Qc():null===n.alternate&&0===fc&&(fc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===Qs?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hu(e,r,s)),!1;case 22:return n.flags|=65536,r===Qs?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hu(e,r,s)),!1}throw Error(a(435,n.tag))}return hu(e,r,s),Qc(),!1}if(is)return null!==(t=ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ls&&ps(Nr(e=Error(a(422),{cause:r}),n))):(r!==ls&&ps(Nr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Nr(r,n),oi(e,s=So(e.stateNode,r,s)),4!==fc&&(fc=2)),!1;var i=Error(a(520),{cause:r});if(i=Nr(i,n),null===bc?bc=[i]:bc.push(i),4!==fc&&(fc=2),null===t)return!0;r=Nr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,oi(n,e=So(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===kc||!kc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,ko(s=No(s),e,n,r),oi(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ac))return fc=1,xo(e,Nr(n,e.current)),void(ic=null)}catch(i){if(null!==s)throw ic=s,i;return fc=1,xo(e,Nr(n,e.current)),void(ic=null)}32768&t.flags?(is||1===r?e=!0:uc||0!==(536870912&ac)?e=!1:(cc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ro.current)&&13===r.tag&&(r.flags|=16384))),nu(t,e)):tu(t)}function tu(e){var t=e;do{if(0!==(32768&t.flags))return void nu(t,cc);e=t.return;var n=sl(t.alternate,t,hc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===fc&&(fc=5)}function nu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);fc=6,ic=null}function ru(e,t,n,r,s,i,o,l,c){e.cancelPendingCommit=null;do{lu()}while(0!==_c);if(0!==(6&rc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-fe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&_e(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=Cr,o,l,c),e===sc&&(ic=sc=null,ac=0),Tc=t,Cc=e,Ic=n,Ac=i,jc=s,Pc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(ie,function(){return cu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=D.T,D.T=null,s=L.p,L.p=2,o=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,nd=rh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},rh=!1,Nl=t;null!==Nl;)if(e=(t=Nl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Nl=e;else for(;null!==Nl;){switch(i=(t=Nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var p=go(n.type,s,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(p,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){du(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Nl=e;break}Nl=t.return}}(e,t)}finally{rc=o,L.p=s,D.T=r}}_c=1,su(),iu(),au()}}function su(){if(1===_c){_c=0;var e=Cc,t=Tc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null;var r=L.p;L.p=2;var s=rc;rc|=4;try{Ll(t,e);var i=rd,a=er(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,p=Math.min(l.start,m),g=void 0===l.end?p:Math.min(l.end,m);!f.extend&&p>g&&(a=g,g=p,p=a);var v=Xn(o,p),y=Xn(o,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),p>g?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}rh=!!nd,rd=nd=null}finally{rc=s,L.p=r,D.T=n}}e.current=t,_c=2}}function iu(){if(2===_c){_c=0;var e=Cc,t=Tc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=D.T,D.T=null;var r=L.p;L.p=2;var s=rc;rc|=4;try{kl(e,t.alternate,t)}finally{rc=s,L.p=r,D.T=n}}_c=3}}function au(){if(4===_c||3===_c){_c=0,ee();var e=Cc,t=Tc,n=Ic,r=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?_c=5:(_c=0,Tc=Cc=null,ou(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(kc=null),Ie(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=D.T,s=L.p,L.p=2,D.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{D.T=t,L.p=s}}0!==(3&Ic)&&lu(),Su(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Dc?Rc++:(Rc=0,Dc=e):Rc=0,Nu(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ds(t)))}function lu(e){return su(),iu(),au(),cu()}function cu(){if(5!==_c)return!1;var e=Cc,t=Ac;Ac=0;var n=Ie(Ic),r=D.T,s=L.p;try{L.p=32>n?32:n,D.T=null,n=jc,jc=null;var i=Cc,o=Ic;if(_c=0,Tc=Cc=null,Ic=0,0!==(6&rc))throw Error(a(331));var l=rc;if(rc|=4,Xl(i.current),Hl(i,i.current,o,n),rc=l,Nu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{L.p=s,D.T=r,ou(e,t)}}function uu(e,t,n){t=Nr(n,t),null!==(e=ii(e,t=So(e.stateNode,t,2),2))&&(ke(e,2),Su(e))}function du(e,t,n){if(3===e.tag)uu(e,e,n);else for(;null!==t;){if(3===t.tag){uu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===kc||!kc.has(r))){e=Nr(n,e),null!==(r=ii(t,n=No(2),2))&&(ko(n,r,t,e),ke(r,2),Su(r));break}}t=t.return}}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new nc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(dc=!0,s.add(n),e=fu.bind(null,e,t,n),t.then(e,e))}function fu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sc===e&&(ac&n)===n&&(4===fc||3===fc&&(62914560&ac)===ac&&300>te()-Ec?0===(2&rc)&&Hc(e,0):gc|=n,yc===ac&&(yc=0)),Su(e)}function mu(e,t){0===t&&(t=Se()),null!==(e=jr(e,t))&&(ke(e,t),Su(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),mu(e,n)}var vu=null,yu=null,bu=!1,wu=!1,xu=!1,Eu=0;function Su(e){e!==yu&&null===e.next&&(null===yu?vu=yu=e:yu=yu.next=e),wu=!0,bu||(bu=!0,hd(function(){0!==(6&rc)?J(re,ku):_u()}))}function Nu(e,t){if(!xu&&wu){xu=!0;do{for(var n=!1,r=vu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-fe(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Iu(r,i))}else i=ac,0===(3&(i=be(r,r===sc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,i)||(n=!0,Iu(r,i));r=r.next}}while(n);xu=!1}}function ku(){_u()}function _u(){wu=bu=!1;var e=0;0!==Eu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ld&&(ld=e,!0);return ld=null,!1}()&&(e=Eu),Eu=0);for(var t=te(),n=null,r=vu;null!==r;){var s=r.next,i=Cu(r,t);0===i?(r.next=null,null===n?vu=s:n.next=s,null===s&&(yu=n)):(n=r,(0!==e||0!==(3&i))&&(wu=!0)),r=s}Nu(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-fe(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=xe(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=ac,n=be(e,e===(t=sc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&X(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&X(r),Ie(n)){case 2:case 8:n=se;break;case 32:default:n=ie;break;case 268435456:n=oe}return r=Tu.bind(null,e),n=J(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&X(r),e.callbackPriority=2,e.callbackNode=null,2}function Tu(e,t){if(0!==_c&&5!==_c)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var r=ac;return 0===(r=be(e,e===sc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Tu.bind(null,e):null)}function Iu(e,t){if(lu())return null;Fc(e,t,!0)}function Au(){return 0===Eu&&(Eu=Ee()),Eu}function ju(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ru=0;Ru<xr.length;Ru++){var Du=xr[Ru];Er(Du.toLowerCase(),"on"+(Du[0].toUpperCase()+Du.slice(1)))}Er(fr,"onAnimationEnd"),Er(mr,"onAnimationIteration"),Er(pr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(gr,"onTransitionRun"),Er(vr,"onTransitionStart"),Er(yr,"onTransitionCancel"),Er(br,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ou=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Mu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){vo(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){vo(u)}s.currentTarget=null,i=l}}}}function Fu(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(Bu(t,e,2,!1),n.add(r))}function Uu(e,t,n){var r=0;t&&(r|=4),Bu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Vu]){e[Vu]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Ou.has(t)||Uu(t,!1,e),Uu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,Uu("selectionchange",!1,t))}}function Bu(e,t,n,r){switch(uh(t)){case 2:var s=sh;break;case 8:s=ih;break;default:s=ah}n=s.bind(null,t,n,e),s=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qu(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=ze(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}o=o.parentNode}}r=r.return}Ot(function(){var r=i,s=jt(n),a=[];e:{var o=wr.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=pn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case fr:case mr:case pr:c=on;break;case br:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=r;null!==p;){var g=p;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Mt(p,f))&&d.push(Hu(p,g,m)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[De])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?o:qe(c),m=null==u?o:qe(u),(o=new d(g,p+"leave",c,n,s)).target=h,o.relatedTarget=m,g=null,ze(s)===r&&((d=new d(f,p+"enter",u,n,s)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,p=0,m=d=c;m;m=Gu(m))p++;for(m=0,g=f;g;g=Gu(g))m++;for(;0<p-m;)d=Gu(d),p--;for(;0<m-p;)f=Gu(f),m--;for(;p--;){if(d===f||null!==f&&d===f.alternate)break e;d=Gu(d),f=Gu(f)}d=null}else d=null;null!==c&&Ku(a,o,c,d,!1),null!==u&&null!==h&&Ku(a,h,u,d,!0)}if("select"===(c=(o=r?qe(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Fn;else if(Pn(o))if(Un)v=Qn;else{v=Gn;var y=Wn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&_t(r.elementType)&&(v=Fn):v=Kn;switch(v&&(v=v(e,r))?Rn(a,v,n,s):(y&&y(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&yt(o,"number",o.value)),y=r?qe(r):window,e){case"focusin":(Pn(y)||"true"===y.contentEditable)&&(rr=y,sr=r,ir=null);break;case"focusout":ir=sr=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,s);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,s)}var b;if(En)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else An?Tn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(kn&&"ko"!==n.locale&&(An||"onCompositionStart"!==w?"onCompositionEnd"===w&&An&&(b=Ht()):(Bt="value"in(zt=s)?zt.value:zt.textContent,An=!0)),0<(y=Wu(r,w)).length&&(w=new cn(w,e,null,n,s),a.push({event:w,listeners:y}),b?w.data=b:null!==(b=In(n))&&(w.data=b))),(b=Nn?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(Cn=!0,_n);case"textInput":return(e=t.data)===_n&&Cn?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!En&&Tn(e,t)?(e=Ht(),qt=Bt=zt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Wu(r,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,s),a.push({event:y,listeners:w}),y.data=b)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=ju((s[Re]||null).action),a=r.submitter;a&&null!==(t=(t=a[Re]||null)?ju(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new Zt("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Eu){var e=a?Pu(s,a):new FormData(s);Aa(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Pu(s,a):new FormData(s),Aa(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(a,e,r,n,s)}Mu(a,t)})}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Mt(e,n))&&r.unshift(Hu(e,s,i)),null!=(s=Mt(e,t))&&r.push(Hu(e,s,i))),3===e.tag)return r;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Mt(n,i))&&a.unshift(Hu(n,c,l)):s||null!=(c=Mt(n,i))&&a.push(Hu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function $u(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Yu,"")}function Ju(e,t){return t=$u(t),$u(e)===t}function Xu(){}function Zu(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":kt(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Zu(e,t,"name",s.name,s,null),Zu(e,t,"formEncType",s.formEncType,s,null),Zu(e,t,"formMethod",s.formMethod,s,null),Zu(e,t,"formTarget",s.formTarget,s,null)):(Zu(e,t,"encType",s.encType,s,null),Zu(e,t,"method",s.method,s,null),Zu(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,r)}}function ed(e,t,n,r,s,i){switch(n){case"style":kt(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Re]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function td(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Zu(e,t,r,o,n,null)}}return i&&Zu(e,t,"srcSet",n.srcSet,n,null),void(s&&Zu(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=r=o=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Zu(e,t,s,d,n,null)}}return vt(e,r,l,c,u,o,i,!1),void dt(e);case"select":for(i in Fu("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Zu(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?bt(e,!!s,t,!1):null!=n&&bt(e,!!s,n,!0));case"textarea":for(o in Fu("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Zu(e,t,o,l,n,null)}return xt(e,s,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Zu(e,t,c,s,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(s=0;s<Lu.length;s++)Fu(Lu[s],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Zu(e,t,u,s,n,null)}return;default:if(_t(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&ed(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Zu(e,t,l,s,n,null))}var nd=null,rd=null;function sd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ad(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null;var cd="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,dd="function"===typeof Promise?Promise:void 0,hd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof dd?function(e){return dd.resolve(null).then(e).catch(fd)}:cd;function fd(e){setTimeout(function(){throw e})}function md(e){return"head"===e}function pd(e,t){var n=t,r=0,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&Ed(a.documentElement),2&n&&Ed(a.body),4&n)for(Ed(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===s)return e.removeChild(i),void Th(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);Th(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Ve(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function vd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xd(e,t,n){switch(t=sd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Ed(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ve(e)}var Sd=new Map,Nd=new Set;function kd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var _d=L.d;L.d={f:function(){var e=_d.f(),t=Bc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Pa(t):_d.r(e)},D:function(e){_d.D(e),Td("dns-prefetch",e,null)},C:function(e,t){_d.C(e,t),Td("preconnect",e,t)},L:function(e,t,n){_d.L(e,t,n);var r=Cd;if(r&&e&&t){var s='link[rel="preload"][as="'+pt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+pt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+pt(n.imageSizes)+'"]')):s+='[href="'+pt(e)+'"]';var i=s;switch(t){case"style":i=Ad(e);break;case"script":i=Rd(e)}Sd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(jd(i))||"script"===t&&r.querySelector(Dd(i))||(td(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){_d.m(e,t);var n=Cd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+pt(r)+'"][href="'+pt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Rd(e)}if(!Sd.has(i)&&(e=h({rel:"modulepreload",href:e},t),Sd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Dd(i)))return}td(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){_d.X(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,s=Rd(e),i=r.get(s);i||((i=n.querySelector(Dd(s)))||(e=h({src:e,async:!0},t),(t=Sd.get(s))&&Fd(e,t),We(i=n.createElement("script")),td(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){_d.S(e,t,n);var r=Cd;if(r&&e){var s=He(r).hoistableStyles,i=Ad(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(jd(i)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(i))&&Md(e,n);var l=a=r.createElement("link");We(l),td(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Od(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){_d.M(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,s=Rd(e),i=r.get(s);i||((i=n.querySelector(Dd(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=Sd.get(s))&&Fd(e,t),We(i=n.createElement("script")),td(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Cd="undefined"===typeof document?null:document;function Td(e,t,n){var r=Cd;if(r&&"string"===typeof t&&t){var s=pt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Nd.has(s)||(Nd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(td(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Id(e,t,n,r){var s,i,o,l,c=(c=H.current)?kd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(jd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),u||(s=c,i=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),td(i,"link",o),We(i),s.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Rd(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ad(e){return'href="'+pt(e)+'"'}function jd(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Rd(e){return'[src="'+pt(e)+'"]'}function Dd(e){return"script[async]"+e}function Ld(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+pt(n.href)+'"]');if(r)return t.instance=r,We(r),r;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),td(r,"style",s),Od(r,n.precedence,e),t.instance=r;case"stylesheet":s=Ad(n.href);var i=e.querySelector(jd(s));if(i)return t.state.loading|=4,t.instance=i,We(i),i;r=Pd(n),(s=Sd.get(s))&&Md(r,s),We(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),td(i,"link",r),t.state.loading|=4,Od(i,n.precedence,e),t.instance=i;case"script":return i=Rd(n.src),(s=e.querySelector(Dd(i)))?(t.instance=s,We(s),s):(r=n,(s=Sd.get(i))&&Fd(r=h({},n),s),We(s=(e=e.ownerDocument||e).createElement("script")),td(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Od(r,n.precedence,e));return t.instance}function Od(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function Vd(e,t,n){if(null===Ud){var r=new Map,s=Ud=new Map;s.set(n,r)}else(r=(s=Ud).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Ue]||i[Pe]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Bd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var qd=null;function Hd(){}function Wd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Qd,e),Gd=null,Wd.call(e))}function Qd(e,t){if(!(4&t.state.loading)){var n=Gd.get(e);if(n)var r=n.get(null);else{n=new Map,Gd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=Wd.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:x,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function $d(e,t,n,r,s,i,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Jd(e,t,n,r,s,i,a,o,l,c,u,d){return e=new $d(e,t,n,a,o,l,c,d),t=1,!0===i&&(t|=24),i=Or(3,null,null,t),e.current=i,i.stateNode=e,(t=Rs()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ni(i),e}function Xd(e){return e?e=Dr:Dr}function Zd(e,t,n,r,s,i){s=Xd(s),null===r.context?r.context=s:r.pendingContext=s,(r=si(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ii(e,r,t))&&(Mc(n,0,t),ai(n,e,t))}function eh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function th(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function nh(e){if(13===e.tag){var t=jr(e,67108864);null!==t&&Mc(t,0,67108864),th(e,67108864)}}var rh=!0;function sh(e,t,n,r){var s=D.T;D.T=null;var i=L.p;try{L.p=2,ah(e,t,n,r)}finally{L.p=i,D.T=s}}function ih(e,t,n,r){var s=D.T;D.T=null;var i=L.p;try{L.p=8,ah(e,t,n,r)}finally{L.p=i,D.T=s}}function ah(e,t,n,r){if(rh){var s=oh(r);if(null===s)qu(e,t,r,lh,n),bh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return hh=wh(hh,e,t,n,r,s),!0;case"dragenter":return fh=wh(fh,e,t,n,r,s),!0;case"mouseover":return mh=wh(mh,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ph.set(i,wh(ph.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gh.set(i,wh(gh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==s;){var i=Be(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=ye(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-fe(a);o.entanglements[1]|=l,a&=~l}Su(i),0===(6&rc)&&(Sc=te()+500,Nu(0,!1))}}break;case 13:null!==(o=jr(i,2))&&Mc(o,0,2),Bc(),th(i,2)}if(null===(i=oh(r))&&qu(e,t,r,lh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else qu(e,t,r,null,n)}}function oh(e){return ch(e=jt(e))}var lh=null;function ch(e){if(lh=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case se:return 8;case ie:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var dh=!1,hh=null,fh=null,mh=null,ph=new Map,gh=new Map,vh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":hh=null;break;case"dragenter":case"dragleave":fh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function wh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Be(t))&&nh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function xh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,function(){if(13===n.tag){var e=Lc();e=Te(e);var t=jr(n,e);null!==t&&Mc(t,0,e),th(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Eh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&nh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function Sh(e,t,n){Eh(e)&&n.delete(t)}function Nh(){dh=!1,null!==hh&&Eh(hh)&&(hh=null),null!==fh&&Eh(fh)&&(fh=null),null!==mh&&Eh(mh)&&(mh=null),ph.forEach(Sh),gh.forEach(Sh)}function kh(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Nh)))}var _h=null;function Ch(e){_h!==e&&(_h=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_h===e&&(_h=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===ch(r||n))continue;break}var i=Be(n);null!==i&&(e.splice(t,3),t-=3,Aa(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Th(e){function t(t){return kh(t,e)}null!==hh&&kh(hh,e),null!==fh&&kh(fh,e),null!==mh&&kh(mh,e),ph.forEach(t),gh.forEach(t);for(var n=0;n<vh.length;n++){var r=vh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<vh.length&&null===(n=vh[0]).blockedOn;)xh(n),null===n.blockedOn&&vh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[Re]||null;if("function"===typeof i)a||Ch(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[Re]||null)o=a.formAction;else if(null!==ch(s))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Ch(n)}}}function Ih(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Ih.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Zd(t.current,Lc(),e,t,null,null)},Ah.prototype.unmount=Ih.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),Bc(),t[De]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vh.length&&0!==t&&t<vh[n].priority;n++);vh.splice(n,0,e),0===n&&xh(e)}};var jh=s.version;if("19.1.0"!==jh)throw Error(a(527,jh,"19.1.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return u(s),e;if(i===r)return u(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{ue=Rh.inject(Ph),de=Rh}catch(Lh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",s=yo,i=bo,l=wo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jd(e,1,!1,null,0,n,r,s,i,l,0,null),e[De]=t.current,zu(e),new Ih(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,s="",i=yo,l=bo,c=wo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Jd(e,1,!0,t,0,r,s,i,l,c,0,u)).context=Xd(null),n=t.current,(s=si(r=Te(r=Lc()))).callback=null,ii(n,s,r),n=r,t.current.lanes=n,ke(t,n),Su(t),e[De]=t.current,zu(e),new Ah(t)},t.version="19.1.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,p(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function N(e,t,r,s,i,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(){}function I(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return I((u=e._init)(e._payload),t,s,i,a)}}if(u)return a=a(e),u=""===i?"."+C(e,0):i,x(a)?(s="",null!=u&&(s=u.replace(_,"$&/")+"/"),I(a,t,s,"",function(e){return e})):null!=a&&(k(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+u,a=N(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,m=""===i?".":i+":";if(x(e))for(var p=0;p<e.length;p++)u+=I(i=e[p],t,s,o=m+C(i,p),a);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(i=e.next()).done;)u+=I(i=i.value,t,s,o=m+C(i,p++),a);else if("object"===o){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(T,T):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",function(e){return t.call(n,e,s++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return E.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=p({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];r.children=a}return N(e.type,s,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===s[r]&&(s[r]=a[r]);return N(e,i,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var r=e(),s=E.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(R,P)}catch(i){P(i)}finally{E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=E.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.1.0"},358:(e,t)=>{const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function E(e){if(g=!1,x(e),!p)if(null!==r(c))p=!0,N||(N=!0,S());else{var t=r(u);null!==t&&P(E,t.startTime-e)}}var S,N=!1,k=-1,_=5,C=-1;function T(){return!!v||!(t.unstable_now()-C<_)}function I(){if(v=!1,N){var e=t.unstable_now();C=e;var n=!0;try{e:{p=!1,g&&(g=!1,b(k),k=-1),m=!0;var i=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,x(e),n=!0;break t}h===r(c)&&s(c),x(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(E,l.startTime-e),n=!1}}break e}finally{h=null,f=i,m=!1}n=void 0}}finally{n?S():N=!1}}}if("function"===typeof w)S=function(){w(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,j=A.port2;A.port1.onmessage=I,S=function(){j.postMessage(null)}}else S=function(){y(I,0)};function P(e,n){k=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(k),k=-1):g=!0,P(E,i-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,N||(N=!0,S()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),s=n(391);function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function l(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(358);const d=["sri"],h=["page"],f=["page","matches"],m=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var v="popstate";function y(){return k(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return E("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:S(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function w(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function x(e,t){return{usr:e.state,key:e.key,idx:t}}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?N(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function S(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function N(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function k(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o="POP",l=null,c=d();function d(){return(a.state||{idx:null}).idx}function h(){o="POP";let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function f(e){return _(e)}null==c&&(c=0,a.replaceState(u(u({},a.state),{},{idx:c}),""));let m={get action(){return o},get location(){return e(s,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(v,h),l=e,()=>{s.removeEventListener(v,h),l=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=E(m.location,e,t);n&&n(r,e),c=d()+1;let u=x(r,c),h=m.createHref(r);try{a.pushState(u,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;s.location.assign(h)}i&&l&&l({action:o,location:m.location,delta:1})},replace:function(e,t){o="REPLACE";let r=E(m.location,e,t);n&&n(r,e),c=d();let s=x(r,c),u=m.createHref(r);a.replaceState(s,"",u),i&&l&&l({action:o,location:m.location,delta:0})},go:e=>a.go(e)};return m}function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),b(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:S(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function C(e,t){return T(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function T(e,t,n,r){let s=q(("string"===typeof t?N(t):t).pathname||"/",n);if(null==s)return null;let i=I(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=B(s);a=U(i[o],e,r)}return a}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(b(a.relativePath.startsWith(r),'Absolute route path "'.concat(a.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),a.relativePath=a.relativePath.slice(r.length));let o=Q([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(o,'".')),I(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:F(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of A(e.path))s(e,t,r);else s(e,t)}),t}function A(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=A(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var j=/^:[\w-]+$/,P=3,R=2,D=1,L=10,O=-2,M=e=>"*"===e;function F(e,t){let n=e.split("/"),r=n.length;return n.some(M)&&(r+=O),t&&(r+=R),n.filter(e=>!M(e)).reduce((e,t)=>e+(j.test(t)?P:""===t?D:L),r)}function U(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=V({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=V({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:Q([i,u.pathname]),pathnameBase:Y(Q([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=Q([i,u.pathnameBase]))}return a}function V(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=z(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function z(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];w("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function B(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return w(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function H(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function W(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function G(e){let t=W(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function K(e,t,n){let r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=N(e):(r=u({},e),b(!r.pathname||!r.pathname.includes("?"),H("?","pathname","search",r)),b(!r.pathname||!r.pathname.includes("#"),H("#","pathname","hash",r)),b(!r.search||!r.search.includes("#"),H("#","search","hash",r)));let i,a=""===e||""===r.pathname,o=a?"/":r.pathname;if(null==o)i=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:s=""}="string"===typeof e?N(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:$(r),hash:J(s)}}(r,i),c=o&&"/"!==o&&o.endsWith("/"),d=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}var Q=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function X(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Z=["POST","PUT","PATCH","DELETE"],ee=(new Set(Z),["GET",...Z]);new Set(ee),Symbol("ResetLoaderData");var te=r.createContext(null);te.displayName="DataRouter";var ne=r.createContext(null);ne.displayName="DataRouterState";var re=r.createContext({isTransitioning:!1});re.displayName="ViewTransition";var se=r.createContext(new Map);se.displayName="Fetchers";var ie=r.createContext(null);ie.displayName="Await";var ae=r.createContext(null);ae.displayName="Navigation";var oe=r.createContext(null);oe.displayName="Location";var le=r.createContext({outlet:null,matches:[],isDataRoute:!1});le.displayName="Route";var ce=r.createContext(null);ce.displayName="RouteError";function ue(){return null!=r.useContext(oe)}function de(){return b(ue(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(oe).location}var he="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fe(e){r.useContext(ae).static||r.useLayoutEffect(e)}function me(){let{isDataRoute:e}=r.useContext(le);return e?function(){let{router:e}=Ne("useNavigate"),t=_e("useNavigate"),n=r.useRef(!1);fe(()=>{n.current=!0});let s=r.useCallback(async function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(n.current,he),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,u({fromRouteId:t},s)))},[e,t]);return s}():function(){b(ue(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(te),{basename:t,navigator:n}=r.useContext(ae),{matches:s}=r.useContext(le),{pathname:i}=de(),a=JSON.stringify(G(s)),o=r.useRef(!1);fe(()=>{o.current=!0});let l=r.useCallback(function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(w(o.current,he),!o.current)return;if("number"===typeof r)return void n.go(r);let l=K(r,JSON.parse(a),i,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Q([t,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)},[t,n,a,i,e]);return l}()}r.createContext(null);function pe(){let{matches:e}=r.useContext(le),t=e[e.length-1];return t?t.params:{}}function ge(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(le),{pathname:s}=de(),i=JSON.stringify(G(n));return r.useMemo(()=>K(e,JSON.parse(i),s,"path"===t),[e,i,s,t])}function ve(e,t,n,s){b(ue(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=r.useContext(ae),{matches:a}=r.useContext(le),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",h=o&&o.route;{let e=h&&h.path||"";Ie(c,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(c,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let f,m=de();if(t){var p;let e="string"===typeof t?N(t):t;b("/"===d||(null===(p=e.pathname)||void 0===p?void 0:p.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),f=e}else f=m;let g=f.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=C(e,{pathname:v});w(h||null!=y,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),w(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let x=Ee(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Q([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Q([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,s);return t&&x?r.createElement(oe.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},x):x}function ye(){let e=Ce(),t=X(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:a},"ErrorBoundary")," or"," ",r.createElement("code",{style:a},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:i},n):null,o)}var be=r.createElement(ye,null),we=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(le.Provider,{value:this.props.routeContext},r.createElement(ce.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xe(e){let{routeContext:t,match:n,children:s}=e,i=r.useContext(te);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(le.Provider,{value:t},s)}function Ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,i=null===n||void 0===n?void 0:n.errors;if(null!=i){let e=s.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let a=!1,o=-1;if(n)for(let r=0;r<s.length;r++){let e=s[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){a=!0,s=o>=0?s.slice(0,o+1):[s[0]];break}}}return s.reduceRight((e,l,c)=>{let u,d=!1,h=null,f=null;n&&(u=i&&l.route.id?i[l.route.id]:void 0,h=l.route.errorElement||be,a&&(o<0&&0===c?(Ie("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):o===c&&(d=!0,f=l.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,c+1)),p=()=>{let t;return t=u?h:d?f:l.route.Component?r.createElement(l.route.Component,null):l.route.element?l.route.element:e,r.createElement(xe,{match:l,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?r.createElement(we,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}function Se(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ne(e){let t=r.useContext(te);return b(t,Se(e)),t}function ke(e){let t=r.useContext(ne);return b(t,Se(e)),t}function _e(e){let t=function(e){let t=r.useContext(le);return b(t,Se(e)),t}(e),n=t.matches[t.matches.length-1];return b(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ce(){var e;let t=r.useContext(ce),n=ke("useRouteError"),s=_e("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[s]}var Te={};function Ie(e,t,n){t||Te[e]||(Te[e]=!0,w(!1,n))}r.memo(function(e){let{routes:t,future:n,state:r}=e;return ve(t,void 0,r,n)});function Ae(e){let{to:t,replace:n,state:s,relative:i}=e;b(ue(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=r.useContext(ae);w(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=r.useContext(le),{pathname:l}=de(),c=me(),u=K(t,G(o),l,"path"===i),d=JSON.stringify(u);return r.useEffect(()=>{c(JSON.parse(d),{replace:n,state:s,relative:i})},[c,d,i,n,s]),null}function je(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Pe(e){let{basename:t="/",children:n=null,location:s,navigationType:i="POP",navigator:a,static:o=!1}=e;b(!ue(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=r.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof s&&(s=N(s));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:m="default"}=s,p=r.useMemo(()=>{let e=q(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:m},navigationType:i}},[l,u,d,h,f,m,i]);return w(null!=p,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==p?null:r.createElement(ae.Provider,{value:c},r.createElement(oe.Provider,{children:n,value:p}))}function Re(e){let{children:t,location:n}=e;return ve(De(t),n)}r.Component;function De(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,s)=>{if(!r.isValidElement(e))return;let i=[...t,s];if(e.type===r.Fragment)return void n.push.apply(n,De(e.props.children,i));b(e.type===je,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=De(e.props.children,i)),n.push(a)}),n}var Le="get",Oe="application/x-www-form-urlencoded";function Me(e){return null!=e&&"string"===typeof e.tagName}function Fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}var Ue=null;var Ve=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ze(e){return null==e||Ve.has(e)?e:(w(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Oe,'"')),null)}function Be(e,t){let n,r,s,i,a;if(Me(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?q(a,t):null,n=e.getAttribute("method")||Le,s=ze(e.getAttribute("enctype"))||Oe,i=new FormData(e)}else if(function(e){return Me(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Me(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?q(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Le,s=ze(e.getAttribute("formenctype"))||ze(a.getAttribute("enctype"))||Oe,i=new FormData(a,e),!function(){if(null===Ue)try{new FormData(document.createElement("form"),0),Ue=!1}catch(e){Ue=!0}return Ue}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";i.append("".concat(e,"x"),"0"),i.append("".concat(e,"y"),"0")}else t&&i.append(t,r)}}else{if(Me(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Le,r=null,s=Oe,a=e}var o;return i&&"text/plain"===s&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}function qe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function He(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function We(e){return null!=e&&"string"===typeof e.page}function Ge(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ke(e,t,n,r,s,i){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===i?t.filter((t,i)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Qe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1),[...new Set(r)];var r}function Ye(e,t){let n=new Set,r=new Set(t);return e.reduce((e,s)=>{if(t&&!We(s)&&"script"===s.as&&s.href&&r.has(s.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(s));return n.has(i)||(n.add(i),e.push({key:i,link:s})),e},[])}function $e(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Je=new Set([100,101,204,205]);function Xe(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===q(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}r.Component;function Ze(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let s,i=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(X(t))return r.createElement(et,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),i);if(t instanceof Error)s=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);s=new Error(e)}return r.createElement(et,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),i)}function et(e){var t;let{title:n,renderScripts:s,isOutsideRemixApp:i,children:a}=e,{routeModules:o}=it();return null!==(t=o.root)&&void 0!==t&&t.Layout&&!i?a:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,s?r.createElement(ht,null):null)))}function tt(e,t){return"lazy"===e.mode&&!0===t}function nt(){let e=r.useContext(te);return qe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function rt(){let e=r.useContext(ne);return qe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var st=r.createContext(void 0);function it(){let e=r.useContext(st);return qe(e,"You must render this element inside a <HydratedRouter> element"),e}function at(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ot(e,t,n){if(n&&!dt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}function lt(e){let{page:t}=e,n=i(e,h),{router:s}=nt(),a=r.useMemo(()=>C(s.routes,t,s.basename),[s.routes,t,s.basename]);return a?r.createElement(ut,u({page:t,matches:a},n)):null}function ct(e){let{manifest:t,routeModules:n}=it(),[s,i]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return Ye((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await He(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ge).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),s}function ut(e){let{page:t,matches:n}=e,s=i(e,f),a=de(),{manifest:o,routeModules:l}=it(),{basename:c}=nt(),{loaderData:d,matches:h}=rt(),m=r.useMemo(()=>Ke(t,n,h,o,a,"data"),[t,n,h,o,a]),p=r.useMemo(()=>Ke(t,n,h,o,a,"assets"),[t,n,h,o,a]),g=r.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let s=o.routes[t.route.id];s&&s.hasLoader&&(!m.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||s.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let s=Xe(t,c);return r&&e.size>0&&s.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[s.pathname+s.search]},[c,d,a,o,m,n,t,l]),v=r.useMemo(()=>Qe(p,o),[p,o]),y=ct(p);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},s))),v.map(e=>r.createElement("link",u({key:e,rel:"modulepreload",href:e},s))),y.map(e=>{let{key:t,link:n}=e;return r.createElement("link",u({key:t},n))}))}st.displayName="FrameworkContext";var dt=!1;function ht(e){let{manifest:t,serverHandoffString:n,isSpaMode:s,renderMeta:a,routeDiscovery:o,ssr:l}=it(),{router:c,static:h,staticContext:f}=nt(),{matches:m}=rt(),p=tt(o,l);a&&(a.didRenderScripts=!0);let g=ot(m,null,s);r.useEffect(()=>{dt=!0},[]);let v=r.useMemo(()=>{var s;let a=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=h?"".concat(null!==(s=t.hmr)&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(p?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(g.map((e,n)=>{let r="route".concat(n),s=t.routes[e.route.id];qe(s,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:i,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,u=[...i?[{module:i,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(p?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=i(e,d),s=new Set(t.state.matches.map(e=>e.route.id)),a=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(a.pop();a.length>0;)o.push("/".concat(a.join("/"))),a.pop();o.forEach(e=>{let n=C(t.routes,e,t.basename);n&&n.forEach(e=>s.add(e.route.id))});let l=[...s].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return u(u({},r),{},{routes:l,sri:!!n||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:$e(a),type:void 0})),r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:$e(o),type:"module",async:!0})))},[]),y=dt?[]:(b=t.entry.imports.concat(Qe(g,t,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let w="object"===typeof t.sri?t.sri:{};return dt?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,p?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0})),v)}function ft(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}var mt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{mt&&(window.__reactRouterVersion="7.6.2")}catch(Yb){}function pt(e){let{basename:t,children:n,window:s}=e,i=r.useRef();null==i.current&&(i.current=y({window:s,v5Compat:!0}));let a=i.current,[o,l]=r.useState({action:a.action,location:a.location}),c=r.useCallback(e=>{r.startTransition(()=>l(e))},[l]);return r.useLayoutEffect(()=>a.listen(c),[a,c]),r.createElement(Pe,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a})}var gt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=r.forwardRef(function(e,t){let n,{onClick:s,discover:a="render",prefetch:o="none",relative:l,reloadDocument:c,replace:d,state:h,target:f,to:p,preventScrollReset:g,viewTransition:v}=e,y=i(e,m),{basename:x}=r.useContext(ae),E="string"===typeof p&&gt.test(p),N=!1;if("string"===typeof p&&E&&(n=p,mt))try{let e=new URL(window.location.href),t=p.startsWith("//")?new URL(e.protocol+p):new URL(p),n=q(t.pathname,x);t.origin===e.origin&&null!=n?p=n+t.search+t.hash:N=!0}catch(Yb){w(!1,'<Link to="'.concat(p,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let k=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(ue(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=r.useContext(ae),{hash:i,pathname:a,search:o}=ge(e,{relative:t}),l=a;return"/"!==n&&(l="/"===a?n:Q([n,a])),s.createHref({pathname:l,search:o,hash:i})}(p,{relative:l}),[_,C,T]=function(e,t){let n=r.useContext(st),[s,i]=r.useState(!1),[a,o]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=r.useRef(null);r.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(s){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[s]);let m=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?"intent"!==e?[a,f,{}]:[a,f,{onFocus:at(l,m),onBlur:at(c,p),onMouseEnter:at(u,m),onMouseLeave:at(d,p),onTouchStart:at(h,m)}]:[!1,f,{}]}(o,y),I=function(e){let{target:t,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=me(),c=de(),u=ge(e,{relative:a});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:S(c)===S(u);l(e,{replace:t,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,u,n,s,t,e,i,a,o])}(p,{replace:d,state:h,target:f,preventScrollReset:g,relative:l,viewTransition:v});let A=r.createElement("a",u(u(u({},y),T),{},{href:n||k,onClick:N||c?s:function(e){s&&s(e),e.defaultPrevented||I(e)},ref:ft(t,C),target:f,"data-discover":E||"render"!==a?void 0:"true"}));return _&&!E?r.createElement(r.Fragment,null,A,r.createElement(lt,{page:k})):A});vt.displayName="Link",r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:s=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:d,children:h}=e,f=i(e,p),m=ge(c,{relative:f.relative}),g=de(),v=r.useContext(ne),{navigator:y,basename:w}=r.useContext(ae),x=null!=v&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(re);b(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=wt("useViewTransitionState"),i=ge(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=q(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=q(n.nextLocation.pathname,s)||n.nextLocation.pathname;return null!=V(i.pathname,o)||null!=V(i.pathname,a)}(m)&&!0===d,E=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,S=g.pathname,N=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(S=S.toLowerCase(),N=N?N.toLowerCase():null,E=E.toLowerCase()),N&&w&&(N=q(N,w)||N);const k="/"!==E&&E.endsWith("/")?E.length-1:E.length;let _,C=S===E||!o&&S.startsWith(E)&&"/"===S.charAt(k),T=null!=N&&(N===E||!o&&N.startsWith(E)&&"/"===N.charAt(E.length)),I={isActive:C,isPending:T,isTransitioning:x},A=C?n:void 0;_="function"===typeof a?a(I):[a,C?"active":null,T?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let j="function"===typeof l?l(I):l;return r.createElement(vt,u(u({},f),{},{"aria-current":A,className:_,ref:t,style:j,to:c,viewTransition:d}),"function"===typeof h?h(I):h)}).displayName="NavLink";var yt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:s,navigate:a,reloadDocument:o,replace:l,state:c,method:d=Le,action:h,onSubmit:f,relative:m,preventScrollReset:p,viewTransition:v}=e,y=i(e,g),w=Nt(),x=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(ae),s=r.useContext(le);b(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a=u({},ge(e||".",{relative:t})),o=de();if(null==e){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?"?".concat(n):""}}e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:Q([n,a.pathname]));return S(a)}(h,{relative:m}),E="get"===d.toLowerCase()?"get":"post",N="string"===typeof h&&gt.test(h);return r.createElement("form",u(u({ref:t,method:E,action:x,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;w(t||e.currentTarget,{fetcherKey:s,method:n,navigate:a,replace:l,state:c,relative:m,preventScrollReset:p,viewTransition:v})}},y),{},{"data-discover":N||"render"!==n?void 0:"true"}))});function bt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function wt(e){let t=r.useContext(te);return b(t,bt(e)),t}function xt(e){w("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=r.useRef(Fe(e)),n=r.useRef(!1),s=de(),i=r.useMemo(()=>function(e,t){let n=Fe(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(s.search,n.current?null:t.current),[s.search]),a=me(),o=r.useCallback((e,t)=>{const r=Fe("function"===typeof e?e(i):e);n.current=!0,a("?"+r,t)},[a,i]);return[i,o]}yt.displayName="Form";var Et=0,St=()=>"__".concat(String(++Et),"__");function Nt(){let{router:e}=wt("useSubmit"),{basename:t}=r.useContext(ae),n=_e("useRouteId");return r.useCallback(async function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:a,encType:o,formData:l,body:c}=Be(r,t);if(!1===s.navigate){let t=s.fetcherKey||St();await e.fetch(t,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}const kt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},_t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(kt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new Ct;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ct extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tt=function(e){return function(e){const t=kt(e);return _t.encodeByteArray(t,!0)}(e).replace(/\./g,"")},It=function(e){try{return _t.decodeString(e,!0)}catch(Yb){console.error("base64Decode failed: ",Yb)}return null};function At(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const jt=()=>{try{return At().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COMPANY_EMAIL:"admin@tuneparams.ai",REACT_APP_COMPANY_NAME:"TuneParams.ai",REACT_APP_COMPANY_PHONE:"+1 469 702 1086",REACT_APP_EMAILJS_PUBLIC_KEY:"g2ZIKXu5CMAtlW-yr",REACT_APP_EMAILJS_SERVICE_ID:"service_6nnlhkw",REACT_APP_EMAILJS_TEMPLATE_ID:"template_660cmfs",REACT_APP_FIREBASE_API_KEY:"AIzaSyCn55V2y3cXp4Ln0NWjlauU8rgZgMgwDyc",REACT_APP_FIREBASE_APP_ID:"1:995918337622:web:505babbabe198e3f0d0df7",REACT_APP_FIREBASE_AUTH_DOMAIN:"tuneparams.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"995918337622",REACT_APP_FIREBASE_PROJECT_ID:"tuneparams",REACT_APP_FIREBASE_STORAGE_BUCKET:"tuneparams.firebasestorage.app",REACT_APP_FORMSPREE_FORM_ID:"xkgbylng",REACT_APP_FROM_EMAIL:"noreply@tuneparams.ai",REACT_APP_GITHUB_URL:"https://github.com/TuneParams-ai",REACT_APP_HERO_IMAGE_URL:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=500&h=400&fit=crop&auto=format",REACT_APP_LINKEDIN_URL:"https://linkedin.com/company/tuneparams",REACT_APP_PAYPAL_CLIENT_ID:"ATOn7sUD6SgiRcskkEvy_f2dNzcc7Gk50ikp26TdGzRcDoEQRwoDOOO1UvSNLjyGlypDjXcdJKtVkVlU",REACT_APP_PAYPAL_ENVIRONMENT:"sandbox",REACT_APP_SUPPORT_EMAIL:"support@tuneparams.ai",REACT_APP_TWITTER_URL:"https://twitter.com/tuneparams",REACT_APP_WEBSITE_URL:"https://www.tuneparams.ai"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Yb){return}const t=e&&It(e[1]);return t&&JSON.parse(t)})()}catch(Yb){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Yb))}},Pt=e=>{var t,n;return null===(n=null===(t=jt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Rt=()=>{var e;return null===(e=jt())||void 0===e?void 0:e.config},Dt=e=>{var t;return null===(t=jt())||void 0===t?void 0:t["_".concat(e)]};class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ot(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Mt(e){return(await fetch(e,{credentials:"include"})).ok}const Ft={};let Ut=!1;function Vt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Ot(window.location.host)||Ft[e]===t||Ft[e]||Ut)return;function n(e){return"__firebase__banner__".concat(e)}Ft[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ft))Ft[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Ut=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function zt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Bt(){var e;const t=null===(e=jt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Yb){return!1}}function qt(){return!Bt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ht(){try{return"object"===typeof indexedDB}catch(Yb){return!1}}class Wt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gt.prototype.create)}}class Gt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(Kt,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new Wt(n,i,t)}}const Kt=/\{\$([^}]+)}/g;function Qt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(Yt(n)&&Yt(i)){if(!Qt(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Yt(e){return null!==e&&"object"===typeof e}function $t(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Jt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Xt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Zt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=en),void 0===r.error&&(r.error=en),void 0===r.complete&&(r.complete=en);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Yb){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Yb){"undefined"!==typeof console&&console.error&&console.error(Yb)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function en(){}function tn(e){return e&&e._delegate?e._delegate:e}class nn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const rn="[DEFAULT]";class sn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Lt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Yb){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Yb){if(r)return null;throw Yb}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:rn})}catch(Yb){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Yb){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===rn?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;return this.component?this.component.multipleInstances?e:rn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class an{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const on=[];var ln;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ln||(ln={}));const cn={debug:ln.DEBUG,verbose:ln.VERBOSE,info:ln.INFO,warn:ln.WARN,error:ln.ERROR,silent:ln.SILENT},un=ln.INFO,dn={[ln.DEBUG]:"log",[ln.VERBOSE]:"log",[ln.INFO]:"info",[ln.WARN]:"warn",[ln.ERROR]:"error"},hn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=dn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class fn{constructor(e){this.name=e,this._logLevel=un,this._logHandler=hn,this._userLogHandler=null,on.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ln))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?cn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.DEBUG,...t),this._logHandler(this,ln.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.VERBOSE,...t),this._logHandler(this,ln.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.INFO,...t),this._logHandler(this,ln.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.WARN,...t),this._logHandler(this,ln.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.ERROR,...t),this._logHandler(this,ln.ERROR,...t)}}let mn,pn;const gn=new WeakMap,vn=new WeakMap,yn=new WeakMap,bn=new WeakMap,wn=new WeakMap;let xn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return vn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||yn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function En(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(pn||(pn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(kn(this),n),Nn(gn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Nn(e.apply(kn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(kn(this),t,...r);return yn.set(i,t.sort?t.sort():[t]),Nn(i)}}function Sn(e){return"function"===typeof e?En(e):(e instanceof IDBTransaction&&function(e){if(vn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});vn.set(e,t)}(e),t=e,(mn||(mn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,xn):e);var t}function Nn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Nn(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&gn.set(t,e)}).catch(()=>{}),wn.set(t,e),t}(e);if(bn.has(e))return bn.get(e);const t=Sn(e);return t!==e&&(bn.set(e,t),wn.set(t,e)),t}const kn=e=>wn.get(e);const _n=["get","getKey","getAll","getAllKeys","count"],Cn=["put","add","delete","clear"],Tn=new Map;function In(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Tn.get(t))return Tn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Cn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!_n.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return Tn.set(t,i),i}xn=(e=>u(u({},e),{},{get:(t,n,r)=>In(t,n)||e.get(t,n,r),has:(t,n)=>!!In(t,n)||e.has(t,n)}))(xn);class An{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const jn="@firebase/app",Pn="0.13.2",Rn=new fn("@firebase/app"),Dn="@firebase/app-compat",Ln="@firebase/analytics-compat",On="@firebase/analytics",Mn="@firebase/app-check-compat",Fn="@firebase/app-check",Un="@firebase/auth",Vn="@firebase/auth-compat",zn="@firebase/database",Bn="@firebase/data-connect",qn="@firebase/database-compat",Hn="@firebase/functions",Wn="@firebase/functions-compat",Gn="@firebase/installations",Kn="@firebase/installations-compat",Qn="@firebase/messaging",Yn="@firebase/messaging-compat",$n="@firebase/performance",Jn="@firebase/performance-compat",Xn="@firebase/remote-config",Zn="@firebase/remote-config-compat",er="@firebase/storage",tr="@firebase/storage-compat",nr="@firebase/firestore",rr="@firebase/ai",sr="@firebase/firestore-compat",ir="firebase",ar="[DEFAULT]",or={[jn]:"fire-core",[Dn]:"fire-core-compat",[On]:"fire-analytics",[Ln]:"fire-analytics-compat",[Fn]:"fire-app-check",[Mn]:"fire-app-check-compat",[Un]:"fire-auth",[Vn]:"fire-auth-compat",[zn]:"fire-rtdb",[Bn]:"fire-data-connect",[qn]:"fire-rtdb-compat",[Hn]:"fire-fn",[Wn]:"fire-fn-compat",[Gn]:"fire-iid",[Kn]:"fire-iid-compat",[Qn]:"fire-fcm",[Yn]:"fire-fcm-compat",[$n]:"fire-perf",[Jn]:"fire-perf-compat",[Xn]:"fire-rc",[Zn]:"fire-rc-compat",[er]:"fire-gcs",[tr]:"fire-gcs-compat",[nr]:"fire-fst",[sr]:"fire-fst-compat",[rr]:"fire-vertex","fire-js":"fire-js",[ir]:"fire-js-all"},lr=new Map,cr=new Map,ur=new Map;function dr(e,t){try{e.container.addComponent(t)}catch(Yb){Rn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Yb)}}function hr(e){const t=e.name;if(ur.has(t))return Rn.debug("There were multiple attempts to register component ".concat(t,".")),!1;ur.set(t,e);for(const n of lr.values())dr(n,e);for(const n of cr.values())dr(n,e);return!0}function fr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function mr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const pr=new Gt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class gr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}const vr="11.10.0";function yr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ar,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw pr.create("bad-app-name",{appName:String(s)});if(n||(n=Rt()),!n)throw pr.create("no-options");const i=lr.get(s);if(i){if(Qt(n,i.options)&&Qt(r,i.config))return i;throw pr.create("duplicate-app",{appName:s})}const a=new an(s);for(const l of ur.values())a.addComponent(l);const o=new gr(n,r,a);return lr.set(s,o),o}function br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar;const t=lr.get(e);if(!t&&e===ar&&Rt())return yr();if(!t)throw pr.create("no-app",{appName:e});return t}function wr(e,t,n){var r;let s=null!==(r=or[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Rn.warn(e.join(" "))}hr(new nn("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const xr="firebase-heartbeat-store";let Er=null;function Sr(){return Er||(Er=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Nn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Nn(a.result),e.oldVersion,e.newVersion,Nn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(xr)}catch(Yb){console.warn(Yb)}}}).catch(e=>{throw pr.create("idb-open",{originalErrorMessage:e.message})})),Er}async function Nr(e,t){try{const n=(await Sr()).transaction(xr,"readwrite"),r=n.objectStore(xr);await r.put(t,kr(e)),await n.done}catch(Yb){if(Yb instanceof Wt)Rn.warn(Yb.message);else{const t=pr.create("idb-set",{originalErrorMessage:null===Yb||void 0===Yb?void 0:Yb.message});Rn.warn(t.message)}}}function kr(e){return"".concat(e.name,"!").concat(e.options.appId)}class _r{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Cr();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Yb){Rn.warn(Yb)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Cr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Ir(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ir(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=Tt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Yb){return Rn.warn(Yb),""}}}function Cr(){return(new Date).toISOString().substring(0,10)}class Tr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ht()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Sr()).transaction(xr),n=await t.objectStore(xr).get(kr(e));return await t.done,n}catch(Yb){if(Yb instanceof Wt)Rn.warn(Yb.message);else{const t=pr.create("idb-get",{originalErrorMessage:null===Yb||void 0===Yb?void 0:Yb.message});Rn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ir(e){return Tt(JSON.stringify({version:2,heartbeats:e})).length}var Ar;Ar="",hr(new nn("platform-logger",e=>new An(e),"PRIVATE")),hr(new nn("heartbeat",e=>new _r(e),"PRIVATE")),wr(jn,Pn,Ar),wr(jn,Pn,"esm2017"),wr("fire-js","");wr("firebase","11.10.0","app");function jr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Pr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Rr=Pr,Dr=new Gt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Lr=new fn("@firebase/auth");function Or(e){if(Lr.logLevel<=ln.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lr.error("Auth (".concat(vr,"): ").concat(e),...n)}}function Mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Br(e,...n)}function Fr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Br(e,...n)}function Ur(e,t,n){const r=Object.assign(Object.assign({},Rr()),{[t]:n});return new Gt("auth","Firebase",r).create(t,{appName:e.name})}function Vr(e){return Ur(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Mr(e,"argument-error"),Ur(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Br(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Dr.create(e,...n)}function qr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Br(t,...r)}}function Hr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Or(t),new Error(t)}function Wr(e,t){e||Hr(t)}function Gr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Kr(){return"http:"===Qr()||"https:"===Qr()}function Qr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Yr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Kr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class $r{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Yr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jr(e,t){Wr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Xr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},es=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ts=new $r(3e4,6e4);function ns(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function rs(e,t,n,r){return ss(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=$t(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Ot(e.emulatorConfig.host)&&(l.credentials="include"),Xr.fetch()(await as(e,e.config.apiHost,n,a),l)})}async function ss(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Zr),t);try{const t=new ls(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw cs(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw cs(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw cs(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw cs(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Ur(e,o,a);Mr(e,o)}}catch(Yb){if(Yb instanceof Wt)throw Yb;Mr(e,"network-request-failed",{message:String(Yb)})}}async function is(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await rs(e,t,n,r,s);return"mfaPendingCredential"in i&&Mr(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function as(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?Jr(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(es.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function os(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ls{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Fr(this.auth,"network-request-failed")),ts.get())})}}function cs(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Fr(e,t,r);return s.customData._tokenResponse=n,s}function us(e){return void 0!==e&&void 0!==e.enterprise}class ds{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return os(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hs(e,t){return rs(e,"GET","/v2/recaptchaConfig",ns(e,t))}async function fs(e,t){return rs(e,"POST","/v1/accounts:lookup",t)}function ms(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Yb){}}function ps(e){return 1e3*Number(e)}function gs(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Or("JWT malformed, contained fewer than 3 sections"),null;try{const e=It(n);return e?JSON.parse(e):(Or("Failed to decode base64 JWT payload"),null)}catch(Yb){return Or("Caught error parsing JWT payload as JSON",null===Yb||void 0===Yb?void 0:Yb.toString()),null}}function vs(e){const t=gs(e);return qr(t,"internal-error"),qr("undefined"!==typeof t.exp,"internal-error"),qr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ys(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Yb){throw Yb instanceof Wt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Yb)&&e.auth.currentUser===e&&await e.auth.signOut(),Yb}}class bs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Yb){return void((null===Yb||void 0===Yb?void 0:Yb.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ws{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ms(this.lastLoginAt),this.creationTime=ms(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xs(e){var t;const n=e.auth,r=await e.getIdToken(),s=await ys(e,fs(n,{idToken:r}));qr(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Es(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ws(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Es(e){return e.map(e=>{var{providerId:t}=e,n=jr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Ss{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qr(e.idToken,"internal-error"),qr("undefined"!==typeof e.idToken,"internal-error"),qr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):vs(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qr(0!==e.length,"internal-error");const t=vs(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(qr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await ss(e,{},async()=>{const n=$t({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await as(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&Ot(e.emulatorConfig.host)&&(o.credentials="include"),Xr.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Ss;return n&&(qr("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(qr("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(qr("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ss,this.toJSON())}_performRefresh(){return Hr("not implemented")}}function Ns(e,t){qr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ks{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=jr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ws(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ys(this,this.stsTokenManager.getToken(this.auth,e));return qr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=tn(e),r=await n.getIdToken(t),s=gs(r);qr(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ms(ps(s.auth_time)),issuedAtTime:ms(ps(s.iat)),expirationTime:ms(ps(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=tn(e);await xs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(qr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ks(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await xs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mr(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await ys(this,async function(e,t){return rs(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:E}=t;qr(y&&E,e,"internal-error");const S=Ss.fromJSON(this.name,E);qr("string"===typeof y,e,"internal-error"),Ns(u,e.name),Ns(d,e.name),qr("boolean"===typeof b,e,"internal-error"),qr("boolean"===typeof w,e,"internal-error"),Ns(h,e.name),Ns(f,e.name),Ns(m,e.name),Ns(p,e.name),Ns(g,e.name),Ns(v,e.name);const N=new ks({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:m,stsTokenManager:S,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(N.providerData=x.map(e=>Object.assign({},e))),p&&(N._redirectEventId=p),N}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ss;r.updateFromServerResponse(t);const s=new ks({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await xs(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];qr(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Es(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new Ss;a.updateFromIdToken(n);const o=new ks({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new ws(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const _s=new Map;function Cs(e){Wr(e instanceof Function,"Expected a class definition");let t=_s.get(e);return t?(Wr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,_s.set(e,t),t)}class Ts{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ts.type="NONE";const Is=Ts;function As(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class js{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=As(this.userKey,r.apiKey,s),this.fullPersistenceKey=As("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await fs(this.auth,{idToken:e}).catch(()=>{});return t?ks._fromGetAccountInfoResponse(this.auth,t,e):null}return ks._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new js(Cs(Is),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Cs(Is);const i=As(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await fs(e,{idToken:t}).catch(()=>{});if(!r)break;n=await ks._fromGetAccountInfoResponse(e,r,t)}else n=ks._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new js(s,e,n)):new js(s,e,n)}}function Ps(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Os(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Rs(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fs(t))return"Blackberry";if(Us(t))return"Webos";if(Ds(t))return"Safari";if((t.includes("chrome/")||Ls(t))&&!t.includes("edge/"))return"Chrome";if(Ms(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Rs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt();return/firefox\//i.test(e)}function Ds(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt();return/crios\//i.test(e)}function Os(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt();return/iemobile/i.test(e)}function Ms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt();return/android/i.test(e)}function Fs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt();return/blackberry/i.test(e)}function Us(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt();return/webos/i.test(e)}function Vs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function zs(){return function(){const e=zt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Bs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt();return Vs(e)||Ms(e)||Us(e)||Fs(e)||/windows phone/i.test(e)||Os(e)}function qs(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ps(zt());break;case"Worker":t="".concat(Ps(zt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(vr,"/").concat(r)}class Hs{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Yb){r(Yb)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Yb){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Yb||void 0===Yb?void 0:Yb.message})}}}class Ws{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Gs{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new Hs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cs(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await js.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Yb){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await fs(this,{idToken:e}),n=await ks._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(mr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Yb){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Yb))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Yb){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xs(e)}catch(Yb){if((null===Yb||void 0===Yb?void 0:Yb.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mr(this.app))return Promise.reject(Vr(this));const t=e?tn(e):null;return t&&qr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&qr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mr(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mr(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cs(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return rs(e,"GET","/v2/passwordPolicy",ns(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ws(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return rs(e,"POST","/v2/accounts:revokeToken",ns(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cs(e)||this._popupRedirectResolver;qr(t,this,"argument-error"),this.redirectPersistenceManager=await js.create(this,[Cs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(qr(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Lr.logLevel<=ln.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lr.warn("Auth (".concat(vr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ks(e){return tn(e)}class Qs{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Zt(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ys={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $s(e){return Ys.loadJS(e)}function Js(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Xs{constructor(){this.enterprise=new Zs}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Zs{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ei="NO_RECAPTCHA";class ti{constructor(e){this.type="recaptcha-enterprise",this.auth=Ks(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;us(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(ei)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Xs).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{hs(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ds(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&us(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ys.recaptchaEnterpriseScript;0!==t.length&&(t+=s),$s(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function ni(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new ti(e);let a;if(s)a=ei;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ri(e,t,n,r,s){var i,a;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await ni(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await ni(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const s=await ni(e,t,n);return r(e,s).catch(async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await ni(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await ni(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function si(e){const t=Ks(e),n=await hs(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ds(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new ti(t).verify()}}function ii(e,t,n){const r=Ks(e);qr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=ai(t),{host:a,port:o}=function(e){const t=ai(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:oi(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:oi(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(i,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return qr(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void qr(Qt(c,r.config.emulator)&&Qt(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ot(a)?(Mt("".concat(i,"//").concat(a).concat(l)),Vt("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ai(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function oi(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class li{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hr("not implemented")}_getIdTokenResponse(e){return Hr("not implemented")}_linkToIdToken(e,t){return Hr("not implemented")}_getReauthenticationResolver(e){return Hr("not implemented")}}async function ci(e,t){return rs(e,"POST","/v1/accounts:signUp",t)}async function ui(e,t){return is(e,"POST","/v1/accounts:signInWithPassword",ns(e,t))}async function di(e,t){return rs(e,"POST","/v1/accounts:sendOobCode",ns(e,t))}async function hi(e,t){return di(e,t)}class fi extends li{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new fi(e,t,"password")}static _fromEmailAndCode(e,t){return new fi(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ri(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ui,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return is(e,"POST","/v1/accounts:signInWithEmailLink",ns(e,t))}(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ri(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ci,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return is(e,"POST","/v1/accounts:signInWithEmailLink",ns(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function mi(e,t){return is(e,"POST","/v1/accounts:signInWithIdp",ns(e,t))}class pi extends li{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=jr(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new pi(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return mi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,mi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$t(t)}return e}}async function gi(e,t){return rs(e,"POST","/v1/accounts:sendVerificationCode",ns(e,t))}const vi={USER_NOT_FOUND:"user-not-found"};class yi extends li{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new yi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new yi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return is(e,"POST","/v1/accounts:signInWithPhoneNumber",ns(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await is(e,"POST","/v1/accounts:signInWithPhoneNumber",ns(e,t));if(n.temporaryProof)throw cs(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return is(e,"POST","/v1/accounts:signInWithPhoneNumber",ns(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),vi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new yi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class bi{constructor(e){var t,n,r,s,i,a;const o=Jt(Xt(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);qr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Jt(Xt(e)).link,n=t?Jt(Xt(t)).deep_link_id:null,r=Jt(Xt(e)).deep_link_id;return(r?Jt(Xt(r)).link:null)||r||n||t||e}(e);try{return new bi(t)}catch(n){return null}}}class wi{constructor(){this.providerId=wi.PROVIDER_ID}static credential(e,t){return fi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=bi.parseLink(t);return qr(n,"argument-error"),fi._fromEmailAndCode(e,n.code,n.tenantId)}}wi.PROVIDER_ID="password",wi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class xi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ei extends xi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Si extends Ei{constructor(){super("facebook.com")}static credential(e){return pi._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Si.credential(t.oauthAccessToken)}catch(n){return null}}}Si.FACEBOOK_SIGN_IN_METHOD="facebook.com",Si.PROVIDER_ID="facebook.com";class Ni extends Ei{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pi._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ni.credential(n,r)}catch(s){return null}}}Ni.GOOGLE_SIGN_IN_METHOD="google.com",Ni.PROVIDER_ID="google.com";class ki extends Ei{constructor(){super("github.com")}static credential(e){return pi._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ki.credential(t.oauthAccessToken)}catch(n){return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com",ki.PROVIDER_ID="github.com";class _i extends Ei{constructor(){super("twitter.com")}static credential(e,t){return pi._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return _i.credential(n,r)}catch(s){return null}}}async function Ci(e,t){return is(e,"POST","/v1/accounts:signUp",ns(e,t))}_i.TWITTER_SIGN_IN_METHOD="twitter.com",_i.PROVIDER_ID="twitter.com";class Ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await ks._fromIdTokenResponse(e,n,r),i=Ii(n);return new Ti({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ii(n);return new Ti({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ii(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ai extends Wt{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ai.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ai(e,t,n,r)}}function ji(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ai._fromErrorAndOperation(e,n,t,r);throw n})}async function Pi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ys(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ti._forOperation(e,"link",r)}async function Ri(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(mr(r.app))return Promise.reject(Vr(r));const s="reauthenticate";try{const i=await ys(e,ji(r,s,t,e),n);qr(i.idToken,r,"internal-error");const a=gs(i.idToken);qr(a,r,"internal-error");const{sub:o}=a;return qr(e.uid===o,r,"user-mismatch"),Ti._forOperation(e,s,i)}catch(Yb){throw(null===Yb||void 0===Yb?void 0:Yb.code)==="auth/".concat("user-not-found")&&Mr(r,"user-mismatch"),Yb}}async function Di(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(mr(e.app))return Promise.reject(Vr(e));const r="signIn",s=await ji(e,r,t),i=await Ti._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function Li(e,t){return Di(Ks(e),t)}function Oi(e,t,n){var r;qr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),qr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),qr("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(qr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(qr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Mi(e){const t=Ks(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Fi(e,t){await async function(e,t){return rs(e,"POST","/v1/accounts:update",ns(e,t))}(tn(e),{oobCode:t})}function Ui(e,t,n){return mr(e.app)?Promise.reject(Vr(e)):Li(tn(e),wi.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Mi(e),t})}async function Vi(e,t){const n=tn(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Oi(n.auth,r,t);const{email:s}=await async function(e,t){return di(e,t)}(n.auth,r);s!==e.email&&await e.reload()}async function zi(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=tn(e),i={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await ys(s,async function(e,t){return rs(e,"POST","/v1/accounts:update",t)}(s.auth,i));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const o=s.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}function Bi(e){return tn(e).signOut()}function qi(e,t){return rs(e,"POST","/v2/accounts/mfaEnrollment:start",ns(e,t))}new WeakMap;const Hi="__sak";class Wi{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hi,"1"),this.storage.removeItem(Hi),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Gi extends Wi{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bs(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);zs()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gi.type="LOCAL";const Ki=Gi;function Qi(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(s))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Yi(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class $i{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Yi(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Qi(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Yi(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Yi(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Qi(n);const s=setInterval(()=>{const e=Qi(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}$i.type="COOKIE";class Ji extends Wi{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ji.type="SESSION";const Xi=Ji;class Zi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Zi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ea(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Zi.receivers=[];class ta{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=ea("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function na(){return window}function ra(){return"undefined"!==typeof na().WorkerGlobalScope&&"function"===typeof na().importScripts}const sa="firebaseLocalStorageDb",ia="firebaseLocalStorage",aa="fbase_key";class oa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function la(e,t){return e.transaction([ia],t?"readwrite":"readonly").objectStore(ia)}function ca(){const e=indexedDB.open(sa,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ia,{keyPath:aa})}catch(Yb){n(Yb)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(ia)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(sa);return new oa(e).toPromise()}(),t(await ca()))})})}async function ua(e,t,n){const r=la(e,!0).put({[aa]:t,value:n});return new oa(r).toPromise()}function da(e,t){const n=la(e,!0).delete(t);return new oa(n).toPromise()}class ha{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ca()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Yb){if(t++>3)throw Yb;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ra()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zi._getInstance(ra()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ta(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ca();return await ua(e,Hi,"1"),await da(e,Hi),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ua(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=la(e,!1).get(t),r=await new oa(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>da(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=la(e,!1).getAll();return new oa(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ha.type="LOCAL";const fa=ha;function ma(e,t){return rs(e,"POST","/v2/accounts/mfaSignIn:start",ns(e,t))}Js("rcb"),new $r(3e4,6e4);const pa="recaptcha";async function ga(e,t,n){var r;if(!e._getRecaptchaConfig())try{await si(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){qr("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=ri(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===ei){qr((null===n||void 0===n?void 0:n.type)===pa,e,"argument-error");return qi(e,await va(e,t,n))}return qi(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{qr("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;qr(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=ri(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===ei){qr((null===n||void 0===n?void 0:n.type)===pa,e,"argument-error");return ma(e,await va(e,t,n))}return ma(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=ri(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===ei){qr((null===n||void 0===n?void 0:n.type)===pa,e,"argument-error");return gi(e,await va(e,t,n))}return gi(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function va(e,t,n){qr(n.type===pa,e,"argument-error");const r=await n.verify();qr("string"===typeof r,e,"argument-error");const s=Object.assign({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class ya{constructor(e){this.providerId=ya.PROVIDER_ID,this.auth=Ks(e)}verifyPhoneNumber(e,t){return ga(this.auth,e,tn(t))}static credential(e,t){return yi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ya.credentialFromTaggedObject(t)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?yi._fromTokenResponse(n,r):null}}function ba(e,t){return t?Cs(t):(qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ya.PROVIDER_ID="phone",ya.PHONE_SIGN_IN_METHOD="phone";class wa extends li{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xa(e){return Di(e.auth,new wa(e),e.bypassAuthState)}function Ea(e){const{auth:t,user:n}=e;return qr(n,t,"internal-error"),Ri(n,new wa(e),e.bypassAuthState)}async function Sa(e){const{auth:t,user:n}=e;return qr(n,t,"internal-error"),Pi(n,new wa(e),e.bypassAuthState)}class Na{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Yb){this.reject(Yb)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Yb){this.reject(Yb)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xa;case"linkViaPopup":case"linkViaRedirect":return Sa;case"reauthViaPopup":case"reauthViaRedirect":return Ea;default:Mr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ka=new $r(2e3,1e4);class _a extends Na{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qr(e,this.auth,"internal-error"),e}async onExecution(){Wr(1===this.filter.length,"Popup operations only handle one event");const e=ea();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ka.get())};e()}}_a.currentPopupAction=null;const Ca=new Map;class Ta extends Na{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ca.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ja(t),r=Aa(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Yb){e=()=>Promise.reject(Yb)}Ca.set(this.auth._key(),e)}return this.bypassAuthState||Ca.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ia(e,t){Ca.set(e._key(),t)}function Aa(e){return Cs(e._redirectPersistence)}function ja(e){return As("pendingRedirect",e.config.apiKey,e.name)}async function Pa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(mr(e.app))return Promise.reject(Vr(e));const r=Ks(e),s=ba(r,t),i=new Ta(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ra{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return La(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!La(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Da(e))}saveEventToCache(e){this.cachedEventUids.add(Da(e)),this.lastProcessedEventTime=Date.now()}}function Da(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function La(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Oa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ma=/^https?/;async function Fa(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return rs(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Ua(r))return}catch(n){}Mr(e,"unauthorized-domain")}function Ua(e){const t=Gr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Ma.test(n))return!1;if(Oa.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Va=new $r(3e4,6e4);function za(){const e=na().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ba(e){return new Promise((t,n)=>{var r,s,i;function a(){za(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{za(),n(Fr(e,"network-request-failed"))},timeout:Va.get()})}if(null===(s=null===(r=na().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=na().gapi)||void 0===i?void 0:i.load)){const t=Js("iframefcb");return na()[t]=()=>{gapi.load?a():n(Fr(e,"network-request-failed"))},$s("".concat(Ys.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw qa=null,e})}let qa=null;const Ha=new $r(5e3,15e3),Wa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ga=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ka(e){const t=e.config;qr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Jr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:vr},s=Ga.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat($t(r).slice(1))}async function Qa(e){const t=await function(e){return qa=qa||Ba(e),qa}(e),n=na().gapi;return qr(n,e,"internal-error"),t.open({where:document.body,url:Ka(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wa,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Fr(e,"network-request-failed"),i=na().setTimeout(()=>{r(s)},Ha.get());function a(){na().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const Ya={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $a{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Yb){}}}function Ja(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Ya),{width:r.toString(),height:s.toString(),top:i,left:a}),c=zt().toLowerCase();n&&(o=Ls(c)?"_blank":n),Rs(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Vs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new $a(null);const d=window.open(t||"",o,u);qr(d,e,"popup-blocked");try{d.focus()}catch(Yb){}return new $a(d)}const Xa="__/auth/handler",Za="emulator/auth/handler",eo=encodeURIComponent("fac");async function to(e,t,n,r,s,i){qr(e.config.authDomain,e,"auth-domain-config-required"),qr(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:vr,eventId:s};if(t instanceof xi){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Ei){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(eo,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Xa);return Jr(t,Za)}(e),"?").concat($t(o).slice(1)).concat(c)}const no="webStorageSupport";const ro=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xi,this._completeRedirectFn=Pa,this._overrideRedirectResult=Ia}async _openPopup(e,t,n,r){var s;Wr(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Ja(e,await to(e,t,n,Gr(),r),ea())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){na().location.href=e}(await to(e,t,n,Gr(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Wr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Qa(e),n=new Ra(e);return t.register("authEvent",t=>{qr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(no,{type:no},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[no];void 0!==s&&t(!!s),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Fa(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Bs()||Ds()||Vs()}};var so="@firebase/auth",io="1.10.8";class ao{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const oo=Dt("authIdTokenMaxAge")||300;let lo=null;var co;Ys={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Fr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},co="Browser",hr(new nn("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;qr(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:co,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qs(co)},c=new Gs(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cs);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),hr(new nn("auth-internal",e=>(e=>new ao(e))(Ks(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),wr(so,io,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(co)),wr(so,io,"esm2017");var uo,ho,fo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},mo={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var s=y(n,1),i=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=y(r,1),n=y(n,1)}return t=f(e,s.j(t)),new p(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new p(s,e)}function v(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),p=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,m(n,2*s+2*i),n[2*s+2*i+1]+=l*g,m(n,2*s+2*i+1),n[2*s+2*i+1]+=f*p,m(n,2*s+2*i+1),n[2*s+2*i+2]+=l*p,m(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ho=mo.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},uo=mo.Integer=r}).apply("undefined"!==typeof fo?fo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var po,go,vo,yo,bo,wo,xo,Eo,So="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},No={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof So&&So];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){s.setTimeout(()=>{throw e},0)}function N(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new _,e=>e.reset());class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,T=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(j)}};var j=()=>{for(var e;e=N();){try{e.h.call(e.g)}catch(n){S(n)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function P(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,R);var O={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=q(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function G(e,t,n,r,s){if(r&&r.once)return Q(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)G(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!1,r,s)}function K(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Y(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(i=e.g[t],n,r,s))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,s)),(n=-1<e?t[e]:null)&&$(n))}function $(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function J(e){return e in W?W[e]:W[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&$(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var s=t;x(t=new R(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&$(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){R.call(this,"d")}function be(){R.call(this,"c")}d(ye,R),d(be,R);var we={},xe=null;function Ee(){return xe=xe||new ne}function Se(e){R.call(this,we.La,e)}function Ne(e){const t=Ee();re(t,new Se(t))}function ke(e,t){R.call(this,we.STAT_EVENT,e),this.stat=t}function _e(e){const t=Ee();re(t,new ke(t,e))}function Ce(e,t){R.call(this,we.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(Se,R),we.STAT_EVENT="statevent",d(ke,R),we.Ma="timingevent",d(Ce,R),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var je,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}d(De,me),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},je=new De;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=G(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ne(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function We(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Ge(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),$t(n)}rn(n),_e(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!m(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(We(o),qe(o)),r.g=a}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ne()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const h=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Gt(this.g)))){this.J||4!=h||7==t||Ne(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Gt(this.g);e="";var i=r.length,a=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),Ge(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ke(this),Ge(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,_e(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,_e(15),Ae(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,_e(11))}}else Ae(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),Ge(this)}else Ae(this.i,this.l,o,null),Qe(this,o);4==h&&Ke(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=E(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ke(this),Ge(this)}}}catch(h){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ne(),_e(17)),Ke(this),this.s=2,Ge(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function $e(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}$e.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),kt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var pt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function St(e,t){Et(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Nt(e,t){return Et(e),t=_t(e,t),e.g.has(t)}function kt(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Tt(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Yb){throw t.push(r+"type="+encodeURIComponent("_badmap")),Yb}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function jt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){Et(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)Nt(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,Nt(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(At,me),At.prototype.g=function(){return new jt(this.l,this.j)},At.prototype.i=(pt={},function(){return pt}),d(jt,ne),(e=jt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Dt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(jt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Ft.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Wt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Ht(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Yb){}}}function Ht(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Gt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Jt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}dn(e)}function $t(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){$t(e),e.u&&(s.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),T||(C(),T=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{It(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),T||(C(),T=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ee(),new Ce(r,n)),Xt(e)}else nn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(s.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ct(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ct(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),dn(e),Jt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new At({eb:n})):new Mt(e.pa)).Ha(e.J),t}function mn(){}function pn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?pe(this.o):pe(je),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Vt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Vt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Le(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),x(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Lt(i)))+"&"+t:this.m&&Ot(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Ue(s,n,null)):Ue(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),$t(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,$t(this),rn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=mn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},d(vn,ye),d(yn,be),d(bn,mn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new vn(e))},bn.prototype.sa=function(e){re(this.g,new yn)},bn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Eo=No.createWebChannelTransport=function(){return new pn},xo=No.getStatEventTarget=function(){return Ee()},wo=No.Event=we,bo=No.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,yo=No.ErrorCode=Pe,Re.COMPLETE="complete",vo=No.EventType=Re,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,go=No.WebChannel=ge,No.FetchXmlHttpFactory=At,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,po=No.XhrIo=Mt}).apply("undefined"!==typeof So?So:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ko="@firebase/firestore",_o="4.8.0";class Co{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Co.UNAUTHENTICATED=new Co(null),Co.GOOGLE_CREDENTIALS=new Co("google-credentials-uid"),Co.FIRST_PARTY=new Co("first-party-uid"),Co.MOCK_USER=new Co("mock-user");let To="11.10.0";const Io=new fn("@firebase/firestore");function Ao(){return Io.logLevel}function jo(e){if(Io.logLevel<=ln.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Do);Io.debug("Firestore (".concat(To,"): ").concat(e),...s)}}function Po(e){if(Io.logLevel<=ln.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Do);Io.error("Firestore (".concat(To,"): ").concat(e),...s)}}function Ro(e){if(Io.logLevel<=ln.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Do);Io.warn("Firestore (".concat(To,"): ").concat(e),...s)}}function Do(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Lo(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Oo(e,r,n)}function Oo(e,t,n){let r="FIRESTORE (".concat(To,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Po(r),new Error(r)}function Mo(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||Oo(t,s,r)}function Fo(e,t){return e}const Uo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vo extends Wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class zo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Bo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class qo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Co.UNAUTHENTICATED))}shutdown(){}}class Ho{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Wo{constructor(e){this.t=e,this.currentUser=Co.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Mo(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new zo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zo,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{jo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(jo("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zo)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(jo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Mo("string"==typeof t.accessToken,31837,{l:t}),new Bo(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mo(null===e||"string"==typeof e,2055,{h:e}),new Co(e)}}class Go{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Co.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ko{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Go(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Co.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yo{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Mo(void 0===this.o,3512);const n=e=>{null!=e.error&&jo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,jo("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{jo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):jo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qo(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Mo("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Qo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $o(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Jo(){return new TextEncoder}class Xo{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=$o(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Zo(e,t){return e<t?-1:e>t?1:0}function el(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return Zo(r,s);{const i=Jo(),a=nl(i.encode(tl(e,n)),i.encode(tl(t,n)));return 0!==a?a:Zo(r,s)}}n+=r>65535?2:1}return Zo(e.length,t.length)}function tl(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function nl(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Zo(e[n],t[n]);return Zo(e.length,t.length)}function rl(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const sl="__name__";class il{constructor(e,t,n){void 0===t?t=0:t>e.length&&Lo(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Lo(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===il.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof il?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=il.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Zo(e.length,t.length)}static compareSegments(e,t){const n=il.isNumericId(e),r=il.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?il.extractNumericId(e).compare(il.extractNumericId(t)):el(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return uo.fromString(e.substring(4,e.length-2))}}class al extends il{construct(e,t,n){return new al(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new al(e)}static emptyPath(){return new al([])}}const ol=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ll extends il{construct(e,t,n){return new ll(e,t,n)}static isValidIdentifier(e){return ol.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ll.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===sl}static keyField(){return new ll([sl])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Vo(Uo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Vo(Uo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Vo(Uo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ll(t)}static emptyPath(){return new ll([])}}class cl{constructor(e){this.path=e}static fromPath(e){return new cl(al.fromString(e))}static fromName(e){return new cl(al.fromString(e).popFirst(5))}static empty(){return new cl(al.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===al.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return al.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cl(new al(e.slice()))}}function ul(e,t,n){if(!n)throw new Vo(Uo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function dl(e){if(!cl.isDocumentKey(e))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function hl(e){if(cl.isDocumentKey(e))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function fl(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ml(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Lo(12329,{type:typeof e})}function pl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Vo(Uo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ml(e);throw new Vo(Uo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function gl(e,t){if(t<=0)throw new Vo(Uo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function vl(e,t){const n={typeString:e};return t&&(n.value=t),n}function yl(e,t){if(!fl(e))throw new Vo(Uo.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(s&&typeof a!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==i&&a!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new Vo(Uo.INVALID_ARGUMENT,n);return!0}const bl=-62135596800,wl=1e6;class xl{static now(){return xl.fromMillis(Date.now())}static fromDate(e){return xl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*wl);return new xl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Vo(Uo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Vo(Uo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bl)throw new Vo(Uo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Vo(Uo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wl}_compareTo(e){return this.seconds===e.seconds?Zo(this.nanoseconds,e.nanoseconds):Zo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xl._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yl(e,xl._jsonSchema))return new xl(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xl._jsonSchemaVersion="firestore/timestamp/1.0",xl._jsonSchema={type:vl("string",xl._jsonSchemaVersion),seconds:vl("number"),nanoseconds:vl("number")};class El{static fromTimestamp(e){return new El(e)}static min(){return new El(new xl(0,0))}static max(){return new El(new xl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Sl=-1;class Nl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Nl.UNKNOWN_ID=-1;function kl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=El.fromTimestamp(1e9===r?new xl(n+1,0):new xl(n,r));return new Cl(s,cl.empty(),t)}function _l(e){return new Cl(e.readTime,e.key,Sl)}class Cl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Cl(El.min(),cl.empty(),Sl)}static max(){return new Cl(El.max(),cl.empty(),Sl)}}function Tl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=cl.comparator(e.documentKey,t.documentKey),0!==n?n:Zo(e.largestBatchId,t.largestBatchId))}const Il="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Al{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function jl(e){if(e.code!==Uo.FAILED_PRECONDITION||e.message!==Il)throw e;jo("LocalStore","Unexpectedly lost primary lease")}class Pl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Lo(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Pl((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Pl?t:Pl.resolve(t)}catch(e){return Pl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Pl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Pl.reject(t)}static resolve(e){return new Pl((t,n)=>{t(e)})}static reject(e){return new Pl((t,n)=>{n(e)})}static waitFor(e){return new Pl((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Pl.resolve(!1);for(const n of e)t=t.next(e=>e?Pl.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Pl((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Pl((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Rl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Dl(e){return"IndexedDbTransactionError"===e.name}class Ll{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ll.ue=-1;const Ol=-1;function Ml(e){return null==e}function Fl(e){return 0===e&&1/e==-1/0}function Ul(e){return"number"==typeof e&&Number.isInteger(e)&&!Fl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Vl="\x01";function zl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ql(t)),t=Bl(e.get(n),t);return ql(t)}function Bl(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Vl:n+="\x01\x11";break;default:n+=t}}return n}function ql(e){return e+Vl+"\x01"}const Hl="remoteDocuments",Wl="owner",Gl="mutationQueues",Kl="mutations";const Ql="documentMutations",Yl="remoteDocumentsV14",$l="remoteDocumentGlobal",Jl="targets",Xl="targetDocuments",Zl="targetGlobal",ec="collectionParents",tc="clientMetadata",nc="bundles",rc="namedQueries",sc="indexConfiguration",ic="indexState",ac="indexEntries",oc="documentOverlays",lc="globals",cc=[Gl,Kl,Ql,Hl,Jl,Wl,Zl,Xl,tc,$l,ec,nc,rc],uc=[Gl,Kl,Ql,Yl,Jl,Wl,Zl,Xl,tc,$l,ec,nc,rc,oc],dc=uc,hc=[...dc,sc,ic,ac];function fc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function mc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class gc{constructor(e,t){this.comparator=e,this.root=t||yc.EMPTY}insert(e,t){return new gc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yc.BLACK,null,null))}remove(e){return new gc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vc(this.root,e,this.comparator,!0)}}class vc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yc{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:yc.RED,this.left=null!=r?r:yc.EMPTY,this.right=null!=s?s:yc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new yc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return yc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return yc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Lo(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Lo(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Lo(27949);return e+(this.isRed()?0:1)}}yc.EMPTY=null,yc.RED=!0,yc.BLACK=!1,yc.EMPTY=new class{constructor(){this.size=0}get key(){throw Lo(57766)}get value(){throw Lo(16141)}get color(){throw Lo(16727)}get left(){throw Lo(29726)}get right(){throw Lo(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new yc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bc{constructor(e){this.comparator=e,this.data=new gc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wc(this.data.getIterator())}getIteratorFrom(e){return new wc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof bc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bc(this.comparator);return t.data=e,t}}class wc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class xc{constructor(e){this.fields=e,e.sort(ll.comparator)}static empty(){return new xc([])}unionWith(e){let t=new bc(ll.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new xc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Ec extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ec("Invalid base64 string: "+e):e}}(e);return new Sc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Sc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sc.EMPTY_BYTE_STRING=new Sc("");const Nc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kc(e){if(Mo(!!e,39018),"string"==typeof e){let t=0;const n=Nc.exec(e);if(Mo(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_c(e.seconds),nanos:_c(e.nanos)}}function _c(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Cc(e){return"string"==typeof e?Sc.fromBase64String(e):Sc.fromUint8Array(e)}const Tc="server_timestamp",Ic="__type__",Ac="__previous_value__",jc="__local_write_time__";function Pc(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ic])||void 0===n?void 0:n.stringValue)===Tc}function Rc(e){const t=e.mapValue.fields[Ac];return Pc(t)?Rc(t):t}function Dc(e){const t=kc(e.mapValue.fields[jc].timestampValue);return new xl(t.seconds,t.nanos)}class Lc{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Oc="(default)";class Mc{constructor(e,t){this.projectId=e,this.database=t||Oc}static empty(){return new Mc("","")}get isDefaultDatabase(){return this.database===Oc}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}const Fc="__type__",Uc="__max__",Vc={mapValue:{fields:{__type__:{stringValue:Uc}}}},zc="__vector__",Bc="value";function qc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Pc(e)?4:au(e)?9007199254740991:su(e)?10:11:Lo(28295,{value:e})}function Hc(e,t){if(e===t)return!0;const n=qc(e);if(n!==qc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Dc(e).isEqual(Dc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=kc(e.timestampValue),r=kc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Cc(e.bytesValue).isEqual(Cc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return _c(e.geoPointValue.latitude)===_c(t.geoPointValue.latitude)&&_c(e.geoPointValue.longitude)===_c(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return _c(e.integerValue)===_c(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=_c(e.doubleValue),r=_c(t.doubleValue);return n===r?Fl(n)===Fl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return rl(e.arrayValue.values||[],t.arrayValue.values||[],Hc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(fc(n)!==fc(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Hc(n[s],r[s])))return!1;return!0}(e,t);default:return Lo(52216,{left:e})}}function Wc(e,t){return void 0!==(e.values||[]).find(e=>Hc(e,t))}function Gc(e,t){if(e===t)return 0;const n=qc(e),r=qc(t);if(n!==r)return Zo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=_c(e.integerValue||e.doubleValue),r=_c(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Kc(e.timestampValue,t.timestampValue);case 4:return Kc(Dc(e),Dc(t));case 5:return el(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Cc(e),r=Cc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Zo(n[s],r[s]);if(0!==e)return e}return Zo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Zo(_c(e.latitude),_c(t.latitude));return 0!==n?n:Zo(_c(e.longitude),_c(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Qc(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Bc])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Bc])||void 0===r?void 0:r.arrayValue,u=Zo((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Qc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Vc.mapValue&&t===Vc.mapValue)return 0;if(e===Vc.mapValue)return 1;if(t===Vc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=el(r[a],i[a]);if(0!==e)return e;const t=Gc(n[r[a]],s[i[a]]);if(0!==t)return t}return Zo(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Lo(23264,{le:n})}}function Kc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zo(e,t);const n=kc(e),r=kc(t),s=Zo(n.seconds,r.seconds);return 0!==s?s:Zo(n.nanos,r.nanos)}function Qc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Gc(n[s],r[s]);if(e)return e}return Zo(n.length,r.length)}function Yc(e){return $c(e)}function $c(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=kc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Cc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return cl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=$c(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat($c(e.fields[s]));return n+"}"}(e.mapValue):Lo(61005,{value:e})}function Jc(e){switch(qc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Rc(e);return t?16+Jc(t):16;case 5:return 2*e.stringValue.length;case 6:return Cc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Jc(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return mc(e.fields,(e,n)=>{t+=e.length+Jc(n)}),t}(e.mapValue);default:throw Lo(13486,{value:e})}}function Xc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Zc(e){return!!e&&"integerValue"in e}function eu(e){return!!e&&"arrayValue"in e}function tu(e){return!!e&&"nullValue"in e}function nu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ru(e){return!!e&&"mapValue"in e}function su(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Fc])||void 0===n?void 0:n.stringValue)===zc}function iu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return mc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=iu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=iu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function au(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Uc}class ou{constructor(e){this.value=e}static empty(){return new ou({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ru(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(t)}setAll(e){let t=ll.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=iu(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());ru(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ru(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){mc(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ou(iu(this.value))}}function lu(e){const t=[];return mc(e.fields,(e,n)=>{const r=new ll([e]);if(ru(n)){const e=lu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new xc(t)}class cu{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new cu(e,0,El.min(),El.min(),El.min(),ou.empty(),0)}static newFoundDocument(e,t,n,r){return new cu(e,1,t,El.min(),n,r,0)}static newNoDocument(e,t){return new cu(e,2,t,El.min(),El.min(),ou.empty(),0)}static newUnknownDocument(e,t){return new cu(e,3,t,El.min(),El.min(),ou.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(El.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ou.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ou.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=El.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof cu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class uu{constructor(e,t){this.position=e,this.inclusive=t}}function du(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?cl.comparator(cl.fromName(a.referenceValue),n.key):Gc(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function hu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Hc(e.position[n],t.position[n]))return!1;return!0}class fu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function mu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class pu{}class gu extends pu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Nu(e,t,n):"array-contains"===t?new Tu(e,n):"in"===t?new Iu(e,n):"not-in"===t?new Au(e,n):"array-contains-any"===t?new ju(e,n):new gu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ku(e,n):new _u(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Gc(t,this.value)):null!==t&&qc(this.value)===qc(t)&&this.matchesComparison(Gc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Lo(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vu extends pu{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new vu(e,t)}matches(e){return yu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function yu(e){return"and"===e.op}function bu(e){return wu(e)&&yu(e)}function wu(e){for(const t of e.filters)if(t instanceof vu)return!1;return!0}function xu(e){if(e instanceof gu)return e.field.canonicalString()+e.op.toString()+Yc(e.value);if(bu(e))return e.filters.map(e=>xu(e)).join(",");{const t=e.filters.map(e=>xu(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Eu(e,t){return e instanceof gu?function(e,t){return t instanceof gu&&e.op===t.op&&e.field.isEqual(t.field)&&Hc(e.value,t.value)}(e,t):e instanceof vu?function(e,t){return t instanceof vu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Eu(n,t.filters[r]),!0)}(e,t):void Lo(19439)}function Su(e){return e instanceof gu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Yc(e.value))}(e):e instanceof vu?function(e){return e.op.toString()+" {"+e.getFilters().map(Su).join(" ,")+"}"}(e):"Filter"}class Nu extends gu{constructor(e,t,n){super(e,t,n),this.key=cl.fromName(n.referenceValue)}matches(e){const t=cl.comparator(e.key,this.key);return this.matchesComparison(t)}}class ku extends gu{constructor(e,t){super(e,"in",t),this.keys=Cu("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _u extends gu{constructor(e,t){super(e,"not-in",t),this.keys=Cu("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Cu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>cl.fromName(e.referenceValue))}class Tu extends gu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return eu(t)&&Wc(t.arrayValue,this.value)}}class Iu extends gu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wc(this.value.arrayValue,t)}}class Au extends gu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Wc(this.value.arrayValue,t)}}class ju extends gu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!eu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Wc(this.value.arrayValue,e))}}class Pu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Pe=null}}function Ru(e){return new Pu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Du(e){const t=Fo(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>xu(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ml(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Yc(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Yc(e)).join(",")),t.Pe=e}return t.Pe}function Lu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!mu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Eu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hu(e.startAt,t.startAt)&&hu(e.endAt,t.endAt)}function Ou(e){return cl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Mu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Fu(e,t,n,r,s,i,a,o){return new Mu(e,t,n,r,s,i,a,o)}function Uu(e){return new Mu(e)}function Vu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function zu(e){return null!==e.collectionGroup}function Bu(e){const t=Fo(e);if(null===t.Te){t.Te=[];const e=new Set;for(const s of t.explicitOrderBy)t.Te.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new bc(ll.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new fu(r,n))}),e.has(ll.keyField().canonicalString())||t.Te.push(new fu(ll.keyField(),n))}return t.Te}function qu(e){const t=Fo(e);return t.Ie||(t.Ie=Hu(t,Bu(e))),t.Ie}function Hu(e,t){if("F"===e.limitType)return Ru(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new fu(e.field,t)});const n=e.endAt?new uu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new uu(e.startAt.position,e.startAt.inclusive):null;return Ru(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Wu(e,t){const n=e.filters.concat([t]);return new Mu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Gu(e,t,n){return new Mu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ku(e,t){return Lu(qu(e),qu(t))&&e.limitType===t.limitType}function Qu(e){return"".concat(Du(qu(e)),"|lt:").concat(e.limitType)}function Yu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Su(e)).join(", "),"]")),Ml(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Yc(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Yc(e)).join(",")),"Target(".concat(t,")")}(qu(e)),"; limitType=").concat(e.limitType,")")}function $u(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Bu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=du(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Bu(e),t))&&!(e.endAt&&!function(e,t,n){const r=du(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Bu(e),t))}(e,t)}function Ju(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xu(e){return(t,n)=>{let r=!1;for(const s of Bu(e)){const e=Zu(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Zu(e,t,n){const r=e.field.isKeyField()?cl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Gc(r,s):Lo(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Lo(19790,{direction:e.dir})}}class ed{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){mc(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return pc(this.inner)}size(){return this.innerSize}}const td=new gc(cl.comparator);function nd(){return td}const rd=new gc(cl.comparator);function sd(){let e=rd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function id(e){let t=rd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ad(){return ld()}function od(){return ld()}function ld(){return new ed(e=>e.toString(),(e,t)=>e.isEqual(t))}const cd=new gc(cl.comparator),ud=new bc(cl.comparator);function dd(){let e=ud;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const hd=new bc(Zo);function fd(){return hd}function md(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(t)?"-0":t}}function pd(e){return{integerValue:""+e}}function gd(e,t){return Ul(t)?pd(t):md(e,t)}class vd{constructor(){this._=void 0}}function yd(e,t,n){return e instanceof xd?function(e,t){const n={fields:{[Ic]:{stringValue:Tc},[jc]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Pc(t)&&(t=Rc(t)),t&&(n.fields[Ac]=t),{mapValue:n}}(n,t):e instanceof Ed?Sd(e,t):e instanceof Nd?kd(e,t):function(e,t){const n=wd(e,t),r=Cd(n)+Cd(e.Ee);return Zc(n)&&Zc(e.Ee)?pd(r):md(e.serializer,r)}(e,t)}function bd(e,t,n){return e instanceof Ed?Sd(e,t):e instanceof Nd?kd(e,t):n}function wd(e,t){return e instanceof _d?function(e){return Zc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class xd extends vd{}class Ed extends vd{constructor(e){super(),this.elements=e}}function Sd(e,t){const n=Td(t);for(const r of e.elements)n.some(e=>Hc(e,r))||n.push(r);return{arrayValue:{values:n}}}class Nd extends vd{constructor(e){super(),this.elements=e}}function kd(e,t){let n=Td(t);for(const r of e.elements)n=n.filter(e=>!Hc(e,r));return{arrayValue:{values:n}}}class _d extends vd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Cd(e){return _c(e.integerValue||e.doubleValue)}function Td(e){return eu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Id{constructor(e,t){this.field=e,this.transform=t}}class Ad{constructor(e,t){this.version=e,this.transformResults=t}}class jd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jd}static exists(e){return new jd(void 0,e)}static updateTime(e){return new jd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Rd{}function Dd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Hd(e.key,jd.none()):new Ud(e.key,e.data,jd.none());{const n=e.data,r=ou.empty();let s=new bc(ll.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Vd(e.key,r,new xc(s.toArray()),jd.none())}}function Ld(e,t,n){e instanceof Ud?function(e,t,n){const r=e.value.clone(),s=Bd(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Vd?function(e,t,n){if(!Pd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Bd(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(zd(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Od(e,t,n,r){return e instanceof Ud?function(e,t,n,r){if(!Pd(e.precondition,t))return n;const s=e.value.clone(),i=qd(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Vd?function(e,t,n,r){if(!Pd(e.precondition,t))return n;const s=qd(e.fieldTransforms,r,t),i=t.data;return i.setAll(zd(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Pd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Md(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=wd(r.transform,e||null);null!=s&&(null===n&&(n=ou.empty()),n.set(r.field,s))}return n||null}function Fd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&rl(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ed&&t instanceof Ed||e instanceof Nd&&t instanceof Nd?rl(e.elements,t.elements,Hc):e instanceof _d&&t instanceof _d?Hc(e.Ee,t.Ee):e instanceof xd&&t instanceof xd}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ud extends Rd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vd extends Rd{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Bd(e,t,n){const r=new Map;Mo(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,bd(a,o,n[s]))}return r}function qd(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,yd(e,i,t))}return r}class Hd extends Rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wd extends Rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ld(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Od(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Od(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=od();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Dd(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(El.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dd())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,(e,t)=>Fd(e,t))&&rl(this.baseMutations,e.baseMutations,(e,t)=>Fd(e,t))}}class Kd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Mo(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=cd;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Kd(e,t,n,r)}}class Qd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Yd{constructor(e,t){this.count=e,this.unchangedNames=t}}var $d,Jd;function Xd(e){switch(e){case Uo.OK:return Lo(64938);case Uo.CANCELLED:case Uo.UNKNOWN:case Uo.DEADLINE_EXCEEDED:case Uo.RESOURCE_EXHAUSTED:case Uo.INTERNAL:case Uo.UNAVAILABLE:case Uo.UNAUTHENTICATED:return!1;case Uo.INVALID_ARGUMENT:case Uo.NOT_FOUND:case Uo.ALREADY_EXISTS:case Uo.PERMISSION_DENIED:case Uo.FAILED_PRECONDITION:case Uo.ABORTED:case Uo.OUT_OF_RANGE:case Uo.UNIMPLEMENTED:case Uo.DATA_LOSS:return!0;default:return Lo(15467,{code:e})}}function Zd(e){if(void 0===e)return Po("GRPC error has no .code"),Uo.UNKNOWN;switch(e){case $d.OK:return Uo.OK;case $d.CANCELLED:return Uo.CANCELLED;case $d.UNKNOWN:return Uo.UNKNOWN;case $d.DEADLINE_EXCEEDED:return Uo.DEADLINE_EXCEEDED;case $d.RESOURCE_EXHAUSTED:return Uo.RESOURCE_EXHAUSTED;case $d.INTERNAL:return Uo.INTERNAL;case $d.UNAVAILABLE:return Uo.UNAVAILABLE;case $d.UNAUTHENTICATED:return Uo.UNAUTHENTICATED;case $d.INVALID_ARGUMENT:return Uo.INVALID_ARGUMENT;case $d.NOT_FOUND:return Uo.NOT_FOUND;case $d.ALREADY_EXISTS:return Uo.ALREADY_EXISTS;case $d.PERMISSION_DENIED:return Uo.PERMISSION_DENIED;case $d.FAILED_PRECONDITION:return Uo.FAILED_PRECONDITION;case $d.ABORTED:return Uo.ABORTED;case $d.OUT_OF_RANGE:return Uo.OUT_OF_RANGE;case $d.UNIMPLEMENTED:return Uo.UNIMPLEMENTED;case $d.DATA_LOSS:return Uo.DATA_LOSS;default:return Lo(39323,{code:e})}}(Jd=$d||($d={}))[Jd.OK=0]="OK",Jd[Jd.CANCELLED=1]="CANCELLED",Jd[Jd.UNKNOWN=2]="UNKNOWN",Jd[Jd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jd[Jd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jd[Jd.NOT_FOUND=5]="NOT_FOUND",Jd[Jd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jd[Jd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jd[Jd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jd[Jd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jd[Jd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jd[Jd.ABORTED=10]="ABORTED",Jd[Jd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jd[Jd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jd[Jd.INTERNAL=13]="INTERNAL",Jd[Jd.UNAVAILABLE=14]="UNAVAILABLE",Jd[Jd.DATA_LOSS=15]="DATA_LOSS";let eh=null;const th=new uo([4294967295,4294967295],0);function nh(e){const t=Jo().encode(e),n=new ho;return n.update(t),new Uint8Array(n.digest())}function rh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new uo([n,r],0),new uo([s,i],0)]}class sh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ih("Invalid padding: ".concat(t));if(n<0)throw new ih("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ih("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ih("Invalid padding when bitmap length is 0: ".concat(t));this.fe=8*e.length-t,this.ge=uo.fromNumber(this.fe)}pe(e,t,n){let r=e.add(t.multiply(uo.fromNumber(n)));return 1===r.compare(th)&&(r=new uo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=nh(e),[n,r]=rh(t);for(let s=0;s<this.hashCount;s++){const e=this.pe(n,r,s);if(!this.ye(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new sh(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.fe)return;const t=nh(e),[n,r]=rh(t);for(let s=0;s<this.hashCount;s++){const e=this.pe(n,r,s);this.we(e)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ih extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ah{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,oh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ah(El.min(),r,new gc(Zo),nd(),dd())}}class oh{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new oh(n,t,dd(),dd(),dd())}}class lh{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class ch{constructor(e,t){this.targetId=e,this.De=t}}class uh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class dh{constructor(){this.ve=0,this.Ce=mh(),this.Fe=Sc.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=dd(),t=dd(),n=dd();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Lo(38017,{changeType:s})}}),new oh(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=mh()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Mo(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class hh{constructor(e){this.We=e,this.Ge=new Map,this.ze=nd(),this.je=fh(),this.Je=fh(),this.He=new gc(Zo)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:Lo(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const s=r.target;if(Ou(s))if(0===n){const e=new cl(s.path);this.Xe(t,e,cu.newNoDocument(e,El.min()))}else Mo(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),s=n?this.ut(n,e,r):1;if(0!==s){this.rt(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}null==eh||eh.ct(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.De,this.We.lt(),n,s))}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Cc(n).toUint8Array()}catch(e){if(e instanceof Ec)return Ro("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new sh(i,r,s)}catch(e){return Ro(e instanceof ih?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.fe?null:a}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.We.lt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const s=this.st(r);if(s){if(n.current&&Ou(s.target)){const t=new cl(s.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,cu.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=dd();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new ah(e,t,this.He,this.ze,n);return this.ze=nd(),this.je=fh(),this.Je=fh(),this.He=new gc(Zo),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new dh,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new bc(Zo),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new bc(Zo),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||jo("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new dh),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function fh(){return new gc(cl.comparator)}function mh(){return new gc(cl.comparator)}const ph={asc:"ASCENDING",desc:"DESCENDING"},gh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vh={and:"AND",or:"OR"};class yh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bh(e,t){return e.useProto3Json||Ml(t)?t:{value:t}}function wh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function xh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Eh(e,t){return wh(e,t.toTimestamp())}function Sh(e){return Mo(!!e,49232),El.fromTimestamp(function(e){const t=kc(e);return new xl(t.seconds,t.nanos)}(e))}function Nh(e,t){return kh(e,t).canonicalString()}function kh(e,t){const n=function(e){return new al(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function _h(e){const t=al.fromString(e);return Mo(Gh(t),10190,{key:t.toString()}),t}function Ch(e,t){return Nh(e.databaseId,t.path)}function Th(e,t){const n=_h(t);if(n.get(1)!==e.databaseId.projectId)throw new Vo(Uo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Vo(Uo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cl(Ph(n))}function Ih(e,t){return Nh(e.databaseId,t)}function Ah(e){const t=_h(e);return 4===t.length?al.emptyPath():Ph(t)}function jh(e){return new al(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ph(e){return Mo(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Rh(e,t,n){return{name:Ch(e,t),fields:n.value.mapValue.fields}}function Dh(e,t){let n;if(t instanceof Ud)n={update:Rh(e,t.key,t.value)};else if(t instanceof Hd)n={delete:Ch(e,t.key)};else if(t instanceof Vd)n={update:Rh(e,t.key,t.data),updateMask:Wh(t.fieldMask)};else{if(!(t instanceof Wd))return Lo(16599,{Rt:t.type});n={verify:Ch(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof xd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ed)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof _d)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw Lo(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Eh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Lo(27497)}(e,t.precondition)),n}function Lh(e,t){return{documents:[Ih(e,t.path)]}}function Oh(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ih(e,s);const i=function(e){if(0!==e.length)return Hh(vu.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Bh(e.field),direction:Uh(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=bh(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:s}}function Mh(e){let t=Ah(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Mo(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Fh(e);return t instanceof vu&&bu(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new fu(qh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Ml(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new uu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new uu(n,t)}(n.endAt)),Fu(t,s,a,i,o,"F",l,c)}function Fh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qh(e.unaryFilter.field);return gu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qh(e.unaryFilter.field);return gu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qh(e.unaryFilter.field);return gu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=qh(e.unaryFilter.field);return gu.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Lo(61313);default:return Lo(60726)}}(e):void 0!==e.fieldFilter?function(e){return gu.create(qh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Lo(58110);default:return Lo(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return vu.create(e.compositeFilter.filters.map(e=>Fh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Lo(1026)}}(e.compositeFilter.op))}(e):Lo(30097,{filter:e})}function Uh(e){return ph[e]}function Vh(e){return gh[e]}function zh(e){return vh[e]}function Bh(e){return{fieldPath:e.canonicalString()}}function qh(e){return ll.fromServerFormat(e.fieldPath)}function Hh(e){return e instanceof gu?function(e){if("=="===e.op){if(nu(e.value))return{unaryFilter:{field:Bh(e.field),op:"IS_NAN"}};if(tu(e.value))return{unaryFilter:{field:Bh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nu(e.value))return{unaryFilter:{field:Bh(e.field),op:"IS_NOT_NAN"}};if(tu(e.value))return{unaryFilter:{field:Bh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bh(e.field),op:Vh(e.op),value:e.value}}}(e):e instanceof vu?function(e){const t=e.getFilters().map(e=>Hh(e));return 1===t.length?t[0]:{compositeFilter:{op:zh(e.op),filters:t}}}(e):Lo(54877,{filter:e})}function Wh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Gh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Kh{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:El.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:El.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sc.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Kh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qh{constructor(e){this.gt=e}}function Yh(e){const t=Mh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gu(t,t.limit,"L"):t}class $h{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(_c(e.integerValue));else if("doubleValue"in e){const n=_c(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),Fl(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=kc(n)),t.Mt("".concat(n.seconds||"")),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Cc(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?au(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):su(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Lo(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;const s=e.fields||{};this.Ct(t,53);const i=Bc,a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(_c(a)),this.xt(i,t),this.Dt(s[i],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),cl.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}$h.Ut=new $h;class Jh{constructor(){this.Dn=new Xh}addToCollectionParentIndex(e,t){return this.Dn.add(t),Pl.resolve()}getCollectionParents(e,t){return Pl.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Pl.resolve()}deleteFieldIndex(e,t){return Pl.resolve()}deleteAllFieldIndexes(e){return Pl.resolve()}createTargetIndexes(e,t){return Pl.resolve()}getDocumentsMatchingTarget(e,t){return Pl.resolve(null)}getIndexType(e,t){return Pl.resolve(0)}getFieldIndexes(e,t){return Pl.resolve([])}getNextCollectionGroupToUpdate(e){return Pl.resolve(null)}getMinOffset(e,t){return Pl.resolve(Cl.min())}getMinOffsetFromCollectionGroup(e,t){return Pl.resolve(Cl.min())}updateCollectionGroup(e,t,n){return Pl.resolve()}updateIndexEntries(e,t){return Pl.resolve()}}class Xh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new bc(al.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new bc(al.comparator)).toArray()}}new Uint8Array(0);const Zh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ef=41943040;class tf{static withCacheSize(e){return new tf(e,tf.DEFAULT_COLLECTION_PERCENTILE,tf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}tf.DEFAULT_COLLECTION_PERCENTILE=10,tf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tf.DEFAULT=new tf(ef,tf.DEFAULT_COLLECTION_PERCENTILE,tf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tf.DISABLED=new tf(-1,0,0);class nf{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new nf(0)}static ur(){return new nf(-1)}}const rf="LruGarbageCollector",sf=1048576;function af(e,t){let[n,r]=e,[s,i]=t;const a=Zo(n,s);return 0===a?Zo(r,i):a}class of{constructor(e){this.Tr=e,this.buffer=new bc(af),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();af(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){jo(rf,"Garbage collection scheduled in ".concat(e,"ms")),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Dl(e)?jo(rf,"Ignoring IndexedDB error during garbage collection: ",e):await jl(e)}await this.Rr(3e5)})}}class cf{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Pl.resolve(Ll.ue);const n=new of(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(jo("LruGarbageCollector","Garbage collection skipped; disabled"),Pl.resolve(Zh)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(jo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Zh):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(jo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ao()<=ln.DEBUG&&jo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Pl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function uf(e,t){return new cf(e,t)}class df{constructor(){this.changes=new ed(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Pl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ff{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Od(n.mutation,e,xc.empty(),xl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,dd()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dd();const r=ad();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=sd();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ad();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,dd()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=nd();const i=ld(),a=ld();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Vd)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Od(a.mutation,t,a.mutation.getFieldMask(),xl.now())):i.set(t.key,xc.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new hf(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=ld();let r=new gc((e,t)=>e-t),s=dd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||xc.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||dd()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=od();l.forEach(e=>{if(!s.has(e)){const r=Dd(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Pl.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return cl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Pl.resolve(ad());let a=Sl,o=s;return i.next(t=>Pl.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?Pl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,dd())).next(e=>({batchId:a,changes:id(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cl(t)).next(e=>{let t=sd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=sd();return this.indexManager.getCollectionParents(e,s).next(a=>Pl.forEach(a,a=>{const o=function(e,t){return new Mu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,cu.newInvalidDocument(r)))});let n=sd();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Od(i.mutation,r,xc.empty(),xl.now()),$u(t,r)&&(n=n.insert(e,r))}),n})}}class mf{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Pl.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Sh(e.createTime)}}(t)),Pl.resolve()}getNamedQuery(e,t){return Pl.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:Yh(e.bundledQuery),readTime:Sh(e.readTime)}}(t)),Pl.resolve()}}class pf{constructor(){this.overlays=new gc(cl.comparator),this.kr=new Map}getOverlay(e,t){return Pl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ad();return Pl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),Pl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),Pl.resolve()}getOverlaysForCollection(e,t,n){const r=ad(),s=t.length+1,i=new cl(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Pl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new gc((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=ad(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ad(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Pl.resolve(a)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Qd(t,n));let s=this.kr.get(t);void 0===s&&(s=dd(),this.kr.set(t,s)),this.kr.set(t,s.add(n.key))}}class gf{constructor(){this.sessionToken=Sc.EMPTY_BYTE_STRING}getSessionToken(e){return Pl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Pl.resolve()}}class vf{constructor(){this.qr=new bc(yf.Qr),this.$r=new bc(yf.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new yf(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new yf(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new cl(new al([])),n=new yf(t,e),r=new yf(t,e+1),s=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),s.push(e.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new cl(new al([])),n=new yf(t,e),r=new yf(t,e+1);let s=dd();return this.$r.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new yf(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class yf{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return cl.comparator(e.key,t.key)||Zo(e.Hr,t.Hr)}static Ur(e,t){return Zo(e.Hr,t.Hr)||cl.comparator(e.key,t.key)}}class bf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new bc(yf.Qr)}checkEmpty(e){return Pl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Gd(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Yr=this.Yr.add(new yf(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Pl.resolve(i)}lookupMutationBatch(e,t){return Pl.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),s=r<0?0:r;return Pl.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Pl.resolve(0===this.mutationQueue.length?Ol:this.er-1)}getAllMutationBatches(e){return Pl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new yf(t,0),r=new yf(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);s.push(t)}),Pl.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new bc(Zo);return t.forEach(e=>{const t=new yf(e,0),r=new yf(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),Pl.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;cl.isDocumentKey(s)||(s=s.child(""));const i=new yf(new cl(s),0);let a=new bc(Zo);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Hr)),!0)},i),Pl.resolve(this.ei(a))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Mo(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return Pl.forEach(t.mutations,r=>{const s=new yf(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new yf(t,0),r=this.Yr.firstAfterOrEqual(n);return Pl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Pl.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wf{constructor(e){this.ni=e,this.docs=new gc(cl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Pl.resolve(n?n.document.mutableCopy():cu.newInvalidDocument(t))}getEntries(e,t){let n=nd();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():cu.newInvalidDocument(e))}),Pl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=nd();const i=t.path,a=new cl(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Tl(_l(a),n)<=0||(r.has(a.key)||$u(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return Pl.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Lo(9500)}ri(e,t){return Pl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new xf(this)}getSize(e){return Pl.resolve(this.size)}}class xf extends df{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),Pl.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class Ef{constructor(e){this.persistence=e,this.ii=new ed(e=>Du(e),Lu),this.lastRemoteSnapshotVersion=El.min(),this.highestTargetId=0,this.si=0,this.oi=new vf,this.targetCount=0,this._i=nf.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),Pl.resolve()}getLastRemoteSnapshotVersion(e){return Pl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Pl.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Pl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),Pl.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new nf(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Pl.resolve()}updateTargetData(e,t){return this.hr(t),Pl.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Pl.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.ii.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ii.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Pl.waitFor(s).next(()=>r)}getTargetCount(e){return Pl.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return Pl.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),Pl.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Pl.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Pl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return Pl.resolve(n)}containsKey(e,t){return Pl.resolve(this.oi.containsKey(t))}}class Sf{constructor(e,t){this.ai={},this.overlays={},this.ui=new Ll(0),this.ci=!1,this.ci=!0,this.li=new gf,this.referenceDelegate=e(this),this.hi=new Ef(this),this.indexManager=new Jh,this.remoteDocumentCache=function(e){return new wf(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new Qh(t),this.Ti=new mf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new bf(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){jo("MemoryPersistence","Starting transaction:",e);const r=new Nf(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return Pl.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class Nf extends Al{constructor(e){super(),this.currentSequenceNumber=e}}class kf{constructor(e){this.persistence=e,this.Ai=new vf,this.Ri=null}static Vi(e){return new kf(e)}get mi(){if(this.Ri)return this.Ri;throw Lo(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),Pl.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),Pl.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Pl.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pl.forEach(this.mi,n=>{const r=cl.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,El.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Pl.or([()=>Pl.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class _f{constructor(e,t){this.persistence=e,this.gi=new ed(e=>zl(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=uf(this,t)}static Vi(e,t){return new _f(e,t)}Ii(){}di(e){return Pl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return Pl.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?Pl.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,s.removeEntry(r,El.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Pl.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Pl.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Pl.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Pl.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jc(e.data.value)),t}Sr(e,t,n){return Pl.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return Pl.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Cf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=dd(),r=dd();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Cf(e,t.fromCache,n,r)}}class Tf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class If{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=qt()?8:Rl(zt())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ps(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ys(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Tf;return this.ws(e,t,n).next(r=>{if(s.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>s.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(Ao()<=ln.DEBUG&&jo("QueryEngine","SDK will not create cache indexes for query:",Yu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Pl.resolve()):(Ao()<=ln.DEBUG&&jo("QueryEngine","Query:",Yu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(Ao()<=ln.DEBUG&&jo("QueryEngine","The SDK decides to create cache indexes for query:",Yu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qu(t))):Pl.resolve())}ps(e,t){if(Vu(t))return Pl.resolve(null);let n=qu(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Gu(t,null,"F"),n=qu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=dd(...r);return this.gs.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.bs(t,r);return this.Ds(t,i,s,n.readTime)?this.ps(e,Gu(t,null,"F")):this.vs(e,i,t,n)}))})))}ys(e,t,n,r){return Vu(t)||r.isEqual(El.min())?Pl.resolve(null):this.gs.getDocuments(e,n).next(s=>{const i=this.bs(t,s);return this.Ds(t,i,n,r)?Pl.resolve(null):(Ao()<=ln.DEBUG&&jo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yu(t)),this.vs(e,i,t,kl(r,Sl)).next(e=>e))})}bs(e,t){let n=new bc(Xu(e));return t.forEach((t,r)=>{$u(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,t,n){return Ao()<=ln.DEBUG&&jo("QueryEngine","Using full collection scan to execute query:",Yu(t)),this.gs.getDocumentsMatchingQuery(e,t,Cl.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Af="LocalStore";class jf{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new gc(Zo),this.Ms=new ed(e=>Du(e),Lu),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ff(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function Pf(e,t,n,r){return new jf(e,t,n,r)}async function Rf(e,t){const n=Fo(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=dd();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Bs:e,removedBatchIds:s,addedBatchIds:i}))})})}function Df(e){const t=Fo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function Lf(e,t,n){let r=dd(),s=dd();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=nd();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(El.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):jo(Af,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ls:r,ks:s}})}function Of(e,t){const n=Fo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ol),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Mf(e,t){const n=Fo(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(s=>s?(r=s,Pl.resolve(r)):n.hi.allocateTargetId(e).next(s=>(r=new Kh(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}async function Ff(e,t,n){const r=Fo(e),s=r.Fs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Dl(e))throw e;jo(Af,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Fs=r.Fs.remove(t),r.Ms.delete(s.target)}function Uf(e,t,n){const r=Fo(e);let s=El.min(),i=dd();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Fo(e),s=r.Ms.get(n);return void 0!==s?Pl.resolve(r.Fs.get(s)):r.hi.getTargetData(t,n)}(r,e,qu(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?s:El.min(),n?i:dd())).next(e=>(Vf(r,Ju(t),e),{documents:e,qs:i})))}function Vf(e,t,n){let r=e.xs.get(t)||El.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}class zf{constructor(){this.activeTargetIds=fd()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bf{constructor(){this.Fo=new zf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new zf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qf{xo(e){}shutdown(){}}const Hf="ConnectivityMonitor";class Wf{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){jo(Hf,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){jo(Hf,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gf=null;function Kf(){return null===Gf?Gf=268435456+Math.round(2147483648*Math.random()):Gf++,"0x"+Gf.toString(16)}const Qf="RestConnection",Yf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $f{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.Ko=this.databaseId.database===Oc?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,s){const i=Kf(),a=this.Go(e,t.toUriEncodedString());jo(Qf,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(o,r,s);const{host:l}=new URL(a),c=Ot(l);return this.jo(e,a,o,n,c).then(t=>(jo(Qf,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw Ro(Qf,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Jo(e,t,n,r,s,i){return this.Wo(e,t,n,r,s)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+To,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=Yf[e];return"".concat(this.$o,"/v1/").concat(t,":").concat(n)}terminate(){}}class Jf{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Xf="WebChannelConnection";class Zf extends $f{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,s){const i=Kf();return new Promise((s,a)=>{const o=new po;o.setWithCredentials(!0),o.listenOnce(vo.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case yo.NO_ERROR:const t=o.getResponseJson();jo(Xf,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case yo.TIMEOUT:jo(Xf,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Vo(Uo.DEADLINE_EXCEEDED,"Request time out"));break;case yo.HTTP_ERROR:const n=o.getStatus();if(jo(Xf,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Uo).indexOf(t)>=0?t:Uo.UNKNOWN}(t.status);a(new Vo(e,t.message))}else a(new Vo(Uo.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Vo(Uo.UNAVAILABLE,"Connection failed."));break;default:Lo(9055,{c_:e,streamId:i,l_:o.getLastErrorCode(),h_:o.getLastError()})}}finally{jo(Xf,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);jo(Xf,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}P_(e,t,n){const r=Kf(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Eo(),a=xo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.zo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");jo(Xf,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.T_(u);let d=!1,h=!1;const f=new Jf({Ho:t=>{h?jo(Xf,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(jo(Xf,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),jo(Xf,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Yo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,go.EventType.OPEN,()=>{h||(jo(Xf,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.s_())}),m(u,go.EventType.CLOSE,()=>{h||(h=!0,jo(Xf,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.__(),this.I_(u))}),m(u,go.EventType.ERROR,t=>{h||(h=!0,Ro(Xf,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.__(new Vo(Uo.UNAVAILABLE,"The operation could not be completed")))}),m(u,go.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];Mo(!!s,16349);const i=s,a=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){jo(Xf,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=$d[e];if(void 0!==t)return Zd(t)}(t),s=a.message;void 0===n&&(n=Uo.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.__(new Vo(n,s)),u.close()}else jo(Xf,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.a_(s)}}),m(a,wo.STAT_EVENT,t=>{t.stat===bo.PROXY?jo(Xf,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===bo.NOPROXY&&jo(Xf,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function em(){return"undefined"!=typeof document?document:null}function tm(e){return new yh(e,!0)}class nm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&jo("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.R_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const rm="PersistentStream";class sm{constructor(e,t,n,r,s,i,a,o){this.Fi=e,this.w_=n,this.S_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new nm(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===Uo.RESOURCE_EXHAUSTED?(Po(t.toString()),Po("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Uo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.b_===t&&this.W_(n,r)},t=>{e(()=>{const e=new Vo(Uo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return jo(rm,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(jo(rm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class im extends sm{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Lo(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Mo(void 0===t||"string"==typeof t,58123),Sc.fromBase64String(t||"")):(Mo(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Sc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Uo.UNKNOWN:Zd(e.code);return new Vo(t,e.message||"")}(a);n=new uh(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Th(e,r.document.name),i=Sh(r.document.updateTime),a=r.document.createTime?Sh(r.document.createTime):El.min(),o=new ou({mapValue:{fields:r.document.fields}}),l=cu.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new lh(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Th(e,r.document),i=r.readTime?Sh(r.readTime):El.min(),a=cu.newNoDocument(s,i),o=r.removedTargetIds||[];n=new lh([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Th(e,r.document),i=r.removedTargetIds||[];n=new lh([],i,s,null)}else{if(!("filter"in t))return Lo(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Yd(r,s),a=e.targetId;n=new ch(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return El.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?El.min():t.readTime?Sh(t.readTime):El.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=jh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ou(r)?{documents:Lh(e,r)}:{query:Oh(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=xh(e,t.resumeToken);const r=bh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(El.min())>0){n.readTime=wh(e,t.snapshotVersion.toTimestamp());const r=bh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lo(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=jh(this.serializer),t.removeTarget=e,this.k_(t)}}class am extends sm{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Mo(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Mo(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){Mo(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(Mo(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Sh(e.updateTime):Sh(t);return n.isEqual(El.min())&&(n=Sh(t)),new Ad(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Sh(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=jh(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Dh(this.serializer,e))};this.k_(t)}}class om{}class lm extends om{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Vo(Uo.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Wo(e,kh(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Uo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Vo(Uo.UNKNOWN,e.toString())})}Jo(e,t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Jo(e,kh(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Uo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Vo(Uo.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class cm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this._a?(Po(t),this._a=!1):jo("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const um="RemoteStore";class dm{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{wm(this)&&(jo(um,"Restarting streams for network reachability change."),await async function(e){const t=Fo(e);t.Ia.add(4),await fm(t),t.Aa.set("Unknown"),t.Ia.delete(4),await hm(t)}(this))})}),this.Aa=new cm(n,r)}}async function hm(e){if(wm(e))for(const t of e.da)await t(!0)}async function fm(e){for(const t of e.da)await t(!1)}function mm(e,t){const n=Fo(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),bm(n)?ym(n):Um(n).x_()&&gm(n,t))}function pm(e,t){const n=Fo(e),r=Um(n);n.Ta.delete(t),r.x_()&&vm(n,t),0===n.Ta.size&&(r.x_()?r.B_():wm(n)&&n.Aa.set("Unknown"))}function gm(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(El.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Um(e).H_(t)}function vm(e,t){e.Ra.$e(t),Um(e).Y_(t)}function ym(e){e.Ra=new hh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Um(e).start(),e.Aa.aa()}function bm(e){return wm(e)&&!Um(e).M_()&&e.Ta.size>0}function wm(e){return 0===Fo(e).Ia.size}function xm(e){e.Ra=void 0}async function Em(e){e.Aa.set("Online")}async function Sm(e){e.Ta.forEach((t,n)=>{gm(e,t)})}async function Nm(e,t){xm(e),bm(e)?(e.Aa.la(t),ym(e)):e.Aa.set("Unknown")}async function km(e,t,n){if(e.Aa.set("Online"),t instanceof uh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){jo(um,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await _m(e,n)}else if(t instanceof lh?e.Ra.Ye(t):t instanceof ch?e.Ra.it(t):e.Ra.et(t),!n.isEqual(El.min()))try{const t=await Df(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ta.get(r);s&&e.Ta.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(Sc.EMPTY_BYTE_STRING,r.snapshotVersion)),vm(e,t);const s=new Kh(r.target,t,n,r.sequenceNumber);gm(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){jo(um,"Failed to raise snapshot:",t),await _m(e,t)}}async function _m(e,t,n){if(!Dl(t))throw t;e.Ia.add(1),await fm(e),e.Aa.set("Offline"),n||(n=()=>Df(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{jo(um,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await hm(e)})}function Cm(e,t){return t().catch(n=>_m(e,n,t))}async function Tm(e){const t=Fo(e),n=Vm(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Ol;for(;Im(t);)try{const e=await Of(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,Am(t,e)}catch(e){await _m(t,e)}jm(t)&&Pm(t)}function Im(e){return wm(e)&&e.Pa.length<10}function Am(e,t){e.Pa.push(t);const n=Vm(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function jm(e){return wm(e)&&!Vm(e).M_()&&e.Pa.length>0}function Pm(e){Vm(e).start()}async function Rm(e){Vm(e).na()}async function Dm(e){const t=Vm(e);for(const n of e.Pa)t.X_(n.mutations)}async function Lm(e,t,n){const r=e.Pa.shift(),s=Kd.from(r,t,n);await Cm(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Tm(e)}async function Om(e,t){t&&Vm(e).Z_&&await async function(e,t){if(function(e){return Xd(e)&&e!==Uo.ABORTED}(t.code)){const n=e.Pa.shift();Vm(e).N_(),await Cm(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Tm(e)}}(e,t),jm(e)&&Pm(e)}async function Mm(e,t){const n=Fo(e);n.asyncQueue.verifyOperationInProgress(),jo(um,"RemoteStore received new credentials");const r=wm(n);n.Ia.add(3),await fm(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await hm(n)}async function Fm(e,t){const n=Fo(e);t?(n.Ia.delete(2),await hm(n)):t||(n.Ia.add(2),await fm(n),n.Aa.set("Unknown"))}function Um(e){return e.Va||(e.Va=function(e,t,n){const r=Fo(e);return r.ia(),new im(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:Em.bind(null,e),e_:Sm.bind(null,e),n_:Nm.bind(null,e),J_:km.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),bm(e)?ym(e):e.Aa.set("Unknown")):(await e.Va.stop(),xm(e))})),e.Va}function Vm(e){return e.ma||(e.ma=function(e,t,n){const r=Fo(e);return r.ia(),new am(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:Rm.bind(null,e),n_:Om.bind(null,e),ea:Dm.bind(null,e),ta:Lm.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await Tm(e)):(await e.ma.stop(),e.Pa.length>0&&(jo(um,"Stopping write stream with ".concat(e.Pa.length," pending writes")),e.Pa=[]))})),e.ma}class zm{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new zm(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vo(Uo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(e,t){if(Po("AsyncQueue","".concat(t,": ").concat(e)),Dl(e))return new Vo(Uo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class qm{static emptySet(e){return new qm(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||cl.comparator(t.key,n.key):(e,t)=>cl.comparator(e.key,t.key),this.keyedMap=sd(),this.sortedSet=new gc(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new qm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Hm{constructor(){this.fa=new gc(cl.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Lo(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class Wm{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Wm(e,t,qm.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Gm{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Km{constructor(){this.queries=Qm(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=Fo(e),r=n.queries;n.queries=Qm(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new Vo(Uo.ABORTED,"Firestore shutting down"))}}function Qm(){return new ed(e=>Qu(e),Ku)}async function Ym(e,t){const n=Fo(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Sa()&&t.ba()&&(r=2):(i=new Gm,r=t.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Bm(e,"Initialization of query '".concat(Yu(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.wa.push(t),t.va(n.onlineState),i.ya&&t.Ca(i.ya)&&Zm(n)}async function $m(e,t){const n=Fo(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.wa.indexOf(t);e>=0&&(i.wa.splice(e,1),0===i.wa.length?s=t.ba()?0:1:!i.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Jm(e,t){const n=Fo(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.wa)e.Ca(s)&&(r=!0);t.ya=s}}r&&Zm(n)}function Xm(e,t,n){const r=Fo(e),s=r.queries.get(t);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(t)}function Zm(e){e.Da.forEach(e=>{e.next()})}var ep,tp;(tp=ep||(ep={})).Fa="default",tp.Cache="cache";class np{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Wm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Wm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ep.Cache}}class rp{constructor(e){this.key=e}}class sp{constructor(e){this.key=e}}class ip{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=dd(),this.mutatedKeys=dd(),this.Xa=Xu(e),this.eu=new qm(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new Hm,r=t?t.eu:this.eu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=$u(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.iu(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Xa(u,o)>0||l&&this.Xa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{eu:i,ru:n,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const i=e.ru.pa();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lo(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const a=t&&!r?this.ou():[],o=0===this.Za.size&&this.current&&!r?1:0,l=o!==this.Ya;return this.Ya=o,0!==i.length||l?{snapshot:new Wm(this.query,e.eu,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Hm,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=dd(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new sp(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new rp(n))}),t}uu(e){this.Ha=e.qs,this.Za=dd();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Wm.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const ap="SyncEngine";class op{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class lp{constructor(e){this.key=e,this.lu=!1}}class cp{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.hu={},this.Pu=new ed(e=>Qu(e),Ku),this.Tu=new Map,this.Iu=new Set,this.du=new gc(cl.comparator),this.Eu=new Map,this.Au=new vf,this.Ru={},this.Vu=new Map,this.mu=nf.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function up(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=jp(e);let s;const i=r.Pu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await hp(r,t,n,!0),s}async function dp(e,t){const n=jp(e);await hp(n,t,!0,!1)}async function hp(e,t,n,r){const s=await Mf(e.localStore,qu(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await fp(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&mm(e.remoteStore,s),o}async function fp(e,t,n,r,s){e.gu=(t,n,r)=>async function(e,t,n,r){let s=t.view.nu(n);s.Ds&&(s=await Uf(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.nu(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return kp(e,t.targetId,o._u),o.snapshot}(e,t,n,r);const i=await Uf(e.localStore,t,!0),a=new ip(t,i.qs),o=a.nu(i.documents),l=oh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);kp(e,n,c._u);const u=new op(t,n,a);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function mp(e,t,n){const r=Fo(e),s=r.Pu.get(t),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(e=>!Ku(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ff(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&pm(r.remoteStore,s.targetId),Sp(r,s.targetId)}).catch(jl)):(Sp(r,s.targetId),await Ff(r.localStore,s.targetId,!0))}async function pp(e,t){const n=Fo(e),r=n.Pu.get(t),s=n.Tu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pm(n.remoteStore,r.targetId))}async function gp(e,t){const n=Fo(e);try{const e=await function(e,t){const n=Fo(e),r=t.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.hi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.hi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Sc.EMPTY_BYTE_STRING,El.min()).withLastLimboFreeSnapshotVersion(El.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.hi.updateTargetData(e,c))});let o=nd(),l=dd();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Lf(e,i,t.documentUpdates).next(e=>{o=e.Ls,l=e.ks})),!r.isEqual(El.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Pl.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Fs=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(Mo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?Mo(r.lu,14607):e.removedDocuments.size>0&&(Mo(r.lu,42227),r.lu=!1))}),await Tp(n,e,t)}catch(e){await jl(e)}}function vp(e,t,n){const r=Fo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Fo(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.wa)s.va(t)&&(r=!0)}),r&&Zm(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function yp(e,t,n){const r=Fo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let e=new gc(cl.comparator);e=e.insert(i,cu.newNoDocument(i,El.min()));const n=dd().add(i),s=new ah(El.min(),new Map,new gc(Zo),e,n);await gp(r,s),r.du=r.du.remove(i),r.Eu.delete(t),Cp(r)}else await Ff(r.localStore,t,!1).then(()=>Sp(r,t,n)).catch(jl)}async function bp(e,t){const n=Fo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Fo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=Pl.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Mo(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=dd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Ep(n,r,null),xp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tp(n,e)}catch(e){await jl(e)}}async function wp(e,t,n){const r=Fo(e);try{const e=await function(e,t){const n=Fo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Mo(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Ep(r,t,n),xp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Tp(r,e)}catch(n){await jl(n)}}function xp(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function Ep(e,t,n){const r=Fo(e);let s=r.Ru[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ru[r.currentUser.toKey()]=s}}function Sp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||Np(e,t)})}function Np(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(pm(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Cp(e))}function kp(e,t,n){for(const r of n)r instanceof rp?(e.Au.addReference(r.key,t),_p(e,r)):r instanceof sp?(jo(ap,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||Np(e,r.key)):Lo(19791,{yu:r})}function _p(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(jo(ap,"New document in limbo: "+n),e.Iu.add(r),Cp(e))}function Cp(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new cl(al.fromString(t)),r=e.mu.next();e.Eu.set(r,new lp(n)),e.du=e.du.insert(n,r),mm(e.remoteStore,new Kh(qu(Uu(n.path)),r,"TargetPurposeLimboResolution",Ll.ue))}}async function Tp(e,t,n){const r=Fo(e),s=[],i=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((e,o)=>{a.push(r.gu(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Cf.Es(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.hu.J_(s),await async function(e,t){const n=Fo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Pl.forEach(t,t=>Pl.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Pl.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Dl(e))throw e;jo(Af,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,s)}}}(r.localStore,i))}async function Ip(e,t){const n=Fo(e);if(!n.currentUser.isEqual(t)){jo(ap,"User change. New user:",t.toKey());const e=await Rf(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new Vo(Uo.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Tp(n,e.Bs)}}function Ap(e,t){const n=Fo(e),r=n.Eu.get(t);if(r&&r.lu)return dd().add(r.key);{let e=dd();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function jp(e){const t=Fo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ap.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=yp.bind(null,t),t.hu.J_=Jm.bind(null,t.eventManager),t.hu.pu=Xm.bind(null,t.eventManager),t}function Pp(e){const t=Fo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wp.bind(null,t),t}class Rp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Pf(this.persistence,new If,e.initialUser,this.serializer)}Du(e){return new Sf(kf.Vi,this.serializer)}bu(e){return new Bf}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rp.provider={build:()=>new Rp};class Dp extends Rp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Mo(this.persistence.referenceDelegate instanceof _f,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new lf(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?tf.withCacheSize(this.cacheSizeBytes):tf.DEFAULT;return new Sf(e=>_f.Vi(e,t),this.serializer)}}class Lp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>vp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ip.bind(null,this.syncEngine),await Fm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Km}createDatastore(e){const t=tm(e.databaseInfo.databaseId),n=function(e){return new Zf(e)}(e.databaseInfo);return function(e,t,n,r){return new lm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new dm(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>vp(this.syncEngine,e,0),Wf.C()?new Wf:new qf)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new cp(e,t,n,r,s,i);return a&&(o.fu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Fo(e);jo(um,"RemoteStore shutting down."),t.Ia.add(5),await fm(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Lp.provider={build:()=>new Lp};class Op{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Po("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Mp="FirestoreClient";class Fp{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Co.UNAUTHENTICATED,this.clientId=Xo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{jo(Mp,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(jo(Mp,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Bm(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Up(e,t){e.asyncQueue.verifyOperationInProgress(),jo(Mp,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Rf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{Ro("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{jo("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{Ro("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function Vp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await zp(e);jo(Mp,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Mm(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Mm(t.remoteStore,n)),e._onlineComponents=t}async function zp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){jo(Mp,"Using user provided OfflineComponentProvider");try{await Up(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Uo.FAILED_PRECONDITION||e.code===Uo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ro("Error using user provided cache. Falling back to memory cache: "+n),await Up(e,new Rp)}}else jo(Mp,"Using default OfflineComponentProvider"),await Up(e,new Dp(void 0));return e._offlineComponents}async function Bp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(jo(Mp,"Using user provided OnlineComponentProvider"),await Vp(e,e._uninitializedComponentsProvider._online)):(jo(Mp,"Using default OnlineComponentProvider"),await Vp(e,new Lp))),e._onlineComponents}function qp(e){return Bp(e).then(e=>e.syncEngine)}async function Hp(e){const t=await Bp(e),n=t.eventManager;return n.onListen=up.bind(null,t.syncEngine),n.onUnlisten=mp.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=dp.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=pp.bind(null,t.syncEngine),n}function Wp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new zo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Op({next:o=>{i.Ou(),t.enqueueAndForget(()=>$m(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new Vo(Uo.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new Vo(Uo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new np(Uu(n.path),i,{includeMetadataChanges:!0,ka:!0});return Ym(e,a)}(await Hp(e),e.asyncQueue,t,n,r)),r.promise}function Gp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new zo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Op({next:n=>{i.Ou(),t.enqueueAndForget(()=>$m(e,a)),n.fromCache&&"server"===r.source?s.reject(new Vo(Uo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new np(n,i,{includeMetadataChanges:!0,ka:!0});return Ym(e,a)}(await Hp(e),e.asyncQueue,t,n,r)),r.promise}function Kp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Qp=new Map,Yp="firestore.googleapis.com",$p=!0;class Jp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Vo(Uo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Yp,this.ssl=$p}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:$p;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ef;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<sf)throw new Vo(Uo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Vo(Uo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Vo(Uo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Vo(Uo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Vo(Uo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Vo(Uo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Vo(Uo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jp(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new qo;switch(e.type){case"firstParty":return new Ko(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Vo(Uo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Qp.get(e);t&&(jo("ComponentProvider","Removing Datastore"),Qp.delete(e),t.terminate())}(this),Promise.resolve()}}function Zp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;e=pl(e,Xp);const i=Ot(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&(Mt("https://".concat(l)),Vt("Firestore",!0)),a.host!==Yp&&a.host!==l&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:i,emulatorOptions:r});if(!Qt(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Co.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Tt(JSON.stringify({alg:"none",type:"JWT"})),Tt(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Vo(Uo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Co(i)}e._authCredentials=new Ho(new Bo(t,n))}}class eg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new eg(this.firestore,e,this._query)}}class tg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ng(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tg(this.firestore,e,this._key)}toJSON(){return{type:tg._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(yl(t,tg._jsonSchema))return new tg(e,n||null,new cl(al.fromString(t.referencePath)))}}tg._jsonSchemaVersion="firestore/documentReference/1.0",tg._jsonSchema={type:vl("string",tg._jsonSchemaVersion),referencePath:vl("string")};class ng extends eg{constructor(e,t,n){super(e,t,Uu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tg(this.firestore,null,new cl(e))}withConverter(e){return new ng(this.firestore,e,this._path)}}function rg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=tn(e),ul("collection","path",t),e instanceof Xp){const n=al.fromString(t,...r);return hl(n),new ng(e,null,n)}{if(!(e instanceof tg||e instanceof ng))throw new Vo(Uo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(al.fromString(t,...r));return hl(n),new ng(e.firestore,null,n)}}function sg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=tn(e),1===arguments.length&&(t=Xo.newId()),ul("doc","path",t),e instanceof Xp){const n=al.fromString(t,...r);return dl(n),new tg(e,null,new cl(n))}{if(!(e instanceof tg||e instanceof ng))throw new Vo(Uo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(al.fromString(t,...r));return dl(n),new tg(e.firestore,e instanceof ng?e.converter:null,new cl(n))}}const ig="AsyncQueue";class ag{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new nm(this,"async_queue_retry"),this.oc=()=>{const e=em();e&&jo(ig,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=em();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=em();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new zo;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(Yb){if(!Dl(Yb))throw Yb;jo(ig,"Operation failed with retryable error: "+Yb)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,Po("INTERNAL UNHANDLED ERROR: ",og(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=zm.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&Lo(47125,{hc:og(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function og(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function lg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class cg extends Xp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ag,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ag(e),this._firestoreClient=void 0,await e}}}function ug(e){if(e._terminated)throw new Vo(Uo.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||dg(e),e._firestoreClient}function dg(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Lc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Kp(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Fp(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class hg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hg(Sc.fromBase64String(e))}catch(e){throw new Vo(Uo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new hg(Sc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hg._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yl(e,hg._jsonSchema))return hg.fromBase64String(e.bytes)}}hg._jsonSchemaVersion="firestore/bytes/1.0",hg._jsonSchema={type:vl("string",hg._jsonSchemaVersion),bytes:vl("string")};class fg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ll(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mg{constructor(e){this._methodName=e}}class pg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Vo(Uo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Vo(Uo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Zo(this._lat,e._lat)||Zo(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pg._jsonSchemaVersion}}static fromJSON(e){if(yl(e,pg._jsonSchema))return new pg(e.latitude,e.longitude)}}pg._jsonSchemaVersion="firestore/geoPoint/1.0",pg._jsonSchema={type:vl("string",pg._jsonSchemaVersion),latitude:vl("number"),longitude:vl("number")};class gg{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gg._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yl(e,gg._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new gg(e.vectorValues);throw new Vo(Uo.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gg._jsonSchemaVersion="firestore/vectorValue/1.0",gg._jsonSchema={type:vl("string",gg._jsonSchemaVersion),vectorValues:vl("object")};const vg=/^__.*__$/;class yg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Vd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ud(e,this.data,t,this.fieldTransforms)}}class bg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Vd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lo(40011,{Ec:e})}}class xg{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new xg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(wg(this.Ec)&&vg.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Eg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||tm(e)}Dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new xg({Ec:e,methodName:t,bc:n,path:ll.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sg(e){const t=e._freezeSettings(),n=tm(e._databaseId);return new Eg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ng(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Dc(i.merge||i.mergeFields?2:0,t,n,s);Dg("Data must be an object, but it was:",a,r);const o=Pg(r,a);let l,c;if(i.merge)l=new xc(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Lg(t,r,n);if(!a.contains(s))throw new Vo(Uo.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));Ug(e,s)||e.push(s)}l=new xc(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new yg(new ou(o),l,c)}class kg extends mg{_toFieldTransform(e){if(2!==e.Ec)throw 1===e.Ec?e.wc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.wc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kg}}class _g extends mg{_toFieldTransform(e){return new Id(e.path,new xd)}isEqual(e){return e instanceof _g}}class Cg extends mg{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new _d(e.serializer,gd(e.serializer,this.Cc));return new Id(e.path,t)}isEqual(e){return e instanceof Cg&&this.Cc===e.Cc}}function Tg(e,t,n,r){const s=e.Dc(1,t,n);Dg("Data must be an object, but it was:",s,r);const i=[],a=ou.empty();mc(r,(e,r)=>{const o=Mg(t,e,n);r=tn(r);const l=s.gc(o);if(r instanceof kg)i.push(o);else{const e=jg(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new xc(i);return new bg(a,o,s.fieldTransforms)}function Ig(e,t,n,r,s,i){const a=e.Dc(1,t,n),o=[Lg(t,r,n)],l=[s];if(i.length%2!=0)throw new Vo(Uo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(Lg(t,i[h])),l.push(i[h+1]);const c=[],u=ou.empty();for(let h=o.length-1;h>=0;--h)if(!Ug(c,o[h])){const e=o[h];let t=l[h];t=tn(t);const n=a.gc(e);if(t instanceof kg)c.push(e);else{const r=jg(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new xc(c);return new bg(u,d,a.fieldTransforms)}function Ag(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return jg(n,e.Dc(r?4:3,t))}function jg(e,t){if(Rg(e=tn(e)))return Dg("Unsupported field value:",t,e),Pg(e,t);if(e instanceof mg)return function(e,t){if(!wg(t.Ec))throw t.wc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.wc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=jg(s,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=tn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return gd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=xl.fromDate(e);return{timestampValue:wh(t.serializer,n)}}if(e instanceof xl){const n=new xl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:wh(t.serializer,n)}}if(e instanceof pg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hg)return{bytesValue:xh(t.serializer,e._byteString)};if(e instanceof tg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Nh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof gg)return function(e,t){return{mapValue:{fields:{[Fc]:{stringValue:zc},[Bc]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.wc("VectorValues must only contain numeric values.");return md(t.serializer,e)})}}}}}}(e,t);throw t.wc("Unsupported field value: ".concat(ml(e)))}(e,t)}function Pg(e,t){const n={};return pc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mc(e,(e,r)=>{const s=jg(r,t.Vc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Rg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof xl||e instanceof pg||e instanceof hg||e instanceof tg||e instanceof mg||e instanceof gg)}function Dg(e,t,n){if(!Rg(n)||!fl(n)){const r=ml(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Lg(e,t,n){if((t=tn(t))instanceof fg)return t._internalPath;if("string"==typeof t)return Mg(e,t);throw Fg("Field path arguments must be of type string or ",e,!1,void 0,n)}const Og=new RegExp("[~\\*/\\[\\]]");function Mg(e,t,n){if(t.search(Og)>=0)throw Fg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new fg(...t.split("."))._internalPath}catch(r){throw Fg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Fg(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new Vo(Uo.INVALID_ARGUMENT,o+e+l)}function Ug(e,t){return e.some(e=>e.isEqual(t))}class Vg{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new tg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zg extends Vg{data(){return super.data()}}function Bg(e,t){return"string"==typeof t?Mg(e,t):t instanceof fg?t._internalPath:t._delegate._internalPath}function qg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Vo(Uo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hg{}class Wg extends Hg{}function Gg(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Hg&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Yg).length,n=e.filter(e=>e instanceof Kg).length;if(t>1||t>0&&n>0)throw new Vo(Uo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Kg extends Wg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Kg(e,t,n)}_apply(e){const t=this._parse(e);return nv(e._query,t),new eg(e.firestore,e.converter,Wu(e._query,t))}_parse(e){const t=Sg(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){tv(a,i);const t=[];for(const n of a)t.push(ev(r,e,n));o={arrayValue:{values:t}}}else o=ev(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||tv(a,i),o=Ag(n,t,a,"in"===i||"not-in"===i);return gu.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Qg(e,t,n){const r=t,s=Bg("where",e);return Kg._create(s,r,n)}class Yg extends Hg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Yg(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:vu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)nv(n,s),n=Wu(n,s)}(e._query,t),new eg(e.firestore,e.converter,Wu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class $g extends Wg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $g(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fu(t,n)}(e._query,this._field,this._direction);return new eg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Mu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Jg(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Bg("orderBy",e);return $g._create(n,t)}class Xg extends Wg{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Xg(e,t,n)}_apply(e){return new eg(e.firestore,e.converter,Gu(e._query,this._limit,this._limitType))}}function Zg(e){return gl("limit",e),Xg._create("limit",e,"F")}function ev(e,t,n){if("string"==typeof(n=tn(n))){if(""===n)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zu(t)&&-1!==n.indexOf("/"))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(al.fromString(n));if(!cl.isDocumentKey(r))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Xc(e,new cl(r))}if(n instanceof tg)return Xc(e,n._key);throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ml(n),"."))}function tv(e,t){if(!Array.isArray(e)||0===e.length)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function nv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Vo(Uo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Vo(Uo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class rv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _c(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Lo(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return mc(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Bc].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>_c(e.doubleValue));return new gg(s)}convertGeoPoint(e){return new pg(_c(e.latitude),_c(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Rc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}convertTimestamp(e){const t=kc(e);return new xl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=al.fromString(e);Mo(Gh(n),9688,{name:e});const r=new Mc(n.get(1),n.get(3)),s=new cl(n.popFirst(5));return r.isEqual(t)||Po("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function sv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class iv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class av extends Vg{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ov(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Bg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Vo(Uo.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=av._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}av._jsonSchemaVersion="firestore/documentSnapshot/1.0",av._jsonSchema={type:vl("string",av._jsonSchemaVersion),bundleSource:vl("string","DocumentSnapshot"),bundleName:vl("string"),bundle:vl("string")};class ov extends av{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class lv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new iv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ov(this._firestore,this._userDataWriter,n.key,n,new iv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Vo(Uo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new ov(e._firestore,e._userDataWriter,n.doc.key,n.doc,new iv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new ov(e._firestore,e._userDataWriter,t.doc.key,t.doc,new iv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:cv(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Vo(Uo.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lv._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xo.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lo(61501,{type:e})}}function uv(e){e=pl(e,tg);const t=pl(e.firestore,cg);return Wp(ug(t),e._key).then(n=>bv(t,e,n))}lv._jsonSchemaVersion="firestore/querySnapshot/1.0",lv._jsonSchema={type:vl("string",lv._jsonSchemaVersion),bundleSource:vl("string","QuerySnapshot"),bundleName:vl("string"),bundle:vl("string")};class dv extends rv{constructor(e){super(),this.firestore=e}convertBytes(e){return new hg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tg(this.firestore,null,t)}}function hv(e){e=pl(e,eg);const t=pl(e.firestore,cg),n=ug(t),r=new dv(t);return qg(e._query),Gp(n,e._query).then(n=>new lv(t,r,e,n))}function fv(e,t,n){e=pl(e,tg);const r=pl(e.firestore,cg),s=sv(e.converter,t,n);return yv(r,[Ng(Sg(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,jd.none())])}function mv(e,t,n){e=pl(e,tg);const r=pl(e.firestore,cg),s=Sg(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=tn(t))||t instanceof fg?Ig(s,"updateDoc",e._key,t,n,o):Tg(s,"updateDoc",e._key,t),yv(r,[i.toMutation(e._key,jd.exists(!0))])}function pv(e){return yv(pl(e.firestore,cg),[new Hd(e._key,jd.none())])}function gv(e,t){const n=pl(e.firestore,cg),r=sg(e),s=sv(e.converter,t);return yv(n,[Ng(Sg(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,jd.exists(!1))]).then(()=>r)}function vv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=tn(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||lg(n[l])||(o=n[l++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(lg(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof tg)d=pl(e.firestore,cg),h=Uu(e._key.path),u={next:t=>{n[l]&&n[l](bv(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=pl(e,eg);d=pl(t.firestore,cg),h=t._query;const r=new dv(d);u={next:e=>{n[l]&&n[l](new lv(d,r,t,e))},error:n[l+1],complete:n[l+2]},qg(e._query)}return function(e,t,n,r){const s=new Op(r),i=new np(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>Ym(await Hp(e),i)),()=>{s.Ou(),e.asyncQueue.enqueueAndForget(async()=>$m(await Hp(e),i))}}(ug(d),h,c,u)}function yv(e,t){return function(e,t){const n=new zo;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Pp(e);try{const e=await function(e,t){const n=Fo(e),r=xl.now(),s=t.reduce((e,t)=>e.add(t.key),dd());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=nd(),l=dd();return n.Os.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Md(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Vd(e.key,t,lu(t.value.mapValue),jd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:id(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new gc(Zo)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await Tp(r,e.changes),await Tm(r.remoteStore)}catch(e){const t=Bm(e,"Failed to persist write");n.reject(t)}}(await qp(e),t,n)),n.promise}(ug(e),t)}function bv(e,t,n){const r=n.docs.get(t._key),s=new dv(e);return new av(e,s,t._key,r,new iv(n.hasPendingWrites,n.fromCache),t.converter)}function wv(){return new _g("serverTimestamp")}function xv(e){return new Cg("increment",e)}new WeakMap;var Ev,Sv,Nv,kv,_v,Cv;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){To=e}(vr),hr(new nn("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new cg(new Wo(e.getProvider("auth-internal")),new Yo(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Vo(Uo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mc(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),wr(ko,_o,e),wr(ko,_o,"esm2017")}();const Tv={apiKey:null===(Ev="AIzaSyCn55V2y3cXp4Ln0NWjlauU8rgZgMgwDyc")?void 0:Ev.trim(),authDomain:null===(Sv="tuneparams.firebaseapp.com")?void 0:Sv.trim(),projectId:null===(Nv="tuneparams")?void 0:Nv.trim(),storageBucket:null===(kv="tuneparams.firebasestorage.app")?void 0:kv.trim(),messagingSenderId:null===(_v="995918337622")?void 0:_v.trim(),appId:null===(Cv="1:995918337622:web:505babbabe198e3f0d0df7")?void 0:Cv.trim()},Iv=["REACT_APP_FIREBASE_API_KEY","REACT_APP_FIREBASE_AUTH_DOMAIN","REACT_APP_FIREBASE_PROJECT_ID","REACT_APP_FIREBASE_APP_ID"].filter(e=>!{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COMPANY_EMAIL:"admin@tuneparams.ai",REACT_APP_COMPANY_NAME:"TuneParams.ai",REACT_APP_COMPANY_PHONE:"+1 469 702 1086",REACT_APP_EMAILJS_PUBLIC_KEY:"g2ZIKXu5CMAtlW-yr",REACT_APP_EMAILJS_SERVICE_ID:"service_6nnlhkw",REACT_APP_EMAILJS_TEMPLATE_ID:"template_660cmfs",REACT_APP_FIREBASE_API_KEY:"AIzaSyCn55V2y3cXp4Ln0NWjlauU8rgZgMgwDyc",REACT_APP_FIREBASE_APP_ID:"1:995918337622:web:505babbabe198e3f0d0df7",REACT_APP_FIREBASE_AUTH_DOMAIN:"tuneparams.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"995918337622",REACT_APP_FIREBASE_PROJECT_ID:"tuneparams",REACT_APP_FIREBASE_STORAGE_BUCKET:"tuneparams.firebasestorage.app",REACT_APP_FORMSPREE_FORM_ID:"xkgbylng",REACT_APP_FROM_EMAIL:"noreply@tuneparams.ai",REACT_APP_GITHUB_URL:"https://github.com/TuneParams-ai",REACT_APP_HERO_IMAGE_URL:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=500&h=400&fit=crop&auto=format",REACT_APP_LINKEDIN_URL:"https://linkedin.com/company/tuneparams",REACT_APP_PAYPAL_CLIENT_ID:"ATOn7sUD6SgiRcskkEvy_f2dNzcc7Gk50ikp26TdGzRcDoEQRwoDOOO1UvSNLjyGlypDjXcdJKtVkVlU",REACT_APP_PAYPAL_ENVIRONMENT:"sandbox",REACT_APP_SUPPORT_EMAIL:"support@tuneparams.ai",REACT_APP_TWITTER_URL:"https://twitter.com/tuneparams",REACT_APP_WEBSITE_URL:"https://www.tuneparams.ai"}[e]);let Av,jv,Pv,Rv;Iv.length>0&&(console.error("Missing required Firebase environment variables:",Iv),console.error("Please check your .env.local file contains all required Firebase variables"));let Dv=!1;try{const e=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(e=>!Tv[e]);if(e.length>0)throw new Error("Missing Firebase configuration: ".concat(e.join(", ")));Av=yr(Tv),jv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br();const t=fr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=fr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Qt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Mr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ro,persistence:[fa,Ki,Xi]}),r=Dt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>oo)return;const r=null===t||void 0===t?void 0:t.token;lo!==r&&(lo=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){tn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){tn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=Pt("auth");return i&&ii(n,"http://".concat(i)),n}(Av),Pv=function(e,t){const n="object"==typeof e?e:br(),r="string"==typeof e?e:t||Oc,s=fr(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(()=>{const e=Pt("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const n=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),n]:[e.substring(0,t),n]})();e&&Zp(s,...e)}return s}(Av),Rv=new Ni,Rv.setCustomParameters({prompt:"select_account"}),Dv=!0,console.log("\u2705 Firebase initialized successfully")}catch($b){console.error("Firebase initialization error:",$b),jv=null,Pv=null,Rv=null,Dv=!1}const Lv=async e=>{try{if(!e||!e.uid)throw new Error("Invalid user object provided");const t=sg(Pv,"users",e.uid),n=await uv(t),r=u({uid:e.uid,email:e.email,displayName:e.displayName||e.name||"",photoURL:e.photoURL||"",emailVerified:e.emailVerified||!1,lastLoginAt:wv()},n.exists()?{}:{createdAt:wv(),role:"student"});return await fv(t,r,{merge:!0}),{success:!0,message:"User profile updated successfully",userData:r}}catch($b){return console.error("Error creating/updating user profile:",$b),{success:!1,error:$b.message}}},Ov=async e=>{try{if(!e)throw new Error("User ID is required");const t=sg(Pv,"users",e),n=await uv(t);return n.exists()?{success:!0,userData:u({id:n.id},n.data())}:{success:!1,error:"User profile not found"}}catch($b){return console.error("Error getting user profile:",$b),{success:!1,error:$b.message}}};var Mv=n(579);const Fv=(0,r.createContext)({user:null,loading:!0,signInWithGoogle:async()=>({success:!1,error:"Firebase not configured"}),signInWithEmail:async()=>({success:!1,error:"Firebase not configured"}),registerWithEmail:async()=>({success:!1,error:"Firebase not configured"}),sendVerificationEmail:async()=>({success:!1,error:"Firebase not configured"}),resendVerificationEmail:async()=>({success:!1,error:"Firebase not configured"}),sendPasswordReset:async()=>({success:!1,error:"Firebase not configured"}),verifyEmail:async()=>({success:!1,error:"Firebase not configured"}),logout:async()=>({success:!1,error:"Firebase not configured"})}),Uv=e=>{let{children:t}=e;const[n,s]=(0,r.useState)(null),[i,a]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!Dv)return void a(!1);const e=function(e,t,n,r){return tn(e).onAuthStateChanged(t,n,r)}(jv,e=>{if(e){var t;if(e.emailVerified||"google.com"===(null===(t=e.providerData[0])||void 0===t?void 0:t.providerId)){var n;const t={uid:e.uid,name:e.displayName||(null===(n=e.email)||void 0===n?void 0:n.split("@")[0]),email:e.email,photoURL:e.photoURL,emailVerified:e.emailVerified,role:"student"};s(t),localStorage.setItem("user",JSON.stringify(t))}else s(null),localStorage.removeItem("user")}else{const e=localStorage.getItem("user");s(e?JSON.parse(e):null)}a(!1)});return()=>e()},[]);const o={user:n,loading:i,signInWithGoogle:async()=>{if(!Dv)return{success:!1,error:"Firebase not configured. Please check your environment variables."};try{const e=await async function(e,t,n){if(mr(e.app))return Promise.reject(Fr(e,"operation-not-supported-in-this-environment"));const r=Ks(e);zr(e,t,xi);const s=ba(r,n);return new _a(r,"signInViaPopup",t,s).executeNotNull()}(jv,Rv),t=e.user;await Lv(t);const n={uid:t.uid,name:t.displayName,email:t.email,photoURL:t.photoURL,role:"student"};return localStorage.setItem("user",JSON.stringify(n)),{success:!0,user:n}}catch($b){return console.error("Google sign-in error:",$b),{success:!1,error:$b.message}}},signInWithEmail:async(e,t)=>{try{const n=(await Ui(jv,e,t)).user;if(!n.emailVerified)return await Bi(jv),{success:!1,error:"Please verify your email before signing in. Check your inbox for the verification link.",requiresVerification:!0};await Lv(n);const r={uid:n.uid,name:n.displayName||e.split("@")[0],email:n.email,photoURL:n.photoURL,emailVerified:n.emailVerified,role:"student"};return localStorage.setItem("user",JSON.stringify(r)),{success:!0,user:r}}catch($b){console.error("Email sign-in error:",$b);let t="Sign-in failed";switch($b.code){case"auth/user-not-found":t="No account found with this email address.";break;case"auth/wrong-password":t="Incorrect password. Please try again.";break;case"auth/invalid-email":t="Please enter a valid email address.";break;case"auth/too-many-requests":t="Too many failed attempts. Please try again later.";break;default:t=$b.message||"Sign-in failed. Please try again."}return{success:!1,error:t}}},registerWithEmail:async(e,t,n,r)=>{console.log("Starting registration process for:",e);try{const s=await async function(e,t,n){if(mr(e.app))return Promise.reject(Vr(e));const r=Ks(e),s=ri(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ci,"EMAIL_PASSWORD_PROVIDER"),i=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Mi(e),t}),a=await Ti._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(jv,e,t),i=s.user;return console.log("User created successfully:",i.uid),await zi(i,{displayName:"".concat(n," ").concat(r)}),console.log("Profile updated with name:","".concat(n," ").concat(r)),await Lv(u(u({},i),{},{displayName:"".concat(n," ").concat(r)})),console.log("Sending email verification..."),await Vi(i,{url:"".concat(window.location.origin,"/login?emailVerified=true"),handleCodeInApp:!1}),console.log("Email verification sent successfully to:",i.email),await Bi(jv),console.log("User signed out after registration"),{success:!0,requiresVerification:!0,message:"Registration successful! Please check your email and click the verification link before signing in.",user:{uid:i.uid,name:"".concat(n," ").concat(r),email:i.email,emailVerified:i.emailVerified}}}catch($b){console.error("Registration error:",$b);let t="Registration failed";switch($b.code){case"auth/email-already-in-use":t="An account with this email already exists. Please try signing in instead.";break;case"auth/weak-password":t="Password is too weak. Please choose a stronger password.";break;case"auth/invalid-email":t="Please enter a valid email address.";break;default:t=$b.message||"Registration failed. Please try again."}return{success:!1,error:t}}},logout:async()=>{try{return await Bi(jv),localStorage.removeItem("user"),s(null),{success:!0}}catch($b){return console.error("Logout error:",$b),{success:!1,error:$b.message}}},sendVerificationEmail:async()=>{try{return jv.currentUser?jv.currentUser.emailVerified?{success:!1,error:"Email is already verified."}:(await Vi(jv.currentUser,{url:"".concat(window.location.origin,"/login?emailVerified=true"),handleCodeInApp:!1}),{success:!0,message:"Verification email sent! Please check your inbox."}):{success:!1,error:"No user is currently signed in."}}catch($b){return console.error("Send verification email error:",$b),{success:!1,error:$b.message||"Failed to send verification email."}}},resendVerificationEmail:async(e,t)=>{try{console.log("Attempting to resend verification email for:",e);const n=(await Ui(jv,e,t)).user;return n.emailVerified?(await Bi(jv),{success:!1,error:"Email is already verified. You can sign in normally."}):(await Vi(n,{url:"".concat(window.location.origin,"/login?emailVerified=true"),handleCodeInApp:!1}),await Bi(jv),{success:!0,message:"Verification email sent! Please check your inbox and spam folder."})}catch($b){console.error("Resend verification email error:",$b);let t="Failed to resend verification email";switch($b.code){case"auth/user-not-found":t="No account found with this email address.";break;case"auth/wrong-password":t="Incorrect password. Please enter the correct password.";break;case"auth/invalid-email":t="Please enter a valid email address.";break;case"auth/too-many-requests":t="Too many attempts. Please try again later.";break;default:t=$b.message||"Failed to resend verification email. Please try again."}return{success:!1,error:t}}},sendPasswordReset:async e=>{try{return console.log("Sending password reset email to:",e),await async function(e,t,n){const r=Ks(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Oi(r,s,n),await ri(r,s,"getOobCode",hi,"EMAIL_PASSWORD_PROVIDER")}(jv,e,{url:"".concat(window.location.origin,"/login?passwordReset=true"),handleCodeInApp:!1}),{success:!0,message:"If an account with this email exists, password reset instructions will be sent. Please check your inbox and spam folder."}}catch($b){console.error("Password reset error:",$b);let t="Failed to send password reset email";switch($b.code){case"auth/user-not-found":t="No account found with this email address. Please check your email or sign up first.";break;case"auth/invalid-email":t="Please enter a valid email address.";break;case"auth/too-many-requests":t="Too many password reset attempts. Please try again later.";break;default:t=$b.message||"Failed to send password reset email. Please try again."}return{success:!1,error:t}}},verifyEmail:async e=>{try{return console.log("Verifying email with action code..."),await Fi(jv,e),console.log("Action code applied successfully"),{success:!0,message:"Email verified successfully! You can now sign in."}}catch($b){console.error("Email verification error:",$b);let t="Email verification failed";switch($b.code){case"auth/expired-action-code":t="The verification link has expired. Please request a new one.";break;case"auth/invalid-action-code":t="The verification link is invalid. Please request a new one.";break;case"auth/user-disabled":t="This account has been disabled.";break;default:t=$b.message||"Email verification failed."}return{success:!1,error:t}}}};return(0,Mv.jsx)(Fv.Provider,{value:o,children:t})},Vv=Uv,zv=()=>{const e=(0,r.useContext)(Fv);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Bv=()=>{var e,t;const[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),o=de(),l=me(),{user:c,logout:u}=zv(),d=c&&["admin@tuneparams.ai","abhinaykotla@gmail.com","admin@tuneparams.com"].includes(c.email),h=()=>{s(!1),a(!1)},f=e=>"/"===e&&"/"===o.pathname||!("/"===e||!o.pathname.startsWith(e));return(0,r.useEffect)(()=>(n?document.body.classList.add("menu-open"):document.body.classList.remove("menu-open"),()=>{document.body.classList.remove("menu-open")}),[n]),(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&n&&h()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),(0,Mv.jsxs)("nav",{className:"navbar",children:[(0,Mv.jsx)("div",{className:"logo",children:(0,Mv.jsxs)(vt,{to:"/",onClick:h,children:[(0,Mv.jsx)("img",{src:"/logo192.png",alt:"TuneParams Logo",className:"logo-image"}),"TunePARAMS"]})}),(0,Mv.jsxs)("button",{className:"hamburger ".concat(n?"hamburger-open":""),onClick:()=>{s(!n)},"aria-label":"Toggle navigation",children:[(0,Mv.jsx)("span",{}),(0,Mv.jsx)("span",{}),(0,Mv.jsx)("span",{})]}),(0,Mv.jsxs)("div",{className:"nav-links ".concat(n?"nav-links-open":""),children:[(0,Mv.jsx)(vt,{to:"/",onClick:h,className:f("/")?"active":"",children:"Home"}),(0,Mv.jsx)(vt,{to:"/courses",onClick:h,className:f("/courses")?"active":"",children:"Courses"}),(0,Mv.jsx)(vt,{to:"/forums",onClick:h,className:f("/forums")?"active":"",children:"Forums"}),(0,Mv.jsx)(vt,{to:"/about-us",onClick:h,className:f("/about-us")?"active":"",children:"About Us"}),c&&(0,Mv.jsx)(vt,{to:"/dashboard",onClick:h,className:f("/dashboard")?"active":"",children:"Dashboard"}),(0,Mv.jsx)(vt,{to:"/contact",onClick:h,className:f("/contact")?"active":"",children:"Contact"}),c?(0,Mv.jsxs)("div",{className:"user-menu-container",children:[(0,Mv.jsxs)("button",{className:"user-profile-button",onClick:()=>a(!i),children:[c.photoURL?(0,Mv.jsx)("img",{src:c.photoURL,alt:c.name,className:"user-avatar"}):(0,Mv.jsx)("div",{className:"user-avatar-fallback",children:(null===(e=c.name)||void 0===e||null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase())||"U"}),(0,Mv.jsx)("span",{className:"user-name",children:c.name}),(0,Mv.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]}),i&&(0,Mv.jsxs)("div",{className:"user-dropdown",children:[(0,Mv.jsxs)("div",{className:"user-info-section",children:[(0,Mv.jsx)("div",{className:"user-info-name",children:c.name}),(0,Mv.jsx)("div",{className:"user-info-email",children:c.email}),(0,Mv.jsxs)("div",{className:"user-info-role",children:["Role: ",c.role," ",d&&"(Admin)"]})]}),d&&(0,Mv.jsxs)(Mv.Fragment,{children:[(0,Mv.jsx)(vt,{to:"/admin/dashboard",onClick:h,className:"admin-menu-link",children:"\ud83c\udfdb\ufe0f Admin Panel"}),(0,Mv.jsx)("div",{className:"admin-menu-separator"})]}),(0,Mv.jsx)("button",{onClick:async()=>{(await u()).success&&(l("/"),h())},className:"",children:"Logout"})]})]}):(0,Mv.jsx)(vt,{to:"/login",onClick:h,className:f("/login")?"active":"",children:"Login"})]}),n&&(0,Mv.jsx)("div",{className:"nav-overlay",onClick:h})]})},qv=()=>(0,Mv.jsx)("footer",{className:"footer",children:(0,Mv.jsx)("p",{children:"\xa9 2025 TuneParams.ai. All rights reserved."})}),Hv=e=>{let{children:t,requiredRole:n=null}=e;const{user:r,loading:s}=zv(),i=de();return s?(0,Mv.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 80px)",color:"var(--text-color)"},children:(0,Mv.jsx)("div",{children:"Loading..."})}):r?n&&r.role!==n?(0,Mv.jsx)(Ae,{to:"/dashboard",replace:!0}):t:(0,Mv.jsx)(Ae,{to:"/login",state:{from:i},replace:!0})};class Wv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Network Error";this.status=e,this.text=t}}const Gv={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!==typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},Kv=e=>e?"string"===typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},Qv=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=await fetch(Gv.origin+e,{method:"POST",headers:n,body:t}),s=await r.text(),i=new Wv(r.status,s);if(r.ok)return i;throw i},Yv=(e,t,n)=>{if(!e||"string"!==typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!==typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!==typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},$v=e=>e.webdriver||!e.languages||0===e.languages.length,Jv=()=>new Wv(451,"Unavailable For Headless Browser"),Xv=(e,t)=>{if((e=>{var t;return!(null!==(t=e.list)&&void 0!==t&&t.length)||!e.watchVariable})(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!==typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=((e,t)=>e instanceof FormData?e.get(t):e[t])(t,e.watchVariable);return"string"===typeof n&&e.list.includes(n)},Zv=()=>new Wv(403,"Forbidden"),ey=async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!==typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!==typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const r=t.id||e,s=await(async(e,t,n)=>{const r=Number(await n.get(e)||0);return t-Date.now()+r})(r,t.throttle,n);return s>0||(await n.set(r,Date.now().toString()),!1)},ty=()=>new Wv(429,"Too Many Requests"),ny=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.emailjs.com";if(!e)return;const n=Kv(e);Gv.publicKey=n.publicKey,Gv.blockHeadless=n.blockHeadless,Gv.storageProvider=n.storageProvider,Gv.blockList=n.blockList,Gv.limitRate=n.limitRate,Gv.origin=n.origin||t},ry=async(e,t,n,r)=>{const s=Kv(r),i=s.publicKey||Gv.publicKey,a=s.blockHeadless||Gv.blockHeadless,o=s.storageProvider||Gv.storageProvider,l=u(u({},Gv.blockList),s.blockList),c=u(u({},Gv.limitRate),s.limitRate);if(a&&$v(navigator))return Promise.reject(Jv());if(Yv(i,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(n),n&&Xv(l,n))return Promise.reject(Zv());if(await ey(location.pathname,c,o))return Promise.reject(ty());const d={lib_version:"4.4.1",user_id:i,service_id:e,template_id:t,template_params:n};return Qv("/api/v1.0/email/send",JSON.stringify(d),{"Content-type":"application/json"})},sy="service_6nnlhkw",iy="template_660cmfs",ay="g2ZIKXu5CMAtlW-yr",oy="TuneParams.ai",ly="support@tuneparams.ai",cy="https://www.tuneparams.ai",uy=async e=>{try{0,ay&&ny(ay);const t=(e=>{const{userName:t,userEmail:n,courseTitle:r,amount:s,paymentId:i,orderId:a,enrollmentDate:o,paymentMethod:l,payerName:c,payerEmail:u,transactionStatus:d,fundingSource:h}=e;let f="Student";return t&&("string"===typeof t?f=t.split(" ")[0]:"object"===typeof t&&t.given_name?f=t.given_name:"object"===typeof t&&t.firstName&&(f=t.firstName)),{subject:"\ud83c\udf89 Welcome to ".concat(r,"! Your AI learning journey starts now"),htmlContent:'\n        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9f9f9;">\n            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">\n                <h1 style="color: white; margin: 0; font-size: 28px;">\ud83c\udf89 Welcome to '.concat(oy,'!</h1>\n                <p style="color: #e3f2fd; margin: 10px 0 0 0; font-size: 16px;">Your AI learning journey starts now</p>\n            </div>\n            \n            <div style="background: white; padding: 30px; border-radius: 0 0 10px 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">\n                <p style="font-size: 16px; color: #333; margin-bottom: 20px;">Hi ').concat(f,',</p>\n                \n                <p style="font-size: 16px; color: #333; line-height: 1.6;">\n                    Thank you for registering for our AI Training Course \u2014 we\'re excited to have you on board! \ud83d\ude80\n                </p>\n\n                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 25px 0;">\n                    <h3 style="color: #333; margin-top: 0;">\ud83d\udccb Enrollment Details</h3>\n                    <table style="width: 100%; border-collapse: collapse;">\n                        <tr>\n                            <td style="padding: 8px 0; color: #666; font-weight: bold;">Course:</td>\n                            <td style="padding: 8px 0; color: #333;">').concat(r,'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #666; font-weight: bold;">Amount Paid:</td>\n                            <td style="padding: 8px 0; color: #333;">$').concat(s,'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #666; font-weight: bold;">Payment Method:</td>\n                            <td style="padding: 8px 0; color: #333;">').concat(l||"PayPal",'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #666; font-weight: bold;">Transaction Status:</td>\n                            <td style="padding: 8px 0; color: #333; text-transform: capitalize;">').concat(d||"Completed",'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #666; font-weight: bold;">Payment ID:</td>\n                            <td style="padding: 8px 0; color: #333; font-family: monospace; font-size: 14px;">').concat(i,'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #666; font-weight: bold;">Order ID:</td>\n                            <td style="padding: 8px 0; color: #333; font-family: monospace; font-size: 14px;">').concat(a,'</td>\n                        </tr>\n                        <tr>\n                            <td style="padding: 8px 0; color: #666; font-weight: bold;">Enrollment Date:</td>\n                            <td style="padding: 8px 0; color: #333;">').concat(o,"</td>\n                        </tr>\n                        ").concat(c&&c!==t?'\n                        <tr>\n                            <td style="padding: 8px 0; color: #666; font-weight: bold;">Payer Name:</td>\n                            <td style="padding: 8px 0; color: #333;">'.concat(c,"</td>\n                        </tr>\n                        "):"","\n                        ").concat(u&&u!==n?'\n                        <tr>\n                            <td style="padding: 8px 0; color: #666; font-weight: bold;">Payment Email:</td>\n                            <td style="padding: 8px 0; color: #333;">'.concat(u,"</td>\n                        </tr>\n                        "):"","\n                        ").concat(h?'\n                        <tr>\n                            <td style="padding: 8px 0; color: #666; font-weight: bold;">Funding Source:</td>\n                            <td style="padding: 8px 0; color: #333; text-transform: capitalize;">'.concat(h,"</td>\n                        </tr>\n                        "):"",'\n                    </table>\n                </div>\n\n                <h3 style="color: #333; margin-top: 30px;">Here\'s what you can expect:</h3>\n                <ul style="color: #333; line-height: 1.8; padding-left: 20px;">\n                    <li><strong>Live lessons</strong> covering machine learning, deep learning, NLP, and large language models (LLMs).</li>\n                    <li><strong>Hands-on coding exercises</strong> and assignments to strengthen your skills.</li>\n                    <li><strong>Projects and labs</strong> that bring AI concepts to life with real-world applications.</li>\n                    <li><strong>A supportive learning community</strong> to ask questions, share progress, and get feedback.</li>\n                </ul>\n\n                <h3 style="color: #333; margin-top: 30px;">Next Steps:</h3>\n                <ul style="color: #333; line-height: 1.8; padding-left: 20px;">\n                    <li>Log in to your account at <a href="').concat(cy,'" style="color: #667eea; text-decoration: none;">').concat(cy,'</a>.</li>\n                    <li>Check out the course schedule and upcoming sessions on our website.</li>\n                </ul>\n\n                <p style="color: #333; line-height: 1.6; margin-top: 25px;">\n                    We\'re thrilled to have you join our community of learners. If you have any questions, feel free to reply to this email or reach out at \n                    <a href="mailto:').concat(ly,'" style="color: #667eea; text-decoration: none;">').concat(ly,'</a>.\n                </p>\n\n                <p style="color: #333; line-height: 1.6; margin-top: 20px;">\n                    Let\'s make your AI journey an exciting and rewarding one! \ud83c\udf1f\n                </p>\n\n                <p style="color: #333; margin-top: 30px;">\n                    Best,<br>\n                    <strong>TuneParams Team</strong>\n                </p>\n            </div>\n            \n            <div style="text-align: center; padding: 20px; color: #666; font-size: 14px;">\n                <p>\xa9 2025 ').concat(oy,". All rights reserved.</p>\n                <p>This email was sent to ").concat(n," regarding your course enrollment.</p>\n            </div>\n        </div>\n    "),textContent:"\nHi ".concat(f,",\n\nThank you for registering for our AI Training Course \u2014 we're excited to have you on board! \ud83d\ude80\n\nENROLLMENT DETAILS:\n- Course: ").concat(r,"\n- Amount Paid: $").concat(s,"\n- Payment Method: ").concat(l||"PayPal","\n- Transaction Status: ").concat(d||"Completed","\n- Payment ID: ").concat(i,"\n- Order ID: ").concat(a,"\n- Enrollment Date: ").concat(o,"\n").concat(c&&c!==t?"- Payer Name: ".concat(c):"","\n").concat(u&&u!==n?"- Payment Email: ".concat(u):"","\n").concat(h?"- Funding Source: ".concat(h):"","\n\nHere's what you can expect:\n\n\u2022 Live lessons covering machine learning, deep learning, NLP, and large language models (LLMs).\n\n\u2022 Hands-on coding exercises and assignments to strengthen your skills.\n\n\u2022 Projects and labs that bring AI concepts to life with real-world applications.\n\n\u2022 A supportive learning community to ask questions, share progress, and get feedback.\n\nNext Steps:\n\n\u2022 Log in to your account at ").concat(cy,".\n\n\u2022 Check out the course schedule and upcoming sessions on our website.\n\nWe're thrilled to have you join our community of learners. If you have any questions, feel free to reply to this email or reach out at ").concat(ly,".\n\nLet's make your AI journey an exciting and rewarding one! \ud83c\udf1f\n\nBest,\nTuneParams Team\n\n---\nENROLLMENT DETAILS:\n- Course: ").concat(r,"\n- Amount Paid: $").concat(s,"\n- Payment ID: ").concat(i,"\n- Order ID: ").concat(a,"\n- Enrollment Date: ").concat(o,"\n\nThis email was sent to ").concat(n," regarding your course enrollment.\n\xa9 2025 ").concat(oy,". All rights reserved.\n    "),recipientEmail:n,recipientName:t||f}})(e),n={to_email:t.recipientEmail,to_name:t.recipientName,from_name:"".concat(oy," Team"),subject:t.subject,html_content:t.htmlContent,text_content:t.textContent,course_title:e.courseTitle,user_name:e.userName,amount:e.amount,payment_id:e.paymentId,order_id:e.orderId,enrollment_date:e.enrollmentDate,website_url:cy,support_email:ly,payment_method:e.paymentMethod||"PayPal",payer_name:e.payerName||"",payer_email:e.payerEmail||"",transaction_status:e.transactionStatus||"Completed",funding_source:e.fundingSource||""},r=await ry(sy,iy,n);return console.log("Email sent successfully:",r),{success:!0,messageId:r.text,emailContent:t,rawTextContent:t.textContent}}catch($b){return console.error("Error sending enrollment confirmation email:",$b),{success:!1,error:$b.message||"Failed to send email"}}},dy=async(e,t,n)=>{const r={userId:n,recipientEmail:e.userEmail,recipientName:e.userName,emailType:"enrollment_confirmation",subject:"\ud83c\udf89 Welcome to ".concat(e.courseTitle,"! Your AI learning journey starts now"),templateId:"template_660cmfs",courseId:e.courseId,courseTitle:e.courseTitle,paymentId:e.paymentId,orderId:e.orderId,amount:parseFloat(e.amount),enrollmentId:e.enrollmentId,emailServiceResponse:t.messageId,success:t.success,error:t.error,rawTextContent:t.rawTextContent};return await(async e=>{try{if(!Pv)throw new Error("Firestore not initialized");const{userId:t,recipientEmail:n,recipientName:r,emailType:s,subject:i,templateId:a,courseId:o,courseTitle:l,paymentId:c,orderId:u,amount:d,enrollmentId:h,emailServiceResponse:f,success:m,error:p,rawTextContent:g}=e,v={userId:t||null,recipientEmail:n,recipientName:r||"",emailType:s,subject:i,templateId:a||null,courseId:o||null,courseTitle:l||"",paymentId:c||null,orderId:u||null,amount:d||null,enrollmentId:h||null,emailServiceProvider:"emailjs",emailServiceResponse:f||null,status:m?"sent":"failed",errorMessage:p||null,rawTextContent:g||null,sentAt:wv(),createdAt:wv(),metadata:{userAgent:navigator.userAgent,timestamp:(new Date).toISOString(),origin:window.location.origin}},y=await gv(rg(Pv,"emails_sent"),v);return console.log("Email record saved with ID:",y.id),{success:!0,emailRecordId:y.id}}catch($b){return console.error("Error recording email:",$b),{success:!1,error:$b.message}}})(r)},hy=[{id:"FAAI",title:"Foundations to Frontiers of AI",description:"This beginner-friendly course takes you from the mathematical foundations of AI to hands-on implementation of modern machine learning and generative AI models.",level:"Beginner level",duration:"14 weeks",lessons:25,maxCapacity:30,nextBatchDate:"2025-10-1",price:699,originalPrice:1199,icon:"\ud83e\udd16",image:"/data/FAAI/FAAI_thumbnail.png",category:"Artificial Intelligence",instructor:"NA",instructorBio:"NA",currentBatch:1,batches:[{batchNumber:1,batchName:"Alpha",startDate:"2025-06-01",endDate:"2025-08-15",status:"completed",maxCapacity:30,enrollmentCount:0,classLinks:{zoom:"https://zoom.us/j/batch1-faai",discord:"https://discord.gg/batch1-faai",materials:"/batch1/materials"}},{batchNumber:2,batchName:"Beta",startDate:"2025-10-1",endDate:"2026-01-15",status:"active",maxCapacity:30,enrollmentCount:0,classLinks:{zoom:"https://zoom.us/j/batch2-faai",discord:"https://discord.gg/batch2-faai",materials:"/batch2/materials"}}],curriculum:[{section:"Foundations",topics:["Introduction to Machine Learning","Vectors and Matrices for ML","Basic Python for Machine Learning"]},{section:"Classical Machine Learning",topics:["Linear Regression","Closed-Form Solution for Linear Regression","Polynomial Regression","Loss Functions","Optimization Methods","Hyperparameter Tuning: Overfitting, Regularization, Model Selection","Logistic Regression & Classification","Mini Project: Regression and Classification"]},{section:"Neural Networks",topics:["Introduction to Neural Networks (MLPs)","Convolutional Neural Networks (CNNs)","Applications of CNNs","Project: Application of CNNs"]},{section:"Natural Language Processing",topics:["Introduction to NLP and Transformers","Recurrent Neural Networks (RNNs)","Limitations of RNNs","Attention Mechanism","Self-Attention","Transformer Architecture"]},{section:"Large Language Models (LLMs)",topics:["LLM Pre-Training","Continual Pre-Training","Supervised Fine-Tuning","Alignment of LLMs","LLM Inference","Introduction to Hugging Face"]},{section:"Advanced Topics",topics:["Distributed Computing for LLMs","Prompt Engineering","Retrieval-Augmented Generation (RAG)","Agentic AI"]}],prerequisites:["High school mathematics","Basic programming knowledge"],outcomes:["Master the fundamentals of machine learning \u2014 from training simple models to hyperparameter tuning and optimization \u2014 through clear, step-by-step coding exercises.","Deepen your knowledge of deep learning by building and experimenting with neural networks, CNNs, RNNs, and transformers.","Gain expertise in Large Language Models (LLMs) \u2014 understand how they are trained, fine-tuned, and applied in real-world scenarios.","Learn by doing with hands-on coding assignments and exciting projects that bring AI concepts to life."],downloadUrl:"/data/sample-course-info.pdf"},{id:"RLAI",title:"Reinforcement Learning",description:"Dive deep into the world of reinforcement learning and AI agents. Learn to build intelligent systems that can learn from their environment, make decisions, and solve complex sequential problems through trial and error.",level:"Advanced",duration:"10 weeks",lessons:16,maxCapacity:25,nextBatchDate:"TBD",price:599,originalPrice:1399,icon:"\ud83c\udfaf",image:"/data/RLAI/RLAI_thumbnail.png",category:"Reinforcement Learning",instructor:"TBD",instructorBio:"Course will be taught by leading experts in reinforcement learning and AI agents with extensive research and industry experience.",currentBatch:1,batches:[{batchNumber:1,batchName:"Pioneer RL Cohort",startDate:"TBD",endDate:"TBD",status:"upcoming",maxCapacity:25,enrollmentCount:0,classLinks:{zoom:"TBD",discord:"TBD",materials:"TBD"}}],curriculum:[{section:"Foundations of Reinforcement Learning",topics:["Introduction to RL: Agents, Environments, and Rewards","Markov Decision Processes (MDPs)","Bellman Equations and Dynamic Programming","Value Functions and Policy Functions","Exploration vs Exploitation Dilemma"]},{section:"Classical RL Algorithms",topics:["Monte Carlo Methods","Temporal Difference Learning","Q-Learning and SARSA","Function Approximation in RL","Eligibility Traces and TD(\u03bb)"]},{section:"Deep Reinforcement Learning",topics:["Deep Q-Networks (DQN)","Policy Gradient Methods","Actor-Critic Algorithms","Proximal Policy Optimization (PPO)","Trust Region Policy Optimization (TRPO)"]},{section:"Advanced RL Techniques",topics:["Model-Based Reinforcement Learning","Hierarchical Reinforcement Learning","Multi-Agent Reinforcement Learning","Inverse Reinforcement Learning","Meta-Learning in RL"]},{section:"RL Applications & AI Agents",topics:["Game AI and Strategic Decision Making","Robotics and Control Systems","Financial Trading and Portfolio Management","Autonomous Systems and Self-Driving Cars","Large Language Model Agents"]},{section:"Practical Implementation & Projects",topics:["RL Frameworks: Gym, Stable-Baselines3, Ray RLlib","Building Custom RL Environments","Hyperparameter Tuning for RL","RL Agent Evaluation and Benchmarking","Capstone Project: End-to-End RL Application"]}],prerequisites:["Completion of Foundations to Frontiers of AI or equivalent ML knowledge","Strong programming skills in Python","Understanding of neural networks and deep learning","Familiarity with NumPy, PyTorch/TensorFlow","Basic knowledge of probability and statistics"],outcomes:["Master the fundamental concepts and mathematics of reinforcement learning.","Implement classical RL algorithms from scratch and understand their theoretical foundations.","Build and train deep reinforcement learning agents using modern frameworks.","Apply RL techniques to real-world problems in games, robotics, and decision-making.","Understand multi-agent systems and how agents can learn to cooperate or compete.","Develop practical skills in RL environment design and agent evaluation."],downloadUrl:null,comingSoon:!0}],fy=e=>hy.find(t=>t.id===e),my=e=>!0===e.comingSoon,py=(e,t)=>e.batches&&0!==e.batches.length?e.batches.find(e=>e.batchNumber===t):null,gy=e=>!(!e.enrollmentCount||!e.maxCapacity)&&e.enrollmentCount>=e.maxCapacity,vy=e=>{if(!e.batches||0===e.batches.length)return null;const t=e.batches.filter(e=>"upcoming"===e.status&&!gy(e)).sort((e,t)=>new Date(e.startDate)-new Date(t.startDate));if(t.length>0)return t[0];const n=e.batches.filter(e=>"active"===e.status&&!gy(e)).sort((e,t)=>new Date(e.startDate)-new Date(t.startDate));return n.length>0?n[0]:null},yy=e=>({upcoming:"Starting Soon",active:"In Progress",completed:"Completed"}[e.status]||e.status),by=e=>{const t=new Date(e.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),n=new Date(e.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return"".concat(t," - ").concat(n)},wy=e=>e.batchName&&e.batchName.trim()?e.batchName:"Batch ".concat(e.batchNumber),xy=e=>{if(e.batchName&&e.batchName.trim()){const t=e.batchName.split(" ");return e.batchName.length>20?"".concat(t.slice(0,2).join(" ")," (").concat(e.batchNumber,")"):e.batchName}return"Batch ".concat(e.batchNumber)},Ey=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{if(!Pv)return{hasAccess:!1,error:"Firestore not initialized"};if(n){const r="".concat(e,"_").concat(t,"_batch").concat(n),s=sg(Pv,"enrollments",r),i=await uv(s);if(i.exists()){const e=i.data();return await mv(s,{lastAccessed:wv()}),{hasAccess:!0,enrollment:u(u({},e),{},{id:i.id})}}return{hasAccess:!1,enrollment:null}}const r=Gg(rg(Pv,"enrollments"),Qg("userId","==",e),Qg("courseId","==",t),Qg("status","==","enrolled")),s=await hv(r);if(s.empty)return{hasAccess:!1,enrollment:null};let i=null,a=null;return s.forEach(e=>{const t=e.data();(!i||t.enrolledAt&&(!i.enrolledAt||t.enrolledAt.toDate()>i.enrolledAt.toDate()))&&(i=t,a=e)}),i&&a?(await mv(a.ref,{lastAccessed:wv()}),{hasAccess:!0,enrollment:u(u({},i),{},{id:a.id}),allEnrollments:s.docs.map(e=>u({id:e.id},e.data()))}):{hasAccess:!1,enrollment:null}}catch($b){return console.error("Error checking course access:",$b),{hasAccess:!1,error:$b.message}}},Sy=async(e,t)=>{try{var n,r,s,i,a;console.log("Starting complete enrollment process...",{paymentData:e,userId:t});const l=await(async(e,t)=>{try{if(!Pv)throw new Error("Firestore not initialized");const n=await Ov(t),r=n.success?n.userData:null,s={paymentId:e.paymentID,orderId:e.orderID,payerId:e.payerID,courseId:e.courseId,courseTitle:e.courseTitle,amount:parseFloat(e.amount),userId:t,userEmail:(null===r||void 0===r?void 0:r.email)||e.payerEmail,userName:(null===r||void 0===r?void 0:r.displayName)||e.payerName,payerEmail:e.payerEmail,payerName:e.payerName,status:"completed",transactionStatus:e.transactionStatus,paymentMethod:"paypal",paymentDate:e.timestamp?new Date(e.timestamp):new Date,createdAt:wv(),updatedAt:wv()},i=await gv(rg(Pv,"payments"),s);return console.log("Payment recorded with ID:",i.id),{success:!0,paymentRecordId:i.id}}catch($b){return console.error("Error recording payment:",$b),{success:!1,error:$b.message}}})(e,t);if(!l.success)throw new Error("Payment recording failed: ".concat(l.error));const c=await(async(e,t,n)=>{try{if(!Pv)throw new Error("Firestore not initialized");const r=fy(t);if(!r)throw new Error("Course not found: ".concat(t));const s=vy(r);if(!s)throw new Error("No available batches for enrollment");const i={userId:e,courseId:t,courseTitle:n.courseTitle||r.title,batchNumber:s.batchNumber,batchStartDate:s.startDate,batchEndDate:s.endDate,batchStatus:s.status,status:"enrolled",progress:0,paymentId:n.paymentID,orderId:n.orderID,amountPaid:parseFloat(n.amount),enrolledAt:wv(),lastAccessed:null,completedAt:null,paymentMethod:"paypal",enrollmentSource:"web_purchase"},a="".concat(e,"_").concat(t,"_batch").concat(s.batchNumber),o=sg(Pv,"enrollments",a);return await fv(o,i),console.log("User enrolled in course:",a,"Batch:",s.batchNumber),{success:!0,enrollmentId:a,batchNumber:s.batchNumber,batchInfo:{startDate:s.startDate,endDate:s.endDate,status:s.status}}}catch($b){return console.error("Error enrolling user in course:",$b),{success:!1,error:$b.message}}})(t,e.courseId,e);if(!c.success)throw new Error("Enrollment failed: ".concat(c.error));const u=await Ov(t),d=u.success?u.userData:null,h=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),f={userName:(null===d||void 0===d?void 0:d.displayName)||(null===d||void 0===d||null===(n=d.email)||void 0===n?void 0:n.split("@")[0])||"Student",userEmail:(null===d||void 0===d?void 0:d.email)||e.payerEmail,courseTitle:e.courseTitle,courseId:e.courseId,amount:e.amount,paymentId:e.paymentID,orderId:e.orderID,enrollmentId:c.enrollmentId,enrollmentDate:h,batchNumber:c.batchNumber,batchStartDate:null===(r=c.batchInfo)||void 0===r?void 0:r.startDate,batchEndDate:null===(s=c.batchInfo)||void 0===s?void 0:s.endDate,batchStatus:null===(i=c.batchInfo)||void 0===i?void 0:i.status,paymentMethod:"PayPal",payerName:e.payerName,payerEmail:e.payerEmail,transactionStatus:e.transactionStatus,paymentSource:e.paymentSource||null,fundingSource:e.fundingSource||null},m=await uy(f);let p=null;try{p=await dy(f,m,t),p.success?console.log("Email tracking recorded with ID:",p.emailRecordId):console.error("Failed to record email tracking:",p.error)}catch(o){console.error("Error recording email tracking:",o)}return m.success?console.log("Enrollment confirmation email sent successfully"):m.skipped?console.log("Email service not configured, skipping email"):console.error("Failed to send enrollment confirmation email:",m.error),{success:!0,paymentRecordId:l.paymentRecordId,enrollmentId:c.enrollmentId,batchNumber:c.batchNumber,batchInfo:c.batchInfo,emailSent:m.success,emailError:m.success?null:m.error,emailTrackingId:(null===(a=p)||void 0===a?void 0:a.emailRecordId)||null,enrollmentData:f}}catch($b){return console.error("Error in complete enrollment process:",$b),{success:!1,error:$b.message}}},Ny="course_reviews",ky=async e=>{try{if(!Pv)throw new Error("Firestore not initialized");const t=sg(Pv,Ny,e);return await pv(t),{success:!0}}catch($b){return console.error("Error deleting review as admin:",$b),{success:!1,error:$b.message}}},_y=function(){let{limit:e=6}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[a,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{const t=function(e){let{limit:t=6}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Pv)return console.warn("Firestore not initialized, returning empty subscription"),e({reviews:[],error:"Firestore not initialized"}),()=>{};try{return vv(Gg(rg(Pv,Ny),Jg("createdAt","desc"),Zg(t)),t=>{const n=t.docs.map(e=>u({id:e.id},e.data()));e({reviews:n,error:null})},t=>{console.error("Recent reviews subscription error:",t);let n=t.message;"permission-denied"===t.code?n="Permission denied accessing reviews. This might be a Firebase configuration issue.":"unavailable"===t.code&&(n="Firebase service temporarily unavailable. Please try again."),e({reviews:[],error:n})})}catch(a){return console.error("Error setting up recent reviews subscription:",a),e({reviews:[],error:a.message}),()=>{}}}(e=>{let{reviews:t,error:r}=e;r?o(r):n(t),i(!1)},{limit:e});return()=>t&&t()},[e]),{reviews:t,loading:s,error:a}},Cy={ADMIN:"admin",INSTRUCTOR:"instructor",STUDENT:"student"},Ty="view_admin_panel",Iy="manage_users",Ay="view_payments",jy="manage_courses",Py="view_analytics",Ry={[Cy.ADMIN]:[Ty,Iy,Ay,jy,Py],[Cy.INSTRUCTOR]:[jy,Py],[Cy.STUDENT]:[]},Dy=async e=>{try{if(!Pv)return{role:Cy.STUDENT,permissions:[]};const t=sg(Pv,"user_roles",e),n=await uv(t);return n.exists()?n.data():{role:Cy.STUDENT,permissions:Ry[Cy.STUDENT],isActive:!0}}catch($b){return console.error("Error getting user role:",$b),{role:Cy.STUDENT,permissions:[]}}},Ly=async e=>{try{const t=await Dy(e);return t.role===Cy.ADMIN&&t.isActive}catch($b){return console.error("Error checking admin status:",$b),!1}},Oy=()=>{const{user:e}=zv(),[t,n]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0),[a,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(!e)return n(null),void i(!1);i(!0),o(null);try{const t=await Dy(e.uid);n(t)}catch(t){o(t.message),console.error("Error loading user role:",t)}finally{i(!1)}})()},[e]);return{userRole:t,loading:s,error:a,hasPermission:async t=>!!e&&await(async(e,t)=>{try{var n;return(null===(n=(await Dy(e)).permissions)||void 0===n?void 0:n.includes(t))||!1}catch(a){return console.error("Error checking user permission:",a),!1}})(e.uid,t),isAdmin:async()=>!!e&&await Ly(e.uid),hasRole:e=>(null===t||void 0===t?void 0:t.role)===e,isAdminUser:(null===t||void 0===t?void 0:t.role)===Cy.ADMIN,isInstructorUser:(null===t||void 0===t?void 0:t.role)===Cy.INSTRUCTOR,isStudentUser:(null===t||void 0===t?void 0:t.role)===Cy.STUDENT,permissions:(null===t||void 0===t?void 0:t.permissions)||[]}},My=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:220;return e?e.length<=t?e:e.slice(0,t-1)+"\u2026":""},Fy=()=>{const{reviews:e,loading:t,error:n}=_y({limit:18}),{isAdminUser:s}=Oy(),[i,a]=(0,r.useState)(0),[o,l]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{if(!e||e.length<=3)return;const t=setInterval(()=>{a(t=>t>=e.length-3?0:t+1)},4e3);return()=>clearInterval(t)},[e]);const c=e?e.slice(i,i+3):[];return(0,Mv.jsxs)("section",{className:"home-reviews-section",children:[(0,Mv.jsx)("h2",{children:"What Students Say"}),t&&(0,Mv.jsx)("div",{className:"reviews-loading",children:"Loading reviews\u2026"}),n&&(0,Mv.jsx)("div",{className:"reviews-error",children:String(n)}),!t&&!n&&(0,Mv.jsxs)("div",{className:"home-reviews-container",children:[(0,Mv.jsx)("div",{className:"home-reviews-row",role:"list",children:c.map(e=>{var t,r;const i=(e.comment||"").length>220,a="/courses/".concat(e.courseId,"#review-").concat(e.id),c=e.userPhotoURL&&!o.has(e.id);return(0,Mv.jsxs)("article",{className:"home-review-card",role:"listitem",children:[(0,Mv.jsxs)("div",{className:"home-review-header",children:[(0,Mv.jsxs)("div",{className:"review-user",children:[(0,Mv.jsx)("div",{className:"review-avatar","aria-hidden":!0,children:c?(0,Mv.jsx)("img",{src:e.userPhotoURL,alt:e.userName||"User",onError:()=>{return t=e.id,void l(e=>new Set([...e,t]));var t}}):(0,Mv.jsx)("div",{className:"default-avatar",children:null===(t=(e.userName||"User").charAt(0))||void 0===t?void 0:t.toUpperCase()})}),(0,Mv.jsxs)("div",{children:[(0,Mv.jsxs)("div",{className:"review-username",children:[(0,Mv.jsx)("span",{children:e.userName||"User"}),e.verified&&(0,Mv.jsx)("span",{className:"review-verified",title:"Verified User",children:"\u2713"})]}),(0,Mv.jsx)("div",{className:"review-date",children:null!==(r=e.createdAt)&&void 0!==r&&r.toDate?e.createdAt.toDate().toLocaleDateString():""})]})]}),(0,Mv.jsx)("span",{className:"review-stars",children:"\u2605".repeat(Math.round(e.rating||0)).padEnd(5,"\u2606")})]}),(0,Mv.jsx)("div",{className:"review-course-chip",children:e.courseTitle||e.courseId}),(0,Mv.jsx)("p",{className:"home-review-comment",children:My(e.comment)}),(0,Mv.jsxs)("div",{className:"home-review-footer",children:[i&&(0,Mv.jsx)(vt,{to:a,className:"home-review-more",children:"Read more \u2192"}),s&&(0,Mv.jsx)("button",{className:"home-review-admin-delete-btn",onClick:t=>{t.preventDefault(),(async e=>{if(window.confirm("Are you sure you want to delete ".concat(e.userName,"'s review? This action cannot be undone.")))try{const t=await ky(e.id);t.success?(alert("Review deleted successfully"),window.location.reload()):alert("Failed to delete review: ".concat(t.error))}catch(n){console.error("Error deleting review:",n),alert("Failed to delete review. Please try again.")}})(e)},title:"Admin: Delete this review",children:"\ud83d\uddd1\ufe0f"})]})]},e.id)})}),e&&e.length>3&&(0,Mv.jsx)("div",{className:"home-reviews-indicators",children:Array.from({length:Math.max(1,e.length-2)}).map((t,n)=>(0,Mv.jsx)("button",{className:"review-indicator ".concat(n===i?"active":""),onClick:()=>a(n),"aria-label":"Show reviews ".concat(n+1,"-").concat(Math.min(n+3,e.length))},n))})]})]})},Uy=()=>{const e=me(),{user:t}=zv(),n=()=>{e("/register")},r=()=>{e("/dashboard")};return(0,Mv.jsxs)("div",{className:"landing-page-container",children:[(0,Mv.jsx)("section",{className:"hero-section",children:(0,Mv.jsxs)("div",{className:"hero-content",children:[(0,Mv.jsxs)("div",{className:"hero-text",children:[(0,Mv.jsx)("h1",{className:"hero-title",children:"Master Machine Learning"}),(0,Mv.jsx)("p",{className:"hero-subtitle",children:"No prior experience? No problem. Learn the foundations of machine learning and build real-world applications with our beginner-friendly course."}),(0,Mv.jsx)("p",{className:"hero-description",children:"Start your journey in AI with a hands-on, practical course designed for high-school students, experienced professionals, and curious minds."}),(0,Mv.jsxs)("div",{className:"hero-buttons",children:[(0,Mv.jsx)("button",{className:"cta-primary",onClick:()=>{e("/courses")},children:"Browse Courses"}),t?(0,Mv.jsx)("button",{className:"cta-secondary",onClick:r,children:"Go to Dashboard"}):(0,Mv.jsx)("button",{className:"cta-secondary",onClick:n,children:"Register Now"})]})]}),(0,Mv.jsx)("div",{className:"hero-image",children:(0,Mv.jsx)("img",{src:"/logo1024.png",alt:"TuneParams.ai Logo"})})]})}),(0,Mv.jsx)("section",{className:"about-section",children:(0,Mv.jsxs)("div",{className:"about-content",children:[(0,Mv.jsx)("h2",{children:"Why TuneParams.ai?"}),(0,Mv.jsx)("p",{children:"At TuneParams.ai, we believe that anyone can learn machine learning with the right guidance. Our Courses simplifies complex topics and helps you build an intuitive and practical understanding of core ML concepts, with no math background required."})]})}),(0,Mv.jsx)(Fy,{}),(0,Mv.jsxs)("section",{className:"curriculum-section",children:[(0,Mv.jsx)("h2",{children:"What You'll Learn"}),(0,Mv.jsx)("p",{className:"curriculum-intro",children:"This course covers both math foundations and practical skills. Topics include:"}),(0,Mv.jsxs)("div",{className:"curriculum-grid",children:[(0,Mv.jsxs)("div",{className:"curriculum-item",children:[(0,Mv.jsx)("div",{className:"curriculum-icon",children:"\ud83e\udd16"}),(0,Mv.jsx)("h3",{children:"Introduction to Machine Learning"}),(0,Mv.jsx)("p",{children:"Understand what ML is, types of learning, and why it's transforming the world."})]}),(0,Mv.jsxs)("div",{className:"curriculum-item",children:[(0,Mv.jsx)("div",{className:"curriculum-icon",children:"\ud83d\udd22"}),(0,Mv.jsx)("h3",{children:"Vectors and Matrices Basics"}),(0,Mv.jsx)("p",{children:"Learn essential linear algebra concepts used throughout ML. No prior knowledge required."})]}),(0,Mv.jsxs)("div",{className:"curriculum-item",children:[(0,Mv.jsx)("div",{className:"curriculum-icon",children:"\ud83d\udc0d"}),(0,Mv.jsx)("h3",{children:"Python for Machine Learning"}),(0,Mv.jsx)("p",{children:"A crash course on Python, tailored for ML tasks."})]}),(0,Mv.jsxs)("div",{className:"curriculum-item",children:[(0,Mv.jsx)("div",{className:"curriculum-icon",children:"\ud83d\udcc8"}),(0,Mv.jsx)("h3",{children:"Linear & Logistic Regression"}),(0,Mv.jsx)("p",{children:"Your first ML algorithms\u2014easy to understand, powerful in practice."})]}),(0,Mv.jsxs)("div",{className:"curriculum-item",children:[(0,Mv.jsx)("div",{className:"curriculum-icon",children:"\ud83e\udde0"}),(0,Mv.jsx)("h3",{children:"Neural Networks"}),(0,Mv.jsx)("p",{children:"Understand how modern deep learning models are structured and trained."})]}),(0,Mv.jsxs)("div",{className:"curriculum-item",children:[(0,Mv.jsx)("div",{className:"curriculum-icon",children:"\ud83d\udc41\ufe0f"}),(0,Mv.jsx)("h3",{children:"Computer Vision & CNNs"}),(0,Mv.jsx)("p",{children:"Learn how CNNs power breakthroughs in image recognition and autonomous driving."})]})]})]}),(0,Mv.jsxs)("section",{className:"audience-section",children:[(0,Mv.jsx)("h2",{children:"Who Should Take This Course?"}),(0,Mv.jsxs)("div",{className:"audience-grid",children:[(0,Mv.jsxs)("div",{className:"audience-item",children:[(0,Mv.jsx)("div",{className:"audience-icon",children:"\ud83c\udf93"}),(0,Mv.jsx)("h3",{children:"Beginners"}),(0,Mv.jsx)("p",{children:"Looking to enter the field of AI/ML"})]}),(0,Mv.jsxs)("div",{className:"audience-item",children:[(0,Mv.jsx)("div",{className:"audience-icon",children:"\ud83d\udcda"}),(0,Mv.jsx)("h3",{children:"Students"}),(0,Mv.jsx)("p",{children:"High school students seeking an applied introduction to AI/ML"})]}),(0,Mv.jsxs)("div",{className:"audience-item",children:[(0,Mv.jsx)("div",{className:"audience-icon",children:"\ud83d\udcbc"}),(0,Mv.jsx)("h3",{children:"Professionals"}),(0,Mv.jsx)("p",{children:"Experienced IT professionals wanting to upskill"})]}),(0,Mv.jsxs)("div",{className:"audience-item",children:[(0,Mv.jsx)("div",{className:"audience-icon",children:"\ud83d\udc68\u200d\ud83d\udcbb"}),(0,Mv.jsx)("h3",{children:"Developers"}),(0,Mv.jsx)("p",{children:"Software developers looking to integrate AI into their applications"})]}),(0,Mv.jsxs)("div",{className:"audience-item",children:[(0,Mv.jsx)("div",{className:"audience-icon",children:"\ud83d\udcca"}),(0,Mv.jsx)("h3",{children:"Data Analysts"}),(0,Mv.jsx)("p",{children:"Data professionals wanting to advance to machine learning roles"})]}),(0,Mv.jsxs)("div",{className:"audience-item",children:[(0,Mv.jsx)("div",{className:"audience-icon",children:"\ud83d\udd0d"}),(0,Mv.jsx)("h3",{children:"Curious Minds"}),(0,Mv.jsx)("p",{children:"Anyone curious about how AI and ML work behind the scenes"})]})]})]}),(0,Mv.jsxs)("section",{className:"format-section",children:[(0,Mv.jsxs)("div",{className:"format-content",children:[(0,Mv.jsx)("h2",{children:"Course Format"}),(0,Mv.jsxs)("div",{className:"format-grid",children:[(0,Mv.jsxs)("div",{className:"format-item",children:[(0,Mv.jsx)("span",{className:"format-icon",children:"\ud83c\udfa5"}),(0,Mv.jsx)("span",{children:"Live Classes - 4 hours per week"})]}),(0,Mv.jsxs)("div",{className:"format-item",children:[(0,Mv.jsx)("span",{className:"format-icon",children:"\ud83d\udcbb"}),(0,Mv.jsx)("span",{children:"Coding labs for assignments"})]}),(0,Mv.jsxs)("div",{className:"format-item",children:[(0,Mv.jsx)("span",{className:"format-icon",children:"\ud83d\udccb"}),(0,Mv.jsx)("span",{children:"Downloadable slides"})]}),(0,Mv.jsxs)("div",{className:"format-item",children:[(0,Mv.jsx)("span",{className:"format-icon",children:"\ufffd"}),(0,Mv.jsx)("span",{children:"Two projects: mid-term and final"})]})]})]}),(0,Mv.jsx)("div",{className:"format-image",children:(0,Mv.jsx)("img",{src:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=500&h=400&fit=crop&auto=format",alt:"Online Learning"})})]}),(0,Mv.jsxs)("section",{className:"cta-section",children:[(0,Mv.jsx)("h2",{children:t?"Continue Your Learning Journey":"Ready to Level Up Your Skills?"}),t?(0,Mv.jsx)("button",{className:"cta-final",onClick:r,children:"Go to Dashboard"}):(0,Mv.jsx)("button",{className:"cta-final",onClick:n,children:"Register Here"})]})]})},Vy=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!Pv)throw new Error("Firestore not initialized");let n;n=t?Gg(rg(Pv,"enrollments"),Qg("courseId","==",e),Qg("batchNumber","==",t),Qg("status","==","enrolled")):Gg(rg(Pv,"enrollments"),Qg("courseId","==",e),Qg("status","==","enrolled"));const r=await hv(n);return{success:!0,count:r.size}}catch($b){return console.error("Error getting course enrollment count:",$b),{success:!1,error:$b.message,count:0}}},zy=async e=>{try{if(!Pv)throw new Error("Firestore not initialized");const t=Gg(rg(Pv,"course_reviews"),Qg("courseId","==",e)),n=await hv(t),r=[];n.forEach(e=>{const t=e.data();t.rating&&"number"===typeof t.rating&&r.push(t.rating)});const s=r.length;let i=0;if(s>0){const e=r.reduce((e,t)=>e+t,0);i=e/s}return{success:!0,averageRating:parseFloat(i.toFixed(1)),reviewCount:s,hasReviews:s>0}}catch($b){return console.error("Error getting course rating stats:",$b),{success:!1,error:$b.message,averageRating:0,reviewCount:0,hasReviews:!1}}},By=async e=>{try{const[t,n]=await Promise.all([Vy(e),zy(e)]);return{success:!0,stats:{enrollmentCount:t.success?t.count:0,averageRating:n.success?n.averageRating:0,reviewCount:n.success?n.reviewCount:0,hasReviews:!!n.success&&n.hasReviews},errors:{enrollment:t.success?null:t.error,rating:n.success?null:n.error}}}catch($b){return console.error("Error getting combined course stats:",$b),{success:!1,error:$b.message,stats:{enrollmentCount:0,averageRating:0,reviewCount:0,hasReviews:!1}}}},qy=(e,t)=>{let n=()=>{},r=()=>{},s={count:0,error:null},i={averageRating:0,reviewCount:0,hasReviews:!1,error:null};const a=()=>{t({enrollmentCount:s.count,averageRating:i.averageRating,reviewCount:i.reviewCount,hasReviews:i.hasReviews,errors:{enrollment:s.error,rating:i.error}})};return n=((e,t)=>{if(!Pv)return console.warn("Firestore not initialized, returning empty subscription"),t({count:0,error:"Firestore not initialized"}),()=>{};try{return vv(Gg(rg(Pv,"enrollments"),Qg("courseId","==",e),Qg("status","==","enrolled")),e=>{const n=e.size;t({count:n,error:null})},e=>{console.error("Enrollment count subscription error:",e),t({count:0,error:e.message})})}catch($b){return console.error("Error setting up enrollment count subscription:",$b),t({count:0,error:$b.message}),()=>{}}})(e,e=>{s=e,a()}),r=((e,t)=>{if(!Pv)return console.warn("Firestore not initialized, returning empty subscription"),t({averageRating:0,reviewCount:0,hasReviews:!1,error:"Firestore not initialized"}),()=>{};try{return vv(Gg(rg(Pv,"course_reviews"),Qg("courseId","==",e)),e=>{const n=[];e.forEach(e=>{const t=e.data();t.rating&&"number"===typeof t.rating&&n.push(t.rating)});const r=n.length;let s=0;if(r>0){const e=n.reduce((e,t)=>e+t,0);s=parseFloat((e/r).toFixed(1))}t({averageRating:s,reviewCount:r,hasReviews:r>0,error:null})},e=>{console.error("Rating stats subscription error:",e),t({averageRating:0,reviewCount:0,hasReviews:!1,error:e.message})})}catch($b){return console.error("Error setting up rating stats subscription:",$b),t({averageRating:0,reviewCount:0,hasReviews:!1,error:$b.message}),()=>{}}})(e,e=>{i=e,a()}),()=>{n(),r()}},Hy=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[n,s]=(0,r.useState)({enrollmentCount:0,averageRating:0,reviewCount:0,hasReviews:!1}),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(e){if(t){return qy(e,e=>{var t,n;s({enrollmentCount:e.enrollmentCount,averageRating:e.averageRating,reviewCount:e.reviewCount,hasReviews:e.hasReviews}),null!==(t=e.errors)&&void 0!==t&&t.enrollment||null!==(n=e.errors)&&void 0!==n&&n.rating?l(e.errors.enrollment||e.errors.rating):l(null),a(!1)})}(async()=>{a(!0);try{const t=await By(e);t.success?(s(t.stats),l(null)):l(t.error)}catch(t){l(t.message)}finally{a(!1)}})()}else a(!1)},[e,t]),{stats:n,loading:i,error:o}},Wy=e=>{let{rating:t,maxRating:n=5,showNumeric:r=!0,reviewCount:s=0,showReviewCount:i=!0,size:a="medium",readonly:o=!0}=e;const l=parseFloat(t)||0,c=l>0,u=[];for(let d=1;d<=n;d++){const e=d<=Math.floor(l),t=d===Math.ceil(l)&&l%1!==0;u.push((0,Mv.jsx)("span",{className:"star ".concat(e?"filled":""," ").concat(t?"half":""," ").concat(a),children:e?"\u2605":t?"\u2b50":"\u2606"},d))}return c?(0,Mv.jsxs)("div",{className:"star-rating ".concat(a," ").concat(o?"readonly":""),children:[(0,Mv.jsx)("div",{className:"stars-container",children:u}),r&&(0,Mv.jsx)("span",{className:"rating-numeric",children:l.toFixed(1)}),i&&s>0&&(0,Mv.jsxs)("span",{className:"review-count",children:["(",s," review",1!==s?"s":"",")"]})]}):(0,Mv.jsx)("div",{className:"star-rating no-rating",children:(0,Mv.jsx)("span",{className:"no-rating-text",children:"No ratings yet"})})},Gy=e=>{let{course:t,isEnrolled:n=!1}=e;const s=me(),{user:i}=zv(),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),{stats:u,loading:d}=Hy(t.id,!1),h=my(t),f=d?t.students||0:u.enrollmentCount,m=t.maxCapacity||0,p=!h&&m>0&&f/m>=.8,g=!h&&m>0&&f>=m,v=function(e){return!h||"TBD"!==e&&"N/A"!==e&&null!==e&&0!==e?e||(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TBD"):"Coming Soon"};return(0,Mv.jsxs)("div",{className:"course-card",onClick:()=>{s("/courses/".concat(t.id))},children:[n?(0,Mv.jsx)("div",{className:"enrollment-status enrolled",children:"\u2705 Enrolled"}):h?(0,Mv.jsx)("div",{className:"enrollment-status coming-soon",children:"Coming Soon"}):p&&(0,Mv.jsx)("div",{className:"enrollment-status ".concat(g?"full":"nearly-full"),children:g?"Course Full":"Few Seats Left"}),(0,Mv.jsx)("div",{className:"course-image",children:!t.image||a?(0,Mv.jsx)("div",{className:"course-image-fallback",children:t.icon}):(0,Mv.jsxs)("div",{className:"course-image-container",children:[!l&&(0,Mv.jsx)("div",{className:"course-image-loading",children:t.icon}),(0,Mv.jsx)("img",{src:t.image,alt:t.title,className:"course-image-img ".concat(l?"loaded":"loading"),onError:()=>{o(!0)},onLoad:()=>{c(!0)},style:{display:l?"block":"none"}})]})}),(0,Mv.jsx)("h3",{className:"course-title",children:t.title}),(0,Mv.jsx)("p",{className:"course-description",children:t.description}),(0,Mv.jsxs)("div",{className:"course-meta",children:[(0,Mv.jsx)("span",{className:"course-level",children:v(t.level)}),(0,Mv.jsxs)("span",{className:"course-duration",children:["\u23f1\ufe0f ",v(t.duration)]})]}),(0,Mv.jsxs)("div",{className:"course-stats",children:[(0,Mv.jsxs)("span",{className:"course-stat",children:["\ud83d\udcda ",v(t.lessons)," lessons"]}),(0,Mv.jsxs)("span",{className:"course-stat",children:["\ud83d\udc65 ",h?"Coming Soon":d?"".concat(t.students||0,"/").concat(t.maxCapacity||0," seats"):"".concat(f,"/").concat(m," seats")]}),(0,Mv.jsx)("div",{className:"course-stat course-rating-stat",children:h?"Coming Soon":(0,Mv.jsx)(Wy,{rating:d?t.rating:u.hasReviews?u.averageRating:t.rating,reviewCount:d?0:u.reviewCount,showReviewCount:!d&&u.hasReviews,size:"small",showNumeric:!0})})]}),(0,Mv.jsxs)("div",{className:"course-price",children:[t.originalPrice&&!h&&(0,Mv.jsxs)("span",{className:"original-price",children:["$",t.originalPrice]}),h?"Price TBD":"$".concat(t.price)]}),(0,Mv.jsx)("div",{className:"course-action",children:(0,Mv.jsx)("button",{className:"btn enroll-btn ".concat(h?"coming-soon":""," ").concat(n?"enrolled":""),onClick:e=>{e.stopPropagation(),s(i?"/courses/".concat(t.id):"/login")},disabled:h,children:n?"Continue Learning":h?"Coming Soon":i?"Enroll Now":"Login to Enroll"})})]})},Ky=async(e,t)=>{try{if(!Pv)throw new Error("Firestore not initialized");const n=Gg(rg(Pv,"enrollments"),Qg("courseId","==",e),Qg("batchNumber","==",t),Qg("status","==","enrolled")),r=await hv(n);return{success:!0,count:r.size}}catch($b){return console.error("Error getting batch enrollment count:",$b),{success:!1,error:$b.message,count:0}}},Qy=async e=>{try{if(!Pv)throw new Error("Firestore not initialized");const t=fy(e);if(!t||!t.batches)return{success:!1,error:"Course not found or no batches defined"};const n={};for(const r of t.batches){const t=await Ky(e,r.batchNumber);n[r.batchNumber]=u(u({},r),{},{enrollmentCount:t.success?t.count:0,error:t.success?null:t.error})}return{success:!0,batchStats:n}}catch($b){return console.error("Error getting course batch stats:",$b),{success:!1,error:$b.message,batchStats:{}}}},Yy=async(e,t,n)=>{try{if(!Pv)return{success:!1,error:"Firestore not initialized"};const r="".concat(e,"_").concat(t,"_batch").concat(n),s=sg(Pv,"enrollments",r),i=await uv(s);return i.exists()?{success:!0,enrollment:u({id:i.id},i.data())}:{success:!1,enrollment:null}}catch($b){return console.error("Error getting user batch enrollment:",$b),{success:!1,error:$b.message}}},$y=async(e,t)=>{try{if(!Pv)return{success:!1,error:"Firestore not initialized"};const n=Gg(rg(Pv,"enrollments"),Qg("userId","==",e),Qg("courseId","==",t)),r=await hv(n),s=[];return r.forEach(e=>{s.push(u({id:e.id},e.data()))}),s.sort((e,t)=>(e.batchNumber||0)-(t.batchNumber||0)),{success:!0,enrollments:s}}catch($b){return console.error("Error getting user course enrollments:",$b),{success:!1,error:$b.message,enrollments:[]}}},Jy=async e=>{try{const t=fy(e);if(!t)return{success:!1,error:"Course not found"};const n=vy(t);if(!n)return{success:!0,batch:null,reason:"No available batches"};const r=await Ky(e,n.batchNumber);return{success:!0,batch:u(u({},n),{},{enrollmentCount:r.success?r.count:0})}}catch($b){return console.error("Error getting next available batch:",$b),{success:!1,error:$b.message}}},Xy=async(e,t,n)=>{try{const r=await Yy(e,t,n);if(!r.success||!r.enrollment)return{success:!1,error:"User not enrolled in this batch"};const s=fy(t);if(!s)return{success:!1,error:"Course not found"};const i=py(s,n);return i?{success:!0,classLinks:i.classLinks||{},batch:i,enrollment:r.enrollment}:{success:!1,error:"Batch not found"}}catch($b){return console.error("Error getting batch class links:",$b),{success:!1,error:$b.message}}},Zy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{user:n}=zv(),[s,i]=(0,r.useState)(!1),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[f,m]=(0,r.useState)(null),[p,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),b=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!n||!e)return i(!1),o(null),!1;g(!0),y(null);try{const r=await Ey(n.uid,e,t);return r.error?(y(r.error),i(!1),o(null),!1):(i(r.hasAccess),o(r.enrollment),r.hasAccess)}catch(r){return y(r.message),i(!1),o(null),!1}finally{g(!1)}},[n]),w=(0,r.useCallback)(async()=>{if(n){g(!0),y(null);try{const e=await(async e=>{try{if(!Pv)return{success:!1,error:"Firestore not initialized"};const t=Gg(rg(Pv,"enrollments"),Qg("userId","==",e)),n=await hv(t),r=[];return n.forEach(e=>{r.push(u({id:e.id},e.data()))}),{success:!0,enrollments:r}}catch(v){return console.error("Error getting user enrollments:",v),{success:!1,error:v.message,enrollments:[]}}})(n.uid);e.success?c(e.enrollments):(y(e.error),c([]))}catch(e){y(e.message),c([])}finally{g(!1)}}else c([])},[n]),x=(0,r.useCallback)(async e=>{if(n&&e)try{const t=await $y(n.uid,e);t.success?h(t.enrollments):(y(t.error),h([]))}catch(t){y(t.message),h([])}else h([])},[n]),E=(0,r.useCallback)(async(e,t)=>{if(n&&e&&t)try{const r=await Xy(n.uid,e,t);r.success?m(r.classLinks):(y(r.error),m(null))}catch(r){y(r.message),m(null)}else m(null)},[n]),S=(0,r.useCallback)(async e=>{if(!n)throw new Error("User must be logged in to enroll");g(!0),y(null);try{const t=await Sy(e,n.uid);if(!t.success)throw new Error(t.error);return await b(e.courseId,t.batchNumber),await w(),await x(e.courseId),t}catch(t){throw y(t.message),t}finally{g(!1)}},[n,b,w,x]),N=(0,r.useCallback)(async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!n)throw new Error("User must be logged in");try{const s=await async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{if(!Pv)throw new Error("Firestore not initialized");let s;if(r){const n="".concat(e,"_").concat(t,"_batch").concat(r);if(s=sg(Pv,"enrollments",n),!(await uv(s)).exists())throw new Error("No enrollment found for batch ".concat(r))}else{const n=Gg(rg(Pv,"enrollments"),Qg("userId","==",e),Qg("courseId","==",t),Qg("status","in",["enrolled","active"])),r=await hv(n);if(r.empty)throw new Error("No active enrollment found for this course");let i=null,a=null;if(r.forEach(e=>{var t;const n=null===(t=e.data().enrolledAt)||void 0===t?void 0:t.toDate();(!a||n&&n>a)&&(a=n,i=e)}),!i)throw new Error("Could not determine latest enrollment");s=i.ref}const i={progress:Math.min(Math.max(n,0),100),lastAccessed:wv(),updatedAt:wv()};return n>=100&&(i.completedAt=wv(),i.status="completed"),await mv(s,i),{success:!0,enrollmentId:s.id}}catch(v){return console.error("Error updating course progress:",v),{success:!1,error:v.message}}}(n.uid,e,t,r);return s.success&&(await b(e,r),await w(),await x(e)),s}catch(s){throw y(s.message),s}},[n,b,w,x]),k=(0,r.useCallback)(()=>l.length>0,[l]),_=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)return l.find(n=>n.courseId===e&&n.batchNumber===t);{const t=l.filter(t=>t.courseId===e);return t.sort((e,t)=>{var n,r,s,i;const a=(null===(n=e.enrolledAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||new Date(0);return((null===(s=t.enrolledAt)||void 0===s||null===(i=s.toDate)||void 0===i?void 0:i.call(s))||new Date(0))-a})[0]}},[l]),C=(0,r.useCallback)(e=>l.filter(t=>t.courseId===e),[l]),T=(0,r.useCallback)(e=>l.some(t=>t.courseId===e),[l]);return(0,r.useEffect)(()=>{e&&(b(e,t),x(e))},[e,t,b,x]),(0,r.useEffect)(()=>{a&&a.courseId&&a.batchNumber&&E(a.courseId,a.batchNumber)},[a,E]),(0,r.useEffect)(()=>{w()},[w]),{hasAccess:s,enrollment:a,allEnrollments:l,courseEnrollments:d,batchClassLinks:f,loading:p,error:v,checkAccess:b,loadEnrollments:w,loadCourseEnrollments:x,loadBatchClassLinks:E,processEnrollment:S,updateProgress:N,hasAnyCourseAccess:k,getEnrollmentForCourseBatch:_,getEnrollmentsForCourse:C,hasAccessToAnyCourse:T,clearError:()=>y(null)}},eb=()=>{const{user:e}=zv(),[t,n]=(0,r.useState)("All"),{allEnrollments:s}=Zy(),i=["All",...new Set(hy.map(e=>e.category))],a="All"===t?hy:hy.filter(e=>e.category===t);return(0,Mv.jsxs)("div",{className:"courses-page-container",children:[(0,Mv.jsxs)("div",{className:"courses-header",children:[(0,Mv.jsx)("h1",{className:"courses-title",children:"Available Courses"}),(0,Mv.jsxs)("p",{className:"courses-subtitle",children:["Discover our comprehensive collection of AI courses designed to take you from beginner to expert.",!e&&" Login to enroll and track your progress!"]})]}),(0,Mv.jsx)("div",{className:"courses-filters",children:i.map(e=>(0,Mv.jsx)("button",{className:"filter-btn ".concat(t===e?"active":""),onClick:()=>n(e),children:e},e))}),(0,Mv.jsx)("div",{className:"courses-grid",children:a.map(t=>{return(0,Mv.jsx)(Gy,{course:t,isEnrolled:(n=t.id,!(!e||!s)&&s.some(e=>e.courseId===n))},t.id);var n})})]})},tb=e=>{let{courseId:t,courseTitle:n,coursePrice:s,onSuccess:i,onError:a,onCancel:o,disabled:l=!1}=e;const c=(0,r.useRef)(),[u,d]=(0,r.useState)(!0),[h,f]=(0,r.useState)(!1),m="ATOn7sUD6SgiRcskkEvy_f2dNzcc7Gk50ikp26TdGzRcDoEQRwoDOOO1UvSNLjyGlypDjXcdJKtVkVlU";(0,r.useEffect)(()=>{(()=>{if(window.paypal)return f(!0),void d(!1);const e=document.createElement("script");e.src="https://www.paypal.com/sdk/js?client-id=".concat(m,"&currency=USD"),e.async=!0,e.onload=()=>{f(!0),d(!1)},e.onerror=()=>{console.error("PayPal SDK failed to load"),d(!1),a&&a(new Error("PayPal SDK failed to load"))},document.body.appendChild(e)})()},[m,a]);const p=(0,r.useCallback)(()=>{c.current&&window.paypal&&(c.current.innerHTML="",window.paypal.Buttons({createOrder:(e,r)=>r.order.create({purchase_units:[{amount:{value:s.toString(),currency_code:"USD"},description:"Enrollment for ".concat(n),custom_id:t,soft_descriptor:"TuneParams Course"}],application_context:{brand_name:"TuneParams.ai",landing_page:"BILLING",user_action:"PAY_NOW"}}),onApprove:async(e,r)=>{try{const e=await r.order.capture();if(console.log("Payment successful:",e),i){const r=e.payer.name?"".concat(e.payer.name.given_name||""," ").concat(e.payer.name.surname||"").trim():"Student",a=e.purchase_units[0].payments.captures[0].payment_source||{},o=e.purchase_units[0].payments.captures[0].funding_source||null;i({orderID:e.id,payerID:e.payer.payer_id,paymentID:e.purchase_units[0].payments.captures[0].id,courseId:t,courseTitle:n,amount:s,payerEmail:e.payer.email_address,payerName:r,transactionStatus:e.status,timestamp:(new Date).toISOString(),paymentSource:a,fundingSource:o,payerAddress:e.payer.address||null})}}catch($b){console.error("Error capturing payment:",$b),a&&a($b)}},onError:e=>{console.error("PayPal error:",e),a&&a(e)},onCancel:e=>{console.log("Payment cancelled:",e),o&&o(e)},style:{layout:"vertical",color:"blue",shape:"rect",label:"paypal",height:45}}).render(c.current))},[s,n,t,i,a,o]);return(0,r.useEffect)(()=>{h&&!l&&s>0&&p()},[h,l,s,p]),u?(0,Mv.jsxs)("div",{className:"paypal-loading",children:[(0,Mv.jsx)("div",{className:"loading-spinner"}),(0,Mv.jsx)("p",{children:"Loading PayPal..."})]}):h?l||s<=0?(0,Mv.jsx)("div",{className:"paypal-disabled",children:(0,Mv.jsx)("p",{children:"Payment not available for this course."})}):(0,Mv.jsxs)("div",{className:"paypal-checkout-container",children:[(0,Mv.jsxs)("div",{className:"payment-summary",children:[(0,Mv.jsx)("h4",{children:"Payment Summary"}),(0,Mv.jsxs)("div",{className:"payment-details",children:[(0,Mv.jsxs)("div",{className:"payment-item",children:[(0,Mv.jsx)("span",{children:"Course:"}),(0,Mv.jsx)("span",{children:n})]}),(0,Mv.jsxs)("div",{className:"payment-item total",children:[(0,Mv.jsx)("span",{children:"Total:"}),(0,Mv.jsxs)("span",{children:["$",s]})]})]})]}),(0,Mv.jsx)("div",{ref:c,className:"paypal-button-container",style:{minHeight:"45px"}}),(0,Mv.jsxs)("div",{className:"payment-security",children:[(0,Mv.jsx)("p",{children:"\ud83d\udd12 Secure payment powered by PayPal"}),(0,Mv.jsx)("p",{children:"Your payment information is encrypted and secure"})]})]}):(0,Mv.jsx)("div",{className:"paypal-error",children:(0,Mv.jsx)("p",{children:"Failed to load PayPal. Please refresh the page and try again."})})},nb=e=>{let{isOpen:t,onClose:n,paymentData:r,onGoToDashboard:s,enrollmentResult:i}=e;if(!t)return null;return(0,Mv.jsx)("div",{className:"modal-overlay",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,Mv.jsxs)("div",{className:"payment-success-modal",children:[(0,Mv.jsxs)("div",{className:"success-header",children:[(0,Mv.jsx)("div",{className:"success-icon",children:"\u2705"}),(0,Mv.jsx)("h2",{children:"Payment Successful!"}),(0,Mv.jsx)("p",{children:"Welcome to your new course"})]}),(0,Mv.jsxs)("div",{className:"payment-details",children:[(0,Mv.jsx)("h3",{children:"Payment Details"}),(0,Mv.jsxs)("div",{className:"detail-grid",children:[(0,Mv.jsxs)("div",{className:"detail-item",children:[(0,Mv.jsx)("span",{className:"label",children:"Course:"}),(0,Mv.jsx)("span",{className:"value",children:null===r||void 0===r?void 0:r.courseTitle})]}),(0,Mv.jsxs)("div",{className:"detail-item",children:[(0,Mv.jsx)("span",{className:"label",children:"Amount Paid:"}),(0,Mv.jsxs)("span",{className:"value",children:["$",null===r||void 0===r?void 0:r.amount]})]}),(0,Mv.jsxs)("div",{className:"detail-item",children:[(0,Mv.jsx)("span",{className:"label",children:"Transaction ID:"}),(0,Mv.jsx)("span",{className:"value",children:null===r||void 0===r?void 0:r.paymentID})]}),(0,Mv.jsxs)("div",{className:"detail-item",children:[(0,Mv.jsx)("span",{className:"label",children:"Order ID:"}),(0,Mv.jsx)("span",{className:"value",children:null===r||void 0===r?void 0:r.orderID})]}),(0,Mv.jsxs)("div",{className:"detail-item",children:[(0,Mv.jsx)("span",{className:"label",children:"Date:"}),(0,Mv.jsx)("span",{className:"value",children:new Date(null===r||void 0===r?void 0:r.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),(0,Mv.jsxs)("div",{className:"next-steps",children:[(0,Mv.jsx)("h3",{children:"What's Next?"}),(0,Mv.jsxs)("ul",{children:[(0,Mv.jsxs)("li",{children:["\ud83d\udce7 A confirmation email has been sent to ",null===r||void 0===r?void 0:r.payerEmail,!1===(null===i||void 0===i?void 0:i.emailSent)&&(0,Mv.jsx)("span",{style:{color:"#f57c00",marginLeft:"8px"},children:"(Email service unavailable)"})]}),(0,Mv.jsx)("li",{children:"\ud83d\udcda You now have access to all course materials"}),(0,Mv.jsx)("li",{children:"\ud83c\udfaf You can start learning immediately"}),(0,Mv.jsx)("li",{children:"\ud83d\udcac Join our course community for support"})]})]}),(0,Mv.jsx)("div",{className:"modal-actions",children:(0,Mv.jsx)("button",{className:"btn",onClick:s,children:"\ud83d\ude80 Go to Dashboard"})}),(0,Mv.jsx)("button",{className:"close-modal",onClick:n,"aria-label":"Close modal",children:"\xd7"})]})})},rb=e=>{let{course:t,className:n=""}=e;const{isAdminUser:s,loading:i}=Oy(),[a,o]=(0,r.useState)({}),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null);if((0,r.useEffect)(()=>{(async()=>{if(t&&t.batches&&s){d(!0),f(null);try{const e=await Qy(t.id);e.success?o(e.batchStats):f("Failed to load batch stats: ".concat(e.error));const n=await Jy(t.id);n.success&&c(n.batch)}catch(e){f("Error loading batch information: ".concat(e.message)),console.error("Error loading batch stats:",e)}finally{d(!1)}}})()},[t,s]),i||!s||null===t||void 0===t||!t.batches)return null;const m=(e=>e.batches&&0!==e.batches.length?e.batches.filter(e=>"upcoming"===e.status):[])(t),p=(e=>e.batches&&0!==e.batches.length?e.batches.filter(e=>"active"===e.status):[])(t);return(0,Mv.jsxs)("div",{className:"admin-batch-info ".concat(n),children:[(0,Mv.jsxs)("div",{className:"admin-batch-header",children:[(0,Mv.jsx)("h3",{children:"\ud83d\udcca Batch Management (Admin Only)"}),(0,Mv.jsxs)("div",{className:"batch-summary",children:[(0,Mv.jsxs)("span",{className:"batch-count",children:["Total: ",t.batches.length]}),(0,Mv.jsxs)("span",{className:"batch-count",children:["Active: ",p.length]}),(0,Mv.jsxs)("span",{className:"batch-count",children:["Upcoming: ",m.length]})]})]}),h&&(0,Mv.jsx)("div",{className:"admin-batch-error",children:(0,Mv.jsxs)("p",{children:["\u26a0\ufe0f ",h]})}),u&&(0,Mv.jsx)("div",{className:"admin-batch-loading",children:(0,Mv.jsx)("p",{children:"Loading batch information..."})}),l&&(0,Mv.jsxs)("div",{className:"next-enrollment-batch",children:[(0,Mv.jsx)("h4",{children:"\ud83c\udfaf Auto-Enrollment Target"}),(0,Mv.jsxs)("div",{className:"batch-card highlight",children:[(0,Mv.jsxs)("div",{className:"batch-card-header",children:[(0,Mv.jsx)("span",{className:"batch-number",title:"Batch ".concat(l.batchNumber),children:wy(l)}),(0,Mv.jsx)("span",{className:"batch-status batch-status-".concat(l.status),children:yy(l)})]}),(0,Mv.jsxs)("div",{className:"batch-card-details",children:[(0,Mv.jsxs)("div",{className:"batch-dates",children:["\ud83d\udcc5 ",by(l)]}),(0,Mv.jsxs)("div",{className:"batch-enrollment-info",children:["\ud83d\udc65 ",l.enrollmentCount||0," / ",l.maxCapacity," enrolled"]}),(0,Mv.jsx)("div",{className:"capacity-bar",children:(0,Mv.jsx)("div",{className:"capacity-fill",style:{width:"".concat((l.enrollmentCount||0)/l.maxCapacity*100,"%")}})}),(0,Mv.jsx)("div",{className:"auto-assign-note",children:"\u2139\ufe0f New enrollments will be automatically assigned to this batch"})]})]})]}),(0,Mv.jsxs)("div",{className:"all-batches",children:[(0,Mv.jsx)("h4",{children:"\ud83d\udccb All Batches"}),(0,Mv.jsx)("div",{className:"batches-grid",children:t.batches.map(e=>{const t=(a[e.batchNumber]||e).enrollmentCount||0,n=t/e.maxCapacity*100;return(0,Mv.jsxs)("div",{className:"batch-card",children:[(0,Mv.jsxs)("div",{className:"batch-card-header",children:[(0,Mv.jsx)("span",{className:"batch-number",title:"Batch ".concat(e.batchNumber),children:xy(e)}),(0,Mv.jsx)("span",{className:"batch-status batch-status-".concat(e.status),children:yy(e)})]}),(0,Mv.jsxs)("div",{className:"batch-card-details",children:[(0,Mv.jsxs)("div",{className:"batch-dates",children:["\ud83d\udcc5 ",by(e)]}),(0,Mv.jsxs)("div",{className:"batch-enrollment-info",children:["\ud83d\udc65 ",t," / ",e.maxCapacity," enrolled",(0,Mv.jsxs)("span",{className:"enrollment-percentage",children:["(",Math.round(n),"%)"]})]}),(0,Mv.jsx)("div",{className:"capacity-bar",children:(0,Mv.jsx)("div",{className:"capacity-fill",style:{width:"".concat(n,"%")}})}),e.classLinks&&(0,Mv.jsxs)("div",{className:"batch-links",children:["\ud83d\udd17 Links:",e.classLinks.zoom&&(0,Mv.jsx)("span",{className:"link-indicator",children:"Zoom"}),e.classLinks.discord&&(0,Mv.jsx)("span",{className:"link-indicator",children:"Discord"}),e.classLinks.materials&&(0,Mv.jsx)("span",{className:"link-indicator",children:"Materials"})]})]})]},e.batchNumber)})})]}),(0,Mv.jsx)("style",{jsx:!0,children:"\n                .admin-batch-info {\n                    background: rgba(29, 126, 153, 0.1);\n                    border: 2px solid var(--primary-color);\n                    border-radius: 12px;\n                    padding: 20px;\n                    margin: 20px 0;\n                    box-shadow: 0 4px 12px rgba(29, 126, 153, 0.2);\n                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n                }\n\n                .admin-batch-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 20px;\n                    padding-bottom: 15px;\n                    border-bottom: 2px solid rgba(29, 126, 153, 0.3);\n                }\n\n                .admin-batch-header h3 {\n                    margin: 0;\n                    color: var(--primary-color);\n                    font-size: 18px;\n                }\n\n                .batch-summary {\n                    display: flex;\n                    gap: 10px;\n                }\n\n                .batch-count {\n                    background: var(--primary-color);\n                    color: white;\n                    padding: 4px 10px;\n                    border-radius: 15px;\n                    font-size: 11px;\n                    font-weight: bold;\n                    white-space: nowrap;\n                }\n\n                .admin-batch-error {\n                    background: rgba(255, 107, 107, 0.1);\n                    color: #ff6b6b;\n                    padding: 12px;\n                    border-radius: 6px;\n                    margin-bottom: 15px;\n                    border: 1px solid rgba(255, 107, 107, 0.3);\n                }\n\n                .admin-batch-loading {\n                    text-align: center;\n                    padding: 20px;\n                    color: var(--secondary-text-color);\n                }\n\n                .next-enrollment-batch {\n                    margin-bottom: 25px;\n                }\n\n                .next-enrollment-batch h4 {\n                    color: #28a745;\n                    margin-bottom: 12px;\n                    font-size: 16px;\n                }\n\n                .batches-grid {\n                    display: grid;\n                    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n                    gap: 15px;\n                }\n\n                .batch-card {\n                    background: rgba(29, 126, 153, 0.1);\n                    border: 1px solid rgba(29, 126, 153, 0.3);\n                    border-radius: 8px;\n                    padding: 15px;\n                    transition: all 0.3s ease;\n                }\n\n                .batch-card:hover {\n                    box-shadow: 0 4px 8px rgba(29, 126, 153, 0.2);\n                    transform: translateY(-2px);\n                }\n\n                .batch-card.highlight {\n                    border: 2px solid #4ade80;\n                    background: rgba(74, 222, 128, 0.1);\n                }\n\n                .batch-card-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 12px;\n                }\n\n                .batch-number {\n                    font-weight: bold;\n                    font-size: 15px;\n                    color: #495057;\n                }\n\n                .batch-status {\n                    padding: 3px 8px;\n                    border-radius: 12px;\n                    font-size: 10px;\n                    font-weight: bold;\n                    text-transform: uppercase;\n                }\n\n                .batch-status-upcoming {\n                    background: rgba(59, 130, 246, 0.2);\n                    color: #60a5fa;\n                }\n\n                .batch-status-active {\n                    background: rgba(34, 197, 94, 0.2);\n                    color: #4ade80;\n                }\n\n                .batch-status-completed {\n                    background: rgba(255, 107, 107, 0.2);\n                    color: #ff6b6b;\n                }\n\n                .batch-card-details {\n                    font-size: 13px;\n                    color: var(--secondary-text-color);\n                }\n\n                .batch-dates {\n                    margin-bottom: 8px;\n                    font-weight: 500;\n                }\n\n                .batch-enrollment-info {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 8px;\n                }\n\n                .enrollment-percentage {\n                    font-weight: bold;\n                    color: #495057;\n                }\n\n                .capacity-bar {\n                    height: 6px;\n                    background: rgba(29, 126, 153, 0.2);\n                    border-radius: 3px;\n                    overflow: hidden;\n                    margin-bottom: 10px;\n                }\n\n                .capacity-fill {\n                    height: 100%;\n                    background: linear-gradient(90deg, #4ade80 0%, var(--primary-color) 100%);\n                    transition: width 0.3s ease;\n                }\n\n                .batch-links {\n                    font-size: 11px;\n                    color: #6c757d;\n                    display: flex;\n                    align-items: center;\n                    gap: 5px;\n                    flex-wrap: wrap;\n                }\n\n                .link-indicator {\n                    background: rgba(29, 126, 153, 0.2);\n                    padding: 2px 6px;\n                    border-radius: 8px;\n                    font-size: 10px;\n                }\n\n                .auto-assign-note {\n                    background: #d1ecf1;\n                    color: #0c5460;\n                    padding: 6px 8px;\n                    border-radius: 4px;\n                    font-size: 11px;\n                    margin-top: 8px;\n                    border: 1px solid #bee5eb;\n                }\n\n                .all-batches h4 {\n                    color: #495057;\n                    margin-bottom: 15px;\n                    font-size: 16px;\n                }\n\n                @media (max-width: 768px) {\n                    .admin-batch-header {\n                        flex-direction: column;\n                        align-items: flex-start;\n                        gap: 10px;\n                    }\n\n                    .batch-summary {\n                        flex-wrap: wrap;\n                    }\n\n                    .batches-grid {\n                        grid-template-columns: 1fr;\n                    }\n                }\n            "})]})},sb=function(e){let{limit:t=20}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e)return;a(!0);const n=function(e,t){let{limit:n=20}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Pv)return console.warn("Firestore not initialized, returning empty subscription"),t({reviews:[],error:"Firestore not initialized"}),()=>{};try{return vv(Gg(rg(Pv,Ny),Qg("courseId","==",e),Jg("createdAt","desc"),Zg(n)),e=>{const n=e.docs.map(e=>u({id:e.id},e.data()));t({reviews:n,error:null})},e=>{console.error("Reviews subscription error:",e);let n=e.message;"permission-denied"===e.code?n="Permission denied accessing reviews. This might be a Firebase configuration issue.":"unavailable"===e.code&&(n="Firebase service temporarily unavailable. Please try again."),t({reviews:[],error:n})})}catch(o){return console.error("Error setting up reviews subscription:",o),t({reviews:[],error:o.message}),()=>{}}}(e,e=>{let{reviews:t,error:n}=e;n?l(n):s(t),a(!1)},{limit:t});return()=>n&&n()},[e,t]),{reviews:n,loading:i,error:o}},ib=e=>{let{value:t=0}=e;const n=Math.max(0,Math.min(5,Number(t)));return(0,Mv.jsx)("span",{className:"review-stars","aria-label":"".concat(n," out of 5"),children:"\u2605".repeat(Math.round(n)).padEnd(5,"\u2606")})},ab=e=>{var t;let{review:n,showCourseTitle:s=!1,isOwner:i=!1,isAdmin:a=!1,onEdit:o,onDelete:l,onAdminDelete:c}=e;const[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1);if(!n)return null;const{userName:m,userPhotoURL:p,rating:g,comment:v,verified:y,createdAt:b,courseTitle:w}=n,x=null!==b&&void 0!==b&&b.toDate?b.toDate().toLocaleDateString():"",E=(v||"").length>300,S=E&&!u?v.slice(0,300)+"...":v,N=p&&!h;return(0,Mv.jsxs)("div",{className:"review-card",id:"review-".concat(n.id),children:[a&&!i&&c&&(0,Mv.jsx)("button",{className:"review-admin-delete-corner",onClick:c,title:"Admin: Delete this review",children:"\ud83d\uddd1\ufe0f"}),(0,Mv.jsxs)("div",{className:"review-card-header",children:[(0,Mv.jsxs)("div",{className:"review-user",children:[(0,Mv.jsx)("div",{className:"review-avatar","aria-hidden":!0,children:N?(0,Mv.jsx)("img",{src:p,alt:m||"User",onError:()=>{f(!0)}}):(0,Mv.jsx)("div",{className:"default-avatar",children:null===(t=(m||"User").charAt(0))||void 0===t?void 0:t.toUpperCase()})}),(0,Mv.jsxs)("div",{children:[(0,Mv.jsxs)("div",{className:"review-username",children:[(0,Mv.jsx)("span",{children:m||"User"}),y&&(0,Mv.jsx)("span",{className:"review-verified",title:"Verified User",children:"\u2713"})]}),x&&(0,Mv.jsx)("div",{className:"review-date",children:x})]})]}),(0,Mv.jsx)(ib,{value:g})]}),s&&w&&(0,Mv.jsx)("div",{className:"review-course-chip",children:w}),(0,Mv.jsxs)("div",{className:"review-comment-section",children:[(0,Mv.jsx)("p",{className:"review-comment ".concat(u?"expanded":""),children:S}),E&&(0,Mv.jsx)("button",{className:"review-expand-btn",onClick:()=>d(!u),children:u?"Show less":"Read more"})]}),i&&(0,Mv.jsxs)("div",{className:"review-actions",children:[o&&(0,Mv.jsx)("button",{className:"btn btn-secondary btn-small",onClick:o,children:"Edit"}),l&&(0,Mv.jsx)("button",{className:"btn btn-secondary btn-small",onClick:l,children:"Delete"})]})]})},ob=e=>{if(!e)return null;const t="string"===typeof e?e:String(e);if(t.toLowerCase().includes("requires an index")){const e=t.match(/https?:\/\/\S+/),n=e?e[0]:"https://console.firebase.google.com/";return(0,Mv.jsxs)("div",{children:["This query needs a Firestore composite index."," ",(0,Mv.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:"Create index"}),(0,Mv.jsx)("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:4},children:"Fields: courseId Asc, createdAt Desc (Collection: course_reviews)"})]})}return t},lb=e=>{let{reviews:t=[],loading:n=!1,error:r=null,showCourseTitle:s=!1,currentUserId:i,isCurrentUserAdmin:a=!1,onEdit:o,onDelete:l,onAdminDelete:c}=e;return n?(0,Mv.jsx)("div",{className:"reviews-loading",children:"Loading reviews..."}):r?(0,Mv.jsx)("div",{className:"reviews-error",children:ob(r)}):t.length?(0,Mv.jsx)("div",{className:"reviews-list",children:t.map(e=>(0,Mv.jsx)(ab,{review:e,showCourseTitle:s,isOwner:i&&e.userId===i,isAdmin:a,onEdit:o?()=>o(e):void 0,onDelete:l?()=>l(e):void 0,onAdminDelete:c?()=>c(e):void 0},e.id))}):(0,Mv.jsx)("div",{className:"reviews-empty",children:"No reviews yet."})},cb=e=>{let{value:t=0,onChange:n}=e;return(0,Mv.jsx)("div",{className:"star-input",role:"radiogroup","aria-label":"Rating",children:[1,2,3,4,5].map(e=>(0,Mv.jsx)("button",{type:"button",className:"star ".concat(e<=t?"active":""),onClick:()=>n(e),"aria-checked":t===e,role:"radio",children:e<=t?"\u2605":"\u2606"},e))})},ub=e=>{let{courseId:t,courseTitle:n,onSubmitted:s}=e;const{user:i}=zv(),a=null===i||void 0===i?void 0:i.uid,o=(0,r.useMemo)(()=>{var e;return(null===i||void 0===i?void 0:i.displayName)||(null===i||void 0===i||null===(e=i.email)||void 0===e?void 0:e.split("@")[0])||"User"},[i]),[l,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(0),[f,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=!0;return(async()=>{if(!a||!t)return;const n=await(async(e,t)=>{try{if(!Pv)throw new Error("Firestore not initialized");const n=sg(Pv,Ny,"".concat(t,"_").concat(e)),r=await uv(n);return r.exists()?{success:!0,review:u({id:r.id},r.data())}:{success:!0,review:null}}catch(p){return console.error("Error getting user review:",p),{success:!1,error:p.message,review:null}}})(a,t);e&&(n.success&&n.review?(h(n.review.rating||0),m(n.review.comment||""),y(!0)):(h(0),m(""),y(!1)))})(),()=>{e=!1}},[a,t]);return a?(0,Mv.jsxs)("form",{className:"review-form",onSubmit:async e=>{if(e.preventDefault(),!a)return void g("Please log in to leave a review.");c(!0),g(null);let r=(null===i||void 0===i?void 0:i.photoURL)||(null===i||void 0===i?void 0:i.photoUrl)||"";if(!r&&a)try{var l;const e=await Ov(a);e.success&&null!==(l=e.userData)&&void 0!==l&&l.photoURL&&(r=e.userData.photoURL)}catch(p){console.warn("Could not fetch user profile for photoURL:",p)}const h=await(async e=>{let{userId:t,userName:n,userPhotoURL:r,courseId:s,courseTitle:i,rating:a,comment:o}=e;try{if(!Pv)throw new Error("Firestore not initialized");if(!t)throw new Error("User not authenticated");if(!s)throw new Error("Course ID required");const e=Number(a);if(!Number.isFinite(e)||e<1||e>5)throw new Error("Rating must be between 1 and 5");const l=(o||"").trim();if(0===l.length)throw new Error("Comment is required");if(l.length>2e3)throw new Error("Comment too long (max 2000 characters)");const c=await Ey(t,s),d=!(null===c||void 0===c||!c.hasAccess),h="".concat(s,"_").concat(t),f=sg(Pv,Ny,h),m=(await uv(f)).exists()?{updatedAt:wv()}:{createdAt:wv(),updatedAt:wv()};return await fv(f,u({userId:t,userName:n,userPhotoURL:r||"",courseId:s,courseTitle:i,rating:e,comment:l,verified:d},m),{merge:!0}),{success:!0,reviewId:h}}catch(p){return console.error("Error adding/updating review:",p),{success:!1,error:p.message}}})({userId:a,userName:o,userPhotoURL:r,courseId:t,courseTitle:n,rating:d,comment:f});c(!1),h.success?(y(!0),s&&s()):g(h.error||"Failed to submit review")},children:[(0,Mv.jsx)("div",{className:"review-form-header",children:(0,Mv.jsx)("h4",{children:v?"Edit your review":"Write a review"})}),(0,Mv.jsx)(cb,{value:d,onChange:h}),(0,Mv.jsx)("textarea",{className:"review-textarea",value:f,maxLength:2e3,onChange:e=>m(e.target.value),placeholder:"Share your experience...",rows:4,required:!0}),p&&(0,Mv.jsx)("div",{className:"review-error",children:p}),(0,Mv.jsxs)("div",{className:"review-form-actions",children:[(0,Mv.jsx)("button",{className:"btn",type:"submit",disabled:l||d<1,children:l?"Saving...":v?"Update Review":"Submit Review"}),v&&(0,Mv.jsx)("button",{className:"btn btn-secondary",type:"button",onClick:async()=>{if(!a)return;if(!window.confirm("Delete your review?"))return;c(!0),g(null);const e=await(async(e,t)=>{try{if(!Pv)throw new Error("Firestore not initialized");const n=sg(Pv,Ny,"".concat(e,"_").concat(t));return await pv(n),{success:!0}}catch(p){return console.error("Error deleting review:",p),{success:!1,error:p.message}}})(t,a);c(!1),e.success?(h(0),m(""),y(!1),s&&s()):g(e.error||"Failed to delete review")},disabled:l,children:"Delete"})]})]}):(0,Mv.jsx)("div",{className:"review-form-login",children:"Log in to write a review."})},db=e=>{let{courseId:t,courseTitle:n}=e;const{user:s,loading:i}=zv(),{isAdminUser:a}=Oy(),{reviews:o,loading:l,error:c}=sb(t,{limit:20}),u=r.useMemo(()=>{if(null===o||void 0===o||!o.length)return null;const e=o.reduce((e,t)=>e+(Number(t.rating)||0),0);return Math.round(e/o.length*10)/10},[o]),d=r.useCallback(async e=>{if(a){if(window.confirm("Are you sure you want to delete ".concat(e.userName,"'s review? This action cannot be undone.")))try{const t=await ky(e.id);t.success?alert("Review deleted successfully"):alert("Failed to delete review: ".concat(t.error))}catch($b){console.error("Error deleting review:",$b),alert("Failed to delete review. Please try again.")}}else alert("You do not have permission to delete reviews.")},[a]);return(0,Mv.jsxs)("section",{className:"course-section",children:[(0,Mv.jsx)("h3",{children:"Student Reviews"}),(0,Mv.jsx)("div",{className:"course-reviews-summary",children:l?(0,Mv.jsx)("p",{children:"Loading reviews..."}):c?(0,Mv.jsxs)("div",{children:[(0,Mv.jsxs)("p",{className:"course-detail-error-text",children:["Error loading reviews: ",c]}),(0,Mv.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:"Reviews should be visible to all users. If you're seeing this error, there might be a Firebase configuration issue."})]}):(0,Mv.jsxs)("p",{children:[u?"\u2b50 ".concat(u," / 5"):"No ratings yet",null!==o&&void 0!==o&&o.length?" \xb7 ".concat(o.length," review").concat(o.length>1?"s":""):""]})}),!i&&(0,Mv.jsx)(ub,{courseId:t,courseTitle:n,onSubmitted:()=>{}}),(0,Mv.jsx)("div",{className:"course-reviews-list",children:(0,Mv.jsx)(lb,{reviews:o,loading:l,error:c,currentUserId:null===s||void 0===s?void 0:s.uid,isCurrentUserAdmin:a,onAdminDelete:d})})]})},hb=()=>{const{courseId:e}=pe(),t=me(),{user:n}=zv(),[s,i]=(0,r.useState)(!1),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),{hasAccess:h,enrollment:f,loading:m,error:p,processEnrollment:g,clearError:v}=Zy(e),{stats:y,loading:b}=Hy(e,!0),w=fy(e),x=(0,r.useCallback)(async e=>{try{const t=await g(e);t.success&&(o(e),c(t),i(!0),d(!1))}catch($b){console.error("Enrollment processing failed:",$b),alert("Enrollment failed: ".concat($b.message,". Please contact support with your payment details.")),d(!1)}},[g]),E=(0,r.useCallback)(e=>{console.error("Payment error:",e),alert("Payment failed. Please try again or contact support."),d(!1)},[]),S=(0,r.useCallback)(e=>{d(!1)},[]),N=(0,r.useCallback)(()=>{i(!1),t("/dashboard")},[t]),k=(0,r.useCallback)(()=>{t("/courses")},[t]),_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"N/A";return!my(w)||"TBD"!==e&&"N/A"!==e&&null!==e&&0!==e?e||t:"Coming Soon"},C=b?w.students||0:y.enrollmentCount,T=my(w);if(!w)return(0,Mv.jsx)("div",{className:"course-detail-container",children:(0,Mv.jsx)("div",{className:"course-detail-header",children:(0,Mv.jsx)("div",{className:"course-hero",children:(0,Mv.jsxs)("div",{className:"course-hero-content",children:[(0,Mv.jsx)("div",{className:"course-icon-large",children:"\u2753"}),(0,Mv.jsxs)("div",{className:"course-info",children:[(0,Mv.jsx)("h1",{className:"course-detail-title",children:"Course Not Found"}),(0,Mv.jsx)("p",{className:"course-detail-description",children:"The course you're looking for doesn't exist or has been removed."})]})]})})})});const I=vy(w),A=!I;return(0,Mv.jsxs)(Mv.Fragment,{children:[(0,Mv.jsxs)("div",{className:"course-detail-container",children:[(0,Mv.jsxs)("div",{className:"course-detail-header",style:{backgroundImage:w.image?"url(".concat(w.image,")"):"none"},children:[(0,Mv.jsx)("div",{className:"course-detail-header-overlay"}),(0,Mv.jsxs)("div",{className:"course-detail-header-content",children:[(0,Mv.jsx)("button",{className:"btn btn-secondary btn-small back-btn",onClick:k,children:"\u2190 Back to Courses"}),(0,Mv.jsxs)("div",{className:"course-hero",children:[(0,Mv.jsxs)("div",{className:"course-hero-content",children:[(0,Mv.jsx)("div",{className:"course-icon-large",children:_(w.icon,"\ud83d\udcda")}),(0,Mv.jsxs)("div",{className:"course-info",children:[(0,Mv.jsx)("h1",{className:"course-detail-title",children:_(w.title)}),(0,Mv.jsx)("p",{className:"course-detail-description",children:_(w.description)}),(0,Mv.jsxs)("div",{className:"course-meta-detail",children:[(0,Mv.jsx)("span",{className:"course-level-detail",children:_(w.level)}),(0,Mv.jsxs)("span",{className:"course-duration-detail",children:["\u23f1\ufe0f ",_(w.duration)]}),(0,Mv.jsxs)("span",{className:"course-enrollment-detail",children:["\ud83d\udc65 ",T?"Coming Soon":"".concat(C,"/").concat(_(w.maxCapacity)," seats")]}),(0,Mv.jsx)("div",{className:"course-rating-detail",children:T?(0,Mv.jsx)("span",{children:"\u2b50 Coming Soon"}):(0,Mv.jsx)(Wy,{rating:b?w.rating:y.hasReviews?y.averageRating:w.rating,reviewCount:b?0:y.reviewCount,showReviewCount:!b&&y.hasReviews,size:"small",showNumeric:!0})})]})]})]}),(0,Mv.jsxs)("div",{className:"course-enrollment",children:[(0,Mv.jsxs)("div",{className:"course-price-detail",children:[w.originalPrice&&!T&&(0,Mv.jsxs)("span",{className:"original-price-detail",children:["$",w.originalPrice]}),(0,Mv.jsx)("span",{className:"current-price-detail",children:T?"Price TBD":w.price?"$".concat(w.price):"Price N/A"})]}),m&&(0,Mv.jsx)("div",{className:"enrollment-loading",children:(0,Mv.jsx)("p",{children:"Checking enrollment status..."})}),p&&(0,Mv.jsxs)("div",{className:"enrollment-error",children:[(0,Mv.jsx)("p",{className:"course-detail-error-text",children:p}),(0,Mv.jsx)("button",{className:"btn btn-secondary course-detail-access-button",onClick:v,children:"Retry"})]}),!m&&!u&&(0,Mv.jsx)(Mv.Fragment,{children:h?(0,Mv.jsxs)("div",{className:"enrollment-success",children:[(0,Mv.jsxs)("div",{className:"course-detail-enrollment-success",children:[(0,Mv.jsx)("p",{className:"course-detail-success-title",children:"\u2705 You're enrolled!"}),f&&(0,Mv.jsxs)("p",{className:"course-detail-success-text",children:["Progress: ",f.progress||0,"%"]})]}),(0,Mv.jsx)("button",{className:"btn enroll-btn-detail",onClick:()=>t("/dashboard"),children:"Go to Dashboard"})]}):(0,Mv.jsx)("button",{className:"btn enroll-btn-detail ".concat(A?"full":""," ").concat(T?"coming-soon":""),onClick:()=>{if(!n)return void t("/login");if(v(),my(w))return void alert("This course is still in planning phase. Please check back for updates!");vy(w)?h?t("/dashboard"):d(!0):alert("No available batches for enrollment at this time. Please check back later or contact us for more information.")},disabled:A||T,children:T?"Coming Soon":A?"No Available Batches":n?"Enroll Now":"Login to Enroll"})}),u&&(0,Mv.jsxs)("div",{className:"enrollment-options",children:[(0,Mv.jsx)("button",{className:"back-to-enroll-btn",onClick:()=>d(!1),children:"\u2190 Back to Course Details"}),(0,Mv.jsx)(tb,{courseId:w.id,courseTitle:w.title,coursePrice:w.price,onSuccess:x,onError:E,onCancel:S,disabled:A||T||!w.price})]}),!A&&!T&&I&&I.maxCapacity&&(()=>{const e=I.maxCapacity-(I.enrollmentCount||0);return e<=5&&e>0&&(0,Mv.jsxs)("div",{className:"seats-warning",children:["\u26a0\ufe0f Only ",e," seats remaining in next batch!"]})})(),(()=>{const e=vy(w);return e&&!T&&(0,Mv.jsxs)("div",{className:"next-batch-info",children:[(0,Mv.jsx)("span",{className:"next-batch-label",children:"Next Batch Starts:"}),(0,Mv.jsx)("span",{className:"next-batch-date",children:new Date(e.startDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})})()]})]})]})]}),(0,Mv.jsxs)("div",{className:"course-content",children:[(0,Mv.jsxs)("div",{className:"course-main",children:[(0,Mv.jsxs)("section",{className:"course-section",children:[(0,Mv.jsx)("h2",{children:"What You'll Learn"}),w.outcomes&&w.outcomes.length>0?(0,Mv.jsx)("ul",{className:"outcomes-list",children:w.outcomes.map((e,t)=>(0,Mv.jsx)("li",{children:e},t))}):(0,Mv.jsx)("div",{className:"na-message",children:(0,Mv.jsx)("p",{children:"Learning outcomes information is not available at this time."})})]}),(0,Mv.jsxs)("section",{className:"course-section",children:[(0,Mv.jsx)("h2",{children:"Course Content"}),w.curriculum&&w.curriculum.length>0?(0,Mv.jsx)("div",{className:"curriculum-list",children:w.curriculum.map((e,t)=>(0,Mv.jsxs)("div",{className:"curriculum-item",children:[(0,Mv.jsx)("div",{className:"section-header",children:(0,Mv.jsx)("h3",{children:e.section})}),e.topics&&e.topics.length>0&&(0,Mv.jsx)("ul",{className:"topics-list",children:e.topics.map((e,t)=>(0,Mv.jsx)("li",{className:"topic-item",children:e},t))})]},t))}):(0,Mv.jsxs)("div",{className:"na-message",children:[(0,Mv.jsx)("p",{children:"Detailed curriculum information is not available at this time."}),(0,Mv.jsx)("p",{children:"Course details coming soon"})]})]})]}),(0,Mv.jsxs)("div",{className:"course-sidebar",children:[(0,Mv.jsxs)("section",{className:"course-section",children:[(0,Mv.jsx)("h3",{children:"Prerequisites"}),w.prerequisites&&w.prerequisites.length>0?(0,Mv.jsx)("ul",{className:"prerequisites-list",children:w.prerequisites.map((e,t)=>(0,Mv.jsx)("li",{children:e},t))}):(0,Mv.jsx)("div",{className:"na-message",children:(0,Mv.jsx)("p",{children:"No specific prerequisites listed."})})]}),(0,Mv.jsxs)("section",{className:"course-section",children:[(0,Mv.jsx)("h3",{children:"Course Information"}),(0,Mv.jsxs)("div",{className:"course-additional-info",children:[(0,Mv.jsxs)("div",{className:"info-item",children:[(0,Mv.jsx)("strong",{children:"Category:"})," ",_(w.category)]}),(0,Mv.jsxs)("div",{className:"info-item",children:[(0,Mv.jsx)("strong",{children:"Level:"})," ",_(w.level)]}),(0,Mv.jsxs)("div",{className:"info-item",children:[(0,Mv.jsx)("strong",{children:"Duration:"})," ",_(w.duration)]}),(0,Mv.jsxs)("div",{className:"info-item",children:[(0,Mv.jsx)("strong",{children:"Total Lessons:"})," ",_(w.lessons)]}),(0,Mv.jsxs)("div",{className:"info-item",children:[(0,Mv.jsx)("strong",{children:"Available Seats:"})," ",T?"Coming Soon":"".concat(C,"/").concat(_(w.maxCapacity))]}),(0,Mv.jsxs)("div",{className:"info-item",children:[(0,Mv.jsx)("strong",{children:"Next Batch:"})," ",(()=>{const e=vy(w);return e?new Date(e.startDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"})()]})]})]}),(0,Mv.jsx)(db,{courseId:w.id,courseTitle:w.title})]})]}),(0,Mv.jsx)(rb,{course:w})]}),(0,Mv.jsx)(nb,{isOpen:s,onClose:()=>i(!1),paymentData:a,enrollmentResult:l,onGoToDashboard:N})]})},fb=()=>{const e=me(),{allEnrollments:t,loading:n,error:r}=Zy(),s=t.map(e=>{var t,n;const r=fy(e.courseId);return u({id:e.courseId,title:e.courseTitle||(null===r||void 0===r?void 0:r.title)||"Unknown Course",progress:e.progress||0,status:e.status||"enrolled",enrolledDate:(null===(t=e.enrolledAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date(e.enrolledAt)||new Date},r)});return(0,Mv.jsxs)("div",{className:"dashboard-container",children:[(0,Mv.jsxs)("div",{className:"dashboard-header",children:[(0,Mv.jsx)("h1",{children:"My Dashboard"}),(0,Mv.jsx)("p",{children:"Welcome back! Here are your enrolled courses."})]}),(0,Mv.jsxs)("div",{className:"dashboard-content",children:[(0,Mv.jsxs)("section",{className:"enrolled-courses",children:[(0,Mv.jsx)("h2",{children:"My Courses"}),n&&(0,Mv.jsx)("div",{className:"dashboard-loading-state",children:(0,Mv.jsx)("p",{children:"Loading your courses..."})}),r&&(0,Mv.jsx)("div",{className:"dashboard-error-state",children:(0,Mv.jsxs)("p",{className:"dashboard-error-text",children:["Error loading courses: ",r]})}),!n&&!r&&s.length>0?(0,Mv.jsx)("div",{className:"courses-grid",children:s.map(t=>(0,Mv.jsxs)("div",{className:"course-dashboard-card",children:[(0,Mv.jsxs)("div",{className:"course-header",children:[(0,Mv.jsx)("h3",{children:t.title}),(0,Mv.jsx)("span",{className:"course-status",children:t.status})]}),(0,Mv.jsxs)("div",{className:"course-progress",children:[(0,Mv.jsx)("div",{className:"progress-bar",children:(0,Mv.jsx)("div",{className:"progress-fill",style:{width:"".concat(t.progress,"%")}})}),(0,Mv.jsxs)("span",{className:"progress-text",children:[t.progress,"% Complete"]})]}),(0,Mv.jsx)("div",{className:"course-actions",children:(0,Mv.jsx)("button",{className:"btn",onClick:()=>e("/courses/".concat(t.id)),children:(t.progress,"Course Material")})}),(0,Mv.jsx)("div",{className:"enrollment-info",children:(0,Mv.jsxs)("small",{children:["Enrolled: ",t.enrolledDate.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})})]},t.id))}):!n&&!r&&(0,Mv.jsxs)("div",{className:"no-courses",children:[(0,Mv.jsx)("div",{className:"no-courses-icon",children:"\ud83d\udcda"}),(0,Mv.jsx)("h3",{children:"No courses enrolled yet"}),(0,Mv.jsx)("p",{children:"Start your learning journey by enrolling in one of our courses!"}),(0,Mv.jsx)("button",{className:"btn",onClick:()=>e("/courses"),children:"Browse Courses"})]})]}),(0,Mv.jsxs)("section",{className:"quick-actions",children:[(0,Mv.jsx)("h2",{children:"Quick Actions"}),(0,Mv.jsxs)("div",{className:"actions-grid",children:[(0,Mv.jsxs)("div",{className:"action-card",children:[(0,Mv.jsx)("div",{className:"action-icon",children:"\ud83d\udcd6"}),(0,Mv.jsx)("h4",{children:"Browse Courses"}),(0,Mv.jsx)("p",{children:"Discover new courses to expand your skills"}),(0,Mv.jsx)("button",{className:"btn btn-secondary",onClick:()=>e("/courses"),children:"View All Courses"})]}),(0,Mv.jsxs)("div",{className:"action-card",children:[(0,Mv.jsx)("div",{className:"action-icon",children:"\ud83d\udcac"}),(0,Mv.jsx)("h4",{children:"Get Support"}),(0,Mv.jsx)("p",{children:"Need help? Contact our support team"}),(0,Mv.jsx)("button",{className:"btn btn-secondary",onClick:()=>e("/contact"),children:"Contact Support"})]})]})]})]})]})};const mb=function(){const[e,t]=(0,r.useState)({name:"",email:"",phone:"",message:""}),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(null),[o,l]=(0,r.useState)({}),[c,d]=(0,r.useState)({}),h=(e,t)=>{const n=u({},o);switch(e){case"name":t.trim()?t.trim().length<2?n.name="Name must be at least 2 characters":delete n.name:n.name="Name is required";break;case"email":const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;t.trim()?e.test(t)?delete n.email:n.email="Please enter a valid email address":n.email="Email is required";break;case"phone":if(t&&t.length>0){/^[+]?[\d\s\-()]+$/.test(t)?delete n.phone:n.phone="Please enter a valid phone number"}else delete n.phone;break;case"message":t.trim()?t.trim().length<10?n.message="Message must be at least 10 characters":delete n.message:n.message="Message is required"}return l(n),0===Object.keys(n).length},f=e=>{const{name:n,value:r}=e.target;t(e=>u(u({},e),{},{[n]:r})),c[n]&&h(n,r),i&&a(null)},m=e=>{const{name:t,value:n}=e.target;d(e=>u(u({},e),{},{[t]:!0})),h(t,n)};return(0,Mv.jsx)("div",{className:"contact-page-container",children:(0,Mv.jsxs)("div",{className:"contact-card",children:[(0,Mv.jsxs)("div",{className:"contact-header",children:[(0,Mv.jsx)("h1",{className:"contact-title",children:"Contact Us"}),(0,Mv.jsx)("p",{className:"contact-subtitle",children:"Have questions or suggestions? We'd love to hear from you!"})]}),(0,Mv.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),d({name:!0,email:!0,phone:!0,message:!0}),(()=>{const t=["name","email","message"].every(t=>(h(t,e[t]),!o[t]));return e.phone&&h("phone",e.phone),t&&0===Object.keys(o).length})()){s(!0),a(null);try{const n="xkgbylng";if(!n)throw new Error("Contact form not configured");const r=await fetch("https://formspree.io/f/".concat(n),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:e.name,email:e.email,phone:e.phone,message:e.message,_subject:"New contact form submission from ".concat(e.name)})});if(r.ok)a("success"),t({name:"",email:"",phone:"",message:""}),l({}),d({});else{const e=await r.text();console.error("Formspree error:",e),a("error")}}catch($b){console.error("Form submission error:",$b),a("error")}finally{s(!1)}}else a("validation")},className:"contact-form",children:["validation"===i&&(0,Mv.jsx)("div",{className:"form-message error",children:(0,Mv.jsx)("p",{children:"\u274c Please fix the errors below and try again."})}),"success"===i&&(0,Mv.jsx)("div",{className:"form-message success",children:(0,Mv.jsx)("p",{children:"\u2705 Thank you for your message! We'll get back to you within 24 hours."})}),"error"===i&&(0,Mv.jsxs)("div",{className:"form-message error",children:[(0,Mv.jsx)("p",{children:"\u274c Sorry, there was an error sending your message."}),(0,Mv.jsxs)("p",{className:"contact-form-note",children:["Please try again or email us directly at"," ",(0,Mv.jsx)("a",{href:"mailto:".concat("admin@tuneparams.ai"),className:"contact-form-link",children:"admin@tuneparams.ai"})]})]}),(0,Mv.jsxs)("div",{className:"form-field",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Name"}),(0,Mv.jsx)("input",{type:"text",name:"name",value:e.name,onChange:f,onBlur:m,placeholder:"Your full name",required:!0,className:"form-input ".concat(o.name?"error":"")}),o.name&&(0,Mv.jsx)("span",{className:"field-error",children:o.name})]}),(0,Mv.jsxs)("div",{className:"form-field",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Email Address"}),(0,Mv.jsx)("input",{type:"email",name:"email",value:e.email,onChange:f,onBlur:m,placeholder:"Your email address",required:!0,className:"form-input ".concat(o.email?"error":"")}),o.email&&(0,Mv.jsx)("span",{className:"field-error",children:o.email})]}),(0,Mv.jsxs)("div",{className:"form-field",children:[(0,Mv.jsxs)("label",{className:"form-label",children:["Phone Number ",(0,Mv.jsx)("span",{className:"optional-text",children:"(optional)"})]}),(0,Mv.jsx)("input",{type:"tel",name:"phone",value:e.phone,onChange:f,onBlur:m,placeholder:"Your phone number",className:"form-input ".concat(o.phone?"error":"")}),o.phone&&(0,Mv.jsx)("span",{className:"field-error",children:o.phone})]}),(0,Mv.jsxs)("div",{className:"form-field",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Message"}),(0,Mv.jsx)("textarea",{name:"message",value:e.message,onChange:f,onBlur:m,placeholder:"Tell us about your question or feedback...",rows:"5",required:!0,className:"form-textarea ".concat(o.message?"error":"")}),o.message&&(0,Mv.jsx)("span",{className:"field-error",children:o.message}),(0,Mv.jsxs)("div",{className:"character-count",children:[e.message.length,"/500 characters"]})]}),(0,Mv.jsx)("button",{type:"submit",className:"btn",disabled:n,children:n?"Sending...":"Send Message"})]}),(0,Mv.jsxs)("div",{className:"alternative-contact",children:[(0,Mv.jsx)("p",{children:"Having trouble with the form? You can also reach us directly:"}),(0,Mv.jsx)("a",{href:"mailto:".concat("admin@tuneparams.ai","?subject=Contact Form Inquiry&body=Hello TuneParams.ai team,%0D%0A%0D%0AI would like to inquire about..."),className:"btn",children:"\ud83d\udce7 Send Email Directly"})]}),(0,Mv.jsxs)("div",{className:"contact-info",children:[(0,Mv.jsxs)("div",{className:"contact-grid",children:[(0,Mv.jsxs)("div",{className:"contact-item",children:[(0,Mv.jsx)("div",{className:"contact-item-icon",children:"\ud83d\udce7"}),(0,Mv.jsx)("div",{className:"contact-item-title",children:"Email"}),(0,Mv.jsx)("div",{className:"contact-item-text",children:"admin@tuneparams.ai"})]}),(0,Mv.jsxs)("div",{className:"contact-item",children:[(0,Mv.jsx)("div",{className:"contact-item-icon",children:"\ud83d\udd52"}),(0,Mv.jsx)("div",{className:"contact-item-title",children:"Response Time"}),(0,Mv.jsx)("div",{className:"contact-item-text",children:"Within 24 hours"})]})]}),(0,Mv.jsxs)("div",{className:"social-section",children:[(0,Mv.jsx)("p",{children:"Follow us on social media"}),(0,Mv.jsxs)("div",{className:"social-buttons",children:[(0,Mv.jsx)("a",{href:"https://linkedin.com/company/tuneparams",target:"_blank",rel:"noopener noreferrer",className:"social-btn linkedin",children:"LinkedIn"}),(0,Mv.jsx)("a",{href:"https://twitter.com/tuneparams",target:"_blank",rel:"noopener noreferrer",className:"social-btn twitter",children:"Twitter"}),(0,Mv.jsx)("a",{href:"https://github.com/TuneParams-ai",target:"_blank",rel:"noopener noreferrer",className:"social-btn github",children:"GitHub"})]})]})]})]})})},pb=()=>(0,Mv.jsx)("div",{className:"about-page-container",children:(0,Mv.jsxs)("div",{className:"about-card metallic-border metallic-glow",children:[(0,Mv.jsxs)("header",{className:"about-header",children:[(0,Mv.jsx)("h1",{className:"about-title",children:"\ud83d\udc4b About Us"}),(0,Mv.jsxs)("p",{className:"about-subtitle",children:["Hello! from ",(0,Mv.jsx)("span",{className:"metallic-text",children:"TuneParams"})]})]}),(0,Mv.jsxs)("section",{className:"about-section",children:[(0,Mv.jsx)("p",{children:"We\u2019re a small, passionate team with diverse backgrounds, united by a shared mission: to make a positive societal impact through Artificial Intelligence starting with accessible, practical, and impactful AI courses for learners from all walks of life."}),(0,Mv.jsx)("p",{children:"Our instructors hold PhD in Machine Learning from top-tier universities, with over 8 years of experience in AI/ML and 2 years building state-of-the-art models in industry. They have worked on the cutting edge applications and now, they are here to guide you from foundational concepts to advanced mastery."}),(0,Mv.jsxs)("p",{className:"about-highlight metallic-border",children:["At ",(0,Mv.jsx)("strong",{children:"TuneParams.ai"}),", we don\u2019t just teach you. We prepare you to become an AI expert - confident, capable, and ready to thrive in the era of AI."]})]})]})}),gb=()=>{const[e,t]=(0,r.useState)({email:"",password:""}),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),{signInWithEmail:m,signInWithGoogle:p,resendVerificationEmail:g}=zv(),v=me(),y=de(),[b]=xt();(0,r.useEffect)(()=>{var e;const t=b.get("message"),n=b.get("verified"),r=b.get("emailVerified"),s=null===(e=y.state)||void 0===e?void 0:e.from;s&&"/login"!==s.pathname?d("Please log in to access this page."):"verify-email"===t?d("Registration successful! Please check your email and click the verification link before signing in."):"true"!==n&&"true"!==r||d("Email verified successfully! You can now sign in.")},[b,y]);const w=e=>{const{name:n,value:r}=e.target;t(e=>u(u({},e),{},{[n]:r})),o&&l(""),h&&f(!1)};return(0,Mv.jsx)("div",{className:"login-page-container",children:(0,Mv.jsxs)("div",{className:"login-card",children:[(0,Mv.jsxs)("div",{className:"login-header",children:[(0,Mv.jsx)("h1",{className:"login-title",children:"Welcome Back"}),(0,Mv.jsx)("p",{className:"login-subtitle",children:"Sign in to your account"})]}),o&&(0,Mv.jsx)("div",{className:"login-error-message",children:o}),c&&(0,Mv.jsx)("div",{className:"login-success-message",children:c}),(0,Mv.jsxs)("button",{type:"button",onClick:async()=>{a(!0),l(""),d("");const e=await p();if(e.success){var t,n;const e=(null===(t=y.state)||void 0===t||null===(n=t.from)||void 0===n?void 0:n.pathname)||"/dashboard";v(e)}else l(e.error);a(!1)},disabled:i,className:"google-sign-in-button",children:[(0,Mv.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[(0,Mv.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Mv.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Mv.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Mv.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),i?"Signing in...":"Continue with Google"]}),(0,Mv.jsxs)("div",{className:"divider-container",children:[(0,Mv.jsx)("hr",{className:"divider-line"}),(0,Mv.jsx)("span",{className:"divider-text",children:"or"}),(0,Mv.jsx)("hr",{className:"divider-line"})]}),(0,Mv.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a(!0),l(""),d("");const n=await m(e.email,e.password);if(n.success){var r,s;const e=(null===(r=y.state)||void 0===r||null===(s=r.from)||void 0===s?void 0:s.pathname)||"/dashboard";v(e)}else l(n.error),n.requiresVerification?(f(!0),d("Need to resend verification email? Use the 'Resend Verification' button below.")):f(!1);a(!1)},className:"login-form",children:[(0,Mv.jsxs)("div",{className:"form-field",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Email Address"}),(0,Mv.jsx)("input",{type:"email",name:"email",value:e.email,onChange:w,placeholder:"Enter your email",required:!0,className:"form-input"})]}),(0,Mv.jsxs)("div",{className:"form-field",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Password"}),(0,Mv.jsxs)("div",{className:"password-field-container",children:[(0,Mv.jsx)("input",{type:n?"text":"password",name:"password",value:e.password,onChange:w,placeholder:"Enter your password",required:!0,className:"form-input"}),(0,Mv.jsx)("button",{type:"button",onClick:()=>s(!n),className:"password-toggle-button",children:n?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]})]}),(0,Mv.jsx)("div",{className:"forgot-password-container",children:(0,Mv.jsx)(vt,{to:"/forgot-password",className:"forgot-password-link",children:"Forgot your password?"})}),(0,Mv.jsx)("button",{type:"submit",className:"btn",disabled:i,children:i?"Signing in...":"Sign In"}),h&&(0,Mv.jsx)("button",{type:"button",onClick:async()=>{if(!e.email||!e.password)return void l("Please enter both email and password to resend verification.");a(!0),l(""),d("Sending verification email...");const t=await g(e.email,e.password);t.success?(d(t.message),f(!1)):(l(t.error),d("")),a(!1)},disabled:i,className:"btn btn-secondary",style:{marginTop:"15px",backgroundColor:"#6c757d",border:"none"},children:i?"Sending...":"Resend Verification Email"})]}),(0,Mv.jsx)("div",{className:"login-footer",children:(0,Mv.jsxs)("p",{className:"footer-text",children:["Don't have an account?"," ",(0,Mv.jsx)(vt,{to:"/register",className:"footer-link",children:"Sign up"})]})})]})})},vb=()=>{const[e,t]=(0,r.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),{registerWithEmail:h,signInWithGoogle:f}=zv(),m=me(),p=e=>{const{name:n,value:r}=e.target;t(e=>u(u({},e),{},{[n]:r})),c&&d("")};return(0,Mv.jsx)("div",{className:"register-page-container",children:(0,Mv.jsxs)("div",{className:"register-card",children:[(0,Mv.jsxs)("div",{className:"register-header",children:[(0,Mv.jsx)("h1",{className:"register-title",children:"Create Account"}),(0,Mv.jsx)("p",{className:"register-subtitle",children:"Join our learning platform"})]}),c&&(0,Mv.jsx)("div",{className:"register-error-message",children:c}),(0,Mv.jsxs)("button",{type:"button",onClick:async()=>{l(!0),d("");const e=await f();e.success?m("/dashboard"):d(e.error),l(!1)},disabled:o,className:"register-google-button",children:[(0,Mv.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[(0,Mv.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Mv.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Mv.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Mv.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),o?"Signing up...":"Continue with Google"]}),(0,Mv.jsxs)("div",{className:"register-divider-container",children:[(0,Mv.jsx)("hr",{className:"register-divider-line"}),(0,Mv.jsx)("span",{className:"register-divider-text",children:"or"}),(0,Mv.jsx)("hr",{className:"register-divider-line"})]}),(0,Mv.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e.password!==e.confirmPassword)return void d("Passwords don't match!");if(e.password.length<6)return void d("Password must be at least 6 characters long!");l(!0),d("");const n=await h(e.email,e.password,e.firstName,e.lastName);n.success?n.requiresVerification?(d(""),alert(n.message||"Registration successful! Please check your email and verify your account before signing in."),m("/login?message=verify-email")):m("/dashboard"):d(n.error),l(!1)},className:"register-form",children:[(0,Mv.jsxs)("div",{className:"name-fields-row",children:[(0,Mv.jsxs)("div",{className:"form-field-half",children:[(0,Mv.jsx)("label",{className:"form-label",children:"First Name"}),(0,Mv.jsx)("input",{type:"text",name:"firstName",value:e.firstName,onChange:p,placeholder:"First name",required:!0,className:"form-input"})]}),(0,Mv.jsxs)("div",{className:"form-field-half",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Last Name"}),(0,Mv.jsx)("input",{type:"text",name:"lastName",value:e.lastName,onChange:p,placeholder:"Last name",required:!0,className:"form-input"})]})]}),(0,Mv.jsxs)("div",{className:"form-field",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Email Address"}),(0,Mv.jsx)("input",{type:"email",name:"email",value:e.email,onChange:p,placeholder:"Enter your email",required:!0,className:"form-input"})]}),(0,Mv.jsxs)("div",{className:"form-field",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Password"}),(0,Mv.jsxs)("div",{className:"password-field-container",children:[(0,Mv.jsx)("input",{type:n?"text":"password",name:"password",value:e.password,onChange:p,placeholder:"Create a password",required:!0,className:"form-input"}),(0,Mv.jsx)("button",{type:"button",onClick:()=>s(!n),className:"password-toggle-button",children:n?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]})]}),(0,Mv.jsxs)("div",{className:"form-field",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Confirm Password"}),(0,Mv.jsxs)("div",{className:"password-field-container",children:[(0,Mv.jsx)("input",{type:i?"text":"password",name:"confirmPassword",value:e.confirmPassword,onChange:p,placeholder:"Confirm your password",required:!0,className:"form-input"}),(0,Mv.jsx)("button",{type:"button",onClick:()=>a(!i),className:"password-toggle-button",children:i?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]})]}),(0,Mv.jsx)("button",{type:"submit",className:"btn",disabled:o,children:o?"Creating account...":"Create Account"})]}),(0,Mv.jsx)("div",{className:"register-footer",children:(0,Mv.jsxs)("p",{className:"footer-text",children:["Already have an account?"," ",(0,Mv.jsx)(vt,{to:"/login",className:"footer-link",children:"Sign in"})]})})]})})},yb=()=>{const[e]=xt(),t=me(),{verifyEmail:n}=zv(),[s,i]=(0,r.useState)("verifying"),[a,o]=(0,r.useState)("Verifying your email...");return(0,r.useEffect)(()=>{(async()=>{const r=e.get("mode"),s=e.get("oobCode");if("verifyEmail"===r&&s)try{const e=await n(s);e.success?(i("success"),o("Email verified successfully! You can now sign in."),setTimeout(()=>{t("/login?verified=true")},3e3)):(i("error"),o(e.error||"Email verification failed."))}catch($b){i("error"),o("Email verification failed. Please try again.")}else i("error"),o("Invalid verification link.")})()},[e,n,t]),(0,Mv.jsx)("div",{className:"verify-email-container",children:(0,Mv.jsxs)("div",{className:"verify-email-card",children:[(0,Mv.jsx)("div",{className:"verify-email-header",children:(0,Mv.jsx)("h2",{children:"Email Verification"})}),(0,Mv.jsxs)("div",{className:"verify-email-content",children:["verifying"===s&&(0,Mv.jsxs)("div",{className:"verification-status",children:[(0,Mv.jsx)("div",{className:"loading-spinner"}),(0,Mv.jsx)("p",{children:a})]}),"success"===s&&(0,Mv.jsxs)("div",{className:"verification-status success",children:[(0,Mv.jsx)("div",{className:"success-icon",children:"\u2705"}),(0,Mv.jsx)("p",{children:a}),(0,Mv.jsx)("p",{className:"redirect-message",children:"Redirecting to login..."})]}),"error"===s&&(0,Mv.jsxs)("div",{className:"verification-status error",children:[(0,Mv.jsx)("div",{className:"error-icon",children:"\u274c"}),(0,Mv.jsx)("p",{children:a}),(0,Mv.jsx)("button",{className:"btn btn-primary",onClick:()=>t("/login"),children:"Go to Login"})]})]})]})})},bb=()=>{const[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),{sendPasswordReset:d}=zv(),[h]=xt();(0,r.useEffect)(()=>{"true"===h.get("passwordReset")&&l("Password reset successful! You can now sign in with your new password.")},[h]);return(0,Mv.jsx)("div",{className:"forgot-password-page-container",children:(0,Mv.jsxs)("div",{className:"forgot-password-card",children:[(0,Mv.jsxs)("div",{className:"forgot-password-header",children:[(0,Mv.jsx)("h1",{className:"forgot-password-title",children:"Reset Your Password"}),(0,Mv.jsx)("p",{className:"forgot-password-subtitle",children:c?"Check your email for reset instructions":"Enter your email address and we'll send you instructions to reset your password"})]}),i&&(0,Mv.jsx)("div",{className:"forgot-password-error-message",children:i}),o&&(0,Mv.jsx)("div",{className:"forgot-password-success-message",children:o}),c?(0,Mv.jsxs)("div",{className:"email-sent-container",children:[(0,Mv.jsxs)("div",{className:"forgot-password-success-container",children:[(0,Mv.jsx)("div",{className:"forgot-password-success-icon",children:"\ud83d\udce7"}),(0,Mv.jsx)("h3",{className:"forgot-password-success-title",children:"Email Sent!"}),(0,Mv.jsxs)("p",{className:"forgot-password-success-text",children:["We've sent password reset instructions to ",(0,Mv.jsx)("strong",{children:e})]}),(0,Mv.jsx)("p",{className:"forgot-password-success-note",children:"Don't see the email? Check your spam folder or try again."})]}),(0,Mv.jsx)("button",{onClick:()=>{u(!1),l(""),a("")},className:"btn btn-secondary forgot-password-back-button",children:"Send Another Email"})]}):(0,Mv.jsxs)(Mv.Fragment,{children:[(0,Mv.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!e.trim())return void a("Please enter your email address.");s(!0),a(""),l("");const n=await d(e);n.success?(l(n.message),u(!0)):a(n.error),s(!1)},className:"forgot-password-form",children:[(0,Mv.jsxs)("div",{className:"form-field",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Email Address"}),(0,Mv.jsx)("input",{type:"email",value:e,onChange:e=>{t(e.target.value),i&&a("")},placeholder:"Enter your email address",required:!0,className:"form-input"})]}),(0,Mv.jsx)("button",{type:"submit",className:"btn",disabled:n,children:n?"Sending...":"Send Reset Email"})]}),(0,Mv.jsxs)("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"15px",marginTop:"20px",fontSize:"0.9rem",color:"var(--text-color)"},children:[(0,Mv.jsx)("strong",{children:"\ud83d\udcdd Note:"})," Password reset works even if your email is not verified. After resetting your password, you'll also be able to verify your email if needed."]})]}),(0,Mv.jsxs)("div",{className:"forgot-password-footer",children:[(0,Mv.jsxs)("p",{className:"footer-text",children:["Remember your password?"," ",(0,Mv.jsx)(vt,{to:"/login",className:"footer-link",children:"Back to Sign In"})]}),(0,Mv.jsxs)("p",{className:"footer-text",children:["Don't have an account?"," ",(0,Mv.jsx)(vt,{to:"/register",className:"footer-link",children:"Sign up"})]})]})]})})},wb=()=>{const{user:e}=zv(),[t,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(new Map),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(""),[f,m]=(0,r.useState)(Cy.STUDENT),[p,g]=(0,r.useState)("");(0,r.useEffect)(()=>{v()},[]);const v=async()=>{o(!0),c(null);try{const e=await(async()=>{try{const e=Gg(rg(Pv,"users"),Jg("createdAt","desc"));return{success:!0,users:(await hv(e)).docs.map(e=>u({id:e.id},e.data()))}}catch(l){return console.error("Error getting all users:",l),{success:!1,error:l.message,users:[]}}})();if(e.success){n(e.users);const t=e.users.map(async e=>{const t=await Dy(e.id);return[e.id,t.role]}),r=await Promise.all(t),s=new Map(r);i(s)}else c(e.error),await y()}catch(e){c(e.message),console.error("Error loading users:",e),await y()}finally{o(!1)}},y=async()=>{try{const[e,t]=await Promise.all([hv(Gg(rg(Pv,"enrollments"))),hv(Gg(rg(Pv,"payments")))]),r=new Map;e.docs.forEach(e=>{const t=e.data();t.userId&&r.set(t.userId,{id:t.userId,uid:t.userId,displayName:t.userId,email:null,source:"enrollment"})}),t.docs.forEach(e=>{const t=e.data();if(t.userId){const e=r.get(t.userId);r.set(t.userId,{id:t.userId,uid:t.userId,displayName:t.payerEmail||(null===e||void 0===e?void 0:e.displayName)||t.userId,email:t.payerEmail,source:e?"both":"payment"})}});const s=Array.from(r.values());n(s);const a=s.map(async e=>{const t=await Dy(e.id);return[e.id,t.role]}),o=await Promise.all(a),l=new Map(o);i(l)}catch(e){c(e.message),console.error("Error loading users from transactions:",e)}};return(0,Mv.jsxs)("div",{className:"admin-role-manager",children:[(0,Mv.jsx)("h3",{children:"\ud83d\udc51 Role Management"}),a&&(0,Mv.jsx)("p",{children:"Loading users..."}),l&&(0,Mv.jsxs)("p",{className:"admin-role-error",children:["\u274c ",l]}),p&&(0,Mv.jsxs)("p",{className:"admin-role-success",children:["\u2705 ",p]}),(0,Mv.jsxs)("div",{className:"admin-role-form",children:[(0,Mv.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"admin-role-select",children:[(0,Mv.jsx)("option",{value:"",children:"Select User"}),t.map(e=>(0,Mv.jsxs)("option",{value:e.id||e.uid,children:[e.displayName||e.email," ",e.email?"(".concat(e.email,")"):"",s.get(e.id||e.uid)?" - Current: ".concat(s.get(e.id||e.uid)):""]},e.id||e.uid))]}),(0,Mv.jsxs)("select",{value:f,onChange:e=>m(e.target.value),className:"admin-role-select",children:[(0,Mv.jsx)("option",{value:Cy.STUDENT,children:"Student"}),(0,Mv.jsx)("option",{value:Cy.INSTRUCTOR,children:"Instructor"}),(0,Mv.jsx)("option",{value:Cy.ADMIN,children:"Admin"})]}),(0,Mv.jsx)("button",{onClick:async()=>{if(d&&f){o(!0),c(null),g(null);try{const t=await(async(e,t,n)=>{try{if(!Pv)throw new Error("Firestore not initialized");if(!Object.values(Cy).includes(t))throw new Error("Invalid role: ".concat(t));const r={userId:e,role:t,permissions:Ry[t]||[],assignedBy:n,assignedAt:wv(),updatedAt:wv(),isActive:!0},s=sg(Pv,"user_roles",e);await fv(s,r);const i=sg(Pv,"users",e);return await fv(i,{role:t,updatedAt:wv()},{merge:!0}),console.log("Role ".concat(t," assigned to user ").concat(e," in both collections")),{success:!0,role:r}}catch(l){return console.error("Error assigning user role:",l),{success:!1,error:l.message}}})(d,f,e.uid);if(t.success){const t=await Dy(d);i(e=>new Map(e).set(d,t.role)),await async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{const s={action:e,targetUserId:t,performedBy:n,details:r,timestamp:wv(),ipAddress:null};await gv(rg(Pv,"role_audit_log"),s)}catch(l){console.error("Error logging role action:",l)}}("assign_role",d,e.uid,{newRole:f,timestamp:(new Date).toISOString()}),g("Successfully assigned ".concat(f," role to user")),h(""),m(Cy.STUDENT)}else c("Error: ".concat(t.error))}catch(t){c("Error assigning role: ".concat(t.message)),console.error("Error assigning role:",t)}finally{o(!1)}}else c("Please select both a user and a role")},disabled:!d||!f||a,className:"admin-role-button ".concat(d&&f&&!a?"":"loading"),children:a?"Assigning...":"Assign Role"}),(0,Mv.jsx)("button",{onClick:async()=>{o(!0),c(null),g(null);try{const e=await hv(rg(Pv,"user_roles"));let t=0;const n=e.docs.map(async e=>{const n=e.data(),r=e.id,s=sg(Pv,"users",r);return await fv(s,{role:n.role,updatedAt:wv()},{merge:!0}),t++,{userId:r,role:n.role}});await Promise.all(n),g("Successfully synced ".concat(t," user roles between collections")),await v()}catch(e){c("Error syncing user roles: ".concat(e.message)),console.error("Error syncing user roles:",e)}finally{o(!1)}},disabled:a,className:"admin-role-button sync-button ".concat(a?"loading":""),title:"Sync roles from user_roles collection to users collection",children:a?"Syncing...":"\ud83d\udd04 Sync All Roles"})]}),"            ",t.length>0&&(0,Mv.jsxs)("div",{className:"admin-current-roles",children:[(0,Mv.jsx)("h4",{children:"Current User Roles:"}),(0,Mv.jsx)("div",{className:"admin-roles-list",children:t.map(e=>(0,Mv.jsxs)("div",{className:"admin-role-user-item",children:[(0,Mv.jsxs)("div",{className:"admin-role-user-info",children:[(0,Mv.jsx)("div",{className:"admin-role-user-name",children:e.displayName||e.email}),e.email&&(0,Mv.jsxs)("div",{className:"admin-role-user-email",children:["(",e.email,")"]}),(0,Mv.jsxs)("div",{className:"admin-role-user-id",children:["ID: ",e.id||e.uid]})]}),(0,Mv.jsx)("div",{className:"admin-role-badge ".concat((s.get(e.id||e.uid)||"student").toLowerCase()),children:s.get(e.id||e.uid)||"student"})]},e.id||e.uid))})]}),(0,Mv.jsxs)("div",{className:"admin-setup-note",children:[(0,Mv.jsx)("strong",{children:"\u26a0\ufe0f Quick Setup:"}),(0,Mv.jsx)("br",{}),"To make yourself an admin immediately:",(0,Mv.jsx)("br",{}),"1. Ensure you have an account and have logged in at least once",(0,Mv.jsx)("br",{}),"2. Use the Firestore console to manually add your role",(0,Mv.jsx)("br",{}),"3. Or run the setup script below to create your admin role"]})]})},xb=()=>{const[e,t]=(0,r.useState)({totalPayments:0,totalEnrollments:0,totalUsers:0,totalRevenue:0}),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(null),o=async()=>{s(!0),a(null);try{const[e,n,r]=await Promise.all([hv(Gg(rg(Pv,"payments"))),hv(Gg(rg(Pv,"enrollments"))),hv(Gg(rg(Pv,"users")))]);let s=0;e.docs.forEach(e=>{const t=e.data();t.amount&&"number"===typeof t.amount&&(s+=t.amount)}),t({totalPayments:e.size,totalEnrollments:n.size,totalUsers:r.size,totalRevenue:s})}catch(e){a(e.message)}finally{s(!1)}};return(0,r.useEffect)(()=>{o()},[]),(0,Mv.jsxs)("div",{children:[(0,Mv.jsxs)("div",{className:"admin-section-header",children:[(0,Mv.jsx)("h2",{children:"\ud83d\udcca Dashboard Overview"}),(0,Mv.jsx)("button",{onClick:o,className:"admin-refresh-button",disabled:n,children:n?"Loading...":"\ud83d\udd04 Refresh"})]}),i&&(0,Mv.jsxs)("p",{className:"admin-error",children:["Error: ",i]}),(0,Mv.jsxs)("div",{className:"admin-stats-grid",children:[(0,Mv.jsxs)("div",{className:"admin-stat-card",children:[(0,Mv.jsx)("div",{className:"admin-stat-icon",children:"\ud83d\udcb3"}),(0,Mv.jsxs)("div",{className:"admin-stat-content",children:[(0,Mv.jsx)("h3",{children:"Total Payments"}),(0,Mv.jsx)("p",{className:"admin-stat-number",children:e.totalPayments})]})]}),(0,Mv.jsxs)("div",{className:"admin-stat-card",children:[(0,Mv.jsx)("div",{className:"admin-stat-icon",children:"\ud83d\udcda"}),(0,Mv.jsxs)("div",{className:"admin-stat-content",children:[(0,Mv.jsx)("h3",{children:"Total Enrollments"}),(0,Mv.jsx)("p",{className:"admin-stat-number",children:e.totalEnrollments})]})]}),(0,Mv.jsxs)("div",{className:"admin-stat-card",children:[(0,Mv.jsx)("div",{className:"admin-stat-icon",children:"\ud83d\udc65"}),(0,Mv.jsxs)("div",{className:"admin-stat-content",children:[(0,Mv.jsx)("h3",{children:"Total Users"}),(0,Mv.jsx)("p",{className:"admin-stat-number",children:e.totalUsers})]})]}),(0,Mv.jsxs)("div",{className:"admin-stat-card",children:[(0,Mv.jsx)("div",{className:"admin-stat-icon",children:"\ud83d\udcb0"}),(0,Mv.jsxs)("div",{className:"admin-stat-content",children:[(0,Mv.jsx)("h3",{children:"Total Revenue"}),(0,Mv.jsxs)("p",{className:"admin-stat-number",children:["$",e.totalRevenue]})]})]})]}),(0,Mv.jsx)("div",{className:"admin-overview-actions",children:(0,Mv.jsxs)("div",{className:"admin-action-card",children:[(0,Mv.jsx)("h3",{children:"\ud83c\udfaf Quick Actions"}),(0,Mv.jsxs)("ul",{children:[(0,Mv.jsx)("li",{children:"View detailed payment records in the Payments tab"}),(0,Mv.jsx)("li",{children:"Manage user enrollments in the Enrollments tab"}),(0,Mv.jsx)("li",{children:"Assign user roles in the Role Management section"}),(0,Mv.jsx)("li",{children:"Test system functionality using admin tools"})]})]})})]})},Eb=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(null),o=async()=>{s(!0),a(null);try{const e=Gg(rg(Pv,"payments"),Jg("createdAt","desc")),n=(await hv(e)).docs.map(e=>u({id:e.id},e.data()));t(n)}catch(e){a(e.message)}finally{s(!1)}};return(0,r.useEffect)(()=>{o()},[]),(0,Mv.jsxs)("div",{children:[(0,Mv.jsxs)("div",{className:"admin-section-header",children:[(0,Mv.jsxs)("h2",{children:["Payment Records (",e.length,")"]}),(0,Mv.jsx)("button",{onClick:o,className:"admin-refresh-button",disabled:n,children:n?"Loading...":"\ud83d\udd04 Refresh"})]}),i&&(0,Mv.jsxs)("p",{className:"admin-error",children:["Error: ",i]}),(0,Mv.jsx)("div",{className:"admin-table-container",children:(0,Mv.jsxs)("table",{className:"admin-table",children:[(0,Mv.jsx)("thead",{children:(0,Mv.jsxs)("tr",{children:[(0,Mv.jsx)("th",{children:"Date"}),(0,Mv.jsx)("th",{children:"Course"}),(0,Mv.jsx)("th",{children:"User Email"}),(0,Mv.jsx)("th",{children:"Amount"}),(0,Mv.jsx)("th",{children:"Payment ID"}),(0,Mv.jsx)("th",{children:"Status"})]})}),(0,Mv.jsx)("tbody",{children:e.map(e=>{var t,n,r;return(0,Mv.jsxs)("tr",{children:[(0,Mv.jsx)("td",{children:(null===(t=e.paymentDate)||void 0===t||null===(n=t.toDate)||void 0===n||null===(r=n.call(t))||void 0===r?void 0:r.toLocaleDateString())||"N/A"}),(0,Mv.jsx)("td",{children:e.courseTitle}),(0,Mv.jsx)("td",{children:e.userEmail||e.payerEmail}),(0,Mv.jsxs)("td",{children:["$",e.amount]}),(0,Mv.jsx)("td",{className:"payment-id",children:e.paymentId}),(0,Mv.jsx)("td",{children:(0,Mv.jsx)("span",{className:"status-".concat(e.status),children:e.status})})]},e.id)})})]})}),0===e.length&&!n&&(0,Mv.jsx)("div",{className:"admin-empty-state",children:(0,Mv.jsx)("p",{children:"No payment records found."})})]})},Sb=e=>{let{isOpen:t,onClose:n,onSuccess:s}=e;const{user:i}=zv(),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[x,E]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&S()},[t]);const S=async()=>{E(!0);try{const e=Gg(rg(Pv,"users")),t=(await hv(e)).docs.map(e=>u({id:e.id},e.data()));o(t)}catch(e){console.error("Error loading users:",e),w("Failed to load users")}finally{E(!1)}},N=()=>{c(""),h(""),m(""),g(""),w(null)},k=()=>{N(),n()},_=hy.find(e=>e.id===d),C=(null===_||void 0===_?void 0:_.batches)||[],T=_?vy(_):null;return t?(0,Mv.jsx)("div",{className:"modal-overlay",children:(0,Mv.jsxs)("div",{className:"modal-content manual-enrollment-modal",children:[(0,Mv.jsxs)("div",{className:"modal-header",children:[(0,Mv.jsx)("h2",{children:"Manual User Enrollment"}),(0,Mv.jsx)("button",{className:"modal-close-btn",onClick:k,children:"\xd7"})]}),(0,Mv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l&&d){y(!0),w(null);try{const e=await async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";try{if(!Pv)throw new Error("Firestore not initialized");const a=fy(t);if(!a)throw new Error("Course not found: ".concat(t));let o;var i;if(r){if(o=null===(i=a.batches)||void 0===i?void 0:i.find(e=>e.batchNumber===r),!o)throw new Error("Batch ".concat(r," not found for course ").concat(t))}else if(o=vy(a),!o)throw new Error("No available batches for enrollment");const l="".concat(e,"_").concat(t,"_batch").concat(o.batchNumber),c=sg(Pv,"enrollments",l);if((await uv(c)).exists())throw new Error("User is already enrolled in ".concat(a.title," - Batch ").concat(o.batchNumber));const u={userId:e,courseId:t,courseTitle:a.title,batchNumber:o.batchNumber,batchStartDate:o.startDate,batchEndDate:o.endDate,batchStatus:o.status,status:"enrolled",progress:0,enrollmentType:"manual",manualEnrollmentBy:n,manualEnrollmentNotes:s,amountPaid:0,enrolledAt:wv(),lastAccessed:null,completedAt:null,paymentMethod:"manual",enrollmentSource:"admin_manual"};return await fv(c,u),console.log("Manual enrollment created:",l),{success:!0,enrollmentId:l,batchNumber:o.batchNumber,batchInfo:{startDate:o.startDate,endDate:o.endDate,status:o.status,batchName:o.batchName}}}catch(b){return console.error("Error in manual enrollment:",b),{success:!1,error:b.message}}}(l,d,i.uid,f?parseInt(f):null,p);e.success?(null===s||void 0===s||s(e),N(),n()):w(e.error)}catch(t){w(t.message)}finally{y(!1)}}else w("Please select both user and course")},children:[(0,Mv.jsxs)("div",{className:"modal-body",children:[b&&(0,Mv.jsx)("div",{className:"error-message",children:b}),(0,Mv.jsxs)("div",{className:"form-group",children:[(0,Mv.jsx)("label",{htmlFor:"user-select",children:"Select User *"}),x?(0,Mv.jsx)("div",{className:"loading-indicator",children:"Loading users..."}):(0,Mv.jsxs)("select",{id:"user-select",value:l,onChange:e=>c(e.target.value),required:!0,children:[(0,Mv.jsx)("option",{value:"",children:"-- Select User --"}),a.map(e=>(0,Mv.jsxs)("option",{value:e.id,children:[e.displayName||e.email," (",e.email,")"]},e.id))]})]}),(0,Mv.jsxs)("div",{className:"form-group",children:[(0,Mv.jsx)("label",{htmlFor:"course-select",children:"Select Course *"}),(0,Mv.jsxs)("select",{id:"course-select",value:d,onChange:e=>{h(e.target.value),m("")},required:!0,children:[(0,Mv.jsx)("option",{value:"",children:"-- Select Course --"}),hy.map(e=>(0,Mv.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),_&&(0,Mv.jsxs)("div",{className:"form-group",children:[(0,Mv.jsx)("label",{htmlFor:"batch-select",children:"Select Batch"}),(0,Mv.jsxs)("select",{id:"batch-select",value:f,onChange:e=>m(e.target.value),children:[(0,Mv.jsxs)("option",{value:"",children:["Auto-assign to next available batch",T&&" (".concat(wy(T),")")]}),C.map(e=>(0,Mv.jsxs)("option",{value:e.batchNumber,children:[wy(e)," - ",e.status]},e.batchNumber))]})]}),(0,Mv.jsxs)("div",{className:"form-group",children:[(0,Mv.jsx)("label",{htmlFor:"notes",children:"Notes (Optional)"}),(0,Mv.jsx)("textarea",{id:"notes",value:p,onChange:e=>g(e.target.value),placeholder:"Add any notes about this manual enrollment...",rows:3})]}),_&&(0,Mv.jsxs)("div",{className:"course-info",children:[(0,Mv.jsx)("h4",{children:"Course Information"}),(0,Mv.jsxs)("p",{children:[(0,Mv.jsx)("strong",{children:"Title:"})," ",_.title]}),(0,Mv.jsxs)("p",{children:[(0,Mv.jsx)("strong",{children:"Duration:"})," ",_.duration]}),(0,Mv.jsxs)("p",{children:[(0,Mv.jsx)("strong",{children:"Level:"})," ",_.level]}),T&&(0,Mv.jsxs)("p",{children:[(0,Mv.jsx)("strong",{children:"Next Available Batch:"})," ",wy(T)]})]})]}),(0,Mv.jsxs)("div",{className:"modal-footer",children:[(0,Mv.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:k,disabled:v,children:"Cancel"}),(0,Mv.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:v||!l||!d,children:v?"Enrolling...":"Enroll User"})]})]})]})}):null},Nb=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(null),[o,l]=(0,r.useState)("all"),[c,d]=(0,r.useState)("all"),[h,f]=(0,r.useState)(!1),m=async()=>{s(!0),a(null);try{const e=Gg(rg(Pv,"enrollments"),Jg("enrolledAt","desc")),n=(await hv(e)).docs.map(e=>u({id:e.id},e.data()));t(n)}catch(e){a(e.message)}finally{s(!1)}};(0,r.useEffect)(()=>{m()},[]);const p=e.filter(e=>{var t;const n="all"===o||(null===(t=e.batchNumber)||void 0===t?void 0:t.toString())===o,r="all"===c||e.courseId===c;return n&&r}),g=[...new Set(e.map(e=>e.courseId))].filter(Boolean),v=[...new Set(e.map(e=>e.batchNumber))].filter(Boolean).sort((e,t)=>e-t),y={};return p.forEach(e=>{const t="".concat(e.courseId,"_batch").concat(e.batchNumber||"legacy");if(!y[t]){let n=e.batchNumber||"Legacy";if(e.batchNumber){const t=fy(e.courseId);if(t){const r=py(t,e.batchNumber);n=r?xy(r):"Batch ".concat(e.batchNumber)}}y[t]={courseId:e.courseId,courseTitle:e.courseTitle,batchNumber:e.batchNumber||"Legacy",batchDisplayName:n,count:0,totalRevenue:0}}y[t].count++,y[t].totalRevenue+=e.amountPaid||0}),(0,Mv.jsxs)("div",{children:[(0,Mv.jsxs)("div",{className:"admin-section-header",children:[(0,Mv.jsxs)("h2",{children:["Course Enrollments (",p.length,")"]}),(0,Mv.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,Mv.jsx)("button",{onClick:()=>f(!0),className:"admin-add-button",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"\u2795 Manual Enroll"}),(0,Mv.jsx)("button",{onClick:m,className:"admin-refresh-button",disabled:n,children:n?"Loading...":"\ud83d\udd04 Refresh"})]})]}),i&&(0,Mv.jsxs)("p",{className:"admin-error",children:["Error: ",i]}),(0,Mv.jsx)("div",{className:"admin-filters",children:(0,Mv.jsxs)("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:[(0,Mv.jsxs)("div",{children:[(0,Mv.jsx)("label",{htmlFor:"course-filter",children:"Filter by Course:"}),(0,Mv.jsxs)("select",{id:"course-filter",value:c,onChange:e=>d(e.target.value),children:[(0,Mv.jsx)("option",{value:"all",children:"All Courses"}),g.map(e=>(0,Mv.jsx)("option",{value:e,children:e},e))]})]}),(0,Mv.jsxs)("div",{children:[(0,Mv.jsx)("label",{htmlFor:"batch-filter",children:"Filter by Batch:"}),(0,Mv.jsxs)("select",{id:"batch-filter",value:o,onChange:e=>l(e.target.value),children:[(0,Mv.jsx)("option",{value:"all",children:"All Batches"}),v.map(e=>(0,Mv.jsxs)("option",{value:e.toString(),children:["Batch ",e]},e))]})]})]})}),Object.keys(y).length>0&&(0,Mv.jsxs)("div",{className:"batch-summary",style:{marginBottom:"30px"},children:[(0,Mv.jsx)("h3",{children:"Batch Summary"}),(0,Mv.jsx)("div",{className:"admin-table-container",children:(0,Mv.jsxs)("table",{className:"admin-table",children:[(0,Mv.jsx)("thead",{children:(0,Mv.jsxs)("tr",{children:[(0,Mv.jsx)("th",{children:"Course"}),(0,Mv.jsx)("th",{children:"Batch"}),(0,Mv.jsx)("th",{children:"Enrollments"}),(0,Mv.jsx)("th",{children:"Total Revenue"})]})}),(0,Mv.jsx)("tbody",{children:Object.values(y).map((e,t)=>(0,Mv.jsxs)("tr",{children:[(0,Mv.jsx)("td",{children:e.courseTitle||e.courseId}),(0,Mv.jsx)("td",{children:(0,Mv.jsx)("span",{className:"batch-badge batch-".concat(e.batchNumber),title:"Batch ".concat(e.batchNumber),children:e.batchDisplayName})}),(0,Mv.jsx)("td",{children:e.count}),(0,Mv.jsxs)("td",{children:["$",e.totalRevenue.toFixed(2)]})]},t))})]})})]}),(0,Mv.jsx)("h3",{children:"Detailed Enrollments"}),(0,Mv.jsx)("div",{className:"admin-table-container",children:(0,Mv.jsxs)("table",{className:"admin-table",children:[(0,Mv.jsx)("thead",{children:(0,Mv.jsxs)("tr",{children:[(0,Mv.jsx)("th",{children:"Enrolled Date"}),(0,Mv.jsx)("th",{children:"Course"}),(0,Mv.jsx)("th",{children:"Batch"}),(0,Mv.jsx)("th",{children:"User ID"}),(0,Mv.jsx)("th",{children:"Progress"}),(0,Mv.jsx)("th",{children:"Status"}),(0,Mv.jsx)("th",{children:"Amount Paid"})]})}),(0,Mv.jsx)("tbody",{children:p.map(e=>{var t,n,r;return(0,Mv.jsxs)("tr",{children:[(0,Mv.jsx)("td",{children:(null===(t=e.enrolledAt)||void 0===t||null===(n=t.toDate)||void 0===n||null===(r=n.call(t))||void 0===r?void 0:r.toLocaleDateString())||"N/A"}),(0,Mv.jsx)("td",{children:(0,Mv.jsxs)("div",{children:[(0,Mv.jsx)("strong",{children:e.courseTitle}),(0,Mv.jsx)("br",{}),(0,Mv.jsxs)("small",{style:{color:"#666"},children:["(",e.courseId,")"]})]})}),(0,Mv.jsx)("td",{children:(0,Mv.jsx)("span",{className:"batch-badge batch-".concat(e.batchNumber||"legacy"),children:(()=>{if(!e.batchNumber)return"Legacy";const t=fy(e.courseId);if(t){const n=py(t,e.batchNumber);if(n)return xy(n)}return"Batch ".concat(e.batchNumber)})()})}),(0,Mv.jsx)("td",{className:"user-id",children:e.userId}),(0,Mv.jsx)("td",{children:(0,Mv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Mv.jsx)("div",{style:{width:"60px",height:"8px",backgroundColor:"rgba(29, 126, 153, 0.2)",borderRadius:"4px",overflow:"hidden"},children:(0,Mv.jsx)("div",{style:{width:"".concat(e.progress||0,"%"),height:"100%",backgroundColor:e.progress>=100?"#4caf50":e.progress>=50?"#ff9800":"#2196f3",transition:"width 0.3s ease"}})}),(0,Mv.jsxs)("span",{children:[e.progress||0,"%"]})]})}),(0,Mv.jsx)("td",{children:(0,Mv.jsx)("span",{className:"status-".concat(e.status),children:e.status})}),(0,Mv.jsxs)("td",{children:["$",e.amountPaid]})]},e.id)})})]})}),0===p.length&&!n&&(0,Mv.jsx)("div",{className:"admin-empty-state",children:(0,Mv.jsx)("p",{children:"No enrollment records found for the selected filters."})}),(0,Mv.jsx)("style",{jsx:!0,children:"\n                .batch-badge {\n                    display: inline-block;\n                    padding: 4px 8px;\n                    border-radius: 12px;\n                    font-size: 12px;\n                    font-weight: bold;\n                    text-align: center;\n                    min-width: 60px;\n                }\n                \n                .batch-1 {\n                    background-color: rgba(59, 130, 246, 0.2);\n                    color: #60a5fa;\n                    border: 1px solid rgba(59, 130, 246, 0.3);\n                }\n                \n                .batch-2 {\n                    background-color: rgba(168, 85, 247, 0.2);\n                    color: #c084fc;\n                    border: 1px solid rgba(168, 85, 247, 0.3);\n                }\n                \n                .batch-3 {\n                    background-color: rgba(34, 197, 94, 0.2);\n                    color: #4ade80;\n                    border: 1px solid rgba(34, 197, 94, 0.3);\n                }\n                \n                .batch-legacy {\n                    background-color: rgba(107, 114, 128, 0.2);\n                    color: var(--secondary-text-color);\n                    border: 1px solid rgba(107, 114, 128, 0.3);\n                }\n                \n                .admin-filters {\n                    border: 1px solid rgba(29, 126, 153, 0.2);\n                }\n                \n                .batch-summary {\n                    border-top: 2px solid var(--primary-color);\n                    padding-top: 20px;\n                }\n                \n                .batch-summary h3 {\n                    margin-bottom: 15px;\n                    color: #333;\n                }\n            "}),(0,Mv.jsx)(Sb,{isOpen:h,onClose:()=>f(!1),onSuccess:e=>{m(),console.log("Manual enrollment successful:",e)}})]})},kb=e=>{let{emails:t,formatDate:n}=e;const[s,i]=r.useState(null);return(0,Mv.jsx)("div",{className:"email-table-container",children:(0,Mv.jsx)("div",{style:{overflowX:"auto"},children:(0,Mv.jsxs)("table",{className:"email-table",children:[(0,Mv.jsx)("thead",{className:"email-table-header",children:(0,Mv.jsxs)("tr",{children:[(0,Mv.jsx)("th",{className:"email-table-header-cell",children:"\ud83d\udcc5 Date"}),(0,Mv.jsx)("th",{className:"email-table-header-cell",children:"\ud83d\udc64 Recipient"}),(0,Mv.jsx)("th",{className:"email-table-header-cell",children:"\ud83d\udce7 Type"}),(0,Mv.jsx)("th",{className:"email-table-header-cell",children:"\ud83d\udcda Course"}),(0,Mv.jsx)("th",{className:"email-table-header-cell",children:"\u2705 Status"}),(0,Mv.jsx)("th",{className:"email-table-header-cell",children:"\ud83d\udcb3 Payment ID"}),(0,Mv.jsx)("th",{className:"email-table-header-cell-center",children:"\u2699\ufe0f Actions"})]})}),(0,Mv.jsx)("tbody",{children:0===t.length?(0,Mv.jsx)("tr",{children:(0,Mv.jsx)("td",{colSpan:"7",className:"table-empty-state",children:(0,Mv.jsxs)("div",{className:"table-empty-content",children:[(0,Mv.jsx)("div",{className:"table-empty-icon",children:"\ud83d\udce7"}),(0,Mv.jsx)("h3",{className:"table-empty-title",children:"No emails to display"}),(0,Mv.jsx)("p",{className:"table-empty-text",children:"Emails will appear here once they are sent through the system."})]})})}):t.map((e,t)=>{var a;return(0,Mv.jsxs)(r.Fragment,{children:[(0,Mv.jsxs)("tr",{className:"email-table-row ".concat(t%2===0?"even":"odd"),children:[(0,Mv.jsx)("td",{className:"email-table-cell",children:(0,Mv.jsx)("div",{className:"cell-date",children:n(e.sentAt)})}),(0,Mv.jsx)("td",{className:"email-table-cell",children:(0,Mv.jsxs)("div",{className:"cell-recipient",children:[(0,Mv.jsx)("div",{className:"recipient-name",children:e.recipientName||"N/A"}),(0,Mv.jsx)("div",{className:"recipient-email",children:e.recipientEmail})]})}),(0,Mv.jsx)("td",{className:"email-table-cell",children:(0,Mv.jsx)("span",{className:"email-type-badge ".concat("enrollment_confirmation"===e.emailType?"enrollment":"other"),children:null===(a=e.emailType)||void 0===a?void 0:a.replace("_"," ")})}),(0,Mv.jsx)("td",{className:"email-table-cell",children:(0,Mv.jsxs)("div",{className:"cell-course",children:[(0,Mv.jsx)("div",{className:"course-title",children:e.courseTitle||"N/A"}),e.amount&&(0,Mv.jsxs)("div",{className:"course-amount",children:["$",e.amount]})]})}),(0,Mv.jsx)("td",{className:"email-table-cell",children:(0,Mv.jsxs)("div",{className:"cell-status",children:[(0,Mv.jsx)("span",{className:"status-badge ".concat("sent"===e.status?"success":"error"),children:e.status}),e.errorMessage&&(0,Mv.jsx)("div",{className:"error-message",children:e.errorMessage})]})}),(0,Mv.jsx)("td",{className:"email-table-cell payment-id-cell",children:(0,Mv.jsx)("div",{className:"payment-id",children:e.paymentId?e.paymentId.substring(0,12)+"...":"N/A"})}),(0,Mv.jsx)("td",{className:"email-table-cell actions-cell",children:(0,Mv.jsx)("button",{onClick:()=>{return t=e.id,void i(s===t?null:t);var t},className:"action-button ".concat(s===e.id?"hide":"view"),children:s===e.id?"\ud83d\ude48 Hide":"\ud83d\udc41\ufe0f View"})})]}),s===e.id&&(0,Mv.jsx)("tr",{children:(0,Mv.jsx)("td",{colSpan:"7",className:"email-details-section",children:(0,Mv.jsxs)("div",{className:"email-details-content",children:[(0,Mv.jsx)("h4",{className:"email-details-title",children:"\ud83d\udccb Email Details"}),(0,Mv.jsxs)("div",{className:"email-details-grid",children:[(0,Mv.jsxs)("div",{className:"email-detail-card",children:[(0,Mv.jsx)("div",{className:"detail-label",children:"\ud83d\udce7 Subject"}),(0,Mv.jsx)("div",{className:"detail-value",children:e.subject||"N/A"})]}),(0,Mv.jsxs)("div",{className:"email-detail-card",children:[(0,Mv.jsx)("div",{className:"detail-label",children:"\ud83d\uded2 Order ID"}),(0,Mv.jsx)("div",{className:"detail-value detail-code",children:e.orderId||"N/A"})]}),(0,Mv.jsxs)("div",{className:"email-detail-card",children:[(0,Mv.jsx)("div",{className:"detail-label",children:"\ud83c\udf93 Enrollment ID"}),(0,Mv.jsx)("div",{className:"detail-value detail-code",children:e.enrollmentId||"N/A"})]}),(0,Mv.jsxs)("div",{className:"email-detail-card",children:[(0,Mv.jsx)("div",{className:"detail-label",children:"\ud83d\udd27 Service Response"}),(0,Mv.jsx)("div",{className:"detail-value detail-small",children:e.emailServiceResponse||"N/A"})]})]}),e.rawTextContent&&(0,Mv.jsx)("div",{className:"email-content-section",children:(0,Mv.jsxs)("div",{className:"email-detail-card",children:[(0,Mv.jsx)("div",{className:"email-content-header",children:"\ud83d\udcdd Email Content"}),(0,Mv.jsx)("div",{className:"email-content-viewer",children:(0,Mv.jsx)("pre",{className:"email-content-pre",children:e.rawTextContent})})]})})]})})})]},e.id)})})]})})})},_b=()=>{const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)("overview"),[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[m,p]=(0,r.useState)("enrollment_confirmation");(0,r.useEffect)(()=>{g()},[]);const g=async()=>{a(!0);try{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(!Pv)return{success:!1,error:"Firestore not initialized"};let t=rg(Pv,"emails_sent");const n=[];e.courseId&&n.push(Qg("courseId","==",e.courseId)),e.emailType&&n.push(Qg("emailType","==",e.emailType)),e.status&&n.push(Qg("status","==",e.status)),n.length>0&&(t=Gg(t,...n));const r=await hv(t);let s=0,i=0,a=0;const o={},l={};return r.forEach(e=>{const t=e.data();s++,"sent"===t.status?i++:"failed"===t.status&&a++;const n=t.emailType||"unknown";if(o[n]=(o[n]||0)+1,t.courseId&&t.courseTitle){const e="".concat(t.courseId,"_").concat(t.courseTitle);l[e]=(l[e]||0)+1}}),{success:!0,statistics:{totalEmails:s,sentSuccessfully:i,failed:a,successRate:s>0?(i/s*100).toFixed(2):0,emailTypes:o,courses:l}}}catch($b){return console.error("Error getting email statistics:",$b),{success:!1,error:$b.message}}}();e.success&&t(e.statistics)}catch($b){console.error("Error loading email statistics:",$b)}finally{a(!1)}},v=e=>{if(!e)return"N/A";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return i&&!e?(0,Mv.jsxs)("div",{className:"loading-container",children:[(0,Mv.jsx)("div",{className:"loading-spinner"}),(0,Mv.jsx)("p",{className:"loading-text",children:"Loading email tracking data..."})]}):(0,Mv.jsx)("div",{className:"email-tracking-container",children:(0,Mv.jsxs)("div",{className:"email-tracking-card",children:[(0,Mv.jsx)("h2",{className:"email-tracking-title",children:"\ud83d\udce7 Email Tracking Dashboard"}),(0,Mv.jsx)("div",{className:"tab-navigation",children:[{key:"overview",label:"Overview",icon:"\ud83d\udcca"},{key:"search",label:"Search Emails",icon:"\ud83d\udd0d"},{key:"by-type",label:"By Type",icon:"\ud83d\udcdd"}].map(e=>(0,Mv.jsxs)("button",{onClick:()=>l(e.key),className:"tab-button ".concat(o===e.key?"active":""),children:[(0,Mv.jsx)("span",{children:e.icon}),e.label]},e.key))}),"overview"===o&&e&&(0,Mv.jsxs)("div",{children:[(0,Mv.jsx)("div",{className:"stats-grid",children:[{title:"Total Emails",value:e.totalEmails,color:"#667eea",icon:"\ud83d\udce7"},{title:"Sent Successfully",value:e.sentSuccessfully,color:"#10b981",icon:"\u2705"},{title:"Failed",value:e.failed,color:"#ef4444",icon:"\u274c"},{title:"Success Rate",value:"".concat(e.successRate,"%"),color:"#06b6d4",icon:"\ud83d\udcca"}].map((e,t)=>(0,Mv.jsxs)("div",{className:"stat-card",children:[(0,Mv.jsx)("div",{className:"stat-icon",children:e.icon}),(0,Mv.jsx)("h3",{className:"stat-title",children:e.title}),(0,Mv.jsx)("p",{className:"stat-value",style:{color:e.color},children:e.value})]},t))}),(0,Mv.jsxs)("div",{className:"overview-grid",children:[(0,Mv.jsxs)("div",{className:"overview-card",children:[(0,Mv.jsx)("h3",{className:"overview-card-title",children:"\ud83d\udce7 Email Types"}),Object.entries(e.emailTypes).map(e=>{let[t,n]=e;return(0,Mv.jsxs)("div",{className:"overview-list-item",children:[(0,Mv.jsx)("span",{className:"overview-item-label",children:t.replace("_"," ").toUpperCase()}),(0,Mv.jsx)("div",{className:"overview-badge primary",children:n})]},t)})]}),(0,Mv.jsxs)("div",{className:"overview-card",children:[(0,Mv.jsx)("h3",{className:"overview-card-title",children:"\ud83d\udcda Course Emails"}),Object.entries(e.courses).map(e=>{let[t,n]=e;const r=t.split("_").slice(1).join("_");return(0,Mv.jsxs)("div",{className:"overview-list-item",children:[(0,Mv.jsx)("span",{className:"overview-item-label overview-item-truncate",children:r}),(0,Mv.jsx)("div",{className:"overview-badge success",children:n})]},t)})]})]})]}),"search"===o&&(0,Mv.jsxs)("div",{children:[(0,Mv.jsxs)("div",{className:"search-section",children:[(0,Mv.jsx)("h3",{className:"search-title",children:"\ud83d\udce7 Search by Email Address"}),(0,Mv.jsxs)("div",{className:"search-form",children:[(0,Mv.jsxs)("div",{className:"form-group",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Email Address"}),(0,Mv.jsx)("input",{type:"email",placeholder:"Enter email address to search...",value:c,onChange:e=>d(e.target.value),className:"form-input"})]}),(0,Mv.jsx)("button",{onClick:async()=>{if(c.trim()){a(!0);try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{if(!Pv)return{success:!1,error:"Firestore not initialized"};const n=Gg(rg(Pv,"emails_sent"),Qg("recipientEmail","==",e),Jg("sentAt","desc"),Zg(t)),r=await hv(n),s=[];return r.forEach(e=>{s.push(u({id:e.id},e.data()))}),{success:!0,emails:s}}catch($b){return console.error("Error getting emails by recipient:",$b),{success:!1,error:$b.message,emails:[]}}}(c.trim());e.success&&s(e.emails)}catch($b){console.error("Error searching emails:",$b)}finally{a(!1)}}},disabled:i,className:"search-button primary",children:i?"Searching...":"\ud83d\udd0d Search by Email"})]})]}),(0,Mv.jsxs)("div",{className:"search-section",children:[(0,Mv.jsx)("h3",{className:"search-title",children:"\ud83d\udd0d General Search"}),(0,Mv.jsxs)("div",{className:"search-form",children:[(0,Mv.jsxs)("div",{className:"form-group",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Search Term"}),(0,Mv.jsx)("input",{type:"text",placeholder:"Search by name, course, payment ID, etc...",value:h,onChange:e=>f(e.target.value),className:"form-input general-search-input"})]}),(0,Mv.jsx)("button",{onClick:async()=>{if(h.trim()){a(!0);try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{if(!Pv)return{success:!1,error:"Firestore not initialized"};if(!e||!e.trim())return{success:!1,error:"Search term is required",emails:[]};const n=e.trim().toLowerCase(),r=Gg(rg(Pv,"emails_sent"),Jg("sentAt","desc"),Zg(1e3)),s=await hv(r),i=[];s.forEach(e=>{i.push(u({id:e.id},e.data()))});return{success:!0,emails:i.filter(e=>[e.recipientEmail,e.recipientName,e.courseTitle,e.paymentId,e.orderId,e.subject,e.emailType].some(e=>e&&e.toLowerCase().includes(n))).slice(0,t)}}catch($b){return console.error("Error searching emails:",$b),{success:!1,error:$b.message,emails:[]}}}(h.trim());e.success&&s(e.emails)}catch($b){console.error("Error performing general search:",$b)}finally{a(!1)}}},disabled:i,className:"search-button success",children:i?"Searching...":"\ud83d\udd0d General Search"})]})]}),n.length>0?(0,Mv.jsxs)("div",{children:[(0,Mv.jsxs)("h3",{className:"search-results-title",children:["\ud83c\udfaf Search Results (",n.length,")"]}),(0,Mv.jsx)(kb,{emails:n,formatDate:v})]}):c.trim()||h.trim()?(0,Mv.jsxs)("div",{className:"empty-state",children:[(0,Mv.jsx)("div",{className:"empty-state-icon",children:"\ud83d\udd0d"}),(0,Mv.jsx)("h3",{className:"empty-state-title",children:"No emails found"}),(0,Mv.jsx)("p",{className:"empty-state-text",children:"Try adjusting your search terms or check if the email address is correct."})]}):null]}),"by-type"===o&&(0,Mv.jsxs)("div",{children:[(0,Mv.jsxs)("div",{className:"search-section",children:[(0,Mv.jsx)("h3",{className:"search-title",children:"\ud83d\udcdd Filter by Email Type"}),(0,Mv.jsxs)("div",{className:"search-form",children:[(0,Mv.jsxs)("div",{className:"form-group-small",children:[(0,Mv.jsx)("label",{className:"form-label",children:"Email Type"}),(0,Mv.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"form-select",children:[(0,Mv.jsx)("option",{value:"enrollment_confirmation",children:"\ud83d\udce7 Enrollment Confirmation"}),(0,Mv.jsx)("option",{value:"course_reminder",children:"\u23f0 Course Reminder"}),(0,Mv.jsx)("option",{value:"payment_receipt",children:"\ud83e\uddfe Payment Receipt"})]})]}),(0,Mv.jsx)("button",{onClick:async()=>{a(!0);try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{if(!Pv)return{success:!1,error:"Firestore not initialized"};const n=Gg(rg(Pv,"emails_sent"),Qg("emailType","==",e),Jg("sentAt","desc"),Zg(t)),r=await hv(n),s=[];return r.forEach(e=>{s.push(u({id:e.id},e.data()))}),{success:!0,emails:s}}catch($b){return console.error("Error getting emails by type:",$b),{success:!1,error:$b.message,emails:[]}}}(m);e.success&&s(e.emails)}catch($b){console.error("Error loading emails by type:",$b)}finally{a(!1)}},disabled:i,className:"search-button primary",children:i?"Loading...":"\ud83d\udcca Load Emails"})]})]}),n.length>0?(0,Mv.jsxs)("div",{children:[(0,Mv.jsxs)("h3",{className:"search-results-title",children:["\ud83d\udccb ",m.replace("_"," ").toUpperCase()," Emails (",n.length,")"]}),(0,Mv.jsx)(kb,{emails:n,formatDate:v})]}):(0,Mv.jsxs)("div",{className:"empty-state",children:[(0,Mv.jsx)("div",{className:"empty-state-icon",children:"\ud83d\udce7"}),(0,Mv.jsxs)("h3",{className:"empty-state-title",children:["No ",m.replace("_"," ")," emails found"]}),(0,Mv.jsx)("p",{className:"empty-state-text",children:'Click "Load Emails" to fetch emails of this type.'})]})]})]})})},Cb=()=>{const{user:e}=zv(),[t,n]=(0,r.useState)("overview"),[s,i]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{if(!e)return i(!1),void o(!1);try{const t=await Ly(e.uid);i(t)}catch(t){console.error("Error checking admin status:",t),i(!1)}finally{o(!1)}})()},[e]);const l=e&&["admin@tuneparams.ai","abhinaykotla@gmail.com","admin@tuneparams.com"].includes(e.email),c=s||l;return e?a?(0,Mv.jsx)("div",{className:"admin-loading",children:(0,Mv.jsx)("h2",{children:"Checking admin permissions..."})}):c?(0,Mv.jsxs)("div",{className:"admin-container",children:[(0,Mv.jsx)("h1",{children:"Admin Dashboard"}),(0,Mv.jsxs)("div",{className:"admin-tabs",children:[(0,Mv.jsx)("button",{onClick:()=>n("overview"),className:"admin-tab-button ".concat("overview"===t?"active":""),children:"\ud83d\udcca Overview"}),(0,Mv.jsx)("button",{onClick:()=>n("payments"),className:"admin-tab-button ".concat("payments"===t?"active":""),children:"\ud83d\udcb3 Payments"}),(0,Mv.jsx)("button",{onClick:()=>n("enrollments"),className:"admin-tab-button ".concat("enrollments"===t?"active":""),children:"\ud83d\udcda Enrollments"}),(0,Mv.jsx)("button",{onClick:()=>n("emails"),className:"admin-tab-button ".concat("emails"===t?"active":""),children:"\ud83d\udce7 Email Tracking"}),(0,Mv.jsx)("button",{onClick:()=>n("roles"),className:"admin-tab-button ".concat("roles"===t?"active":""),children:"\ud83d\udc51 Role Management"})]}),(0,Mv.jsxs)("div",{className:"admin-content",children:["overview"===t&&(0,Mv.jsx)(xb,{}),"payments"===t&&(0,Mv.jsx)(Eb,{}),"enrollments"===t&&(0,Mv.jsx)(Nb,{}),"emails"===t&&(0,Mv.jsx)(_b,{}),"roles"===t&&(0,Mv.jsx)(wb,{})]})]}):(0,Mv.jsxs)("div",{className:"admin-access-denied",children:[(0,Mv.jsx)("h2",{children:"Access Denied"}),(0,Mv.jsx)("p",{children:"You don't have permission to access this page."}),l&&(0,Mv.jsxs)("div",{className:"admin-note",children:[(0,Mv.jsxs)("p",{children:[(0,Mv.jsx)("strong",{children:"Note:"})," You have email-based admin access but no database role."]}),(0,Mv.jsx)("p",{children:"Use the Role Manager below to set up proper database roles."})]})]}):(0,Mv.jsx)("div",{className:"admin-access-denied",children:(0,Mv.jsx)("h2",{children:"Please log in to access admin panel"})})},Tb="general",Ib="courses",Ab="ai_ml",jb="careers",Pb="projects",Rb="help",Db=e=>Math.round(e||0),Lb={[Tb]:"General Discussion",[Ib]:"Course Discussions",[Ab]:"AI & Machine Learning",[jb]:"Career Advice",[Pb]:"Project Showcase",[Rb]:"Help & Support"},Ob=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{let n;n=e?Gg(rg(Pv,"forum_threads"),Qg("category","==",e),Zg(t)):Gg(rg(Pv,"forum_threads"),Zg(t));const r=await hv(n),s=[];return r.forEach(e=>{var t,n,r;s.push(u(u({id:e.id},e.data()),{},{createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),updatedAt:null===(n=e.data().updatedAt)||void 0===n?void 0:n.toDate(),lastReplyAt:null===(r=e.data().lastReplyAt)||void 0===r?void 0:r.toDate()}))}),s.sort((e,t)=>e.createdAt?t.createdAt?t.createdAt.getTime()-e.createdAt.getTime():-1:1),{success:!0,threads:s,lastDoc:r.docs[r.docs.length-1],hasMore:r.docs.length===t}}catch($b){return console.error("Error getting threads: ",$b),{success:!1,error:$b.message}}},Mb=async e=>{try{const t=Gg(rg(Pv,"forum_replies"),Qg("threadId","==",e)),n=(await hv(t)).docs.map(e=>pv(e.ref));return await Promise.all(n),await pv(sg(Pv,"forum_threads",e)),{success:!0}}catch($b){return console.error("Error deleting thread: ",$b),{success:!1,error:$b.message}}},Fb=async(e,t)=>{try{const n=sg(Pv,"forum_threads",e),r=await uv(n);if(!r.exists())return{success:!1,error:"Thread not found"};const s=r.data().likedBy||[];if(s.includes(t)){const e=s.filter(e=>e!==t);return await mv(n,{likedBy:e}),{success:!0,liked:!1,likeCount:e.length}}{const e=[...s,t];return await mv(n,{likedBy:e}),{success:!0,liked:!0,likeCount:e.length}}}catch($b){return console.error("Error liking thread: ",$b),{success:!1,error:$b.message}}},Ub=e=>{if(!e)return{display:"Unknown",tooltip:"Unknown"};const t=(e=>{if(!e)return"Unknown";const t=new Date-e,n=Math.floor(t/1e3),r=Math.floor(n/60),s=Math.floor(r/60),i=Math.floor(s/24),a=Math.floor(i/7),o=Math.floor(i/30),l=Math.floor(i/365);return n<60?n<=1?"Just now":"".concat(n," seconds ago"):r<60?1===r?"1 minute ago":"".concat(r," minutes ago"):s<24?1===s?"1 hour ago":"".concat(s," hours ago"):i<7?1===i?"1 day ago":"".concat(i," days ago"):a<4?1===a?"1 week ago":"".concat(a," weeks ago"):o<12?1===o?"1 month ago":"".concat(o," months ago"):1===l?"1 year ago":"".concat(l," years ago")})(e);return{display:t,tooltip:e.toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}},Vb=e=>{var t,n,s,i;let{thread:a,onClick:o,onDelete:l,onLike:c}=e;const{user:u}=zv(),{userRole:d}=Oy(),[h,f]=(0,r.useState)(!1),[m,p]=(0,r.useState)((null===(t=a.likedBy)||void 0===t?void 0:t.length)||0),[g,v]=(0,r.useState)(!!u&&(null===(n=a.likedBy)||void 0===n?void 0:n.includes(u.uid))),y=Ub(a.createdAt),b=Ub(a.lastReplyAt),w=u&&(u.uid===a.authorId||"admin"===(null===d||void 0===d?void 0:d.role));return(0,Mv.jsxs)("div",{className:"thread-card",onClick:e=>{e.target.closest(".delete-btn")||e.target.closest(".like-btn")||o&&o()},children:[(0,Mv.jsxs)("div",{className:"thread-header",children:[(0,Mv.jsxs)("div",{className:"thread-title-row",children:[(0,Mv.jsxs)("h3",{className:"thread-title",children:[a.isPinned&&(0,Mv.jsx)("span",{className:"pin-icon",title:"Pinned",children:"\ud83d\udccc"}),a.title]}),(0,Mv.jsx)("span",{className:"thread-category",style:{backgroundColor:"var(--category-".concat(a.category,"-color)")},children:Lb[a.category]||"General"})]}),(0,Mv.jsxs)("p",{className:"thread-preview",children:[(x=a.content,(new DOMParser).parseFromString(x,"text/html").body.textContent||"").substring(0,150),"..."]})]}),(0,Mv.jsxs)("div",{className:"thread-footer",children:[(0,Mv.jsxs)("div",{className:"thread-author",children:[(0,Mv.jsx)("div",{className:"author-avatar",children:a.authorAvatar?(0,Mv.jsx)("img",{src:a.authorAvatar,alt:a.authorName}):(0,Mv.jsx)("div",{className:"default-avatar",children:null===(s=a.authorName)||void 0===s||null===(i=s.charAt(0))||void 0===i?void 0:i.toUpperCase()})}),(0,Mv.jsxs)("div",{className:"author-info",children:[(0,Mv.jsx)("span",{className:"author-name",children:a.authorName}),(0,Mv.jsxs)("span",{className:"post-date",title:y.tooltip,children:["posted ",y.display]})]})]}),(0,Mv.jsxs)("div",{className:"thread-stats",children:[(0,Mv.jsxs)("span",{className:"stat-item",title:"Replies",children:[(0,Mv.jsx)("span",{className:"stat-icon",children:"\ud83d\udcac"}),a.replyCount]}),(0,Mv.jsxs)("span",{className:"stat-item",title:"Views",children:[(0,Mv.jsx)("span",{className:"stat-icon",children:"\ud83d\udc40"}),Db(a.viewCount)]}),(0,Mv.jsxs)("button",{className:"like-btn ".concat(g?"liked":""),onClick:async e=>{if(e.stopPropagation(),u){if(!h){f(!0);try{const e=await Fb(a.id,u.uid);e.success?(v(e.liked),p(e.likeCount),c&&c(a.id,e.liked,e.likeCount)):console.error("Failed to like thread:",e.error)}catch($b){console.error("Error liking thread:",$b)}finally{f(!1)}}}else alert("Please log in to like threads")},disabled:h,title:g?"Unlike":"Like",children:[(0,Mv.jsx)("span",{className:"like-icon",children:"\ud83d\udc4d"}),(0,Mv.jsx)("span",{className:"like-count",children:m})]}),a.lastReplyAt&&a.lastReplyAt.getTime()!==a.createdAt.getTime()&&(0,Mv.jsxs)("span",{className:"stat-item",title:"Last reply: ".concat(b.tooltip),children:[(0,Mv.jsx)("span",{className:"stat-icon",children:"\u23f1\ufe0f"}),b.display]}),w&&(0,Mv.jsx)("button",{className:"delete-btn thread-stats-delete",onClick:async e=>{e.stopPropagation(),window.confirm("Are you sure you want to delete this thread? This action cannot be undone.")&&l&&await l(a.id)},title:"Delete thread",children:"\ud83d\uddd1\ufe0f"})]})]})]});var x},zb=e=>{let{onClose:t,onThreadCreated:n}=e;const{user:s}=zv(),[i,a]=(0,r.useState)({title:"",content:"",category:Tb,tags:""}),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)({}),h=e=>{const{name:t,value:n}=e.target;a(e=>u(u({},e),{},{[t]:n})),c[t]&&d(e=>u(u({},e),{},{[t]:""}))};return(0,Mv.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,Mv.jsxs)("div",{className:"modal-content create-thread-modal",onClick:e=>e.stopPropagation(),children:[(0,Mv.jsxs)("div",{className:"modal-header",children:[(0,Mv.jsxs)("div",{className:"modal-header-content",children:[(0,Mv.jsx)("h2",{children:"Start a New Discussion"}),(0,Mv.jsx)("p",{className:"modal-subtitle",children:"Share your thoughts and connect with the community"})]}),(0,Mv.jsx)("button",{onClick:t,className:"close-btn","aria-label":"Close modal",children:"\xd7"})]}),(0,Mv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return i.title.trim()?i.title.length<5?e.title="Title must be at least 5 characters long":i.title.length>200&&(e.title="Title must be less than 200 characters long"):e.title="Title is required",i.content.trim()?i.content.length<10?e.content="Content must be at least 10 characters long":i.content.length>5e3&&(e.content="Content must be less than 5000 characters long"):e.content="Content is required",d(e),0===Object.keys(e).length})()){l(!0);try{const e=u(u({},i),{},{tags:i.tags.split(",").map(e=>e.trim()).filter(Boolean),authorId:s.uid,authorName:s.name||s.displayName||"Anonymous",authorAvatar:s.photoURL||null}),t=await(async e=>{try{return{success:!0,id:(await gv(rg(Pv,"forum_threads"),u(u({},e),{},{createdAt:wv(),updatedAt:wv(),viewCount:0,replyCount:0,isPinned:!1,isLocked:!1,likedBy:[],reportedBy:[],lastReplyAt:wv()}))).id}}catch($b){return console.error("Error creating thread: ",$b),{success:!1,error:$b.message}}})(e);t.success?n():d({form:t.error})}catch($b){d({form:"An unexpected error occurred."})}finally{l(!1)}}},className:"modal-form",children:[(0,Mv.jsx)("div",{className:"form-row",children:(0,Mv.jsxs)("div",{className:"form-group form-group-title",children:[(0,Mv.jsxs)("label",{htmlFor:"title",children:[(0,Mv.jsx)("span",{className:"label-text",children:"Discussion Title"}),(0,Mv.jsx)("span",{className:"label-required",children:"*"})]}),(0,Mv.jsx)("input",{type:"text",id:"title",name:"title",value:i.title,onChange:h,placeholder:"Enter a clear and descriptive title...",className:c.title?"input-error":"",maxLength:"200",required:!0}),(0,Mv.jsxs)("div",{className:"input-helper-row",children:[(0,Mv.jsx)("small",{className:"input-helper",children:"A good title helps others understand your discussion"}),(0,Mv.jsxs)("small",{className:"char-counter",children:[i.title.length,"/200"]})]}),c.title&&(0,Mv.jsx)("p",{className:"error-text",children:c.title})]})}),(0,Mv.jsx)("div",{className:"form-row",children:(0,Mv.jsxs)("div",{className:"form-group form-group-category",children:[(0,Mv.jsxs)("label",{htmlFor:"category",children:[(0,Mv.jsx)("span",{className:"label-text",children:"Category"}),(0,Mv.jsx)("span",{className:"label-required",children:"*"})]}),(0,Mv.jsx)("select",{id:"category",name:"category",value:i.category,onChange:h,className:"select-styled",children:Object.entries(Lb).map(e=>{let[t,n]=e;return(0,Mv.jsx)("option",{value:t,children:n},t)})})]})}),(0,Mv.jsx)("div",{className:"form-row",children:(0,Mv.jsxs)("div",{className:"form-group form-group-content",children:[(0,Mv.jsxs)("label",{htmlFor:"content",children:[(0,Mv.jsx)("span",{className:"label-text",children:"Content"}),(0,Mv.jsx)("span",{className:"label-required",children:"*"})]}),(0,Mv.jsxs)("div",{className:"content-input-wrapper",children:[(0,Mv.jsx)("textarea",{id:"content",name:"content",value:i.content,onChange:h,placeholder:"Share your thoughts, questions, or ideas with the community. Be descriptive and helpful to get the best responses...",rows:"10",className:c.content?"input-error":"",maxLength:"5000",required:!0}),(0,Mv.jsx)("div",{className:"content-helper",children:(0,Mv.jsxs)("div",{className:"helper-row",children:[(0,Mv.jsx)("small",{children:"Tip: Use clear formatting and provide context for better engagement"}),(0,Mv.jsxs)("small",{className:"char-counter",children:[i.content.length,"/5000 characters"]})]})})]}),c.content&&(0,Mv.jsx)("p",{className:"error-text",children:c.content})]})}),(0,Mv.jsx)("div",{className:"form-row",children:(0,Mv.jsxs)("div",{className:"form-group form-group-tags",children:[(0,Mv.jsxs)("label",{htmlFor:"tags",children:[(0,Mv.jsx)("span",{className:"label-text",children:"Tags"}),(0,Mv.jsx)("span",{className:"label-optional",children:"(optional)"})]}),(0,Mv.jsx)("input",{type:"text",id:"tags",name:"tags",value:i.tags,onChange:h,placeholder:"e.g., python, machine-learning, career-advice",className:"tags-input"}),(0,Mv.jsx)("small",{className:"input-helper",children:"Separate tags with commas to help others find your discussion"})]})}),c.form&&(0,Mv.jsxs)("div",{className:"form-error-container",children:[(0,Mv.jsx)("div",{className:"form-error-icon",children:"\u26a0\ufe0f"}),(0,Mv.jsx)("p",{className:"error-text form-error",children:c.form})]}),(0,Mv.jsxs)("div",{className:"form-actions",children:[(0,Mv.jsx)("button",{type:"button",className:"btn-secondary",onClick:t,children:"Cancel"}),(0,Mv.jsx)("button",{type:"submit",className:"btn-primary",disabled:o,children:o?(0,Mv.jsxs)(Mv.Fragment,{children:[(0,Mv.jsx)("span",{className:"loading-spinner-small"}),"Posting..."]}):"Post Discussion"})]})]})]})})};class Bb extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Forums Error:",e,t)}render(){var e;return this.state.hasError?(0,Mv.jsx)("div",{className:"forum-container",children:(0,Mv.jsxs)("div",{className:"error-state",children:[(0,Mv.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,Mv.jsx)("h3",{children:"Something went wrong"}),(0,Mv.jsx)("p",{children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,Mv.jsx)("button",{className:"create-thread-btn",onClick:()=>this.setState({hasError:!1,error:null}),children:"Try Again"})]})}):this.props.children}}const qb=()=>{const{user:e}=zv(),t=me(),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!0),[g,v]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)(null),E=(0,r.useRef)(null);(0,r.useEffect)(()=>{E.current=g},[g]);const S=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a(!0),x(null);try{const t=e?null:E.current,n=await Ob(o,10,t);n.success?(s(t=>e?n.threads:[...t,...n.threads]),p(n.hasMore),v(n.lastDoc)):(console.error("Failed to load threads:",n.error),x(n.error),s([]),p(!1))}catch(w){console.error("Error loading threads:",w),x(w.message),s([]),p(!1)}finally{a(!1)}},[o]);(0,r.useEffect)(()=>{document.title="Community Forums - TuneParams.ai";const e=document.querySelector('link[rel="icon"]'),t=Date.now();if(e)e.href="/favicon.ico?v=".concat(t);else{const e=document.createElement("link");e.rel="icon",e.href="/favicon.ico?v=".concat(t),e.type="image/x-icon",document.head.appendChild(e)}let n=document.querySelector('link[rel="shortcut icon"]');n?n.href="/favicon.ico?v=".concat(t):(n=document.createElement("link"),n.rel="shortcut icon",n.href="/favicon.ico?v=".concat(t),n.type="image/x-icon",document.head.appendChild(n))},[]),(0,r.useEffect)(()=>{b(!1),v(null),E.current=null;(async()=>{a(!0),x(null);try{const e=await Ob(o,10,null);e.success?(s(e.threads),p(e.hasMore),v(e.lastDoc)):(console.error("Failed to load threads:",e.error),x(e.error),s([]),p(!1))}catch(w){console.error("Error loading threads:",w),x(w.message),s([]),p(!1)}finally{a(!1)}})()},[o]);const N=async e=>{if(e&&(e.preventDefault(),e.stopPropagation()),!c||!c.trim())return b(!1),d(""),void S(!0);a(!0),b(!0),x(null);try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let n;n=t?Gg(rg(Pv,"forum_threads"),Qg("category","==",t)):Gg(rg(Pv,"forum_threads"));const r=await hv(n),s=[],i=e.toLowerCase();return r.forEach(e=>{const t=e.data();var n,r,a;(t.title.toLowerCase().includes(i)||t.content.toLowerCase().includes(i))&&s.push(u(u({id:e.id},t),{},{createdAt:null===(n=t.createdAt)||void 0===n?void 0:n.toDate(),updatedAt:null===(r=t.updatedAt)||void 0===r?void 0:r.toDate(),lastReplyAt:null===(a=t.lastReplyAt)||void 0===a?void 0:a.toDate()}))}),s.sort((e,t)=>e.createdAt?t.createdAt?t.createdAt.getTime()-e.createdAt.getTime():-1:1),{success:!0,threads:s.slice(0,20)}}catch(w){return console.error("Error searching threads: ",w),{success:!1,error:w.message}}}(c.trim(),o);e.success?(s(e.threads),p(!1)):(console.error("Failed to search threads:",e.error),x(e.error||"Search failed"))}catch(w){console.error("Error searching threads:",w),x(w.message||"An error occurred during search")}finally{a(!1)}},k=()=>{e?f(!0):t("/login")},_=async e=>{a(!0);try{const t=await Mb(e);t.success?s(t=>t.filter(t=>t.id!==e)):(console.error("Failed to delete thread:",t.error),alert("Failed to delete thread. Please try again."))}catch(w){console.error("Error deleting thread:",w),alert("An error occurred while deleting the thread.")}finally{a(!1)}},C=(t,n,r)=>{s(r=>r.map(r=>r.id===t?u(u({},r),{},{likedBy:n?[...r.likedBy||[],e.uid]:(r.likedBy||[]).filter(t=>t!==e.uid)}):r))};return(0,Mv.jsxs)("div",{className:"forum-container",children:[(0,Mv.jsxs)("div",{className:"forum-header",children:[(0,Mv.jsxs)("div",{className:"forum-title",children:[(0,Mv.jsx)("h1",{children:"Community Forums"}),(0,Mv.jsx)("p",{children:"Join the conversation and connect with fellow learners"})]}),(0,Mv.jsxs)("div",{className:"forum-header-actions",children:[(0,Mv.jsxs)("div",{className:"search-form-compact",children:[(0,Mv.jsx)("input",{type:"text",placeholder:"Search discussions...",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),N())},className:"search-input-compact"}),(0,Mv.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),N()},className:"search-btn-compact",children:"\ud83d\udd0d"}),c&&(0,Mv.jsx)("button",{type:"button",onClick:()=>{d(""),b(!1),S(!0)},className:"search-btn-compact clear-btn",children:"\u2715"})]}),(0,Mv.jsx)("button",{className:"create-thread-btn",onClick:k,children:e?"Start New Discussion":"Login to Post"})]})]}),(0,Mv.jsx)("div",{className:"forum-controls",children:(0,Mv.jsxs)("div",{className:"category-filter",children:[(0,Mv.jsx)("button",{className:"category-btn ".concat(null===o?"active":""),onClick:()=>l(null),children:"All Categories"}),Object.entries(Lb).map(e=>{let[t,n]=e;return(0,Mv.jsx)("button",{className:"category-btn ".concat(o===t?"active":""),onClick:()=>l(t),children:n},t)})]})}),(0,Mv.jsx)("div",{className:"forum-content",children:w?(0,Mv.jsxs)("div",{className:"error-state",children:[(0,Mv.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,Mv.jsx)("h3",{children:"Error Loading Forum"}),(0,Mv.jsx)("p",{children:w}),(0,Mv.jsx)("button",{className:"create-thread-btn",onClick:()=>{x(null),S(!0)},children:"Try Again"})]}):i&&0===n.length?(0,Mv.jsxs)("div",{className:"loading-state",children:[(0,Mv.jsx)("div",{className:"loading-spinner"}),(0,Mv.jsx)("p",{children:"Loading discussions..."})]}):0===n.length?(0,Mv.jsxs)("div",{className:"empty-state",children:[(0,Mv.jsx)("div",{className:"empty-icon",children:"\ud83d\udcac"}),(0,Mv.jsx)("h3",{children:"No discussions found"}),(0,Mv.jsx)("p",{children:y?"Try a different search term.":"Be the first to start a discussion!"}),!y&&(0,Mv.jsx)("button",{className:"create-thread-btn",onClick:k,children:e?"Start First Discussion":"Login to Post"})]}):(0,Mv.jsxs)(Mv.Fragment,{children:[(0,Mv.jsx)("div",{className:"threads-list",children:n.map(e=>(0,Mv.jsx)(Vb,{thread:e,onClick:()=>t("/forums/thread/".concat(e.id)),onDelete:_,onLike:C},e.id))}),m&&!y&&(0,Mv.jsx)("button",{className:"load-more-btn",onClick:()=>S(),disabled:i,children:i?"Loading...":"Load More"})]})}),h&&(0,Mv.jsx)(zb,{onClose:()=>f(!1),onThreadCreated:()=>{f(!1),S(!0)}})]})},Hb=()=>(0,Mv.jsx)(Bb,{children:(0,Mv.jsx)(qb,{})}),Wb=e=>{var t,n,s,i;let{reply:a,onDelete:o,onLike:l}=e;const{user:c}=zv(),{userRole:u}=Oy(),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)((null===(t=a.likedBy)||void 0===t?void 0:t.length)||0),[p,g]=(0,r.useState)(!!c&&(null===(n=a.likedBy)||void 0===n?void 0:n.includes(c.uid))),v=Ub(a.createdAt),y=c&&(c.uid===a.authorId||"admin"===(null===u||void 0===u?void 0:u.role));return(0,Mv.jsxs)("div",{className:"reply-card",children:[(0,Mv.jsx)("div",{className:"reply-header",children:(0,Mv.jsxs)("div",{className:"reply-author",children:[(0,Mv.jsx)("div",{className:"author-avatar-reply",children:a.authorAvatar?(0,Mv.jsx)("img",{src:a.authorAvatar,alt:a.authorName}):(0,Mv.jsx)("div",{className:"default-avatar-reply",children:(null===(s=a.authorName)||void 0===s||null===(i=s.charAt(0))||void 0===i?void 0:i.toUpperCase())||"A"})}),(0,Mv.jsxs)("div",{className:"author-info-reply",children:[(0,Mv.jsx)("span",{className:"author-name-reply",children:a.authorName||"Anonymous"}),(0,Mv.jsx)("span",{className:"post-date-reply",title:v.tooltip,children:v.display})]})]})}),(0,Mv.jsx)("div",{className:"reply-content",dangerouslySetInnerHTML:{__html:a.content}}),(0,Mv.jsxs)("div",{className:"reply-footer",children:[(0,Mv.jsxs)("button",{className:"like-btn reply-like-btn ".concat(p?"liked":""),onClick:async e=>{if(e.stopPropagation(),c){if(!d){h(!0);try{const e=await(async(e,t)=>{try{const n=sg(Pv,"forum_replies",e),r=await uv(n);if(!r.exists())return{success:!1,error:"Reply not found"};const s=r.data().likedBy||[];if(s.includes(t)){const e=s.filter(e=>e!==t);return await mv(n,{likedBy:e}),{success:!0,liked:!1,likeCount:e.length}}{const e=[...s,t];return await mv(n,{likedBy:e}),{success:!0,liked:!0,likeCount:e.length}}}catch($b){return console.error("Error liking reply: ",$b),{success:!1,error:$b.message}}})(a.id,c.uid);e.success?(g(e.liked),m(e.likeCount),l&&l(a.id,e.liked,e.likeCount)):console.error("Failed to like reply:",e.error)}catch($b){console.error("Error liking reply:",$b)}finally{h(!1)}}}else alert("Please log in to like replies")},disabled:d,title:p?"Unlike":"Like",children:[(0,Mv.jsx)("span",{className:"like-icon",children:"\ud83d\udc4d"}),(0,Mv.jsx)("span",{className:"like-count",children:f})]}),y&&(0,Mv.jsx)("button",{className:"delete-btn reply-delete-btn",onClick:async e=>{e.stopPropagation(),window.confirm("Are you sure you want to delete this reply? This action cannot be undone.")&&o&&await o(a.id)},title:"Delete reply",children:"\ud83d\uddd1\ufe0f"})]})]})},Gb=e=>{let{threadId:t,onReplyPosted:n}=e;const{user:s}=zv(),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null);return(0,Mv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.trim()){l(!0),d(null);try{const e={threadId:t,content:i,authorId:s.uid,authorName:s.name||s.displayName||"Anonymous",authorAvatar:s.photoURL||null},r=await(async e=>{try{const t=await gv(rg(Pv,"forum_replies"),u(u({},e),{},{createdAt:wv(),updatedAt:wv(),likedBy:[],reportedBy:[]})),n=sg(Pv,"forum_threads",e.threadId);return await mv(n,{replyCount:xv(1),lastReplyAt:wv(),lastReplyBy:e.authorName}),{success:!0,id:t.id}}catch(c){return console.error("Error creating reply: ",c),{success:!1,error:c.message}}})(e);r.success?(a(""),n()):d(r.error)}catch(r){d("Failed to post reply.")}finally{l(!1)}}else d("Reply cannot be empty.")},className:"reply-form",children:[(0,Mv.jsx)("h3",{children:"Leave a Reply"}),(0,Mv.jsx)("textarea",{value:i,onChange:e=>a(e.target.value),placeholder:"Write your reply... You can use basic HTML for formatting.",rows:"5",required:!0}),c&&(0,Mv.jsx)("p",{className:"error-text",children:c}),(0,Mv.jsx)("button",{type:"submit",className:"btn-primary",disabled:o,children:o?"Posting...":"Post Reply"})]})},Kb=()=>{var e,t,n;const{threadId:s}=pe(),{user:i}=zv(),{userRole:a}=Oy(),o=me(),[l,c]=(0,r.useState)(null),[d,h]=(0,r.useState)([]),[f,m]=(0,r.useState)(!0),[p,g]=(0,r.useState)(null),v=(0,r.useCallback)(async()=>{m(!0),g(null);try{const e=await(async e=>{try{const i=sg(Pv,"forum_threads",e),a=await uv(i);if(a.exists()){var t,n,r;try{await mv(i,{viewCount:xv(.5)})}catch(s){console.error("Error incrementing view count:",s)}return{success:!0,thread:u(u({id:a.id},a.data()),{},{createdAt:null===(t=a.data().createdAt)||void 0===t?void 0:t.toDate(),updatedAt:null===(n=a.data().updatedAt)||void 0===n?void 0:n.toDate(),lastReplyAt:null===(r=a.data().lastReplyAt)||void 0===r?void 0:r.toDate()})}}return{success:!1,error:"Thread not found"}}catch(p){return console.error("Error getting thread: ",p),{success:!1,error:p.message}}})(s);if(e.success){c(e.thread);const t=await(async e=>{try{const t=Gg(rg(Pv,"forum_replies"),Qg("threadId","==",e)),n=await hv(t),r=[];return n.forEach(e=>{var t,n;r.push(u(u({id:e.id},e.data()),{},{createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),updatedAt:null===(n=e.data().updatedAt)||void 0===n?void 0:n.toDate()}))}),r.sort((e,t)=>e.createdAt?t.createdAt?e.createdAt.getTime()-t.createdAt.getTime():-1:1),{success:!0,replies:r}}catch(p){return console.error("Error getting replies: ",p),{success:!1,error:p.message}}})(s);t.success?h(t.replies):(console.error("Failed to load replies:",t.error),g("Failed to load replies: ".concat(t.error)),h([]))}else console.error("Failed to load thread:",e.error),g("Failed to load thread: ".concat(e.error))}catch(e){console.error("Error in loadThreadAndReplies:",e),g("Failed to load thread data.")}finally{m(!1)}},[s]);(0,r.useEffect)(()=>{v()},[v]);const y=async e=>{try{const t=await(async(e,t)=>{try{await pv(sg(Pv,"forum_replies",e));const n=sg(Pv,"forum_threads",t);return await mv(n,{replyCount:xv(-1)}),{success:!0}}catch(p){return console.error("Error deleting reply: ",p),{success:!1,error:p.message}}})(e,s);t.success?(h(t=>t.filter(t=>t.id!==e)),c(e=>u(u({},e),{},{replyCount:Math.max(0,e.replyCount-1)}))):(console.error("Failed to delete reply:",t.error),alert("Failed to delete reply. Please try again."))}catch(p){console.error("Error deleting reply:",p),alert("An error occurred while deleting the reply.")}},b=(e,t,n)=>{h(n=>n.map(n=>n.id===e?u(u({},n),{},{likedBy:t?[...n.likedBy||[],i.uid]:(n.likedBy||[]).filter(e=>e!==i.uid)}):n))};if(f)return(0,Mv.jsxs)("div",{className:"loading-state-detail",children:[(0,Mv.jsx)("div",{className:"loading-spinner"}),(0,Mv.jsx)("p",{children:"Loading discussion..."})]});if(p)return(0,Mv.jsxs)("div",{className:"error-state-detail",children:[(0,Mv.jsx)("h3",{children:"Error"}),(0,Mv.jsx)("p",{children:p}),(0,Mv.jsx)(vt,{to:"/forums",className:"btn-primary",children:"Back to Forums"})]});if(!l)return null;const w=Ub(l.createdAt),x=i&&(i.uid===l.authorId||"admin"===(null===a||void 0===a?void 0:a.role));return(0,Mv.jsxs)("div",{className:"thread-detail-container",children:[(0,Mv.jsxs)("div",{className:"thread-detail-header",children:[(0,Mv.jsxs)("div",{className:"thread-header-top",children:[(0,Mv.jsx)(vt,{to:"/forums",className:"back-link",children:"\u2190 Back to Forums"}),x&&(0,Mv.jsx)("button",{className:"delete-btn thread-delete-btn",onClick:async()=>{if(window.confirm("Are you sure you want to delete this thread? This action cannot be undone."))try{const e=await Mb(s);e.success?o("/forums"):(console.error("Failed to delete thread:",e.error),alert("Failed to delete thread. Please try again."))}catch(p){console.error("Error deleting thread:",p),alert("An error occurred while deleting the thread.")}},title:"Delete thread",children:"\ud83d\uddd1\ufe0f Delete Thread"})]}),(0,Mv.jsx)("h1",{children:l.title}),(0,Mv.jsxs)("div",{className:"thread-meta",children:[(0,Mv.jsxs)("div",{className:"author-info-detail",children:[(0,Mv.jsx)("img",{src:l.authorAvatar||"/default-avatar.png",alt:l.authorName,className:"author-avatar-detail"}),(0,Mv.jsxs)("span",{children:["By ",l.authorName]})]}),(0,Mv.jsx)("span",{children:"\u2022"}),(0,Mv.jsx)("span",{title:w.tooltip,children:w.display})]})]}),(0,Mv.jsx)("div",{className:"thread-content-detail",dangerouslySetInnerHTML:{__html:l.content}}),(0,Mv.jsx)("div",{className:"thread-actions",children:(0,Mv.jsxs)("button",{className:"like-btn thread-like-btn ".concat(null!==(e=l.likedBy)&&void 0!==e&&e.includes(null===i||void 0===i?void 0:i.uid)?"liked":""),onClick:async()=>{if(i)try{const e=await Fb(s,i.uid);e.success?c(t=>u(u({},t),{},{likedBy:e.liked?[...t.likedBy||[],i.uid]:(t.likedBy||[]).filter(e=>e!==i.uid)})):console.error("Failed to like thread:",e.error)}catch(p){console.error("Error liking thread:",p)}else alert("Please log in to like threads")},title:null!==(t=l.likedBy)&&void 0!==t&&t.includes(null===i||void 0===i?void 0:i.uid)?"Unlike":"Like",children:[(0,Mv.jsx)("span",{className:"like-icon",children:"\ud83d\udc4d"}),(0,Mv.jsx)("span",{className:"like-count",children:(null===(n=l.likedBy)||void 0===n?void 0:n.length)||0})]})}),(0,Mv.jsxs)("div",{className:"replies-section",children:[(0,Mv.jsxs)("h2",{children:[d.length," ",1===d.length?"Reply":"Replies"]}),(0,Mv.jsx)("div",{className:"replies-list",children:d.map(e=>(0,Mv.jsx)(Wb,{reply:e,onDelete:y,onLike:b},e.id))})]}),(0,Mv.jsx)("div",{className:"reply-form-section",children:i?(0,Mv.jsx)(Gb,{threadId:s,onReplyPosted:()=>{v()}}):(0,Mv.jsxs)("div",{className:"login-prompt",children:[(0,Mv.jsx)("p",{children:"You must be logged in to reply."}),(0,Mv.jsx)(vt,{to:"/login",className:"btn-primary",children:"Login to Reply"})]})})]})};const Qb=function(){return(0,Mv.jsx)(Uv,{children:(0,Mv.jsx)(pt,{children:(0,Mv.jsxs)("div",{className:"app-container",children:[(0,Mv.jsx)(Bv,{}),(0,Mv.jsx)("main",{children:(0,Mv.jsxs)(Re,{children:[(0,Mv.jsx)(je,{path:"/",element:(0,Mv.jsx)(Uy,{})}),(0,Mv.jsx)(je,{path:"/courses",element:(0,Mv.jsx)(eb,{})}),(0,Mv.jsx)(je,{path:"/courses/:courseId",element:(0,Mv.jsx)(hb,{})}),(0,Mv.jsx)(je,{path:"/dashboard",element:(0,Mv.jsx)(Hv,{children:(0,Mv.jsx)(fb,{})})}),(0,Mv.jsx)(je,{path:"/contact",element:(0,Mv.jsx)(mb,{})}),(0,Mv.jsx)(je,{path:"/about",element:(0,Mv.jsx)(pb,{})}),(0,Mv.jsx)(je,{path:"/about-us",element:(0,Mv.jsx)(pb,{})}),(0,Mv.jsx)(je,{path:"/forums",element:(0,Mv.jsx)(Hb,{})}),(0,Mv.jsx)(je,{path:"/forums/thread/:threadId",element:(0,Mv.jsx)(Kb,{})}),(0,Mv.jsx)(je,{path:"/login",element:(0,Mv.jsx)(gb,{})}),(0,Mv.jsx)(je,{path:"/register",element:(0,Mv.jsx)(vb,{})}),(0,Mv.jsx)(je,{path:"/verify-email",element:(0,Mv.jsx)(yb,{})}),(0,Mv.jsx)(je,{path:"/forgot-password",element:(0,Mv.jsx)(bb,{})}),(0,Mv.jsx)(je,{path:"/admin/dashboard",element:(0,Mv.jsx)(Hv,{children:(0,Mv.jsx)(Cb,{})})}),(0,Mv.jsx)(je,{path:"*",element:(0,Mv.jsx)(Ae,{to:"/",replace:!0})})]})}),(0,Mv.jsx)(qv,{})]})})})};s.createRoot(document.getElementById("root")).render((0,Mv.jsx)(r.StrictMode,{children:(0,Mv.jsx)(Vv,{children:(0,Mv.jsx)(Qb,{})})}))})();
//# sourceMappingURL=main.610a9970.js.map